import{$ as _,$a as s,Bb as S,Ea as w,Ia as g,Nb as R,Ob as k,Pb as T,Qb as E,Rb as Y,Sb as V,Ta as l,Ua as t,Va as n,Wa as d,Xa as P,Ya as M,Za as h,Zb as D,_ as u,_a as f,gb as a,hb as m,ib as b,qb as I,sb as x,tb as v,ua as r,ub as O,ya as y}from"./chunk-MSHVY7YR.js";var j=(i,o,e)=>({"bi bi-check-circle":i,"bi bi-exclamation-triangle":o,"bi bi-x-circle":e});function $(i,o){i&1&&(t(0,"div",11)(1,"div",12),d(2,"div",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div",17),n()())}function N(i,o){if(i&1&&(t(0,"div",18),d(1,"i",19),a(2),n()),i&2){let e=s();r(2),b(" ",e.error," ")}}function B(i,o){i&1&&(t(0,"div",23),d(1,"i",24),t(2,"h5"),a(3,"No rides found"),n(),t(4,"p"),a(5,"You haven't created any rides yet. Start by creating your first ride!"),n(),t(6,"button",25),d(7,"i",6),a(8," Create Your First Ride "),n()())}function z(i,o){if(i&1&&(t(0,"div",43)(1,"div",30),d(2,"i",55),t(3,"div")(4,"small",45),a(5,"Fare"),n(),t(6,"span",39),a(7),n()()()()),i&2){let e=s().$implicit;r(7),m(e.fare)}}function A(i,o){if(i&1&&(t(0,"div",43)(1,"div",30),d(2,"i",56),t(3,"div")(4,"small",45),a(5,"Status"),n(),t(6,"span",39),a(7),x(8,"titlecase"),n()()()()),i&2){let e=s().$implicit;r(7),m(v(8,1,e.status))}}function H(i,o){if(i&1&&(t(0,"div",57),d(1,"i",58),t(2,"small",33),a(3),n()()),i&2){let e=s().$implicit;r(3),m(e.description)}}function L(i,o){i&1&&d(0,"span",59)}function U(i,o){i&1&&d(0,"i",60)}function q(i,o){if(i&1){let e=h();t(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30),d(5,"i",31),t(6,"div")(7,"h6",32),a(8),x(9,"titlecase"),n(),t(10,"small",33),a(11),n()()(),t(12,"span",34),a(13,"Active"),n()()(),t(14,"div",35)(15,"div",36)(16,"div",37),d(17,"div",38),t(18,"span",39),a(19),n()(),d(20,"div",40),t(21,"div",30),d(22,"div",41),t(23,"span",39),a(24),n()()(),t(25,"div",42)(26,"div",43)(27,"div",30),d(28,"i",44),t(29,"div")(30,"small",45),a(31,"Date"),n(),t(32,"span",39),a(33),x(34,"date"),n()()()(),t(35,"div",43)(36,"div",30),d(37,"i",46),t(38,"div")(39,"small",45),a(40,"Luggage Space"),n(),t(41,"span",39),a(42),x(43,"titlecase"),n()()()()(),t(44,"div",42),g(45,z,8,1,"div",47)(46,A,9,3,"div",47),n(),g(47,H,4,1,"div",48),n(),t(48,"div",49)(49,"div",4)(50,"button",50),f("click",function(){let p=u(e).$implicit,C=s(2);return _(C.editRide(p))}),d(51,"i",51),a(52," Edit "),n(),t(53,"button",52),f("click",function(){let p=u(e).$implicit,C=s(2);return _(C.cancelRide(p))}),g(54,L,1,0,"span",53)(55,U,1,0,"i",54),a(56),n()()()()()}if(i&2){let e=o.$implicit,c=s(2);r(8),m(v(9,13,e.vehicleType)),r(3),b("Ride ID: ",(e.id==null?null:e.id.substring(0,8))||"N/A"),r(8),m(e.from),r(5),m(e.to),r(9),m(O(34,15,e.date,"mediumDate")),r(9),m(v(43,18,e.luggageSpace)),r(3),l("ngIf",e.fare),r(),l("ngIf",e.status),r(),l("ngIf",e.description),r(6),l("disabled",c.cancelingRideId===e.id),r(),l("ngIf",c.cancelingRideId===e.id),r(),l("ngIf",c.cancelingRideId!==e.id),r(),b(" ",c.cancelingRideId===e.id?"Canceling...":"Cancel"," ")}}function G(i,o){if(i&1&&(P(0),g(1,B,9,0,"div",20),t(2,"div",21),g(3,q,57,20,"div",22),n(),M()),i&2){let e=s();r(),l("ngIf",e.rides.length===0),r(2),l("ngForOf",e.rides)}}function J(i,o){if(i&1){let e=h();t(0,"button",72),f("click",function(){u(e);let p=s(2);return _(p.confirmCancel())}),d(1,"i",73),a(2," Confirm "),n()}}function K(i,o){if(i&1){let e=h();t(0,"div",61),f("click",function(){u(e);let p=s();return _(p.hidePopup())}),t(1,"div",62),f("click",function(p){return u(e),_(p.stopPropagation())}),t(2,"div",63)(3,"h5",64),d(4,"i",65),a(5),n(),t(6,"button",66),f("click",function(){u(e);let p=s();return _(p.hidePopup())}),n()(),t(7,"div",67)(8,"p",68),a(9),n()(),t(10,"div",69),g(11,J,3,0,"button",70),t(12,"button",71),f("click",function(){u(e);let p=s();return _(p.hidePopup())}),a(13),n()()()()}if(i&2){let e=s();r(2),l("ngClass","popup-"+e.popupType),r(2),l("ngClass",I(6,j,e.popupType==="success",e.popupType==="warning",e.popupType==="error")),r(),b(" ",e.popupTitle," "),r(4),m(e.popupMessage),r(2),l("ngIf",e.popupType==="warning"),r(2),b(" ",e.popupType==="warning"?"Cancel":"Close"," ")}}var F=class i{constructor(o,e){this.http=o;this.cdr=e}rides=[];loading=!1;error="";cancelingRideId=null;showPopup=!1;popupMessage="";popupType="success";popupTitle="";ngOnInit(){this.fetchRides()}fetchRides(){if(this.loading=!0,this.error="",!localStorage.getItem("userId")){this.error="User not found.",this.loading=!1,this.cdr.detectChanges();return}this.http.get("http://localhost:8086/api/v1/rides/my").subscribe({next:e=>{this.rides=e||[],this.loading=!1,this.cdr.detectChanges()},error:e=>{this.error="Failed to load rides.",this.loading=!1,this.cdr.detectChanges()}})}editRide(o){this.showPopupMessage("Edit Ride","Edit functionality will be implemented soon.","warning")}cancelRide(o){this.showPopupMessage("Cancel Ride",`Are you sure you want to cancel the ride from ${o.from} to ${o.to}?`,"warning"),this.rideToCancel=o}rideToCancel=null;confirmCancel(){this.rideToCancel&&(this.cancelingRideId=this.rideToCancel.id,this.hidePopup(),this.http.delete(`http://localhost:8086/api/v1/rides/${this.rideToCancel.id}`).subscribe({next:()=>{this.rides=this.rides.filter(o=>o.id!==this.rideToCancel.id),this.cancelingRideId=null,this.rideToCancel=null,this.fetchRides(),this.showPopupMessage("Success","Ride cancelled successfully!","success")},error:o=>{this.cancelingRideId=null,this.rideToCancel=null,this.cdr.detectChanges(),this.showPopupMessage("Error","Failed to cancel ride. Please try again.","error")}}))}showPopupMessage(o,e,c){this.popupTitle=o,this.popupMessage=e,this.popupType=c,this.showPopup=!0,this.cdr.detectChanges()}hidePopup(){this.showPopup=!1,this.cdr.detectChanges()}static \u0275fac=function(e){return new(e||i)(y(D),y(S))};static \u0275cmp=w({type:i,selectors:[["app-your-rides"]],decls:13,vars:4,consts:[[1,"container","mt-5",2,"margin-top","4rem !important"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"bi","bi-car-front","me-2","text-primary"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-primary","btn-sm"],[1,"bi","bi-plus-circle","me-1"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger text-center",4,"ngIf"],[4,"ngIf"],["class","popup-overlay",3,"click",4,"ngIf"],[1,"text-center","my-5"],[1,"d-flex","justify-content-center","align-items-center",2,"gap","1rem"],["role","status",1,"spinner-grow","text-primary",2,"width","2.5rem","height","2.5rem"],["role","status",1,"spinner-grow","text-success",2,"width","2.5rem","height","2.5rem"],["role","status",1,"spinner-grow","text-danger",2,"width","2.5rem","height","2.5rem"],["role","status",1,"spinner-grow","text-warning",2,"width","2.5rem","height","2.5rem"],["role","status",1,"spinner-grow","text-info",2,"width","2.5rem","height","2.5rem"],[1,"alert","alert-danger","text-center"],[1,"bi","bi-exclamation-triangle","me-2"],["class","text-center text-muted mt-5",4,"ngIf"],[1,"row","g-4"],["class","col-lg-6 col-xl-4",4,"ngFor","ngForOf"],[1,"text-center","text-muted","mt-5"],[1,"bi","bi-car-front","fs-1","text-muted","mb-3","d-block"],[1,"btn","btn-primary"],[1,"col-lg-6","col-xl-4"],[1,"card","ride-card","h-100","shadow-sm","border-0"],[1,"card-header","bg-transparent","border-0","pb-0"],[1,"d-flex","justify-content-between","align-items-start"],[1,"d-flex","align-items-center"],[1,"bi","bi-car-front","fs-4","text-primary","me-2"],[1,"mb-0","fw-bold"],[1,"text-muted"],[1,"badge","bg-success"],[1,"card-body","pt-2"],[1,"route-info","mb-3"],[1,"d-flex","align-items-center","mb-2"],[1,"route-dot","bg-success","me-2"],[1,"fw-semibold"],[1,"route-line","ms-2","mb-2"],[1,"route-dot","bg-danger","me-2"],[1,"row","g-2","mb-3"],[1,"col-6"],[1,"bi","bi-calendar-event","me-2","text-warning"],[1,"text-muted","d-block"],[1,"bi","bi-box-seam","me-2","text-info"],["class","col-6",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"card-footer","bg-transparent","border-0","pt-0"],[1,"btn","btn-outline-primary","btn-sm","flex-fill",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-outline-danger","btn-sm","flex-fill",3,"click","disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","bi bi-x-circle me-1",4,"ngIf"],[1,"bi","bi-currency-rupee","me-2","text-success"],[1,"bi","bi-info-circle","me-2","text-primary"],[1,"mb-3"],[1,"bi","bi-card-text","me-2","text-muted"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"bi","bi-x-circle","me-1"],[1,"popup-overlay",3,"click"],[1,"popup-modal",3,"click"],[1,"popup-header",3,"ngClass"],[1,"popup-title","mb-0"],[1,"me-2",3,"ngClass"],["type","button",1,"btn-close",3,"click"],[1,"popup-body"],[1,"popup-message"],[1,"popup-footer"],["class","btn btn-danger me-2",3,"click",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger","me-2",3,"click"],[1,"bi","bi-check","me-1"]],template:function(e,c){e&1&&(t(0,"div",0)(1,"div",1)(2,"h4",2),d(3,"i",3),a(4," Your Rides "),n(),t(5,"div",4)(6,"button",5),d(7,"i",6),a(8," Create New Ride "),n()()(),g(9,$,7,0,"div",7)(10,N,3,1,"div",8)(11,G,4,2,"ng-container",9),n(),g(12,K,14,10,"div",10)),e&2&&(r(9),l("ngIf",c.loading),r(),l("ngIf",c.error),r(),l("ngIf",!c.loading&&!c.error),r(),l("ngIf",c.showPopup))},dependencies:[V,R,k,T,E,Y],styles:[".your-rides-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto;background:#fff;border-radius:14px;box-shadow:0 4px 24px #3c3c641a;padding:2rem 2.5rem}.table[_ngcontent-%COMP%]{margin-bottom:0;border-radius:10px;overflow:hidden}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.ride-card[_ngcontent-%COMP%]{transition:all .3s ease;border-radius:12px;overflow:hidden}.ride-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026!important}.route-info[_ngcontent-%COMP%]   .route-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;flex-shrink:0}.route-info[_ngcontent-%COMP%]   .route-line[_ngcontent-%COMP%]{width:2px;height:20px;background:linear-gradient(to bottom,#28a745,#dc3545);margin-left:5px}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.4em .8em}.btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#007bff;border-color:#007bff}.btn.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1050;animation:_ngcontent-%COMP%_fadeIn .3s ease}.popup-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000004d;max-width:500px;width:90%;max-height:80vh;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .3s ease}.popup-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.popup-header.popup-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);border-bottom-color:#c3e6cb}.popup-header.popup-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);border-bottom-color:#f5c6cb}.popup-header.popup-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);border-bottom-color:#ffeaa7}.popup-title[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.popup-success[_ngcontent-%COMP%]   .popup-title[_ngcontent-%COMP%]{color:#155724}.popup-error[_ngcontent-%COMP%]   .popup-title[_ngcontent-%COMP%]{color:#721c24}.popup-warning[_ngcontent-%COMP%]   .popup-title[_ngcontent-%COMP%]{color:#856404}.popup-body[_ngcontent-%COMP%]{padding:1.5rem}.popup-message[_ngcontent-%COMP%]{margin:0;color:#6c757d;line-height:1.6}.popup-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:.5rem}.btn-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:1.5rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.btn-close[_ngcontent-%COMP%]:hover{background-color:#0000001a}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.ride-card[_ngcontent-%COMP%]{margin-bottom:1rem}.route-info[_ngcontent-%COMP%]   .route-line[_ngcontent-%COMP%]{height:15px}.popup-modal[_ngcontent-%COMP%]{width:95%;margin:1rem}.popup-header[_ngcontent-%COMP%], .popup-body[_ngcontent-%COMP%], .popup-footer[_ngcontent-%COMP%]{padding:1rem}}.spinner-grow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spinner-grow 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spinner-grow{0%{transform:scale(0)}50%{opacity:1}to{transform:scale(1);opacity:0}}"]})};export{F as YourRides};
