import{a as yg,b as xg,c as Kl,d as ir,e as Ql,f as wg,g as Sg,h as Cg,i as Og}from"./chunk-J2UXKB5L.js";import{a as mi}from"./chunk-YHIQK4Q6.js";import{a as Tg}from"./chunk-NT5VENQW.js";import{a as ai,b as ze,c as li,d as ci,f as ui,g as Vo,h as di,i as hi,j as rr,k as or,l as sr,m as Pg,n as Eg,o as fi,q as pi}from"./chunk-NNI64YAU.js";import{$ as qe,$a as me,$b as bg,B as fh,Ba as hg,Bb as zo,Ea as At,Fa as gh,Ia as ae,La as fg,Nb as Uo,O as Ze,Ob as Jl,Pb as an,Q as No,R as ph,Rb as _g,Sb as qt,Ta as W,U as Zl,Ua as S,V as lg,Va as w,Wa as k,Yb as vh,Za as ut,Zb as Bo,_ as We,_a as Ae,_b as vg,a as si,ac as Mg,ba as cg,bb as ra,bc as $l,c as uh,cb as oa,d as Bb,db as sa,e as Vb,eb as dt,f as dh,fa as ug,fb as pg,gb as O,hb as Wn,ib as Je,jb as mg,ob as _h,q as hh,qa as mh,sb as yh,ua as N,ub as xh,wa as dg,wb as gg,ya as Qe}from"./chunk-MSHVY7YR.js";var T0=Bb((pa,$h)=>{"use strict";(function(n,e){typeof pa=="object"&&typeof $h=="object"?$h.exports=e():typeof define=="function"&&define.amd?define([],e):typeof pa=="object"?pa._vantaEffect=e():n._vantaEffect=e()})(typeof self<"u"?self:pa,()=>(()=>{"use strict";var n={d:(h,f)=>{for(var p in f)n.o(f,p)&&!n.o(h,p)&&Object.defineProperty(h,p,{enumerable:!0,get:f[p]})},o:(h,f)=>Object.prototype.hasOwnProperty.call(h,f),r:h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})}},e={};n.r(e),n.d(e,{default:()=>u}),Number.prototype.clamp=function(h,f){return Math.min(Math.max(this,h),f)};function t(h){for(;h.children&&h.children.length>0;)t(h.children[0]),h.remove(h.children[0]);h.geometry&&h.geometry.dispose(),h.material&&(Object.keys(h.material).forEach(f=>{h.material[f]&&h.material[f]!==null&&typeof h.material[f].dispose=="function"&&h.material[f].dispose()}),h.material.dispose())}let i=typeof window=="object",r=i&&window.THREE||{};i&&!window.VANTA&&(window.VANTA={});let o=i&&window.VANTA||{};o.register=(h,f)=>o[h]=p=>new f(p),o.version="0.5.24";let s=function(){return Array.prototype.unshift.call(arguments,"[VANTA]"),console.error.apply(this,arguments)};o.VantaBase=class{constructor(h={}){if(!i)return!1;o.current=this,this.windowMouseMoveWrapper=this.windowMouseMoveWrapper.bind(this),this.windowTouchWrapper=this.windowTouchWrapper.bind(this),this.windowGyroWrapper=this.windowGyroWrapper.bind(this),this.resize=this.resize.bind(this),this.animationLoop=this.animationLoop.bind(this),this.restart=this.restart.bind(this);let f=typeof this.getDefaultOptions=="function"?this.getDefaultOptions():this.defaultOptions;if(this.options=Object.assign({mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1},f),(h instanceof HTMLElement||typeof h=="string")&&(h={el:h}),Object.assign(this.options,h),this.options.THREE&&(r=this.options.THREE),this.el=this.options.el,this.el==null)s('Instance needs "el" param!');else if(!(this.options.el instanceof HTMLElement)){let _=this.el;if(this.el=(p=_,document.querySelector(p)),!this.el)return void s("Cannot find element",_)}var p,m;this.prepareEl(),this.initThree(),this.setSize();try{this.init()}catch(_){return s("Init error",_),this.renderer&&this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),void(this.options.backgroundColor&&(console.log("[VANTA] Falling back to backgroundColor"),this.el.style.background=(m=this.options.backgroundColor,typeof m=="number"?"#"+("00000"+m.toString(16)).slice(-6):m)))}this.initMouse(),this.resize(),this.animationLoop();let y=window.addEventListener;y("resize",this.resize),window.requestAnimationFrame(this.resize),this.options.mouseControls&&(y("scroll",this.windowMouseMoveWrapper),y("mousemove",this.windowMouseMoveWrapper)),this.options.touchControls&&(y("touchstart",this.windowTouchWrapper),y("touchmove",this.windowTouchWrapper)),this.options.gyroControls&&y("deviceorientation",this.windowGyroWrapper)}setOptions(h={}){Object.assign(this.options,h),this.triggerMouseMove()}prepareEl(){let h,f;if(typeof Node<"u"&&Node.TEXT_NODE)for(h=0;h<this.el.childNodes.length;h++){let p=this.el.childNodes[h];if(p.nodeType===Node.TEXT_NODE){let m=document.createElement("span");m.textContent=p.textContent,p.parentElement.insertBefore(m,p),p.remove()}}for(h=0;h<this.el.children.length;h++)f=this.el.children[h],getComputedStyle(f).position==="static"&&(f.style.position="relative"),getComputedStyle(f).zIndex==="auto"&&(f.style.zIndex=1);getComputedStyle(this.el).position==="static"&&(this.el.style.position="relative")}applyCanvasStyles(h,f={}){Object.assign(h.style,{position:"absolute",zIndex:0,top:0,left:0,background:""}),Object.assign(h.style,f),h.classList.add("vanta-canvas")}initThree(){r.WebGLRenderer?(this.renderer=new r.WebGLRenderer({alpha:!0,antialias:!0}),this.el.appendChild(this.renderer.domElement),this.applyCanvasStyles(this.renderer.domElement),isNaN(this.options.backgroundAlpha)&&(this.options.backgroundAlpha=1),this.scene=new r.Scene):console.warn("[VANTA] No THREE defined on window")}getCanvasElement(){return this.renderer?this.renderer.domElement:this.p5renderer?this.p5renderer.canvas:void 0}getCanvasRect(){let h=this.getCanvasElement();return!!h&&h.getBoundingClientRect()}windowMouseMoveWrapper(h){let f=this.getCanvasRect();if(!f)return!1;let p=h.clientX-f.left,m=h.clientY-f.top;p>=0&&m>=0&&p<=f.width&&m<=f.height&&(this.mouseX=p,this.mouseY=m,this.options.mouseEase||this.triggerMouseMove(p,m))}windowTouchWrapper(h){let f=this.getCanvasRect();if(!f)return!1;if(h.touches.length===1){let p=h.touches[0].clientX-f.left,m=h.touches[0].clientY-f.top;p>=0&&m>=0&&p<=f.width&&m<=f.height&&(this.mouseX=p,this.mouseY=m,this.options.mouseEase||this.triggerMouseMove(p,m))}}windowGyroWrapper(h){let f=this.getCanvasRect();if(!f)return!1;let p=Math.round(2*h.alpha)-f.left,m=Math.round(2*h.beta)-f.top;p>=0&&m>=0&&p<=f.width&&m<=f.height&&(this.mouseX=p,this.mouseY=m,this.options.mouseEase||this.triggerMouseMove(p,m))}triggerMouseMove(h,f){h===void 0&&f===void 0&&(this.options.mouseEase?(h=this.mouseEaseX,f=this.mouseEaseY):(h=this.mouseX,f=this.mouseY)),this.uniforms&&(this.uniforms.iMouse.value.x=h/this.scale,this.uniforms.iMouse.value.y=f/this.scale);let p=h/this.width,m=f/this.height;typeof this.onMouseMove=="function"&&this.onMouseMove(p,m)}setSize(){this.scale||(this.scale=1),typeof navigator<"u"&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<600)&&this.options.scaleMobile?this.scale=this.options.scaleMobile:this.options.scale&&(this.scale=this.options.scale),this.width=Math.max(this.el.offsetWidth,this.options.minWidth),this.height=Math.max(this.el.offsetHeight,this.options.minHeight)}initMouse(){(!this.mouseX&&!this.mouseY||this.mouseX===this.options.minWidth/2&&this.mouseY===this.options.minHeight/2)&&(this.mouseX=this.width/2,this.mouseY=this.height/2,this.triggerMouseMove(this.mouseX,this.mouseY))}resize(){this.setSize(),this.camera&&(this.camera.aspect=this.width/this.height,typeof this.camera.updateProjectionMatrix=="function"&&this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio/this.scale)),typeof this.onResize=="function"&&this.onResize()}isOnScreen(){let h=this.el.offsetHeight,f=this.el.getBoundingClientRect(),p=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,m=f.top+p;return m-window.innerHeight<=p&&p<=m+h}animationLoop(){this.t||(this.t=0),this.t2||(this.t2=0);let h=performance.now();if(this.prevNow){let f=(h-this.prevNow)/16.666666666666668;f=Math.max(.2,Math.min(f,5)),this.t+=f,this.t2+=(this.options.speed||1)*f,this.uniforms&&(this.uniforms.iTime.value=.016667*this.t2)}return this.prevNow=h,this.options.mouseEase&&(this.mouseEaseX=this.mouseEaseX||this.mouseX||0,this.mouseEaseY=this.mouseEaseY||this.mouseY||0,Math.abs(this.mouseEaseX-this.mouseX)+Math.abs(this.mouseEaseY-this.mouseY)>.1&&(this.mouseEaseX+=.05*(this.mouseX-this.mouseEaseX),this.mouseEaseY+=.05*(this.mouseY-this.mouseEaseY),this.triggerMouseMove(this.mouseEaseX,this.mouseEaseY))),(this.isOnScreen()||this.options.forceAnimate)&&(typeof this.onUpdate=="function"&&this.onUpdate(),this.scene&&this.camera&&(this.renderer.render(this.scene,this.camera),this.renderer.setClearColor(this.options.backgroundColor,this.options.backgroundAlpha)),this.fps&&this.fps.update&&this.fps.update(),typeof this.afterRender=="function"&&this.afterRender()),this.req=window.requestAnimationFrame(this.animationLoop)}restart(){if(this.scene)for(;this.scene.children.length;)this.scene.remove(this.scene.children[0]);typeof this.onRestart=="function"&&this.onRestart(),this.init()}init(){typeof this.onInit=="function"&&this.onInit()}destroy(){typeof this.onDestroy=="function"&&this.onDestroy();let h=window.removeEventListener;h("touchstart",this.windowTouchWrapper),h("touchmove",this.windowTouchWrapper),h("scroll",this.windowMouseMoveWrapper),h("mousemove",this.windowMouseMoveWrapper),h("deviceorientation",this.windowGyroWrapper),h("resize",this.resize),window.cancelAnimationFrame(this.req);let f=this.scene;f&&f.children&&t(f),this.renderer&&(this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),this.renderer=null,this.scene=null),o.current===this&&(o.current=null)}};let a=o.VantaBase,l=typeof window=="object"&&window.THREE;class c extends a{constructor(f){l=f.THREE||l,l.Color.prototype.toVector=function(){return new l.Vector3(this.r,this.g,this.b)},super(f),this.updateUniforms=this.updateUniforms.bind(this)}init(){this.mode="shader",this.uniforms={iTime:{type:"f",value:1},iResolution:{type:"v2",value:new l.Vector2(1,1)},iDpr:{type:"f",value:window.devicePixelRatio||1},iMouse:{type:"v2",value:new l.Vector2(this.mouseX||0,this.mouseY||0)}},super.init(),this.fragmentShader&&this.initBasicShader()}setOptions(f){super.setOptions(f),this.updateUniforms()}initBasicShader(f=this.fragmentShader,p=this.vertexShader){p||(p=`uniform float uTime;
uniform vec2 uResolution;
void main() {
  gl_Position = vec4( position, 1.0 );
}`),this.updateUniforms(),typeof this.valuesChanger=="function"&&this.valuesChanger();let m=new l.ShaderMaterial({uniforms:this.uniforms,vertexShader:p,fragmentShader:f}),y=this.options.texturePath;y&&(this.uniforms.iTex={type:"t",value:new l.TextureLoader().load(y)});let _=new l.Mesh(new l.PlaneGeometry(2,2),m);this.scene.add(_),this.camera=new l.Camera,this.camera.position.z=1}updateUniforms(){let f={},p,m;for(p in this.options)m=this.options[p],p.toLowerCase().indexOf("color")!==-1?f[p]={type:"v3",value:new l.Color(m).toVector()}:typeof m=="number"&&(f[p]={type:"f",value:m});return Object.assign(this.uniforms,f)}resize(){super.resize(),this.uniforms.iResolution.value.x=this.width/this.scale,this.uniforms.iResolution.value.y=this.height/this.scale}}class d extends c{}let u=o.register("FOG",d);return d.prototype.defaultOptions={highlightColor:16761600,midtoneColor:16719616,lowlightColor:2949375,baseColor:16772075,blurFactor:.6,speed:1,zoom:1,scale:2,scaleMobile:4},d.prototype.fragmentShader=`uniform vec2 iResolution;
uniform vec2 iMouse;
uniform float iTime;

uniform float blurFactor;
uniform vec3 baseColor;
uniform vec3 lowlightColor;
uniform vec3 midtoneColor;
uniform vec3 highlightColor;
uniform float zoom;

float random (in vec2 _st) {
  return fract(sin(dot(_st.xy,
                     vec2(0.129898,0.78233)))*
        437.585453123);
}

// Based on Morgan McGuire @morgan3d
// https://www.shadertoy.com/view/4dS3Wd
float noise (in vec2 _st) {
  vec2 i = floor(_st);
  vec2 f = fract(_st);

  // Four corners in 2D of a tile
  float a = random(i);
  float b = random(i + vec2(1.0, 0.0));
  float c = random(i + vec2(0.0, 1.0));
  float d = random(i + vec2(1.0, 1.0));

  vec2 u = f * f * (3.0 - 2.0 * f);

  return mix(a, b, u.x) +
          (c - a)* u.y * (1.0 - u.x) +
          (d - b) * u.x * u.y;
}

#define NUM_OCTAVES 6

float fbm ( in vec2 _st) {
  float v = 0.0;
  float a = blurFactor;
  vec2 shift = vec2(100.0);
  // Rotate to reduce axial bias
  mat2 rot = mat2(cos(0.5), sin(0.5),
                  -sin(0.5), cos(0.50));
  for (int i = 0; i < NUM_OCTAVES; ++i) {
      v += a * noise(_st);
      _st = rot * _st * 2.0 + shift;
      a *= (1. - blurFactor);
  }
  return v;
}

void main() {
  vec2 st = gl_FragCoord.xy / iResolution.xy*3.;
  st.x *= 0.7 * iResolution.x / iResolution.y ; // Still keep it more landscape than square
  st *= zoom;

  // st += st * abs(sin(iTime*0.1)*3.0);
  vec3 color = vec3(0.0);

  vec2 q = vec2(0.);
  q.x = fbm( st + 0.00*iTime);
  q.y = fbm( st + vec2(1.0));

  vec2 dir = vec2(0.15,0.126);
  vec2 r = vec2(0.);
  r.x = fbm( st + 1.0*q + vec2(1.7,9.2)+ dir.x*iTime );
  r.y = fbm( st + 1.0*q + vec2(8.3,2.8)+ dir.y*iTime);

  float f = fbm(st+r);

  color = mix(baseColor,
              lowlightColor,
              clamp((f*f)*4.0,0.0,1.0));

  color = mix(color,
              midtoneColor,
              clamp(length(q),0.0,1.0));

  color = mix(color,
              highlightColor,
              clamp(length(r.x),0.0,1.0));

  vec3 finalColor = mix(baseColor, color, f*f*f+.6*f*f+.5*f);
  gl_FragColor = vec4(finalColor,1.0);
}
`,e})())});var Ie=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Ie||{}),An="*";function bh(n,e){return{type:Ie.Trigger,name:n,definitions:e,options:{}}}function ec(n,e=null){return{type:Ie.Animate,styles:e,timings:n}}function Ag(n,e=null){return{type:Ie.Sequence,steps:n,options:e}}function ar(n){return{type:Ie.Style,styles:n,offset:null}}function tc(n,e,t=null){return{type:Ie.Transition,expr:n,animation:e,options:t}}var gi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Vr=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Go="!";function Lg(n){return new Ze(3e3,!1)}function Gb(){return new Ze(3100,!1)}function Hb(){return new Ze(3101,!1)}function Wb(n){return new Ze(3001,!1)}function qb(n){return new Ze(3003,!1)}function jb(n){return new Ze(3004,!1)}function Ig(n,e){return new Ze(3005,!1)}function kg(){return new Ze(3006,!1)}function Dg(){return new Ze(3007,!1)}function Fg(n,e){return new Ze(3008,!1)}function Ng(n){return new Ze(3002,!1)}function zg(n,e,t,i,r){return new Ze(3010,!1)}function Ug(){return new Ze(3011,!1)}function Bg(){return new Ze(3012,!1)}function Vg(){return new Ze(3200,!1)}function Gg(){return new Ze(3202,!1)}function Hg(){return new Ze(3013,!1)}function Wg(n){return new Ze(3014,!1)}function qg(n){return new Ze(3015,!1)}function jg(n){return new Ze(3016,!1)}function Yg(n,e){return new Ze(3404,!1)}function Yb(n){return new Ze(3502,!1)}function Xg(n){return new Ze(3503,!1)}function Zg(){return new Ze(3300,!1)}function Jg(n){return new Ze(3504,!1)}function $g(n){return new Ze(3301,!1)}function Kg(n,e){return new Ze(3302,!1)}function Qg(n){return new Ze(3303,!1)}function e0(n,e){return new Ze(3400,!1)}function t0(n){return new Ze(3401,!1)}function n0(n){return new Ze(3402,!1)}function i0(n,e){return new Ze(3505,!1)}function Fi(n){switch(n.length){case 0:return new gi;case 1:return n[0];default:return new Vr(n)}}function Ch(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==s,u=d&&a||new Map;l.forEach((h,f)=>{let p=f,m=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),m){case Go:m=t.get(f);break;case An:m=i.get(f);break;default:m=n.normalizeStyleValue(f,p,m,r);break}u.set(p,m)}),d||o.push(u),a=u,s=c}),r.length)throw Yb(r);return o}function nc(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Mh(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Mh(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Mh(t,"destroy",n)));break}}function Mh(n,e,t){let i=t.totalTime,r=!!t.disabled,o=ic(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function ic(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function ln(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Ph(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var Xb=typeof document>"u"?null:document.documentElement;function rc(n){let e=n.parentNode||n.host||null;return e===Xb?null:e}function Zb(n){return n.substring(1,6)=="ebkit"}var Gr=null,Rg=!1;function r0(n){Gr||(Gr=Jb()||{},Rg=Gr.style?"WebkitAppearance"in Gr.style:!1);let e=!0;return Gr.style&&!Zb(n)&&(e=n in Gr.style,!e&&Rg&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Gr.style)),e}function Jb(){return typeof document<"u"?document.body:null}function Eh(n,e){for(;e;){if(e===n)return!0;e=rc(e)}return!1}function Th(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var $b=1e3,Oh="{{",Kb="}}",Ah="ng-enter",oc="ng-leave",aa="ng-trigger",la=".ng-trigger",Lh="ng-animating",sc=".ng-animating";function _i(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:wh(parseFloat(e[1]),e[2])}function wh(n,e){switch(e){case"s":return n*$b;default:return n}}function ca(n,e,t){return n.hasOwnProperty("duration")?n:Qb(n,e,t)}function Qb(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(Lg(n)),{duration:0,delay:0,easing:""};r=wh(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=wh(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(Gb()),a=!0),o<0&&(e.push(Hb()),a=!0),a&&e.splice(l,0,Lg(n))}return{duration:r,delay:o,easing:s}}function o0(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function qn(n,e,t){e.forEach((i,r)=>{let o=ac(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function lr(n,e){e.forEach((t,i)=>{let r=ac(i);n.style[r]=""})}function Ho(n){return Array.isArray(n)?n.length==1?n[0]:Ag(n):n}function s0(n,e,t){let i=e.params||{},r=Rh(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(Wb(o))})}var Sh=new RegExp(`${Oh}\\s*(.+?)\\s*${Kb}`,"g");function Rh(n){let e=[];if(typeof n=="string"){let t;for(;t=Sh.exec(n);)e.push(t[1]);Sh.lastIndex=0}return e}function Wo(n,e,t){let i=`${n}`,r=i.replace(Sh,(o,s)=>{let a=e[s];return a==null&&(t.push(qb(s)),a=""),a.toString()});return r==i?n:r}var e1=/-+([a-z0-9])/g;function ac(n){return n.replace(e1,(...e)=>e[1].toUpperCase())}function a0(n,e){return n===0||e===0}function l0(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,lc(n,a)))}}return e}function cn(n,e,t){switch(e.type){case Ie.Trigger:return n.visitTrigger(e,t);case Ie.State:return n.visitState(e,t);case Ie.Transition:return n.visitTransition(e,t);case Ie.Sequence:return n.visitSequence(e,t);case Ie.Group:return n.visitGroup(e,t);case Ie.Animate:return n.visitAnimate(e,t);case Ie.Keyframes:return n.visitKeyframes(e,t);case Ie.Style:return n.visitStyle(e,t);case Ie.Reference:return n.visitReference(e,t);case Ie.AnimateChild:return n.visitAnimateChild(e,t);case Ie.AnimateRef:return n.visitAnimateRef(e,t);case Ie.Query:return n.visitQuery(e,t);case Ie.Stagger:return n.visitStagger(e,t);default:throw jb(e.type)}}function lc(n,e){return window.getComputedStyle(n)[e]}var Zh=(()=>{class n{validateStyleProperty(t){return r0(t)}containsElement(t,i){return Eh(t,i)}getParentElement(t){return rc(t)}query(t,i,r){return Th(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new gi(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=No({token:n,factory:n.\u0275fac})}return n})(),Wr=class{static NOOP=new Zh},qr=class{};var t1=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fc=class extends qr{normalizePropertyName(e,t){return ac(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(t1.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Ig(e,i))}return s+o}};var pc="*";function n1(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>i1(i,t,e)):t.push(n),t}function i1(n,e,t){if(n[0]==":"){let l=r1(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(qg(n)),e;let r=i[1],o=i[2],s=i[3];e.push(c0(r,s));let a=r==pc&&s==pc;o[0]=="<"&&!a&&e.push(c0(s,r))}function r1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(jg(n)),"* => *"}}var cc=new Set(["true","1"]),uc=new Set(["false","0"]);function c0(n,e){let t=cc.has(n)||uc.has(n),i=cc.has(e)||uc.has(e);return(r,o)=>{let s=n==pc||n==r,a=e==pc||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?cc.has(n):uc.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?cc.has(e):uc.has(e)),s&&a}}var x0=":self",o1=new RegExp(`s*${x0}s*,?`,"g");function v0(n,e,t,i){return new zh(n).build(e,t,i)}var u0="",zh=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new Uh(t);return this._resetContextStyleTimingState(r),cn(this,Ho(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=u0,e.collectedStyles=new Map,e.collectedStyles.set(u0,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(kg()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ie.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,t))}),l.name=c}else if(a.type==Ie.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(Dg())}),{type:Ie.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Rh(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push(Fg(e.name,[...o.values()]))}return{type:Ie.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=cn(this,Ho(e.animation),t),r=n1(e.expr,t.errors);return{type:Ie.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Hr(e.options)}}visitSequence(e,t){return{type:Ie.Sequence,steps:e.steps.map(i=>cn(this,i,t)),options:Hr(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=cn(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:Ie.Group,steps:o,options:Hr(e.options)}}visitAnimate(e,t){let i=c1(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:ar({});if(o.type==Ie.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=ar(c)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:Ie.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===An?i.push(a):t.errors.push(Ng(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(Oh)>=0){o=!0;break}}}),{type:Ie.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l),u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(t.errors.push(zg(l,d.startTime,d.endTime,o,r)),u=!1),o=d.startTime),u&&c.set(l,{startTime:o,endTime:r}),t.options&&s0(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:Ie.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Ug()),i;let r=1,o=0,s=[],a=!1,l=!1,c=0,d=e.steps.map(_=>{let g=this._makeStyleAst(_,t),v=g.offset!=null?g.offset:l1(g.styles),b=0;return v!=null&&(o++,b=g.offset=v),l=l||b<0||b>1,a=a||b<c,c=b,s.push(b),g});l&&t.errors.push(Bg()),a&&t.errors.push(Vg());let u=e.steps.length,h=0;o>0&&o<u?t.errors.push(Gg()):o==0&&(h=r/(u-1));let f=u-1,p=t.currentTime,m=t.currentAnimateTimings,y=m.duration;return d.forEach((_,g)=>{let v=h>0?g==f?1:h*g:s[g],b=v*y;t.currentTime=p+m.delay+b,m.duration=b,this._validateStyleAst(_,t),_.offset=v,i.styles.push(_)}),i}visitReference(e,t){return{type:Ie.Reference,animation:cn(this,Ho(e.animation),t),options:Hr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ie.AnimateChild,options:Hr(e.options)}}visitAnimateRef(e,t){return{type:Ie.AnimateRef,animation:this.visitReference(e.animation,t),options:Hr(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=s1(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,ln(t.collectedStyles,t.currentQuerySelector,new Map);let a=cn(this,Ho(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:Ie.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Hr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Hg());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:ca(e.timings,t.errors,!0);return{type:Ie.Stagger,animation:cn(this,Ho(e.animation),t),timings:i,options:null}}};function s1(n){let e=!!n.split(/\s*,\s*/).find(t=>t==x0);return e&&(n=n.replace(o1,"")),n=n.replace(/@\*/g,la).replace(/@\w+/g,t=>la+"-"+t.slice(1)).replace(/:animating/g,sc),[n,e]}function a1(n){return n?si({},n):null}var Uh=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function l1(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function c1(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=ca(n,e).duration;return Ih(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=Ih(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=ca(t,e);return Ih(r.duration,r.delay,r.easing)}function Hr(n){return n?(n=si({},n),n.params&&(n.params=a1(n.params))):n={},n}function Ih(n,e,t){return{duration:n,delay:e,easing:t}}function Jh(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var da=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},u1=1,d1=":enter",h1=new RegExp(d1,"g"),f1=":leave",p1=new RegExp(f1,"g");function b0(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return new Bh().buildKeyframes(n,e,t,i,r,o,s,a,l,c)}var Bh=class{buildKeyframes(e,t,i,r,o,s,a,l,c,d=[]){c=c||new da;let u=new Vh(e,t,c,r,o,d,[]);u.options=l;let h=l.delay?_i(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,l),cn(this,i,u);let f=u.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let m=f.length-1;m>=0;m--){let y=f[m];if(y.element===t){p=y;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,u.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[Jh(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:_i(Wo(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?_i(i.duration):null,a=i.delay!=null?_i(i.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),cn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Ie.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=mc);let s=_i(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>cn(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?_i(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),cn(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Wo(i,t.params,t.errors):i;return ca(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==Ie.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?_i(r.delay):0;o&&(t.previousNode.type===Ie.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mc);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;let u=t.createSubContext(e.options,c);o&&u.delayNextStep(o),c===t.element&&(l=u.currentTimeline),cn(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe();let h=u.currentTimeline.currentTime;s=Math.max(s,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let d=t.currentTimeline;l&&d.delayNextStep(l);let u=d.currentTime;cn(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-u+(r.startTime-i.currentTimeline.startTime)}},mc={},Vh=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=mc;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new gc(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=_i(i.duration)),i.delay!=null&&(r.delay=_i(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Wo(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=mc,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Gh(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(h1,"."+this._enterClassName),e=e.replace(p1,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push(Wg(t)),a}},gc=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=u1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||An),this._currentKeyframe.set(t,An);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=m1(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Wo(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??An),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,u)=>{d===Go?e.add(u):d===An&&t.add(u)}),i||c.set("offset",l/this.duration),r.push(c)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return Jh(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},Gh=class extends gc{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",d0(a)),o.push(c);let d=e.length-1;for(let u=1;u<=d;u++){let h=new Map(e[u]),f=h.get("offset"),p=t+f*i;h.set("offset",d0(p/s)),o.push(h)}i=s,t=0,r="",e=o}return Jh(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function d0(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function m1(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,An)}else for(let[o,s]of r)t.set(o,s)}),t}function h0(n,e,t,i,r,o,s,a,l,c,d,u,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}var kh={},_c=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return g1(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,d){let u=[],h=this.ast.options&&this.ast.options.params||kh,f=a&&a.params||kh,p=this.buildStyles(i,f,u),m=l&&l.params||kh,y=this.buildStyles(r,m,u),_=new Set,g=new Map,v=new Map,b=r==="void",M={params:M0(m,h),delay:this.ast.options?.delay},x=d?[]:b0(e,t,this.ast.animation,o,s,p,y,M,c,u),C=0;return x.forEach(A=>{C=Math.max(A.duration+A.delay,C)}),u.length?h0(t,this._triggerName,i,r,b,p,y,[],[],g,v,C,u):(x.forEach(A=>{let L=A.element,H=ln(g,L,new Set);A.preStyleProps.forEach(B=>H.add(B));let z=ln(v,L,new Set);A.postStyleProps.forEach(B=>z.add(B)),L!==t&&_.add(L)}),h0(t,this._triggerName,i,r,b,p,y,x,[..._.values()],g,v,C))}};function g1(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function M0(n,e){let t=si({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var Hh=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=M0(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Wo(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function _1(n,e,t){return new Wh(n,e,t)}var Wh=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Hh(r.style,o,i))}),f0(this.states,"true","1"),f0(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new _c(e,r,this.states))}),this.fallbackTransition=y1(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function y1(n,e,t){let i=[(s,a)=>!0],r={type:Ie.Sequence,steps:[],options:null},o={type:Ie.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new _c(n,o,e)}function f0(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var x1=new da,qh=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=v0(this._driver,t,i,r);if(i.length)throw Xg(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=Ch(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=b0(this._driver,t,o,Ah,oc,new Map,new Map,i,x1,r),s.forEach(d=>{let u=ln(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(Zg()),s=[]),r.length)throw Jg(r);a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,An))})});let l=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),c=Fi(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw $g(e);return t}listen(e,t,i,r){let o=ic(t,"","","");return nc(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},p0="ng-animate-queued",v1=".ng-animate-queued",Dh="ng-animate-disabled",b1=".ng-animate-disabled",M1="ng-star-inserted",w1=".ng-star-inserted",S1=[],w0={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},C1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},jn="__ng_removed",ha=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=E1(r),i){let o=e,{value:s}=o,a=uh(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},ua="void",Fh=new ha(ua),jh=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Ln(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw Kg(i,t);if(i==null||i.length==0)throw Qg(t);if(!T1(i))throw e0(i,t);let o=ln(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=ln(this._engine.statesByElement,e,new Map);return a.has(t)||(Ln(e,aa),Ln(e,aa+"-"+t),a.set(t,Fh)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw t0(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new fa(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ln(e,aa),Ln(e,aa+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new ha(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=Fh),!(c.value===ua)&&l.value===c.value){if(!L1(l.params,c.params)){let m=[],y=o.matchStyles(l.value,l.params,m),_=o.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{lr(e,y),qn(e,_)})}return}let h=ln(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(Ln(e,p0),s.onStart(()=>{qo(e,p0)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let y=this._engine.playersByElement.get(e);if(y){let _=y.indexOf(s);_>=0&&y.splice(_,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,la,!0);i.forEach(r=>{if(r[jn])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,ua,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Fi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||Fh,d=new ha(ua),u=new fa(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[jn];(!o||o===w0)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ln(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=ic(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,nc(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Yh=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new jh(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(dc(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!dc(t))return;let o=t[jn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ln(e,Dh)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qo(e,Dh))}removeNode(e,t,i){if(dc(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[jn]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return dc(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,la,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,sc,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fi(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[jn];if(t&&t.setForRemoval){if(e[jn]=w0,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Dh)&&this.markElementAsDisabled(e,!1),this.driver.query(e,b1,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Ln(r,M1)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Fi(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw n0(e)}_flushAnimations(e,t){let i=new da,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(I=>{d.add(I);let G=this.driver.query(I,v1,!0);for(let q=0;q<G.length;q++)d.add(G[q])});let u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=_0(h,this.collectedEnterElements),p=new Map,m=0;f.forEach((I,G)=>{let q=Ah+m++;p.set(G,q),I.forEach(Z=>Ln(Z,q))});let y=[],_=new Set,g=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){let G=this.collectedLeaveElements[I],q=G[jn];q&&q.setForRemoval&&(y.push(G),_.add(G),q.hasAnimation?this.driver.query(G,w1,!0).forEach(Z=>_.add(Z)):g.add(G))}let v=new Map,b=_0(h,Array.from(_));b.forEach((I,G)=>{let q=oc+m++;v.set(G,q),I.forEach(Z=>Ln(Z,q))}),e.push(()=>{f.forEach((I,G)=>{let q=p.get(G);I.forEach(Z=>qo(Z,q))}),b.forEach((I,G)=>{let q=v.get(G);I.forEach(Z=>qo(Z,q))}),y.forEach(I=>{this.processLeaveNode(I)})});let M=[],x=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(t).forEach(q=>{let Z=q.player,Q=q.element;if(M.push(Z),this.collectedEnterElements.length){let pe=Q[jn];if(pe&&pe.setForMove){if(pe.previousTriggersValues&&pe.previousTriggersValues.has(q.triggerName)){let ke=pe.previousTriggersValues.get(q.triggerName),we=this.statesByElement.get(q.element);if(we&&we.has(q.triggerName)){let Xe=we.get(q.triggerName);Xe.value=ke,we.set(q.triggerName,Xe)}}Z.destroy();return}}let ie=!u||!this.driver.containsElement(u,Q),ge=v.get(Q),Pe=p.get(Q),ve=this._buildInstruction(q,i,Pe,ge,ie);if(ve.errors&&ve.errors.length){x.push(ve);return}if(ie){Z.onStart(()=>lr(Q,ve.fromStyles)),Z.onDestroy(()=>qn(Q,ve.toStyles)),r.push(Z);return}if(q.isFallbackTransition){Z.onStart(()=>lr(Q,ve.fromStyles)),Z.onDestroy(()=>qn(Q,ve.toStyles)),r.push(Z);return}let X=[];ve.timelines.forEach(pe=>{pe.stretchStartingKeyframe=!0,this.disabledNodes.has(pe.element)||X.push(pe)}),ve.timelines=X,i.append(Q,ve.timelines);let kt={instruction:ve,player:Z,element:Q};s.push(kt),ve.queriedElements.forEach(pe=>ln(a,pe,[]).push(Z)),ve.preStyleProps.forEach((pe,ke)=>{if(pe.size){let we=l.get(ke);we||l.set(ke,we=new Set),pe.forEach((Xe,De)=>we.add(De))}}),ve.postStyleProps.forEach((pe,ke)=>{let we=c.get(ke);we||c.set(ke,we=new Set),pe.forEach((Xe,De)=>we.add(De))})});if(x.length){let I=[];x.forEach(G=>{I.push(i0(G.triggerName,G.errors))}),M.forEach(G=>G.destroy()),this.reportError(I)}let C=new Map,A=new Map;s.forEach(I=>{let G=I.element;i.has(G)&&(A.set(G,G),this._beforeAnimationBuild(I.player.namespaceId,I.instruction,C))}),r.forEach(I=>{let G=I.element;this._getPreviousPlayers(G,!1,I.namespaceId,I.triggerName,null).forEach(Z=>{ln(C,G,[]).push(Z),Z.destroy()})});let L=y.filter(I=>y0(I,l,c)),H=new Map;g0(H,this.driver,g,c,An).forEach(I=>{y0(I,l,c)&&L.push(I)});let B=new Map;f.forEach((I,G)=>{g0(B,this.driver,new Set(I),l,Go)}),L.forEach(I=>{let G=H.get(I),q=B.get(I);H.set(I,new Map([...G?.entries()??[],...q?.entries()??[]]))});let V=[],U=[],D={};s.forEach(I=>{let{element:G,player:q,instruction:Z}=I;if(i.has(G)){if(d.has(G)){q.onDestroy(()=>qn(G,Z.toStyles)),q.disabled=!0,q.overrideTotalTime(Z.totalTime),r.push(q);return}let Q=D;if(A.size>1){let ge=G,Pe=[];for(;ge=ge.parentNode;){let ve=A.get(ge);if(ve){Q=ve;break}Pe.push(ge)}Pe.forEach(ve=>A.set(ve,Q))}let ie=this._buildAnimation(q.namespaceId,Z,C,o,B,H);if(q.setRealPlayer(ie),Q===D)V.push(q);else{let ge=this.playersByElement.get(Q);ge&&ge.length&&(q.parentPlayer=Fi(ge)),r.push(q)}}else lr(G,Z.fromStyles),q.onDestroy(()=>qn(G,Z.toStyles)),U.push(q),d.has(G)&&r.push(q)}),U.forEach(I=>{let G=o.get(I.element);if(G&&G.length){let q=Fi(G);I.setRealPlayer(q)}}),r.forEach(I=>{I.parentPlayer?I.syncPlayerEvents(I.parentPlayer):I.destroy()});for(let I=0;I<y.length;I++){let G=y[I],q=G[jn];if(qo(G,oc),q&&q.hasAnimation)continue;let Z=[];if(a.size){let ie=a.get(G);ie&&ie.length&&Z.push(...ie);let ge=this.driver.query(G,sc,!0);for(let Pe=0;Pe<ge.length;Pe++){let ve=a.get(ge[Pe]);ve&&ve.length&&Z.push(...ve)}}let Q=Z.filter(ie=>!ie.destroyed);Q.length?O1(this,G,Q):this.processLeaveNode(G)}return y.length=0,V.forEach(I=>{this.players.push(I),I.onDone(()=>{I.destroy();let G=this.players.indexOf(I);this.players.splice(G,1)}),I.play()}),V}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==ua;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,d=c!==o,u=ln(i,c,[]);this._getPreviousPlayers(c,d,s,a,t.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}lr(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,c=[],d=new Set,u=new Set,h=t.timelines.map(p=>{let m=p.element;d.add(m);let y=m[jn];if(y&&y.removedBeforeQueried)return new gi(p.duration,p.delay);let _=m!==l,g=A1((i.get(m)||S1).map(C=>C.getRealPlayer())).filter(C=>{let A=C;return A.element?A.element===m:!1}),v=o.get(m),b=s.get(m),M=Ch(this._normalizer,p.keyframes,v,b),x=this._buildPlayer(p,M,g);if(p.subTimeline&&r&&u.add(m),_){let C=new fa(e,a,m);C.setRealPlayer(x),c.push(C)}return x});c.forEach(p=>{ln(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>P1(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>Ln(p,Lh));let f=Fi(h);return f.onDestroy(()=>{d.forEach(p=>qo(p,Lh)),qn(l,t.toStyles)}),u.forEach(p=>{ln(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new gi(e.duration,e.delay)}},fa=class{namespaceId;triggerName;element;_player=new gi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>nc(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ln(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function P1(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function E1(n){return n??null}function dc(n){return n&&n.nodeType===1}function T1(n){return n=="start"||n=="done"}function m0(n,e){let t=n.style.display;return n.style.display=e??"none",t}function g0(n,e,t,i,r){let o=[];t.forEach(l=>o.push(m0(l)));let s=[];i.forEach((l,c)=>{let d=new Map;l.forEach(u=>{let h=e.computeStyle(c,u,r);d.set(u,h),(!h||h.length==0)&&(c[jn]=C1,s.push(c))}),n.set(c,d)});let a=0;return t.forEach(l=>m0(l,o[a++])),s}function _0(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=i:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function Ln(n,e){n.classList?.add(e)}function qo(n,e){n.classList?.remove(e)}function O1(n,e,t){Fi(t).onDone(()=>n.processLeaveNode(e))}function A1(n){let e=[];return S0(n,e),e}function S0(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Vr?S0(i.players,e):e.push(i)}}function L1(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function y0(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var jo=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new Yh(e.body,t,i),this._timelineEngine=new qh(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],d=v0(this._driver,o,l,c);if(l.length)throw Yg(r,l);a=_1(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=Ph(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=Ph(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function R1(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Nh(e[0]),e.length>1&&(i=Nh(e[e.length-1]))):e instanceof Map&&(t=Nh(e)),t||i?new I1(n,t,i):null}var I1=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&qn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qn(this._element,this._initialStyles),this._endStyles&&(qn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(lr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lr(this._element,this._endStyles),this._endStyles=null),qn(this._element,this._initialStyles),this._state=3)}}return n})();function Nh(n){let e=null;return n.forEach((t,i)=>{k1(i)&&(e=e||new Map,e.set(i,t))}),e}function k1(n){return n==="display"||n==="position"}var yc=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:lc(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},xc=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Eh(e,t)}getParentElement(e){return rc(e)}query(e,t,i){return Th(e,t,i)}computeStyle(e,t,i){return lc(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let c=new Map,d=s.filter(f=>f instanceof yc);a0(i,r)&&d.forEach(f=>{f.currentSnapshot.forEach((p,m)=>c.set(m,p))});let u=o0(t).map(f=>new Map(f));u=l0(e,u,c);let h=R1(e,u);return new yc(e,u,l,h)}};var hc="@",C0="@.disabled",vc=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==hc&&t==C0?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Xh=class extends vc{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==hc?t.charAt(1)=="."&&t==C0?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==hc){let o=D1(e),s=t.slice(1),a="";return s.charAt(0)!=hc&&([s,a]=F1(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(e,t,i,r)}};function D1(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function F1(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var bc=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,d=c.get(r);if(!d){let u=()=>c.delete(r);d=new vc(i,r,this.engine,u),c.set(r,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return t.data.animation.forEach(a),new Xh(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var z1=(()=>{class n extends jo{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Zl(cg),Zl(Wr),Zl(qr))};static \u0275prov=No({token:n,factory:n.\u0275fac})}return n})();function U1(){return new fc}function B1(n,e,t){return new bc(n,e,t)}var P0=[{provide:qr,useFactory:U1},{provide:jo,useClass:z1},{provide:dg,useFactory:B1,deps:[yg,jo,fg]}],mA=[{provide:Wr,useClass:Zh},{provide:mh,useValue:"NoopAnimations"},...P0],V1=[{provide:Wr,useFactory:()=>new xc},{provide:mh,useFactory:()=>"BrowserAnimations"},...P0];function E0(){return hg("NgEagerAnimations"),[...V1]}var Yx=dh(T0());var em={};Vb(em,{ACESFilmicToneMapping:()=>py,AddEquation:()=>to,AddOperation:()=>uy,AdditiveAnimationBlendMode:()=>Fp,AdditiveBlending:()=>Rf,AlphaFormat:()=>My,AlwaysDepth:()=>iy,AlwaysStencilFunc:()=>gx,AmbientLight:()=>Ku,AmbientLightProbe:()=>hp,AnimationClip:()=>xn,AnimationLoader:()=>np,AnimationMixer:()=>gp,AnimationObjectGroup:()=>Ux,AnimationUtils:()=>lt,ArcCurve:()=>Rs,ArrayCamera:()=>_u,ArrowHelper:()=>Op,Audio:()=>Sl,AudioAnalyser:()=>sd,AudioContext:()=>qp,AudioListener:()=>fp,AudioLoader:()=>rd,AxesHelper:()=>fd,AxisHelper:()=>rE,BackSide:()=>Lt,BasicDepthPacking:()=>fx,BasicShadowMap:()=>q1,BinaryTextureLoader:()=>cE,Bone:()=>$a,BooleanKeyframeTrack:()=>Vu,BoundingBoxHelper:()=>oE,Box2:()=>ld,Box3:()=>Dn,Box3Helper:()=>Ep,BoxBufferGeometry:()=>uo,BoxGeometry:()=>Mu,BoxHelper:()=>hd,BufferAttribute:()=>Ce,BufferGeometry:()=>Se,BufferGeometryLoader:()=>id,ByteType:()=>gy,Cache:()=>Mo,Camera:()=>Mi,CameraHelper:()=>Pp,CanvasRenderer:()=>hE,CanvasTexture:()=>Qa,CatmullRomCurve3:()=>Xt,CineonToneMapping:()=>fy,CircleBufferGeometry:()=>tl,CircleGeometry:()=>wu,ClampToEdgeWrapping:()=>Kt,Clock:()=>od,ClosedSplineCurve3:()=>Wx,Color:()=>fe,ColorKeyframeTrack:()=>Gu,CompressedTexture:()=>Cs,CompressedTextureLoader:()=>ip,ConeBufferGeometry:()=>Cu,ConeGeometry:()=>Su,CubeCamera:()=>ho,CubeGeometry:()=>Mu,CubeReflectionMapping:()=>Tl,CubeRefractionMapping:()=>Ol,CubeTexture:()=>wi,CubeTextureLoader:()=>qu,CubeUVReflectionMapping:()=>Ds,CubeUVRefractionMapping:()=>Al,CubicBezierCurve:()=>ti,CubicBezierCurve3:()=>Ci,CubicInterpolant:()=>Uu,CullFaceBack:()=>Lf,CullFaceFront:()=>G_,CullFaceFrontBack:()=>W1,CullFaceNone:()=>V_,Curve:()=>Me,CurvePath:()=>Hi,CustomBlending:()=>W_,CustomToneMapping:()=>my,CylinderBufferGeometry:()=>po,CylinderGeometry:()=>nl,Cylindrical:()=>vp,DataTexture:()=>Yi,DataTexture2DArray:()=>Ms,DataTexture3D:()=>ws,DataTextureLoader:()=>ju,DataUtils:()=>OP,DecrementStencilOp:()=>nM,DecrementWrapStencilOp:()=>rM,DefaultLoadingManager:()=>Fx,DepthFormat:()=>oo,DepthStencilFormat:()=>xs,DepthTexture:()=>el,DirectionalLight:()=>$u,DirectionalLightHelper:()=>Cp,DiscreteInterpolant:()=>Bu,DodecahedronBufferGeometry:()=>il,DodecahedronGeometry:()=>Pu,DoubleSide:()=>Pl,DstAlphaFactor:()=>$_,DstColorFactor:()=>Q_,DynamicBufferAttribute:()=>XP,DynamicCopyUsage:()=>yM,DynamicDrawUsage:()=>so,DynamicReadUsage:()=>mM,EdgesGeometry:()=>rl,EdgesHelper:()=>sE,EllipseCurve:()=>Pn,EqualDepth:()=>oy,EqualStencilFunc:()=>lM,EquirectangularReflectionMapping:()=>fu,EquirectangularRefractionMapping:()=>pu,Euler:()=>_x,EventDispatcher:()=>Ei,ExtrudeBufferGeometry:()=>mo,ExtrudeGeometry:()=>ll,Face3:()=>ao,Face4:()=>IP,FaceColors:()=>NP,FileLoader:()=>Un,FlatShading:()=>Rp,Float16BufferAttribute:()=>qa,Float32Attribute:()=>nE,Float32BufferAttribute:()=>ce,Float64Attribute:()=>iE,Float64BufferAttribute:()=>ja,FloatType:()=>Gi,Fog:()=>xu,FogExp2:()=>yu,Font:()=>Wp,FontLoader:()=>up,FrontSide:()=>ks,Frustum:()=>fo,GLBufferAttribute:()=>Zp,GLSL1:()=>vM,GLSL3:()=>Yf,GammaEncoding:()=>gd,Geometry:()=>et,GeometryUtils:()=>dE,GreaterDepth:()=>ay,GreaterEqualDepth:()=>sy,GreaterEqualStencilFunc:()=>hM,GreaterStencilFunc:()=>uM,GridHelper:()=>dd,Group:()=>_r,HalfFloatType:()=>Fa,HemisphereLight:()=>Xu,HemisphereLightHelper:()=>wp,HemisphereLightProbe:()=>dp,IcosahedronBufferGeometry:()=>cl,IcosahedronGeometry:()=>Eu,ImageBitmapLoader:()=>cp,ImageLoader:()=>Ls,ImageUtils:()=>So,ImmediateRenderObject:()=>Cl,IncrementStencilOp:()=>tM,IncrementWrapStencilOp:()=>iM,InstancedBufferAttribute:()=>nd,InstancedBufferGeometry:()=>wl,InstancedInterleavedBuffer:()=>_p,InstancedMesh:()=>vu,Int16Attribute:()=>KP,Int16BufferAttribute:()=>Ha,Int32Attribute:()=>eE,Int32BufferAttribute:()=>Wa,Int8Attribute:()=>ZP,Int8BufferAttribute:()=>Ba,IntType:()=>yy,InterleavedBuffer:()=>vn,InterleavedBufferAttribute:()=>Cr,Interpolant:()=>Sn,InterpolateDiscrete:()=>Na,InterpolateLinear:()=>Ta,InterpolateSmooth:()=>uu,InvertStencilOp:()=>oM,JSONLoader:()=>fE,KeepStencilOp:()=>du,KeyframeTrack:()=>Vt,LOD:()=>Za,LatheBufferGeometry:()=>ul,LatheGeometry:()=>Tu,Layers:()=>Ua,LensFlare:()=>mE,LessDepth:()=>ry,LessEqualDepth:()=>hu,LessEqualStencilFunc:()=>cM,LessStencilFunc:()=>aM,Light:()=>at,LightProbe:()=>kn,Line:()=>zn,Line3:()=>cd,LineBasicMaterial:()=>ht,LineCurve:()=>un,LineCurve3:()=>ni,LineDashedMaterial:()=>bo,LineLoop:()=>bu,LinePieces:()=>DP,LineSegments:()=>tn,LineStrip:()=>kP,LinearEncoding:()=>Qt,LinearFilter:()=>Nt,LinearInterpolant:()=>bl,LinearMipMapLinearFilter:()=>J1,LinearMipMapNearestFilter:()=>Z1,LinearMipmapLinearFilter:()=>Fs,LinearMipmapNearestFilter:()=>Dp,LinearToneMapping:()=>dy,Loader:()=>Ke,LoaderUtils:()=>Gp,LoadingManager:()=>Bp,LogLuvEncoding:()=>hx,LoopOnce:()=>lx,LoopPingPong:()=>ux,LoopRepeat:()=>cx,LuminanceAlphaFormat:()=>Sy,LuminanceFormat:()=>wy,MOUSE:()=>G1,Material:()=>Oe,MaterialLoader:()=>td,Math:()=>Re,MathUtils:()=>Re,Matrix3:()=>Bt,Matrix4:()=>Ue,MaxEquation:()=>Ff,Mesh:()=>ct,MeshBasicMaterial:()=>Fn,MeshDepthMaterial:()=>wr,MeshDistanceMaterial:()=>Sr,MeshFaceMaterial:()=>UP,MeshLambertMaterial:()=>xo,MeshMatcapMaterial:()=>vo,MeshNormalMaterial:()=>yo,MeshPhongMaterial:()=>Or,MeshPhysicalMaterial:()=>Tr,MeshStandardMaterial:()=>Si,MeshToonMaterial:()=>_o,MinEquation:()=>Df,MirroredRepeatWrapping:()=>ka,MixOperation:()=>cy,MultiMaterial:()=>BP,MultiplyBlending:()=>kf,MultiplyOperation:()=>El,NearestFilter:()=>Rt,NearestMipMapLinearFilter:()=>X1,NearestMipMapNearestFilter:()=>Y1,NearestMipmapLinearFilter:()=>gu,NearestMipmapNearestFilter:()=>mu,NeverDepth:()=>ny,NeverStencilFunc:()=>sM,NoBlending:()=>Wi,NoColors:()=>FP,NoToneMapping:()=>ro,NormalAnimationBlendMode:()=>md,NormalBlending:()=>gs,NotEqualDepth:()=>ly,NotEqualStencilFunc:()=>dM,NumberKeyframeTrack:()=>Os,Object3D:()=>ye,ObjectLoader:()=>lp,ObjectSpaceNormalMap:()=>mx,OctahedronBufferGeometry:()=>Ps,OctahedronGeometry:()=>Ou,OneFactor:()=>X_,OneMinusDstAlphaFactor:()=>K_,OneMinusDstColorFactor:()=>ey,OneMinusSrcAlphaFactor:()=>kp,OneMinusSrcColorFactor:()=>J_,OrthographicCamera:()=>Is,PCFShadowMap:()=>Lp,PCFSoftShadowMap:()=>H_,PMREMGenerator:()=>Ap,ParametricBufferGeometry:()=>Es,ParametricGeometry:()=>dl,Particle:()=>GP,ParticleBasicMaterial:()=>qP,ParticleSystem:()=>HP,ParticleSystemMaterial:()=>jP,Path:()=>Kn,PerspectiveCamera:()=>Tt,Plane:()=>In,PlaneBufferGeometry:()=>bs,PlaneGeometry:()=>Au,PlaneHelper:()=>Tp,PointCloud:()=>VP,PointCloudMaterial:()=>WP,PointLight:()=>Ju,PointLightHelper:()=>Mp,Points:()=>Ss,PointsMaterial:()=>ei,PolarGridHelper:()=>Sp,PolyhedronBufferGeometry:()=>Xi,PolyhedronGeometry:()=>Lu,PositionalAudio:()=>pp,PropertyBinding:()=>Yt,PropertyMixer:()=>jp,QuadraticBezierCurve:()=>ii,QuadraticBezierCurve3:()=>Pi,Quaternion:()=>zt,QuaternionKeyframeTrack:()=>Ml,QuaternionLinearInterpolant:()=>Hu,REVISION:()=>B_,RGBADepthPacking:()=>px,RGBAFormat:()=>bn,RGBAIntegerFormat:()=>Ly,RGBA_ASTC_10x10_Format:()=>Wy,RGBA_ASTC_10x5_Format:()=>Vy,RGBA_ASTC_10x6_Format:()=>Gy,RGBA_ASTC_10x8_Format:()=>Hy,RGBA_ASTC_12x10_Format:()=>qy,RGBA_ASTC_12x12_Format:()=>jy,RGBA_ASTC_4x4_Format:()=>Iy,RGBA_ASTC_5x4_Format:()=>ky,RGBA_ASTC_5x5_Format:()=>Dy,RGBA_ASTC_6x5_Format:()=>Fy,RGBA_ASTC_6x6_Format:()=>Ny,RGBA_ASTC_8x5_Format:()=>zy,RGBA_ASTC_8x6_Format:()=>Uy,RGBA_ASTC_8x8_Format:()=>By,RGBA_BPTC_Format:()=>Yy,RGBA_ETC2_EAC_Format:()=>jf,RGBA_PVRTC_2BPPV1_Format:()=>Wf,RGBA_PVRTC_4BPPV1_Format:()=>Hf,RGBA_S3TC_DXT1_Format:()=>zf,RGBA_S3TC_DXT3_Format:()=>Uf,RGBA_S3TC_DXT5_Format:()=>Bf,RGBDEncoding:()=>Up,RGBEEncoding:()=>_d,RGBEFormat:()=>Cy,RGBFormat:()=>yr,RGBIntegerFormat:()=>Ay,RGBM16Encoding:()=>zp,RGBM7Encoding:()=>Np,RGB_ETC1_Format:()=>Ry,RGB_ETC2_Format:()=>qf,RGB_PVRTC_2BPPV1_Format:()=>Gf,RGB_PVRTC_4BPPV1_Format:()=>Vf,RGB_S3TC_DXT1_Format:()=>Nf,RGFormat:()=>Ty,RGIntegerFormat:()=>Oy,RawShaderMaterial:()=>Zi,Ray:()=>Mr,Raycaster:()=>Jp,RectAreaLight:()=>Qu,RedFormat:()=>Py,RedIntegerFormat:()=>Ey,ReinhardToneMapping:()=>hy,RepeatWrapping:()=>Ia,ReplaceStencilOp:()=>eM,ReverseSubtractEquation:()=>j_,RingBufferGeometry:()=>hl,RingGeometry:()=>Ru,SRGB8_ALPHA8_ASTC_10x10_Format:()=>ox,SRGB8_ALPHA8_ASTC_10x5_Format:()=>nx,SRGB8_ALPHA8_ASTC_10x6_Format:()=>ix,SRGB8_ALPHA8_ASTC_10x8_Format:()=>rx,SRGB8_ALPHA8_ASTC_12x10_Format:()=>sx,SRGB8_ALPHA8_ASTC_12x12_Format:()=>ax,SRGB8_ALPHA8_ASTC_4x4_Format:()=>Xy,SRGB8_ALPHA8_ASTC_5x4_Format:()=>Zy,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Jy,SRGB8_ALPHA8_ASTC_6x5_Format:()=>$y,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Ky,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Qy,SRGB8_ALPHA8_ASTC_8x6_Format:()=>ex,SRGB8_ALPHA8_ASTC_8x8_Format:()=>tx,Scene:()=>Ya,SceneUtils:()=>pE,ShaderChunk:()=>Ge,ShaderLib:()=>$n,ShaderMaterial:()=>en,ShadowMaterial:()=>go,Shape:()=>vr,ShapeBufferGeometry:()=>fl,ShapeGeometry:()=>pl,ShapePath:()=>Hp,ShapeUtils:()=>qi,ShortType:()=>_y,Skeleton:()=>Ka,SkeletonHelper:()=>ud,SkinnedMesh:()=>Ja,SmoothShading:()=>j1,Sphere:()=>Qn,SphereBufferGeometry:()=>Ts,SphereGeometry:()=>Iu,Spherical:()=>xp,SphericalHarmonics3:()=>ed,Spline:()=>Qp,SplineCurve:()=>ri,SplineCurve3:()=>qx,SpotLight:()=>Zu,SpotLightHelper:()=>bp,Sprite:()=>Xa,SpriteMaterial:()=>Pr,SrcAlphaFactor:()=>Ip,SrcAlphaSaturateFactor:()=>ty,SrcColorFactor:()=>Z_,StaticCopyUsage:()=>_M,StaticDrawUsage:()=>Rl,StaticReadUsage:()=>pM,StereoCamera:()=>Nx,StreamCopyUsage:()=>xM,StreamDrawUsage:()=>fM,StreamReadUsage:()=>gM,StringKeyframeTrack:()=>Wu,SubtractEquation:()=>q_,SubtractiveBlending:()=>If,TOUCH:()=>H1,TangentSpaceNormalMap:()=>wo,TetrahedronBufferGeometry:()=>ml,TetrahedronGeometry:()=>ku,TextBufferGeometry:()=>gl,TextGeometry:()=>Du,Texture:()=>tt,TextureLoader:()=>Yu,TorusBufferGeometry:()=>_l,TorusGeometry:()=>Fu,TorusKnotBufferGeometry:()=>yl,TorusKnotGeometry:()=>Nu,Triangle:()=>wn,TriangleFanDrawMode:()=>K1,TriangleStripDrawMode:()=>$1,TrianglesDrawMode:()=>dx,TubeBufferGeometry:()=>xl,TubeGeometry:()=>zu,UVMapping:()=>pd,Uint16Attribute:()=>QP,Uint16BufferAttribute:()=>lo,Uint32Attribute:()=>tE,Uint32BufferAttribute:()=>co,Uint8Attribute:()=>JP,Uint8BufferAttribute:()=>Va,Uint8ClampedAttribute:()=>$P,Uint8ClampedBufferAttribute:()=>Ga,Uniform:()=>ad,UniformsLib:()=>oe,UniformsUtils:()=>vx,UnsignedByteType:()=>Ns,UnsignedInt248Type:()=>_s,UnsignedIntType:()=>Ea,UnsignedShort4444Type:()=>xy,UnsignedShort5551Type:()=>vy,UnsignedShort565Type:()=>by,UnsignedShortType:()=>Da,VSMShadowMap:()=>ds,Vector2:()=>$,Vector3:()=>P,Vector4:()=>$e,VectorKeyframeTrack:()=>As,Vertex:()=>YP,VertexColors:()=>zP,VideoTexture:()=>Qf,WebGL1Renderer:()=>$f,WebGLCubeRenderTarget:()=>ji,WebGLMultisampleRenderTarget:()=>Xf,WebGLRenderTarget:()=>Mn,WebGLRenderTargetCube:()=>uE,WebGLRenderer:()=>Il,WebGLUtils:()=>Ax,WireframeGeometry:()=>vl,WireframeHelper:()=>aE,WrapAroundEnding:()=>za,XHRLoader:()=>lE,ZeroCurvatureEnding:()=>no,ZeroFactor:()=>Y_,ZeroSlopeEnding:()=>io,ZeroStencilOp:()=>Q1,sRGBEncoding:()=>Ll});var B_="124",G1={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},H1={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},V_=0,Lf=1,G_=2,W1=3,q1=0,Lp=1,H_=2,ds=3,ks=0,Lt=1,Pl=2,Rp=1,j1=2,Wi=0,gs=1,Rf=2,If=3,kf=4,W_=5,to=100,q_=101,j_=102,Df=103,Ff=104,Y_=200,X_=201,Z_=202,J_=203,Ip=204,kp=205,$_=206,K_=207,Q_=208,ey=209,ty=210,ny=0,iy=1,ry=2,hu=3,oy=4,sy=5,ay=6,ly=7,El=0,cy=1,uy=2,ro=0,dy=1,hy=2,fy=3,py=4,my=5,pd=300,Tl=301,Ol=302,fu=303,pu=304,Ds=306,Al=307,Ia=1e3,Kt=1001,ka=1002,Rt=1003,mu=1004,Y1=1004,gu=1005,X1=1005,Nt=1006,Dp=1007,Z1=1007,Fs=1008,J1=1008,Ns=1009,gy=1010,_y=1011,Da=1012,yy=1013,Ea=1014,Gi=1015,Fa=1016,xy=1017,vy=1018,by=1019,_s=1020,My=1021,yr=1022,bn=1023,wy=1024,Sy=1025,Cy=bn,oo=1026,xs=1027,Py=1028,Ey=1029,Ty=1030,Oy=1031,Ay=1032,Ly=1033,Nf=33776,zf=33777,Uf=33778,Bf=33779,Vf=35840,Gf=35841,Hf=35842,Wf=35843,Ry=36196,qf=37492,jf=37496,Iy=37808,ky=37809,Dy=37810,Fy=37811,Ny=37812,zy=37813,Uy=37814,By=37815,Vy=37816,Gy=37817,Hy=37818,Wy=37819,qy=37820,jy=37821,Yy=36492,Xy=37840,Zy=37841,Jy=37842,$y=37843,Ky=37844,Qy=37845,ex=37846,tx=37847,nx=37848,ix=37849,rx=37850,ox=37851,sx=37852,ax=37853,lx=2200,cx=2201,ux=2202,Na=2300,Ta=2301,uu=2302,no=2400,io=2401,za=2402,md=2500,Fp=2501,dx=0,$1=1,K1=2,Qt=3e3,Ll=3001,gd=3007,_d=3002,hx=3003,Np=3004,zp=3005,Up=3006,fx=3200,px=3201,wo=0,mx=1,Q1=0,du=7680,eM=7681,tM=7682,nM=7683,iM=34055,rM=34056,oM=5386,sM=512,aM=513,lM=514,cM=515,uM=516,dM=517,hM=518,gx=519,Rl=35044,so=35048,fM=35040,pM=35045,mM=35049,gM=35041,_M=35046,yM=35050,xM=35042,vM="100",Yf="300 es";function Ei(){}Object.assign(Ei.prototype,{addEventListener:function(n,e){this._listeners===void 0&&(this._listeners={});let t=this._listeners;t[n]===void 0&&(t[n]=[]),t[n].indexOf(e)===-1&&t[n].push(e)},hasEventListener:function(n,e){if(this._listeners===void 0)return!1;let t=this._listeners;return t[n]!==void 0&&t[n].indexOf(e)!==-1},removeEventListener:function(n,e){if(this._listeners===void 0)return;let i=this._listeners[n];if(i!==void 0){let r=i.indexOf(e);r!==-1&&i.splice(r,1)}},dispatchEvent:function(n){if(this._listeners===void 0)return;let t=this._listeners[n.type];if(t!==void 0){n.target=this;let i=t.slice(0);for(let r=0,o=i.length;r<o;r++)i[r].call(this,n)}}});var Ut=[];for(let n=0;n<256;n++)Ut[n]=(n<16?"0":"")+n.toString(16);var Mc=1234567,Re={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ut[n&255]+Ut[n>>8&255]+Ut[n>>16&255]+Ut[n>>24&255]+"-"+Ut[e&255]+Ut[e>>8&255]+"-"+Ut[e>>16&15|64]+Ut[e>>24&255]+"-"+Ut[t&63|128]+Ut[t>>8&255]+"-"+Ut[t>>16&255]+Ut[t>>24&255]+Ut[i&255]+Ut[i>>8&255]+Ut[i>>16&255]+Ut[i>>24&255]).toUpperCase()},clamp:function(n,e,t){return Math.max(e,Math.min(t,n))},euclideanModulo:function(n,e){return(n%e+e)%e},mapLinear:function(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},lerp:function(n,e,t){return(1-t)*n+t*e},smoothstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},smootherstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))},randInt:function(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function(n,e){return n+Math.random()*(e-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){return n!==void 0&&(Mc=n%2147483647),Mc=Mc*16807%2147483647,(Mc-1)/2147483646},degToRad:function(n){return n*Re.DEG2RAD},radToDeg:function(n){return n*Re.RAD2DEG},isPowerOfTwo:function(n){return(n&n-1)===0&&n!==0},ceilPowerOfTwo:function(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:function(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},setQuaternionFromProperEuler:function(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),c=o((e+i)/2),d=s((e+i)/2),u=o((e-i)/2),h=s((e-i)/2),f=o((i-e)/2),p=s((i-e)/2);switch(r){case"XYX":n.set(a*d,l*u,l*h,a*c);break;case"YZY":n.set(l*h,a*d,l*u,a*c);break;case"ZXZ":n.set(l*u,l*h,a*d,a*c);break;case"XZX":n.set(a*d,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*d,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}},$=class{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}},Bt=class{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,o,s,a,l,c){let d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=o,d[5]=l,d[6]=i,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],h=i[2],f=i[5],p=i[8],m=r[0],y=r[3],_=r[6],g=r[1],v=r[4],b=r[7],M=r[2],x=r[5],C=r[8];return o[0]=s*m+a*g+l*M,o[3]=s*y+a*v+l*x,o[6]=s*_+a*b+l*C,o[1]=c*m+d*g+u*M,o[4]=c*y+d*v+u*x,o[7]=c*_+d*b+u*C,o[2]=h*m+f*g+p*M,o[5]=h*y+f*v+p*x,o[8]=h*_+f*b+p*C,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*s*d-t*a*c-i*o*d+i*a*l+r*o*c-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*s-a*c,h=a*l-d*o,f=c*o-s*l,p=t*u+i*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/p;return e[0]=u*m,e[1]=(r*c-d*i)*m,e[2]=(a*i-r*s)*m,e[3]=h*m,e[4]=(d*t-r*l)*m,e[5]=(r*o-a*t)*m,e[6]=f*m,e[7]=(i*l-c*t)*m,e[8]=(s*t-i*o)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){let i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=this.elements,o=r[0],s=r[3],a=r[6],l=r[1],c=r[4],d=r[7];return r[0]=t*o+i*l,r[3]=t*s+i*c,r[6]=t*a+i*d,r[1]=-i*o+t*l,r[4]=-i*s+t*c,r[7]=-i*a+t*d,this}translate(e,t){let i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}},Yo,So={getDataURL:function(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let e;if(n instanceof HTMLCanvasElement)e=n;else{Yo===void 0&&(Yo=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Yo.width=n.width,Yo.height=n.height;let t=Yo.getContext("2d");n instanceof ImageData?t.putImageData(n,0,0):t.drawImage(n,0,0,n.width,n.height),e=Yo}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},bM=0;function tt(n=tt.DEFAULT_IMAGE,e=tt.DEFAULT_MAPPING,t=Kt,i=Kt,r=Nt,o=Fs,s=bn,a=Ns,l=1,c=Qt){Object.defineProperty(this,"id",{value:bM++}),this.uuid=Re.generateUUID(),this.name="",this.image=n,this.mipmaps=[],this.mapping=e,this.wrapS=t,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new $(0,0),this.repeat=new $(1,1),this.center=new $(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}tt.DEFAULT_IMAGE=void 0;tt.DEFAULT_MAPPING=pd;tt.prototype=Object.assign(Object.create(Ei.prototype),{constructor:tt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.name=n.name,this.image=n.image,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.encoding=n.encoding,this},toJSON:function(n){let e=n===void 0||typeof n=="string";if(!e&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];let t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){let i=this.image;if(i.uuid===void 0&&(i.uuid=Re.generateUUID()),!e&&n.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?r.push(Kh(i[o].image)):r.push(Kh(i[o]))}else r=Kh(i);n.images[i.uuid]={uuid:i.uuid,url:r}}t.image=i.uuid}return e||(n.textures[this.uuid]=t),t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(n){if(this.mapping!==pd)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case Ia:n.x=n.x-Math.floor(n.x);break;case Kt:n.x=n.x<0?0:1;break;case ka:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case Ia:n.y=n.y-Math.floor(n.y);break;case Kt:n.y=n.y<0?0:1;break;case ka:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}});Object.defineProperty(tt.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});function Kh(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?So.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var $e=class{constructor(e=0,t=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],p=l[9],m=l[2],y=l[6],_=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-m)<.01&&Math.abs(p-y)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+m)<.1&&Math.abs(p+y)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let v=(c+1)/2,b=(f+1)/2,M=(_+1)/2,x=(d+h)/4,C=(u+m)/4,A=(p+y)/4;return v>b&&v>M?v<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(v),r=x/i,o=C/i):b>M?b<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(b),i=x/r,o=A/r):M<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(M),i=C/o,r=A/o),this.set(i,r,o,t),this}let g=Math.sqrt((y-p)*(y-p)+(u-m)*(u-m)+(h-d)*(h-d));return Math.abs(g)<.001&&(g=1),this.x=(y-p)/g,this.y=(u-m)/g,this.z=(h-d)/g,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}};function Mn(n,e,t){this.width=n,this.height=e,this.scissor=new $e(0,0,n,e),this.scissorTest=!1,this.viewport=new $e(0,0,n,e),t=t||{},this.texture=new tt(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.image={},this.texture.image.width=n,this.texture.image.height=e,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Nt,this.depthBuffer=t.depthBuffer!==void 0?t.depthBuffer:!0,this.stencilBuffer=t.stencilBuffer!==void 0?t.stencilBuffer:!1,this.depthTexture=t.depthTexture!==void 0?t.depthTexture:null}Mn.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Mn,isWebGLRenderTarget:!0,setSize:function(n,e){(this.width!==n||this.height!==e)&&(this.width=n,this.height=e,this.texture.image.width=n,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,n,e),this.scissor.set(0,0,n,e)},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.width=n.width,this.height=n.height,this.viewport.copy(n.viewport),this.texture=n.texture.clone(),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Xf(n,e,t){Mn.call(this,n,e,t),this.samples=4}Xf.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Xf,isWebGLMultisampleRenderTarget:!0,copy:function(n){return Mn.prototype.copy.call(this,n),this.samples=n.samples,this}});var zt=class{constructor(e=0,t=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return i.copy(e).slerp(t,r)}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],c=i[r+1],d=i[r+2],u=i[r+3],h=o[s+0],f=o[s+1],p=o[s+2],m=o[s+3];if(u!==m||l!==h||c!==f||d!==p){let y=1-a,_=l*h+c*f+d*p+u*m,g=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){let M=Math.sqrt(v),x=Math.atan2(M,_*g);y=Math.sin(y*x)/M,a=Math.sin(a*x)/M}let b=a*g;if(l=l*y+h*b,c=c*y+f*b,d=d*y+p*b,u=u*y+m*b,y===1-a){let M=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=M,c*=M,d*=M,u*=M}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],u=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[t]=a*p+d*u+l*f-c*h,e[t+1]=l*p+d*h+c*u-a*f,e[t+2]=c*p+d*f+a*h-l*u,e[t+3]=d*p-a*u-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),u=a(o/2),h=l(i/2),f=l(r/2),p=l(o/2);switch(s){case"XYZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"YZX":this._x=h*d*u+c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u-h*f*p;break;case"XZY":this._x=h*d*u-c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],d=t[6],u=t[10],h=i+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(o-c)*f,this._z=(s-r)*f}else if(i>a&&i>u){let f=2*Math.sqrt(1+i-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+c)/f}else if(a>u){let f=2*Math.sqrt(1+a-i-u);this._w=(o-c)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(l+d)/f}else{let f=2*Math.sqrt(1+u-i-a);this._w=(s-r)/f,this._x=(o+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Re.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+s*a+r*c-o*l,this._y=r*d+s*l+o*a-i*c,this._z=o*d+s*c+i*l-r*a,this._w=s*d-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*o+t*this._z,this.normalize(),this._onChangeCallback(),this}let c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-t)*d)/c,h=Math.sin(t*d)/c;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}},P=class{constructor(e=0,t=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(O0.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(O0.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*r-a*i,d=l*i+a*t-o*r,u=l*r+o*i-s*t,h=-o*t-s*i-a*r;return this.x=c*l+h*-o+d*-a-u*-s,this.y=d*l+h*-s+u*-o-c*-a,this.z=u*l+h*-a+c*-s-d*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Qh.copy(this).projectOnVector(e),this.sub(Qh)}reflect(e){return this.sub(Qh.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Re.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},Qh=new P,O0=new zt,Dn=class{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new P(1/0,1/0,1/0),this.max=t!==void 0?t:new P(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){let d=e[l],u=e[l+1],h=e[l+2];d<t&&(t=d),u<i&&(i=u),h<r&&(r=h),d>o&&(o=d),u>s&&(s=u),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(o,s,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){let d=e.getX(l),u=e.getY(l),h=e.getZ(l);d<t&&(t=d),u<i&&(i=u),h<r&&(r=h),d>o&&(o=d),u>s&&(s=u),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(o,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=ma.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new P),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new P),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);let t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),tf.copy(t.boundingBox),tf.applyMatrix4(e.matrixWorld),this.union(tf));let i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new P),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ma),ma.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ga),wc.subVectors(this.max,ga),Xo.subVectors(e.a,ga),Zo.subVectors(e.b,ga),Jo.subVectors(e.c,ga),cr.subVectors(Zo,Xo),ur.subVectors(Jo,Zo),jr.subVectors(Xo,Jo);let t=[0,-cr.z,cr.y,0,-ur.z,ur.y,0,-jr.z,jr.y,cr.z,0,-cr.x,ur.z,0,-ur.x,jr.z,0,-jr.x,-cr.y,cr.x,0,-ur.y,ur.x,0,-jr.y,jr.x,0];return!ef(t,Xo,Zo,Jo,wc)||(t=[1,0,0,0,1,0,0,0,1],!ef(t,Xo,Zo,Jo,wc))?!1:(Sc.crossVectors(cr,ur),t=[Sc.x,Sc.y,Sc.z],ef(t,Xo,Zo,Jo,wc))}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new P),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ma.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(ma).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ni[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ni[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ni[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ni[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ni[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ni[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ni[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ni[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ni),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};function ef(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Yr.fromArray(n,o);let a=r.x*Math.abs(Yr.x)+r.y*Math.abs(Yr.y)+r.z*Math.abs(Yr.z),l=e.dot(Yr),c=t.dot(Yr),d=i.dot(Yr);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var Ni=[new P,new P,new P,new P,new P,new P,new P,new P],ma=new P,tf=new Dn,Xo=new P,Zo=new P,Jo=new P,cr=new P,ur=new P,jr=new P,ga=new P,wc=new P,Sc=new P,Yr=new P,MM=new Dn,Qn=class{constructor(e,t){this.center=e!==void 0?e:new P,this.radius=t!==void 0?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):MM.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new P),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Dn),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}},zi=new P,nf=new P,Cc=new P,dr=new P,rf=new P,Pc=new P,of=new P,Mr=class{constructor(e,t){this.origin=e!==void 0?e:new P,this.direction=t!==void 0?t:new P(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new P),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zi)),this}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new P),t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=zi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(zi.copy(this.direction).multiplyScalar(t).add(this.origin),zi.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){nf.copy(e).add(t).multiplyScalar(.5),Cc.copy(t).sub(e).normalize(),dr.copy(this.origin).sub(nf);let o=e.distanceTo(t)*.5,s=-this.direction.dot(Cc),a=dr.dot(this.direction),l=-dr.dot(Cc),c=dr.lengthSq(),d=Math.abs(1-s*s),u,h,f,p;if(d>0)if(u=s*l-a,h=s*a-l,p=o*d,u>=0)if(h>=-p)if(h<=p){let m=1/d;u*=m,h*=m,f=u*(u+s*h+2*a)+h*(s*u+h+2*l)+c}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-p?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c):h<=p?(u=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Cc).multiplyScalar(h).add(nf),f}intersectSphere(e,t){zi.subVectors(e.center,this.origin);let i=zi.dot(this.direction),r=zi.dot(zi)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),i>s||o>r||((o>i||i!==i)&&(i=o),(s<r||r!==r)&&(r=s),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,zi)!==null}intersectTriangle(e,t,i,r,o){rf.subVectors(t,e),Pc.subVectors(i,e),of.crossVectors(rf,Pc);let s=this.direction.dot(of),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;dr.subVectors(this.origin,e);let l=a*this.direction.dot(Pc.crossVectors(dr,Pc));if(l<0)return null;let c=a*this.direction.dot(rf.cross(dr));if(c<0||l+c>s)return null;let d=-a*dr.dot(of);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},Ue=class n{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,o,s,a,l,c,d,u,h,f,p,m,y){let _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=o,_[5]=s,_[9]=a,_[13]=l,_[2]=c,_[6]=d,_[10]=u,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/$o.setFromMatrixColumn(e,0).length(),o=1/$o.setFromMatrixColumn(e,1).length(),s=1/$o.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(e.order==="XYZ"){let h=s*d,f=s*u,p=a*d,m=a*u;t[0]=l*d,t[4]=-l*u,t[8]=c,t[1]=f+p*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=p+f*c,t[10]=s*l}else if(e.order==="YXZ"){let h=l*d,f=l*u,p=c*d,m=c*u;t[0]=h+m*a,t[4]=p*a-f,t[8]=s*c,t[1]=s*u,t[5]=s*d,t[9]=-a,t[2]=f*a-p,t[6]=m+h*a,t[10]=s*l}else if(e.order==="ZXY"){let h=l*d,f=l*u,p=c*d,m=c*u;t[0]=h-m*a,t[4]=-s*u,t[8]=p+f*a,t[1]=f+p*a,t[5]=s*d,t[9]=m-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let h=s*d,f=s*u,p=a*d,m=a*u;t[0]=l*d,t[4]=p*c-f,t[8]=h*c+m,t[1]=l*u,t[5]=m*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let h=s*l,f=s*c,p=a*l,m=a*c;t[0]=l*d,t[4]=m-h*u,t[8]=p*u+f,t[1]=u,t[5]=s*d,t[9]=-a*d,t[2]=-c*d,t[6]=f*u+p,t[10]=h-m*u}else if(e.order==="XZY"){let h=s*l,f=s*c,p=a*l,m=a*c;t[0]=l*d,t[4]=-u,t[8]=c*d,t[1]=h*u+m,t[5]=s*d,t[9]=f*u-p,t[2]=p*u-f,t[6]=a*d,t[10]=m*u+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(wM,e,SM)}lookAt(e,t,i){let r=this.elements;return _n.subVectors(e,t),_n.lengthSq()===0&&(_n.z=1),_n.normalize(),hr.crossVectors(i,_n),hr.lengthSq()===0&&(Math.abs(i.z)===1?_n.x+=1e-4:_n.z+=1e-4,_n.normalize(),hr.crossVectors(i,_n)),hr.normalize(),Ec.crossVectors(_n,hr),r[0]=hr.x,r[4]=Ec.x,r[8]=_n.x,r[1]=hr.y,r[5]=Ec.y,r[9]=_n.y,r[2]=hr.z,r[6]=Ec.z,r[10]=_n.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],h=i[9],f=i[13],p=i[2],m=i[6],y=i[10],_=i[14],g=i[3],v=i[7],b=i[11],M=i[15],x=r[0],C=r[4],A=r[8],L=r[12],H=r[1],z=r[5],B=r[9],V=r[13],U=r[2],D=r[6],I=r[10],G=r[14],q=r[3],Z=r[7],Q=r[11],ie=r[15];return o[0]=s*x+a*H+l*U+c*q,o[4]=s*C+a*z+l*D+c*Z,o[8]=s*A+a*B+l*I+c*Q,o[12]=s*L+a*V+l*G+c*ie,o[1]=d*x+u*H+h*U+f*q,o[5]=d*C+u*z+h*D+f*Z,o[9]=d*A+u*B+h*I+f*Q,o[13]=d*L+u*V+h*G+f*ie,o[2]=p*x+m*H+y*U+_*q,o[6]=p*C+m*z+y*D+_*Z,o[10]=p*A+m*B+y*I+_*Q,o[14]=p*L+m*V+y*G+_*ie,o[3]=g*x+v*H+b*U+M*q,o[7]=g*C+v*z+b*D+M*Z,o[11]=g*A+v*B+b*I+M*Q,o[15]=g*L+v*V+b*G+M*ie,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],f=e[14],p=e[3],m=e[7],y=e[11],_=e[15];return p*(+o*l*u-r*c*u-o*a*h+i*c*h+r*a*f-i*l*f)+m*(+t*l*f-t*c*h+o*s*h-r*s*f+r*c*d-o*l*d)+y*(+t*c*u-t*a*f-o*s*u+i*s*f+o*a*d-i*c*d)+_*(-r*a*d-t*l*u+t*a*h+r*s*u-i*s*h+i*l*d)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],f=e[11],p=e[12],m=e[13],y=e[14],_=e[15],g=u*y*c-m*h*c+m*l*f-a*y*f-u*l*_+a*h*_,v=p*h*c-d*y*c-p*l*f+s*y*f+d*l*_-s*h*_,b=d*m*c-p*u*c+p*a*f-s*m*f-d*a*_+s*u*_,M=p*u*l-d*m*l-p*a*h+s*m*h+d*a*y-s*u*y,x=t*g+i*v+r*b+o*M;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let C=1/x;return e[0]=g*C,e[1]=(m*h*o-u*y*o-m*r*f+i*y*f+u*r*_-i*h*_)*C,e[2]=(a*y*o-m*l*o+m*r*c-i*y*c-a*r*_+i*l*_)*C,e[3]=(u*l*o-a*h*o-u*r*c+i*h*c+a*r*f-i*l*f)*C,e[4]=v*C,e[5]=(d*y*o-p*h*o+p*r*f-t*y*f-d*r*_+t*h*_)*C,e[6]=(p*l*o-s*y*o-p*r*c+t*y*c+s*r*_-t*l*_)*C,e[7]=(s*h*o-d*l*o+d*r*c-t*h*c-s*r*f+t*l*f)*C,e[8]=b*C,e[9]=(p*u*o-d*m*o-p*i*f+t*m*f+d*i*_-t*u*_)*C,e[10]=(s*m*o-p*a*o+p*i*c-t*m*c-s*i*_+t*a*_)*C,e[11]=(d*a*o-s*u*o-d*i*c+t*u*c+s*i*f-t*a*f)*C,e[12]=M*C,e[13]=(d*m*r-p*u*r+p*i*h-t*m*h-d*i*y+t*u*y)*C,e[14]=(p*a*r-s*m*r-p*i*l+t*m*l+s*i*y-t*a*y)*C,e[15]=(s*u*r-d*a*r+d*i*l-t*u*l-s*i*h+t*a*h)*C,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,d=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*s,0,c*l-r*a,d*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,d=s+s,u=a+a,h=o*c,f=o*d,p=o*u,m=s*d,y=s*u,_=a*u,g=l*c,v=l*d,b=l*u,M=i.x,x=i.y,C=i.z;return r[0]=(1-(m+_))*M,r[1]=(f+b)*M,r[2]=(p-v)*M,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+_))*x,r[6]=(y+g)*x,r[7]=0,r[8]=(p+v)*C,r[9]=(y-g)*C,r[10]=(1-(h+m))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=$o.set(r[0],r[1],r[2]).length(),s=$o.set(r[4],r[5],r[6]).length(),a=$o.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Yn.copy(this);let c=1/o,d=1/s,u=1/a;return Yn.elements[0]*=c,Yn.elements[1]*=c,Yn.elements[2]*=c,Yn.elements[4]*=d,Yn.elements[5]*=d,Yn.elements[6]*=d,Yn.elements[8]*=u,Yn.elements[9]*=u,Yn.elements[10]*=u,t.setFromRotationMatrix(Yn),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let a=this.elements,l=2*o/(t-e),c=2*o/(i-r),d=(t+e)/(t-e),u=(i+r)/(i-r),h=-(s+o)/(s-o),f=-2*s*o/(s-o);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,o,s){let a=this.elements,l=1/(t-e),c=1/(i-r),d=1/(s-o),u=(t+e)*l,h=(i+r)*c,f=(s+o)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},$o=new P,Yn=new Ue,wM=new P(0,0,0),SM=new P(1,1,1),hr=new P,Ec=new P,_n=new P,_x=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o){return this._x=t,this._y=i,this._z=r,this._order=o||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i,r){let o=Re.clamp,s=t.elements,a=s[0],l=s[4],c=s[8],d=s[1],u=s[5],h=s[9],f=s[2],p=s[6],m=s[10];switch(i=i||this._order,i){case"XYZ":this._y=Math.asin(o(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-o(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,m),this._z=Math.atan2(d,u)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(o(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-l,u)):(this._y=0,this._z=Math.atan2(d,a));break;case"ZYX":this._y=Math.asin(-o(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(d,a)):(this._x=0,this._z=Math.atan2(-l,u));break;case"YZX":this._z=Math.asin(o(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(c,m));break;case"XZY":this._z=Math.asin(-o(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r!==!1&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return A0.makeRotationFromQuaternion(t),this.setFromRotationMatrix(A0,i,r)}setFromVector3(t,i){return this.set(t.x,t.y,t.z,i||this._order)}reorder(t){return L0.setFromEuler(this),this.setFromQuaternion(L0,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new P(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})(),A0=new Ue,L0=new zt,Ua=class{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}},CM=0,R0=new P,Ko=new zt,Ui=new Ue,Tc=new P,_a=new P,PM=new P,EM=new zt,I0=new P(1,0,0),k0=new P(0,1,0),D0=new P(0,0,1),TM={type:"added"},F0={type:"removed"};function ye(){Object.defineProperty(this,"id",{value:CM++}),this.uuid=Re.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ye.DefaultUp.clone();let n=new P,e=new _x,t=new zt,i=new P(1,1,1);function r(){t.setFromEuler(e,!1)}function o(){e.setFromQuaternion(t,void 0,!1)}e._onChange(r),t._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ue},normalMatrix:{value:new Bt}}),this.matrix=new Ue,this.matrixWorld=new Ue,this.matrixAutoUpdate=ye.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ua,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}ye.DefaultUp=new P(0,1,0);ye.DefaultMatrixAutoUpdate=!0;ye.prototype=Object.assign(Object.create(Ei.prototype),{constructor:ye,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(n){return this.quaternion.premultiply(n),this},setRotationFromAxisAngle:function(n,e){this.quaternion.setFromAxisAngle(n,e)},setRotationFromEuler:function(n){this.quaternion.setFromEuler(n,!0)},setRotationFromMatrix:function(n){this.quaternion.setFromRotationMatrix(n)},setRotationFromQuaternion:function(n){this.quaternion.copy(n)},rotateOnAxis:function(n,e){return Ko.setFromAxisAngle(n,e),this.quaternion.multiply(Ko),this},rotateOnWorldAxis:function(n,e){return Ko.setFromAxisAngle(n,e),this.quaternion.premultiply(Ko),this},rotateX:function(n){return this.rotateOnAxis(I0,n)},rotateY:function(n){return this.rotateOnAxis(k0,n)},rotateZ:function(n){return this.rotateOnAxis(D0,n)},translateOnAxis:function(n,e){return R0.copy(n).applyQuaternion(this.quaternion),this.position.add(R0.multiplyScalar(e)),this},translateX:function(n){return this.translateOnAxis(I0,n)},translateY:function(n){return this.translateOnAxis(k0,n)},translateZ:function(n){return this.translateOnAxis(D0,n)},localToWorld:function(n){return n.applyMatrix4(this.matrixWorld)},worldToLocal:function(n){return n.applyMatrix4(Ui.copy(this.matrixWorld).invert())},lookAt:function(n,e,t){n.isVector3?Tc.copy(n):Tc.set(n,e,t);let i=this.parent;this.updateWorldMatrix(!0,!1),_a.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ui.lookAt(_a,Tc,this.up):Ui.lookAt(Tc,_a,this.up),this.quaternion.setFromRotationMatrix(Ui),i&&(Ui.extractRotation(i.matrixWorld),Ko.setFromRotationMatrix(Ui),this.quaternion.premultiply(Ko.invert()))},add:function(n){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.parent!==null&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(TM)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)},remove:function(n){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}let e=this.children.indexOf(n);return e!==-1&&(n.parent=null,this.children.splice(e,1),n.dispatchEvent(F0)),this},clear:function(){for(let n=0;n<this.children.length;n++){let e=this.children[n];e.parent=null,e.dispatchEvent(F0)}return this.children.length=0,this},attach:function(n){return this.updateWorldMatrix(!0,!1),Ui.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),Ui.multiply(n.parent.matrixWorld)),n.applyMatrix4(Ui),n.updateWorldMatrix(!1,!1),this.add(n),this},getObjectById:function(n){return this.getObjectByProperty("id",n)},getObjectByName:function(n){return this.getObjectByProperty("name",n)},getObjectByProperty:function(n,e){if(this[n]===e)return this;for(let t=0,i=this.children.length;t<i;t++){let o=this.children[t].getObjectByProperty(n,e);if(o!==void 0)return o}},getWorldPosition:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),n=new P),this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new zt),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_a,n,PM),n},getWorldScale:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new P),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_a,EM,n),n},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),n=new P),this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return n.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(n){n(this);let e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].traverse(n)},traverseVisible:function(n){if(this.visible===!1)return;n(this);let e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].traverseVisible(n)},traverseAncestors:function(n){let e=this.parent;e!==null&&(n(e),e.traverseAncestors(n))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);let e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateMatrixWorld(n)},updateWorldMatrix:function(n,e){let t=this.parent;if(n===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(n){let e=n===void 0||typeof n=="string",t={};e&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(s,a){return s[a.uuid]===void 0&&(s[a.uuid]=a.toJSON(n)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(n.geometries,this.geometry);let s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){let a=s.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){let d=a[l];r(n.shapes,d)}else r(n.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(n.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let s=[];for(let a=0,l=this.material.length;a<l;a++)s.push(r(n.materials,this.material[a]));i.material=s}else i.material=r(n.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(n).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){let a=this.animations[s];i.animations.push(r(n.animations,a))}}if(e){let s=o(n.geometries),a=o(n.materials),l=o(n.textures),c=o(n.images),d=o(n.shapes),u=o(n.skeletons),h=o(n.animations);s.length>0&&(t.geometries=s),a.length>0&&(t.materials=a),l.length>0&&(t.textures=l),c.length>0&&(t.images=c),d.length>0&&(t.shapes=d),u.length>0&&(t.skeletons=u),h.length>0&&(t.animations=h)}return t.object=i,t;function o(s){let a=[];for(let l in s){let c=s[l];delete c.metadata,a.push(c)}return a}},clone:function(n){return new this.constructor().copy(this,n)},copy:function(n,e=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.userData=JSON.parse(JSON.stringify(n.userData)),e===!0)for(let t=0;t<n.children.length;t++){let i=n.children[t];this.add(i.clone())}return this}});var sf=new P,OM=new P,AM=new Bt,In=class{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new P(1,0,0),this.constant=t!==void 0?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=sf.subVectors(i,t).cross(OM.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new P),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new P);let i=e.delta(sf),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):void 0;let o=-(e.start.dot(this.normal)+this.constant)/r;if(!(o<0||o>1))return t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new P),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||AM.getNormalMatrix(e),r=this.coplanarPoint(sf).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},Xn=new P,Bi=new P,af=new P,Vi=new P,Qo=new P,es=new P,N0=new P,lf=new P,cf=new P,uf=new P,wn=class n{constructor(e,t,i){this.a=e!==void 0?e:new P,this.b=t!==void 0?t:new P,this.c=i!==void 0?i:new P}static getNormal(e,t,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new P),r.subVectors(i,t),Xn.subVectors(e,t),r.cross(Xn);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Xn.subVectors(r,t),Bi.subVectors(i,t),af.subVectors(e,t);let s=Xn.dot(Xn),a=Xn.dot(Bi),l=Xn.dot(af),c=Bi.dot(Bi),d=Bi.dot(af),u=s*c-a*a;if(o===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new P),u===0)return o.set(-2,-1,-1);let h=1/u,f=(c*l-a*d)*h,p=(s*d-a*l)*h;return o.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Vi),Vi.x>=0&&Vi.y>=0&&Vi.x+Vi.y<=1}static getUV(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,Vi),l.set(0,0),l.addScaledVector(o,Vi.x),l.addScaledVector(s,Vi.y),l.addScaledVector(a,Vi.z),l}static isFrontFacing(e,t,i,r){return Xn.subVectors(i,t),Bi.subVectors(e,t),Xn.cross(Bi).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xn.subVectors(this.c,this.b),Bi.subVectors(this.a,this.b),Xn.cross(Bi).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new P),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new In),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,o){return n.getUV(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new P);let i=this.a,r=this.b,o=this.c,s,a;Qo.subVectors(r,i),es.subVectors(o,i),lf.subVectors(e,i);let l=Qo.dot(lf),c=es.dot(lf);if(l<=0&&c<=0)return t.copy(i);cf.subVectors(e,r);let d=Qo.dot(cf),u=es.dot(cf);if(d>=0&&u<=d)return t.copy(r);let h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(i).addScaledVector(Qo,s);uf.subVectors(e,o);let f=Qo.dot(uf),p=es.dot(uf);if(p>=0&&f<=p)return t.copy(o);let m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(es,a);let y=d*p-f*u;if(y<=0&&u-d>=0&&f-p>=0)return N0.subVectors(o,r),a=(u-d)/(u-d+(f-p)),t.copy(r).addScaledVector(N0,a);let _=1/(y+m+h);return s=m*_,a=h*_,t.copy(i).addScaledVector(Qo,s).addScaledVector(es,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},z0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zn={h:0,s:0,l:0},Oc={h:0,s:0,l:0};function df(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function hf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ff(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var fe=(()=>{class n{constructor(t,i,r){return Object.defineProperty(this,"isColor",{value:!0}),i===void 0&&r===void 0?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,i,r){return this.r=t,this.g=i,this.b=r,this}setHSL(t,i,r){if(t=Re.euclideanModulo(t,1),i=Re.clamp(i,0,1),r=Re.clamp(r,0,1),i===0)this.r=this.g=this.b=r;else{let o=r<=.5?r*(1+i):r+i-r*i,s=2*r-o;this.r=df(s,o,t+1/3),this.g=df(s,o,t),this.b=df(s,o,t-1/3)}return this}setStyle(t){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,i(o[4]),this;if(o=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,i(o[4]),this;break;case"hsl":case"hsla":if(o=/^(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let l=parseFloat(o[1])/360,c=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(l,c,d)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){let i=z0[t];return i!==void 0?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,i=2){return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}copyLinearToGamma(t,i=2){let r=i>0?1/i:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=hf(t.r),this.g=hf(t.g),this.b=hf(t.b),this}copyLinearToSRGB(t){return this.r=ff(t.r),this.g=ff(t.g),this.b=ff(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});let i=this.r,r=this.g,o=this.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,c,d=(a+s)/2;if(a===s)l=0,c=0;else{let u=s-a;switch(c=d<=.5?u/(s+a):u/(2-s-a),s){case i:l=(r-o)/u+(r<o?6:0);break;case r:l=(o-i)/u+2;break;case o:l=(i-r)/u+4;break}l/=6}return t.h=l,t.s=c,t.l=d,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,i,r){return this.getHSL(Zn),Zn.h+=t,Zn.s+=i,Zn.l+=r,this.setHSL(Zn.h,Zn.s,Zn.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpHSL(t,i){this.getHSL(Zn),t.getHSL(Oc);let r=Re.lerp(Zn.h,Oc.h,i),o=Re.lerp(Zn.s,Oc.s,i),s=Re.lerp(Zn.l,Oc.l,i);return this.setHSL(r,o,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=z0,n})();fe.prototype.r=1;fe.prototype.g=1;fe.prototype.b=1;var ao=class{constructor(e,t,i,r,o,s=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new P,this.vertexNormals=Array.isArray(r)?r:[],this.color=o&&o.isColor?o:new fe,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},LM=0;function Oe(){Object.defineProperty(this,"id",{value:LM++}),this.uuid=Re.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=gs,this.side=ks,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ip,this.blendDst=kp,this.blendEquation=to,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gx,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=du,this.stencilZFail=du,this.stencilZPass=du,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Oe.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Oe,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(n){if(n!==void 0)for(let e in n){let t=n[e];if(t===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Rp;continue}let i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(t):i&&i.isVector3&&t&&t.isVector3?i.copy(t):this[e]=t}},toJSON:function(n){let e=n===void 0||typeof n=="string";e&&(n={textures:{},images:{}});let t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(t.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(n).uuid),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(n).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(n).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(n).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(n).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(n).uuid,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,this.combine!==void 0&&(t.combine=this.combine),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(n).uuid),this.size!==void 0&&(t.size=this.size),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==gs&&(t.blending=this.blending),this.flatShading===!0&&(t.flatShading=this.flatShading),this.side!==ks&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(t.morphTargets=!0),this.morphNormals===!0&&(t.morphNormals=!0),this.skinning===!0&&(t.skinning=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function i(r){let o=[];for(let s in r){let a=r[s];delete a.metadata,o.push(a)}return o}if(e){let r=i(n.textures),o=i(n.images);r.length>0&&(t.textures=r),o.length>0&&(t.images=o)}return t},clone:function(){return new this.constructor().copy(this)},copy:function(n){this.name=n.name,this.fog=n.fog,this.blending=n.blending,this.side=n.side,this.flatShading=n.flatShading,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;let e=n.clippingPlanes,t=null;if(e!==null){let i=e.length;t=new Array(i);for(let r=0;r!==i;++r)t[r]=e[r].clone()}return this.clippingPlanes=t,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.premultipliedAlpha=n.premultipliedAlpha,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Oe.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});function Fn(n){Oe.call(this),this.type="MeshBasicMaterial",this.color=new fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=El,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(n)}Fn.prototype=Object.create(Oe.prototype);Fn.prototype.constructor=Fn;Fn.prototype.isMeshBasicMaterial=!0;Fn.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this};var st=new P,Ac=new $;function Ce(n,e,t){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=n,this.itemSize=e,this.count=n!==void 0?n.length/e:0,this.normalized=t===!0,this.usage=Rl,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(Ce.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(Ce.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.itemSize,t*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[n+i]=e.array[t+i];return this},copyArray:function(n){return this.array.set(n),this},copyColorsArray:function(n){let e=this.array,t=0;for(let i=0,r=n.length;i<r;i++){let o=n[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new fe),e[t++]=o.r,e[t++]=o.g,e[t++]=o.b}return this},copyVector2sArray:function(n){let e=this.array,t=0;for(let i=0,r=n.length;i<r;i++){let o=n[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new $),e[t++]=o.x,e[t++]=o.y}return this},copyVector3sArray:function(n){let e=this.array,t=0;for(let i=0,r=n.length;i<r;i++){let o=n[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new P),e[t++]=o.x,e[t++]=o.y,e[t++]=o.z}return this},copyVector4sArray:function(n){let e=this.array,t=0;for(let i=0,r=n.length;i<r;i++){let o=n[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new $e),e[t++]=o.x,e[t++]=o.y,e[t++]=o.z,e[t++]=o.w}return this},applyMatrix3:function(n){if(this.itemSize===2)for(let e=0,t=this.count;e<t;e++)Ac.fromBufferAttribute(this,e),Ac.applyMatrix3(n),this.setXY(e,Ac.x,Ac.y);else if(this.itemSize===3)for(let e=0,t=this.count;e<t;e++)st.fromBufferAttribute(this,e),st.applyMatrix3(n),this.setXYZ(e,st.x,st.y,st.z);return this},applyMatrix4:function(n){for(let e=0,t=this.count;e<t;e++)st.x=this.getX(e),st.y=this.getY(e),st.z=this.getZ(e),st.applyMatrix4(n),this.setXYZ(e,st.x,st.y,st.z);return this},applyNormalMatrix:function(n){for(let e=0,t=this.count;e<t;e++)st.x=this.getX(e),st.y=this.getY(e),st.z=this.getZ(e),st.applyNormalMatrix(n),this.setXYZ(e,st.x,st.y,st.z);return this},transformDirection:function(n){for(let e=0,t=this.count;e<t;e++)st.x=this.getX(e),st.y=this.getY(e),st.z=this.getZ(e),st.transformDirection(n),this.setXYZ(e,st.x,st.y,st.z);return this},set:function(n,e=0){return this.array.set(n,e),this},getX:function(n){return this.array[n*this.itemSize]},setX:function(n,e){return this.array[n*this.itemSize]=e,this},getY:function(n){return this.array[n*this.itemSize+1]},setY:function(n,e){return this.array[n*this.itemSize+1]=e,this},getZ:function(n){return this.array[n*this.itemSize+2]},setZ:function(n,e){return this.array[n*this.itemSize+2]=e,this},getW:function(n){return this.array[n*this.itemSize+3]},setW:function(n,e){return this.array[n*this.itemSize+3]=e,this},setXY:function(n,e,t){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this},setXYZ:function(n,e,t,i){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=i,this},setXYZW:function(n,e,t,i,r){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=i,this.array[n+3]=r,this},onUpload:function(n){return this.onUploadCallback=n,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Ba(n,e,t){Ce.call(this,new Int8Array(n),e,t)}Ba.prototype=Object.create(Ce.prototype);Ba.prototype.constructor=Ba;function Va(n,e,t){Ce.call(this,new Uint8Array(n),e,t)}Va.prototype=Object.create(Ce.prototype);Va.prototype.constructor=Va;function Ga(n,e,t){Ce.call(this,new Uint8ClampedArray(n),e,t)}Ga.prototype=Object.create(Ce.prototype);Ga.prototype.constructor=Ga;function Ha(n,e,t){Ce.call(this,new Int16Array(n),e,t)}Ha.prototype=Object.create(Ce.prototype);Ha.prototype.constructor=Ha;function lo(n,e,t){Ce.call(this,new Uint16Array(n),e,t)}lo.prototype=Object.create(Ce.prototype);lo.prototype.constructor=lo;function Wa(n,e,t){Ce.call(this,new Int32Array(n),e,t)}Wa.prototype=Object.create(Ce.prototype);Wa.prototype.constructor=Wa;function co(n,e,t){Ce.call(this,new Uint32Array(n),e,t)}co.prototype=Object.create(Ce.prototype);co.prototype.constructor=co;function qa(n,e,t){Ce.call(this,new Uint16Array(n),e,t)}qa.prototype=Object.create(Ce.prototype);qa.prototype.constructor=qa;qa.prototype.isFloat16BufferAttribute=!0;function ce(n,e,t){Ce.call(this,new Float32Array(n),e,t)}ce.prototype=Object.create(Ce.prototype);ce.prototype.constructor=ce;function ja(n,e,t){Ce.call(this,new Float64Array(n),e,t)}ja.prototype=Object.create(Ce.prototype);ja.prototype.constructor=ja;var Zf=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,o,s=e.faces;for(r=0;r<s.length;r++){let a=s[r];a.materialIndex!==o&&(o=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:o})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,o=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length,c;if(l>0){c=[];for(let _=0;_<l;_++)c[_]={name:a[_].name,data:[]};this.morphTargets.position=c}let d=e.morphNormals,u=d.length,h;if(u>0){h=[];for(let _=0;_<u;_++)h[_]={name:d[_].name,data:[]};this.morphTargets.normal=h}let f=e.skinIndices,p=e.skinWeights,m=f.length===i.length,y=p.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let _=0;_<t.length;_++){let g=t[_];this.vertices.push(i[g.a],i[g.b],i[g.c]);let v=g.vertexNormals;if(v.length===3)this.normals.push(v[0],v[1],v[2]);else{let M=g.normal;this.normals.push(M,M,M)}let b=g.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let M=g.color;this.colors.push(M,M,M)}if(o===!0){let M=r[0][_];M!==void 0?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",_),this.uvs.push(new $,new $,new $))}if(s===!0){let M=r[1][_];M!==void 0?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",_),this.uvs2.push(new $,new $,new $))}for(let M=0;M<l;M++){let x=a[M].vertices;c[M].data.push(x[g.a],x[g.b],x[g.c])}for(let M=0;M<u;M++){let x=d[M].vertexNormals[_];h[M].data.push(x.a,x.b,x.c)}m&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),y&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}};function yx(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}var RM={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ca(n,e){return new RM[n](e)}var IM=1,yi=new Ue,pf=new ye,ts=new P,yn=new Dn,ya=new Dn,Ft=new P;function Se(){Object.defineProperty(this,"id",{value:IM+=2}),this.uuid=Re.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Se.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Se,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(n){return Array.isArray(n)?this.index=new(yx(n)>65535?co:lo)(n,1):this.index=n,this},getAttribute:function(n){return this.attributes[n]},setAttribute:function(n,e){return this.attributes[n]=e,this},deleteAttribute:function(n){return delete this.attributes[n],this},hasAttribute:function(n){return this.attributes[n]!==void 0},addGroup:function(n,e,t=0){this.groups.push({start:n,count:e,materialIndex:t})},clearGroups:function(){this.groups=[]},setDrawRange:function(n,e){this.drawRange.start=n,this.drawRange.count=e},applyMatrix4:function(n){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(n),e.needsUpdate=!0);let t=this.attributes.normal;if(t!==void 0){let r=new Bt().getNormalMatrix(n);t.applyNormalMatrix(r),t.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(n),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(n){return yi.makeRotationX(n),this.applyMatrix4(yi),this},rotateY:function(n){return yi.makeRotationY(n),this.applyMatrix4(yi),this},rotateZ:function(n){return yi.makeRotationZ(n),this.applyMatrix4(yi),this},translate:function(n,e,t){return yi.makeTranslation(n,e,t),this.applyMatrix4(yi),this},scale:function(n,e,t){return yi.makeScale(n,e,t),this.applyMatrix4(yi),this},lookAt:function(n){return pf.lookAt(n),pf.updateMatrix(),this.applyMatrix4(pf.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ts).negate(),this.translate(ts.x,ts.y,ts.z),this},setFromObject:function(n){let e=n.geometry;if(n.isPoints||n.isLine){let t=new ce(e.vertices.length*3,3),i=new ce(e.colors.length*3,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){let r=new ce(e.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else n.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(n){let e=[];for(let t=0,i=n.length;t<i;t++){let r=n[t];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new ce(e,3)),this},updateFromObject:function(n){let e=n.geometry;if(n.isMesh){let t=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(t=void 0,e.elementsNeedUpdate=!1),t===void 0)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(e.verticesNeedUpdate===!0){let t=this.attributes.position;t!==void 0&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){let t=this.attributes.normal;t!==void 0&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){let t=this.attributes.color;t!==void 0&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){let t=this.attributes.uv;t!==void 0&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){let t=this.attributes.lineDistance;t!==void 0&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(n.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(n){return n.__directGeometry=new Zf().fromGeometry(n),this.fromDirectGeometry(n.__directGeometry)},fromDirectGeometry:function(n){let e=new Float32Array(n.vertices.length*3);if(this.setAttribute("position",new Ce(e,3).copyVector3sArray(n.vertices)),n.normals.length>0){let t=new Float32Array(n.normals.length*3);this.setAttribute("normal",new Ce(t,3).copyVector3sArray(n.normals))}if(n.colors.length>0){let t=new Float32Array(n.colors.length*3);this.setAttribute("color",new Ce(t,3).copyColorsArray(n.colors))}if(n.uvs.length>0){let t=new Float32Array(n.uvs.length*2);this.setAttribute("uv",new Ce(t,2).copyVector2sArray(n.uvs))}if(n.uvs2.length>0){let t=new Float32Array(n.uvs2.length*2);this.setAttribute("uv2",new Ce(t,2).copyVector2sArray(n.uvs2))}this.groups=n.groups;for(let t in n.morphTargets){let i=[],r=n.morphTargets[t];for(let o=0,s=r.length;o<s;o++){let a=r[o],l=new ce(a.data.length*3,3);l.name=a.name,i.push(l.copyVector3sArray(a.data))}this.morphAttributes[t]=i}if(n.skinIndices.length>0){let t=new ce(n.skinIndices.length*4,4);this.setAttribute("skinIndex",t.copyVector4sArray(n.skinIndices))}if(n.skinWeights.length>0){let t=new ce(n.skinWeights.length*4,4);this.setAttribute("skinWeight",t.copyVector4sArray(n.skinWeights))}return n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Dn);let n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new P(-1/0,-1/0,-1/0),new P(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),e)for(let t=0,i=e.length;t<i;t++){let r=e[t];yn.setFromBufferAttribute(r),this.morphTargetsRelative?(Ft.addVectors(this.boundingBox.min,yn.min),this.boundingBox.expandByPoint(Ft),Ft.addVectors(this.boundingBox.max,yn.max),this.boundingBox.expandByPoint(Ft)):(this.boundingBox.expandByPoint(yn.min),this.boundingBox.expandByPoint(yn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Qn);let n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new P,1/0);return}if(n){let t=this.boundingSphere.center;if(yn.setFromBufferAttribute(n),e)for(let r=0,o=e.length;r<o;r++){let s=e[r];ya.setFromBufferAttribute(s),this.morphTargetsRelative?(Ft.addVectors(yn.min,ya.min),yn.expandByPoint(Ft),Ft.addVectors(yn.max,ya.max),yn.expandByPoint(Ft)):(yn.expandByPoint(ya.min),yn.expandByPoint(ya.max))}yn.getCenter(t);let i=0;for(let r=0,o=n.count;r<o;r++)Ft.fromBufferAttribute(n,r),i=Math.max(i,t.distanceToSquared(Ft));if(e)for(let r=0,o=e.length;r<o;r++){let s=e[r],a=this.morphTargetsRelative;for(let l=0,c=s.count;l<c;l++)Ft.fromBufferAttribute(s,l),a&&(ts.fromBufferAttribute(n,l),Ft.add(ts)),i=Math.max(i,t.distanceToSquared(Ft))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){let n=this.index,e=this.getAttribute("position");if(e!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new Ce(new Float32Array(e.count*3),3),this.setAttribute("normal",t);else for(let u=0,h=t.count;u<h;u++)t.setXYZ(u,0,0,0);let i=new P,r=new P,o=new P,s=new P,a=new P,l=new P,c=new P,d=new P;if(n)for(let u=0,h=n.count;u<h;u+=3){let f=n.getX(u+0),p=n.getX(u+1),m=n.getX(u+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,p),o.fromBufferAttribute(e,m),c.subVectors(o,r),d.subVectors(i,r),c.cross(d),s.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),l.fromBufferAttribute(t,m),s.add(c),a.add(c),l.add(c),t.setXYZ(f,s.x,s.y,s.z),t.setXYZ(p,a.x,a.y,a.z),t.setXYZ(m,l.x,l.y,l.z)}else for(let u=0,h=e.count;u<h;u+=3)i.fromBufferAttribute(e,u+0),r.fromBufferAttribute(e,u+1),o.fromBufferAttribute(e,u+2),c.subVectors(o,r),d.subVectors(i,r),c.cross(d),t.setXYZ(u+0,c.x,c.y,c.z),t.setXYZ(u+1,c.x,c.y,c.z),t.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),t.needsUpdate=!0}},merge:function(n,e){if(!(n&&n.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",n);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let t=this.attributes;for(let i in t){if(n.attributes[i]===void 0)continue;let o=t[i].array,s=n.attributes[i],a=s.array,l=s.itemSize*e,c=Math.min(a.length,o.length-l);for(let d=0,u=l;d<c;d++,u++)o[u]=a[d]}return this},normalizeNormals:function(){let n=this.attributes.normal;for(let e=0,t=n.count;e<t;e++)Ft.fromBufferAttribute(n,e),Ft.normalize(),n.setXYZ(e,Ft.x,Ft.y,Ft.z)},toNonIndexed:function(){function n(s,a){let l=s.array,c=s.itemSize,d=s.normalized,u=new l.constructor(a.length*c),h=0,f=0;for(let p=0,m=a.length;p<m;p++){h=a[p]*c;for(let y=0;y<c;y++)u[f++]=l[h++]}return new Ce(u,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;let e=new Se,t=this.index.array,i=this.attributes;for(let s in i){let a=i[s],l=n(a,t);e.setAttribute(s,l)}let r=this.morphAttributes;for(let s in r){let a=[],l=r[s];for(let c=0,d=l.length;c<d;c++){let u=l[c],h=n(u,t);a.push(h)}e.morphAttributes[s]=a}e.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let s=0,a=o.length;s<a;s++){let l=o[s];e.addGroup(l.start,l.count,l.materialIndex)}return e},toJSON:function(){let n={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){let a=this.parameters;for(let l in a)a[l]!==void 0&&(n[l]=a[l]);return n}n.data={attributes:{}};let e=this.index;e!==null&&(n.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let t=this.attributes;for(let a in t){let l=t[a],c=l.toJSON(n.data);l.name!==""&&(c.name=l.name),n.data.attributes[a]=c}let i={},r=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let d=0,u=l.length;d<u;d++){let h=l[d],f=h.toJSON(n.data);h.name!==""&&(f.name=h.name),c.push(f)}c.length>0&&(i[a]=c,r=!0)}r&&(n.data.morphAttributes=i,n.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(n.data.groups=JSON.parse(JSON.stringify(o)));let s=this.boundingSphere;return s!==null&&(n.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),n},clone:function(){return new Se().copy(this)},copy:function(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=n.name;let t=n.index;t!==null&&this.setIndex(t.clone(e));let i=n.attributes;for(let l in i){let c=i[l];this.setAttribute(l,c.clone(e))}let r=n.morphAttributes;for(let l in r){let c=[],d=r[l];for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=n.morphTargetsRelative;let o=n.groups;for(let l=0,c=o.length;l<c;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let s=n.boundingBox;s!==null&&(this.boundingBox=s.clone());let a=n.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var U0=new Ue,Xr=new Mr,mf=new Qn,fr=new P,pr=new P,mr=new P,gf=new P,_f=new P,yf=new P,Lc=new P,Rc=new P,Ic=new P,hs=new $,fs=new $,ps=new $,Oa=new P,kc=new P;function ct(n=new Se,e=new Fn){ye.call(this),this.type="Mesh",this.geometry=n,this.material=e,this.updateMorphTargets()}ct.prototype=Object.assign(Object.create(ye.prototype),{constructor:ct,isMesh:!0,copy:function(n){return ye.prototype.copy.call(this,n),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=n.material,this.geometry=n.geometry,this},updateMorphTargets:function(){let n=this.geometry;if(n.isBufferGeometry){let e=n.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{let e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(n,e){let t=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(t.boundingSphere===null&&t.computeBoundingSphere(),mf.copy(t.boundingSphere),mf.applyMatrix4(r),n.ray.intersectsSphere(mf)===!1)||(U0.copy(r).invert(),Xr.copy(n.ray).applyMatrix4(U0),t.boundingBox!==null&&Xr.intersectsBox(t.boundingBox)===!1))return;let o;if(t.isBufferGeometry){let s=t.index,a=t.attributes.position,l=t.morphAttributes.position,c=t.morphTargetsRelative,d=t.attributes.uv,u=t.attributes.uv2,h=t.groups,f=t.drawRange;if(s!==null)if(Array.isArray(i))for(let p=0,m=h.length;p<m;p++){let y=h[p],_=i[y.materialIndex],g=Math.max(y.start,f.start),v=Math.min(y.start+y.count,f.start+f.count);for(let b=g,M=v;b<M;b+=3){let x=s.getX(b),C=s.getX(b+1),A=s.getX(b+2);o=Dc(this,_,n,Xr,a,l,c,d,u,x,C,A),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=y.materialIndex,e.push(o))}}else{let p=Math.max(0,f.start),m=Math.min(s.count,f.start+f.count);for(let y=p,_=m;y<_;y+=3){let g=s.getX(y),v=s.getX(y+1),b=s.getX(y+2);o=Dc(this,i,n,Xr,a,l,c,d,u,g,v,b),o&&(o.faceIndex=Math.floor(y/3),e.push(o))}}else if(a!==void 0)if(Array.isArray(i))for(let p=0,m=h.length;p<m;p++){let y=h[p],_=i[y.materialIndex],g=Math.max(y.start,f.start),v=Math.min(y.start+y.count,f.start+f.count);for(let b=g,M=v;b<M;b+=3){let x=b,C=b+1,A=b+2;o=Dc(this,_,n,Xr,a,l,c,d,u,x,C,A),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=y.materialIndex,e.push(o))}}else{let p=Math.max(0,f.start),m=Math.min(a.count,f.start+f.count);for(let y=p,_=m;y<_;y+=3){let g=y,v=y+1,b=y+2;o=Dc(this,i,n,Xr,a,l,c,d,u,g,v,b),o&&(o.faceIndex=Math.floor(y/3),e.push(o))}}}else if(t.isGeometry){let s=Array.isArray(i),a=t.vertices,l=t.faces,c,d=t.faceVertexUvs[0];d.length>0&&(c=d);for(let u=0,h=l.length;u<h;u++){let f=l[u],p=s?i[f.materialIndex]:i;if(p===void 0)continue;let m=a[f.a],y=a[f.b],_=a[f.c];if(o=xx(this,p,n,Xr,m,y,_,Oa),o){if(c&&c[u]){let g=c[u];hs.copy(g[0]),fs.copy(g[1]),ps.copy(g[2]),o.uv=wn.getUV(Oa,m,y,_,hs,fs,ps,new $)}o.face=f,o.faceIndex=u,e.push(o)}}}}});function xx(n,e,t,i,r,o,s,a){let l;if(e.side===Lt?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side!==Pl,a),l===null)return null;kc.copy(a),kc.applyMatrix4(n.matrixWorld);let c=t.ray.origin.distanceTo(kc);return c<t.near||c>t.far?null:{distance:c,point:kc.clone(),object:n}}function Dc(n,e,t,i,r,o,s,a,l,c,d,u){fr.fromBufferAttribute(r,c),pr.fromBufferAttribute(r,d),mr.fromBufferAttribute(r,u);let h=n.morphTargetInfluences;if(e.morphTargets&&o&&h){Lc.set(0,0,0),Rc.set(0,0,0),Ic.set(0,0,0);for(let p=0,m=o.length;p<m;p++){let y=h[p],_=o[p];y!==0&&(gf.fromBufferAttribute(_,c),_f.fromBufferAttribute(_,d),yf.fromBufferAttribute(_,u),s?(Lc.addScaledVector(gf,y),Rc.addScaledVector(_f,y),Ic.addScaledVector(yf,y)):(Lc.addScaledVector(gf.sub(fr),y),Rc.addScaledVector(_f.sub(pr),y),Ic.addScaledVector(yf.sub(mr),y)))}fr.add(Lc),pr.add(Rc),mr.add(Ic)}n.isSkinnedMesh&&(n.boneTransform(c,fr),n.boneTransform(d,pr),n.boneTransform(u,mr));let f=xx(n,e,t,i,fr,pr,mr,Oa);if(f){a&&(hs.fromBufferAttribute(a,c),fs.fromBufferAttribute(a,d),ps.fromBufferAttribute(a,u),f.uv=wn.getUV(Oa,fr,pr,mr,hs,fs,ps,new $)),l&&(hs.fromBufferAttribute(l,c),fs.fromBufferAttribute(l,d),ps.fromBufferAttribute(l,u),f.uv2=wn.getUV(Oa,fr,pr,mr,hs,fs,ps,new $));let p=new ao(c,d,u);wn.getNormal(fr,pr,mr,p.normal),f.face=p}return f}var uo=class extends Se{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],c=[],d=[],u=[],h=0,f=0;p("z","y","x",-1,-1,i,t,e,s,o,0),p("z","y","x",1,-1,i,t,-e,s,o,1),p("x","z","y",1,1,e,i,t,r,s,2),p("x","z","y",1,-1,e,i,-t,r,s,3),p("x","y","z",1,-1,e,t,i,r,o,4),p("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new ce(c,3)),this.setAttribute("normal",new ce(d,3)),this.setAttribute("uv",new ce(u,2));function p(m,y,_,g,v,b,M,x,C,A,L){let H=b/C,z=M/A,B=b/2,V=M/2,U=x/2,D=C+1,I=A+1,G=0,q=0,Z=new P;for(let Q=0;Q<I;Q++){let ie=Q*z-V;for(let ge=0;ge<D;ge++){let Pe=ge*H-B;Z[m]=Pe*g,Z[y]=ie*v,Z[_]=U,c.push(Z.x,Z.y,Z.z),Z[m]=0,Z[y]=0,Z[_]=x>0?1:-1,d.push(Z.x,Z.y,Z.z),u.push(ge/C),u.push(1-Q/A),G+=1}}for(let Q=0;Q<A;Q++)for(let ie=0;ie<C;ie++){let ge=h+ie+D*Q,Pe=h+ie+D*(Q+1),ve=h+(ie+1)+D*(Q+1),X=h+(ie+1)+D*Q;l.push(ge,Pe,X),l.push(Pe,ve,X),q+=6}a.addGroup(f,q,L),f+=q,h+=G}}};function vs(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function jt(n){let e={};for(let t=0;t<n.length;t++){let i=vs(n[t]);for(let r in i)e[r]=i[r]}return e}var vx={clone:vs,merge:jt},kM=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,DM=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function en(n){Oe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=kM,this.fragmentShader=DM,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&(n.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(n))}en.prototype=Object.create(Oe.prototype);en.prototype.constructor=en;en.prototype.isShaderMaterial=!0;en.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=vs(n.uniforms),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.lights=n.lights,this.clipping=n.clipping,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this};en.prototype.toJSON=function(n){let e=Oe.prototype.toJSON.call(this,n);e.glslVersion=this.glslVersion,e.uniforms={};for(let i in this.uniforms){let o=this.uniforms[i].value;o&&o.isTexture?e.uniforms[i]={type:"t",value:o.toJSON(n).uuid}:o&&o.isColor?e.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[i]={type:"m4",value:o.toArray()}:e.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let t={};for(let i in this.extensions)this.extensions[i]===!0&&(t[i]=!0);return Object.keys(t).length>0&&(e.extensions=t),e};function Mi(){ye.call(this),this.type="Camera",this.matrixWorldInverse=new Ue,this.projectionMatrix=new Ue,this.projectionMatrixInverse=new Ue}Mi.prototype=Object.assign(Object.create(ye.prototype),{constructor:Mi,isCamera:!0,copy:function(n,e){return ye.prototype.copy.call(this,n,e),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),n=new P),this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return n.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(n){ye.prototype.updateMatrixWorld.call(this,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(n,e){ye.prototype.updateWorldMatrix.call(this,n,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function Tt(n=50,e=1,t=.1,i=2e3){Mi.call(this),this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=t,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Tt.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Tt,isPerspectiveCamera:!0,copy:function(n,e){return Mi.prototype.copy.call(this,n,e),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this},setFocalLength:function(n){let e=.5*this.getFilmHeight()/n;this.fov=Re.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){let n=Math.tan(Re.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n},getEffectiveFOV:function(){return Re.RAD2DEG*2*Math.atan(Math.tan(Re.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(n,e,t,i,r,o){this.aspect=n/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){let n=this.near,e=n*Math.tan(Re.DEG2RAD*.5*this.fov)/this.zoom,t=2*e,i=this.aspect*t,r=-.5*i,o=this.view;if(this.view!==null&&this.view.enabled){let a=o.fullWidth,l=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*t/l,i*=o.width/a,t*=o.height/l}let s=this.filmOffset;s!==0&&(r+=n*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-t,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){let e=ye.prototype.toJSON.call(this,n);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var ns=90,is=1;function ho(n,e,t){if(ye.call(this),this.type="CubeCamera",t.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=t;let i=new Tt(ns,is,n,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new P(1,0,0)),this.add(i);let r=new Tt(ns,is,n,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new P(-1,0,0)),this.add(r);let o=new Tt(ns,is,n,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new P(0,1,0)),this.add(o);let s=new Tt(ns,is,n,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new P(0,-1,0)),this.add(s);let a=new Tt(ns,is,n,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new P(0,0,1)),this.add(a);let l=new Tt(ns,is,n,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new P(0,0,-1)),this.add(l),this.update=function(c,d){this.parent===null&&this.updateMatrixWorld();let u=c.xr.enabled,h=c.getRenderTarget();c.xr.enabled=!1;let f=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,c.setRenderTarget(t,0),c.render(d,i),c.setRenderTarget(t,1),c.render(d,r),c.setRenderTarget(t,2),c.render(d,o),c.setRenderTarget(t,3),c.render(d,s),c.setRenderTarget(t,4),c.render(d,a),t.texture.generateMipmaps=f,c.setRenderTarget(t,5),c.render(d,l),c.setRenderTarget(h),c.xr.enabled=u}}ho.prototype=Object.create(ye.prototype);ho.prototype.constructor=ho;function wi(n,e,t,i,r,o,s,a,l,c){n=n!==void 0?n:[],e=e!==void 0?e:Tl,s=s!==void 0?s:yr,tt.call(this,n,e,t,i,r,o,s,a,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}wi.prototype=Object.create(tt.prototype);wi.prototype.constructor=wi;wi.prototype.isCubeTexture=!0;Object.defineProperty(wi.prototype,"images",{get:function(){return this.image},set:function(n){this.image=n}});function ji(n,e,t){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=t),Mn.call(this,n,n,e),e=e||{},this.texture=new wi(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}ji.prototype=Object.create(Mn.prototype);ji.prototype.constructor=ji;ji.prototype.isWebGLCubeRenderTarget=!0;ji.prototype.fromEquirectangularTexture=function(n,e){this.texture.type=e.type,this.texture.format=bn,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let t={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},i=new uo(5,5,5),r=new en({name:"CubemapFromEquirect",uniforms:vs(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:Lt,blending:Wi});r.uniforms.tEquirect.value=e;let o=new ct(i,r),s=e.minFilter;return e.minFilter===Fs&&(e.minFilter=Nt),new ho(1,10,this).update(n,o),e.minFilter=s,o.geometry.dispose(),o.material.dispose(),this};ji.prototype.clear=function(n,e,t,i){let r=n.getRenderTarget();for(let o=0;o<6;o++)n.setRenderTarget(this,o),n.clear(e,t,i);n.setRenderTarget(r)};function Yi(n,e,t,i,r,o,s,a,l,c,d,u){tt.call(this,null,o,s,a,l,c,i,r,d,u),this.image={data:n||null,width:e||1,height:t||1},this.magFilter=l!==void 0?l:Rt,this.minFilter=c!==void 0?c:Rt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Yi.prototype=Object.create(tt.prototype);Yi.prototype.constructor=Yi;Yi.prototype.isDataTexture=!0;var rs=new Qn,Fc=new P,fo=class{constructor(e,t,i,r,o,s){this.planes=[e!==void 0?e:new In,t!==void 0?t:new In,i!==void 0?i:new In,r!==void 0?r:new In,o!==void 0?o:new In,s!==void 0?s:new In]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}clone(){return new this.constructor().copy(this)}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],d=i[6],u=i[7],h=i[8],f=i[9],p=i[10],m=i[11],y=i[12],_=i[13],g=i[14],v=i[15];return t[0].setComponents(a-r,u-l,m-h,v-y).normalize(),t[1].setComponents(a+r,u+l,m+h,v+y).normalize(),t[2].setComponents(a+o,u+c,m+f,v+_).normalize(),t[3].setComponents(a-o,u-c,m-f,v-_).normalize(),t[4].setComponents(a-s,u-d,m-p,v-g).normalize(),t[5].setComponents(a+s,u+d,m+p,v+g).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),rs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(rs)}intersectsSprite(e){return rs.center.set(0,0,0),rs.radius=.7071067811865476,rs.applyMatrix4(e.matrixWorld),this.intersectsSphere(rs)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Fc.x=r.normal.x>0?e.max.x:e.min.x,Fc.y=r.normal.y>0?e.max.y:e.min.y,Fc.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Fc)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}};function bx(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function FM(n,e){let t=e.isWebGL2,i=new WeakMap;function r(c,d){let u=c.array,h=c.usage,f=n.createBuffer();n.bindBuffer(d,f),n.bufferData(d,u,h),c.onUploadCallback();let p=5126;return u instanceof Float32Array?p=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?c.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:u instanceof Int16Array?p=5122:u instanceof Uint32Array?p=5125:u instanceof Int32Array?p=5124:u instanceof Int8Array?p=5120:u instanceof Uint8Array&&(p=5121),{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function o(c,d,u){let h=d.array,f=d.updateRange;n.bindBuffer(u,c),f.count===-1?n.bufferSubData(u,0,h):(t?n.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let d=i.get(c);d&&(n.deleteBuffer(d.buffer),i.delete(c))}function l(c,d){if(c.isGLBufferAttribute){let h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=i.get(c);u===void 0?i.set(c,r(c,d)):u.version<c.version&&(o(u.buffer,c,d),u.version=c.version)}return{get:s,remove:a,update:l}}var bs=class extends Se{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,u=e/a,h=t/l,f=[],p=[],m=[],y=[];for(let _=0;_<d;_++){let g=_*h-s;for(let v=0;v<c;v++){let b=v*u-o;p.push(b,-g,0),m.push(0,0,1),y.push(v/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let g=0;g<a;g++){let v=g+c*_,b=g+c*(_+1),M=g+1+c*(_+1),x=g+1+c*_;f.push(v,b,x),f.push(b,M,x)}this.setIndex(f),this.setAttribute("position",new ce(p,3)),this.setAttribute("normal",new ce(m,3)),this.setAttribute("uv",new ce(y,2))}},NM=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,zM=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,UM=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,BM=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,VM=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,GM="vec3 transformed = vec3( position );",HM=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,WM=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,qM=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jM=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,YM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,XM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ZM=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,JM=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,$M=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,KM=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,QM=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ew=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,tw=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nw=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,iw=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rw=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ow=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sw=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,aw="gl_FragColor = linearToOutputTexel( gl_FragColor );",lw=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,cw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,uw=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dw=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,hw=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,fw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pw=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,mw=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,gw=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_w=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yw=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,xw=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,vw=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bw=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Mw=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,ww=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,Sw=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Cw=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Pw=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ew=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Tw=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,Ow=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Aw=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Lw=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,Rw=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Iw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,kw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Fw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Nw=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,zw=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Uw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Bw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vw=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Gw=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Hw=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,Ww=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,qw=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,jw=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Yw=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,Xw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,Zw=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Jw=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,$w=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Kw=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Qw=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eS=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tS=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nS=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iS=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rS=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oS=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,sS=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aS=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,lS=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,cS=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uS=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,dS=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hS=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fS=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pS=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mS=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gS=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_S=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,yS=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,xS=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,vS=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,bS=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,MS=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,wS=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,SS=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,CS=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,PS=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ES=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,TS=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,OS=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AS=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,LS=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RS=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IS=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,kS=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DS=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,FS=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NS=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zS=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,US=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BS=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VS=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GS=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HS=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,WS=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qS=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jS=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YS=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XS=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZS=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JS=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,$S=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,KS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QS=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,eC=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tC=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nC=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,iC=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ge={alphamap_fragment:NM,alphamap_pars_fragment:zM,alphatest_fragment:UM,aomap_fragment:BM,aomap_pars_fragment:VM,begin_vertex:GM,beginnormal_vertex:HM,bsdfs:WM,bumpmap_pars_fragment:qM,clipping_planes_fragment:jM,clipping_planes_pars_fragment:YM,clipping_planes_pars_vertex:XM,clipping_planes_vertex:ZM,color_fragment:JM,color_pars_fragment:$M,color_pars_vertex:KM,color_vertex:QM,common:ew,cube_uv_reflection_fragment:tw,defaultnormal_vertex:nw,displacementmap_pars_vertex:iw,displacementmap_vertex:rw,emissivemap_fragment:ow,emissivemap_pars_fragment:sw,encodings_fragment:aw,encodings_pars_fragment:lw,envmap_fragment:cw,envmap_common_pars_fragment:uw,envmap_pars_fragment:dw,envmap_pars_vertex:hw,envmap_physical_pars_fragment:ww,envmap_vertex:fw,fog_vertex:pw,fog_pars_vertex:mw,fog_fragment:gw,fog_pars_fragment:_w,gradientmap_pars_fragment:yw,lightmap_fragment:xw,lightmap_pars_fragment:vw,lights_lambert_vertex:bw,lights_pars_begin:Mw,lights_toon_fragment:Sw,lights_toon_pars_fragment:Cw,lights_phong_fragment:Pw,lights_phong_pars_fragment:Ew,lights_physical_fragment:Tw,lights_physical_pars_fragment:Ow,lights_fragment_begin:Aw,lights_fragment_maps:Lw,lights_fragment_end:Rw,logdepthbuf_fragment:Iw,logdepthbuf_pars_fragment:kw,logdepthbuf_pars_vertex:Dw,logdepthbuf_vertex:Fw,map_fragment:Nw,map_pars_fragment:zw,map_particle_fragment:Uw,map_particle_pars_fragment:Bw,metalnessmap_fragment:Vw,metalnessmap_pars_fragment:Gw,morphnormal_vertex:Hw,morphtarget_pars_vertex:Ww,morphtarget_vertex:qw,normal_fragment_begin:jw,normal_fragment_maps:Yw,normalmap_pars_fragment:Xw,clearcoat_normal_fragment_begin:Zw,clearcoat_normal_fragment_maps:Jw,clearcoat_pars_fragment:$w,packing:Kw,premultiplied_alpha_fragment:Qw,project_vertex:eS,dithering_fragment:tS,dithering_pars_fragment:nS,roughnessmap_fragment:iS,roughnessmap_pars_fragment:rS,shadowmap_pars_fragment:oS,shadowmap_pars_vertex:sS,shadowmap_vertex:aS,shadowmask_pars_fragment:lS,skinbase_vertex:cS,skinning_pars_vertex:uS,skinning_vertex:dS,skinnormal_vertex:hS,specularmap_fragment:fS,specularmap_pars_fragment:pS,tonemapping_fragment:mS,tonemapping_pars_fragment:gS,transmissionmap_fragment:_S,transmissionmap_pars_fragment:yS,uv_pars_fragment:xS,uv_pars_vertex:vS,uv_vertex:bS,uv2_pars_fragment:MS,uv2_pars_vertex:wS,uv2_vertex:SS,worldpos_vertex:CS,background_frag:PS,background_vert:ES,cube_frag:TS,cube_vert:OS,depth_frag:AS,depth_vert:LS,distanceRGBA_frag:RS,distanceRGBA_vert:IS,equirect_frag:kS,equirect_vert:DS,linedashed_frag:FS,linedashed_vert:NS,meshbasic_frag:zS,meshbasic_vert:US,meshlambert_frag:BS,meshlambert_vert:VS,meshmatcap_frag:GS,meshmatcap_vert:HS,meshtoon_frag:WS,meshtoon_vert:qS,meshphong_frag:jS,meshphong_vert:YS,meshphysical_frag:XS,meshphysical_vert:ZS,normal_frag:JS,normal_vert:$S,points_frag:KS,points_vert:QS,shadow_frag:eC,shadow_vert:tC,sprite_frag:nC,sprite_vert:iC},oe={common:{diffuse:{value:new fe(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Bt},uv2Transform:{value:new Bt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new $(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new fe(15658734)},opacity:{value:1},center:{value:new $(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Bt}}},$n={basic:{uniforms:jt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.fog]),vertexShader:Ge.meshbasic_vert,fragmentShader:Ge.meshbasic_frag},lambert:{uniforms:jt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.fog,oe.lights,{emissive:{value:new fe(0)}}]),vertexShader:Ge.meshlambert_vert,fragmentShader:Ge.meshlambert_frag},phong:{uniforms:jt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new fe(0)},specular:{value:new fe(1118481)},shininess:{value:30}}]),vertexShader:Ge.meshphong_vert,fragmentShader:Ge.meshphong_frag},standard:{uniforms:jt([oe.common,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.roughnessmap,oe.metalnessmap,oe.fog,oe.lights,{emissive:{value:new fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag},toon:{uniforms:jt([oe.common,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.gradientmap,oe.fog,oe.lights,{emissive:{value:new fe(0)}}]),vertexShader:Ge.meshtoon_vert,fragmentShader:Ge.meshtoon_frag},matcap:{uniforms:jt([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,{matcap:{value:null}}]),vertexShader:Ge.meshmatcap_vert,fragmentShader:Ge.meshmatcap_frag},points:{uniforms:jt([oe.points,oe.fog]),vertexShader:Ge.points_vert,fragmentShader:Ge.points_frag},dashed:{uniforms:jt([oe.common,oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ge.linedashed_vert,fragmentShader:Ge.linedashed_frag},depth:{uniforms:jt([oe.common,oe.displacementmap]),vertexShader:Ge.depth_vert,fragmentShader:Ge.depth_frag},normal:{uniforms:jt([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,{opacity:{value:1}}]),vertexShader:Ge.normal_vert,fragmentShader:Ge.normal_frag},sprite:{uniforms:jt([oe.sprite,oe.fog]),vertexShader:Ge.sprite_vert,fragmentShader:Ge.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null}},vertexShader:Ge.background_vert,fragmentShader:Ge.background_frag},cube:{uniforms:jt([oe.envmap,{opacity:{value:1}}]),vertexShader:Ge.cube_vert,fragmentShader:Ge.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ge.equirect_vert,fragmentShader:Ge.equirect_frag},distanceRGBA:{uniforms:jt([oe.common,oe.displacementmap,{referencePosition:{value:new P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ge.distanceRGBA_vert,fragmentShader:Ge.distanceRGBA_frag},shadow:{uniforms:jt([oe.lights,oe.fog,{color:{value:new fe(0)},opacity:{value:1}}]),vertexShader:Ge.shadow_vert,fragmentShader:Ge.shadow_frag}};$n.physical={uniforms:jt([$n.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new $(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new fe(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag};function rC(n,e,t,i,r){let o=new fe(0),s=0,a,l,c=null,d=0,u=null;function h(p,m,y,_){let g=m.isScene===!0?m.background:null;g&&g.isTexture&&(g=e.get(g));let v=n.xr,b=v.getSession&&v.getSession();b&&b.environmentBlendMode==="additive"&&(g=null),g===null?f(o,s):g&&g.isColor&&(f(g,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.mapping===Ds)?(l===void 0&&(l=new ct(new uo(1,1,1),new en({name:"BackgroundCubeMaterial",uniforms:vs($n.cube.uniforms),vertexShader:$n.cube.vertexShader,fragmentShader:$n.cube.fragmentShader,side:Lt,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(M,x,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),g.isWebGLCubeRenderTarget&&(g=g.texture),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,(c!==g||d!==g.version||u!==n.toneMapping)&&(l.material.needsUpdate=!0,c=g,d=g.version,u=n.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new ct(new bs(2,2),new en({name:"BackgroundMaterial",uniforms:vs($n.background.uniforms),vertexShader:$n.background.vertexShader,fragmentShader:$n.background.fragmentShader,side:ks,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(c!==g||d!==g.version||u!==n.toneMapping)&&(a.material.needsUpdate=!0,c=g,d=g.version,u=n.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function f(p,m){t.buffers.color.setClear(p.r,p.g,p.b,m,r)}return{getClearColor:function(){return o},setClearColor:function(p,m=1){o.set(p),s=m,f(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(p){s=p,f(o,s)},render:h}}function oC(n,e,t,i){let r=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||o!==null,a={},l=m(null),c=l;function d(V,U,D,I,G){let q=!1;if(s){let Z=p(I,D,U);c!==Z&&(c=Z,h(c.object)),q=y(I,G),q&&_(I,G)}else{let Z=U.wireframe===!0;(c.geometry!==I.id||c.program!==D.id||c.wireframe!==Z)&&(c.geometry=I.id,c.program=D.id,c.wireframe=Z,q=!0)}V.isInstancedMesh===!0&&(q=!0),G!==null&&t.update(G,34963),q&&(C(V,U,D,I),G!==null&&n.bindBuffer(34963,t.get(G).buffer))}function u(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function h(V){return i.isWebGL2?n.bindVertexArray(V):o.bindVertexArrayOES(V)}function f(V){return i.isWebGL2?n.deleteVertexArray(V):o.deleteVertexArrayOES(V)}function p(V,U,D){let I=D.wireframe===!0,G=a[V.id];G===void 0&&(G={},a[V.id]=G);let q=G[U.id];q===void 0&&(q={},G[U.id]=q);let Z=q[I];return Z===void 0&&(Z=m(u()),q[I]=Z),Z}function m(V){let U=[],D=[],I=[];for(let G=0;G<r;G++)U[G]=0,D[G]=0,I[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:D,attributeDivisors:I,object:V,attributes:{},index:null}}function y(V,U){let D=c.attributes,I=V.attributes,G=0;for(let q in I){let Z=D[q],Q=I[q];if(Z===void 0||Z.attribute!==Q||Z.data!==Q.data)return!0;G++}return c.attributesNum!==G||c.index!==U}function _(V,U){let D={},I=V.attributes,G=0;for(let q in I){let Z=I[q],Q={};Q.attribute=Z,Z.data&&(Q.data=Z.data),D[q]=Q,G++}c.attributes=D,c.attributesNum=G,c.index=U}function g(){let V=c.newAttributes;for(let U=0,D=V.length;U<D;U++)V[U]=0}function v(V){b(V,0)}function b(V,U){let D=c.newAttributes,I=c.enabledAttributes,G=c.attributeDivisors;D[V]=1,I[V]===0&&(n.enableVertexAttribArray(V),I[V]=1),G[V]!==U&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,U),G[V]=U)}function M(){let V=c.newAttributes,U=c.enabledAttributes;for(let D=0,I=U.length;D<I;D++)U[D]!==V[D]&&(n.disableVertexAttribArray(D),U[D]=0)}function x(V,U,D,I,G,q){i.isWebGL2===!0&&(D===5124||D===5125)?n.vertexAttribIPointer(V,U,D,G,q):n.vertexAttribPointer(V,U,D,I,G,q)}function C(V,U,D,I){if(i.isWebGL2===!1&&(V.isInstancedMesh||I.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;g();let G=I.attributes,q=D.getAttributes(),Z=U.defaultAttributeValues;for(let Q in q){let ie=q[Q];if(ie>=0){let ge=G[Q];if(ge!==void 0){let Pe=ge.normalized,ve=ge.itemSize,X=t.get(ge);if(X===void 0)continue;let kt=X.buffer,pe=X.type,ke=X.bytesPerElement;if(ge.isInterleavedBufferAttribute){let we=ge.data,Xe=we.stride,De=ge.offset;we&&we.isInstancedInterleavedBuffer?(b(ie,we.meshPerAttribute),I._maxInstanceCount===void 0&&(I._maxInstanceCount=we.meshPerAttribute*we.count)):v(ie),n.bindBuffer(34962,kt),x(ie,ve,pe,Pe,Xe*ke,De*ke)}else ge.isInstancedBufferAttribute?(b(ie,ge.meshPerAttribute),I._maxInstanceCount===void 0&&(I._maxInstanceCount=ge.meshPerAttribute*ge.count)):v(ie),n.bindBuffer(34962,kt),x(ie,ve,pe,Pe,0,0)}else if(Q==="instanceMatrix"){let Pe=t.get(V.instanceMatrix);if(Pe===void 0)continue;let ve=Pe.buffer,X=Pe.type;b(ie+0,1),b(ie+1,1),b(ie+2,1),b(ie+3,1),n.bindBuffer(34962,ve),n.vertexAttribPointer(ie+0,4,X,!1,64,0),n.vertexAttribPointer(ie+1,4,X,!1,64,16),n.vertexAttribPointer(ie+2,4,X,!1,64,32),n.vertexAttribPointer(ie+3,4,X,!1,64,48)}else if(Q==="instanceColor"){let Pe=t.get(V.instanceColor);if(Pe===void 0)continue;let ve=Pe.buffer,X=Pe.type;b(ie,1),n.bindBuffer(34962,ve),n.vertexAttribPointer(ie,3,X,!1,12,0)}else if(Z!==void 0){let Pe=Z[Q];if(Pe!==void 0)switch(Pe.length){case 2:n.vertexAttrib2fv(ie,Pe);break;case 3:n.vertexAttrib3fv(ie,Pe);break;case 4:n.vertexAttrib4fv(ie,Pe);break;default:n.vertexAttrib1fv(ie,Pe)}}}}M()}function A(){z();for(let V in a){let U=a[V];for(let D in U){let I=U[D];for(let G in I)f(I[G].object),delete I[G];delete U[D]}delete a[V]}}function L(V){if(a[V.id]===void 0)return;let U=a[V.id];for(let D in U){let I=U[D];for(let G in I)f(I[G].object),delete I[G];delete U[D]}delete a[V.id]}function H(V){for(let U in a){let D=a[U];if(D[V.id]===void 0)continue;let I=D[V.id];for(let G in I)f(I[G].object),delete I[G];delete D[V.id]}}function z(){B(),c!==l&&(c=l,h(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:z,resetDefaultState:B,dispose:A,releaseStatesOfGeometry:L,releaseStatesOfProgram:H,initAttributes:g,enableAttribute:v,disableUnusedAttributes:M}}function sC(n,e,t,i){let r=i.isWebGL2,o;function s(c){o=c}function a(c,d){n.drawArrays(o,c,d),t.update(d,o,1)}function l(c,d,u){if(u===0)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](o,c,d,u),t.update(d,o,u)}this.setMode=s,this.render=a,this.renderInstances=l}function aC(n,e,t){let i;function r(){if(i!==void 0)return i;let x=e.get("EXT_texture_filter_anisotropic");return x!==null?i=n.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function o(x){if(x==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";x="mediump"}return x==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let s=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext,a=t.precision!==void 0?t.precision:"highp",l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),u=n.getParameter(35660),h=n.getParameter(3379),f=n.getParameter(34076),p=n.getParameter(34921),m=n.getParameter(36347),y=n.getParameter(36348),_=n.getParameter(36349),g=u>0,v=s||!!e.get("OES_texture_float"),b=g&&v,M=s?n.getParameter(36183):0;return{isWebGL2:s,getMaxAnisotropy:r,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:b,maxSamples:M}}function lC(n){let e=this,t=null,i=0,r=!1,o=!1,s=new In,a=new Bt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,f){let p=u.length!==0||h||i!==0||r;return r=h,t=d(u,f,0),i=u.length,p},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1,c()},this.setState=function(u,h,f){let p=u.clippingPlanes,m=u.clipIntersection,y=u.clipShadows,_=n.get(u);if(!r||p===null||p.length===0||o&&!y)o?d(null):c();else{let g=o?0:i,v=g*4,b=_.clippingState||null;l.value=b,b=d(p,h,v,f);for(let M=0;M!==v;++M)b[M]=t[M];_.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=g}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(u,h,f,p){let m=u!==null?u.length:0,y=null;if(m!==0){if(y=l.value,p!==!0||y===null){let _=f+m*4,g=h.matrixWorldInverse;a.getNormalMatrix(g),(y===null||y.length<_)&&(y=new Float32Array(_));for(let v=0,b=f;v!==m;++v,b+=4)s.copy(u[v]).applyMatrix4(g,a),s.normal.toArray(y,b),y[b+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,y}}function cC(n){let e=new WeakMap;function t(s,a){return a===fu?s.mapping=Tl:a===pu&&(s.mapping=Ol),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===fu||a===pu)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let c=n.getRenderList(),d=n.getRenderTarget(),u=new ji(l.height/2);return u.fromEquirectangularTexture(n,s),e.set(s,u),n.setRenderTarget(d),n.setRenderList(c),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}function uC(n){let e={};return{has:function(t){if(e[t]!==void 0)return e[t]!==null;let i;switch(t){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(t)}return e[t]=i,i!==null},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function dC(n,e,t,i){let r=new WeakMap,o=new WeakMap;function s(u){let h=u.target,f=r.get(h);f.index!==null&&e.remove(f.index);for(let m in f.attributes)e.remove(f.attributes[m]);h.removeEventListener("dispose",s),r.delete(h);let p=o.get(f);p&&(e.remove(p),o.delete(f)),i.releaseStatesOfGeometry(f),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(u,h){let f=r.get(h);return f||(h.addEventListener("dispose",s),h.isBufferGeometry?f=h:h.isGeometry&&(h._bufferGeometry===void 0&&(h._bufferGeometry=new Se().setFromObject(u)),f=h._bufferGeometry),r.set(h,f),t.memory.geometries++,f)}function l(u){let h=u.attributes;for(let p in h)e.update(h[p],34962);let f=u.morphAttributes;for(let p in f){let m=f[p];for(let y=0,_=m.length;y<_;y++)e.update(m[y],34962)}}function c(u){let h=[],f=u.index,p=u.attributes.position,m=0;if(f!==null){let g=f.array;m=f.version;for(let v=0,b=g.length;v<b;v+=3){let M=g[v+0],x=g[v+1],C=g[v+2];h.push(M,x,x,C,C,M)}}else{let g=p.array;m=p.version;for(let v=0,b=g.length/3-1;v<b;v+=3){let M=v+0,x=v+1,C=v+2;h.push(M,x,x,C,C,M)}}let y=new(yx(h)>65535?co:lo)(h,1);y.version=m;let _=o.get(u);_&&e.remove(_),o.set(u,y)}function d(u){let h=o.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&c(u)}else c(u);return o.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function hC(n,e,t,i){let r=i.isWebGL2,o;function s(h){o=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function d(h,f){n.drawElements(o,f,a,h*l),t.update(f,o,1)}function u(h,f,p){if(p===0)return;let m,y;if(r)m=n,y="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[y](o,f,a,h*l,p),t.update(f,o,p)}this.setMode=s,this.setIndex=c,this.render=d,this.renderInstances=u}function fC(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(o/3);break;case 1:t.lines+=a*(o/2);break;case 3:t.lines+=a*(o-1);break;case 2:t.lines+=a*o;break;case 0:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function pC(n,e){return n[0]-e[0]}function mC(n,e){return Math.abs(e[1])-Math.abs(n[1])}function gC(n){let e={},t=new Float32Array(8),i=[];for(let o=0;o<8;o++)i[o]=[o,0];function r(o,s,a,l){let c=o.morphTargetInfluences,d=c===void 0?0:c.length,u=e[s.id];if(u===void 0){u=[];for(let y=0;y<d;y++)u[y]=[y,0];e[s.id]=u}for(let y=0;y<d;y++){let _=u[y];_[0]=y,_[1]=c[y]}u.sort(mC);for(let y=0;y<8;y++)y<d&&u[y][1]?(i[y][0]=u[y][0],i[y][1]=u[y][1]):(i[y][0]=Number.MAX_SAFE_INTEGER,i[y][1]=0);i.sort(pC);let h=a.morphTargets&&s.morphAttributes.position,f=a.morphNormals&&s.morphAttributes.normal,p=0;for(let y=0;y<8;y++){let _=i[y],g=_[0],v=_[1];g!==Number.MAX_SAFE_INTEGER&&v?(h&&s.getAttribute("morphTarget"+y)!==h[g]&&s.setAttribute("morphTarget"+y,h[g]),f&&s.getAttribute("morphNormal"+y)!==f[g]&&s.setAttribute("morphNormal"+y,f[g]),t[y]=v,p+=v):(h&&s.hasAttribute("morphTarget"+y)===!0&&s.deleteAttribute("morphTarget"+y),f&&s.hasAttribute("morphNormal"+y)===!0&&s.deleteAttribute("morphNormal"+y),t[y]=0)}let m=s.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:r}}function _C(n,e,t,i){let r=new WeakMap;function o(l){let c=i.render.frame,d=l.geometry,u=e.get(l,d);return r.get(u)!==c&&(d.isGeometry&&u.updateFromObject(l),e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),u}function s(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:o,dispose:s}}function Ms(n=null,e=1,t=1,i=1){tt.call(this,null),this.image={data:n,width:e,height:t,depth:i},this.magFilter=Rt,this.minFilter=Rt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ms.prototype=Object.create(tt.prototype);Ms.prototype.constructor=Ms;Ms.prototype.isDataTexture2DArray=!0;function ws(n=null,e=1,t=1,i=1){tt.call(this,null),this.image={data:n,width:e,height:t,depth:i},this.magFilter=Rt,this.minFilter=Rt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ws.prototype=Object.create(tt.prototype);ws.prototype.constructor=ws;ws.prototype.isDataTexture3D=!0;var Mx=new tt,yC=new Ms,xC=new ws,wx=new wi,B0=[],V0=[],G0=new Float32Array(16),H0=new Float32Array(9),W0=new Float32Array(4);function zs(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=B0[r];if(o===void 0&&(o=new Float32Array(r),B0[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Nn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Cn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Sx(n,e){let t=V0[e];t===void 0&&(t=new Int32Array(e),V0[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function vC(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function bC(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2fv(this.addr,e),Cn(t,e)}}function MC(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Nn(t,e))return;n.uniform3fv(this.addr,e),Cn(t,e)}}function wC(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4fv(this.addr,e),Cn(t,e)}}function SC(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Cn(t,e)}else{if(Nn(t,i))return;W0.set(i),n.uniformMatrix2fv(this.addr,!1,W0),Cn(t,i)}}function CC(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Cn(t,e)}else{if(Nn(t,i))return;H0.set(i),n.uniformMatrix3fv(this.addr,!1,H0),Cn(t,i)}}function PC(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Cn(t,e)}else{if(Nn(t,i))return;G0.set(i),n.uniformMatrix4fv(this.addr,!1,G0),Cn(t,i)}}function EC(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||Mx,r)}function TC(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||yC,r)}function OC(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||xC,r)}function AC(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||wx,r)}function LC(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function RC(n,e){let t=this.cache;Nn(t,e)||(n.uniform2iv(this.addr,e),Cn(t,e))}function IC(n,e){let t=this.cache;Nn(t,e)||(n.uniform3iv(this.addr,e),Cn(t,e))}function kC(n,e){let t=this.cache;Nn(t,e)||(n.uniform4iv(this.addr,e),Cn(t,e))}function DC(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function FC(n){switch(n){case 5126:return vC;case 35664:return bC;case 35665:return MC;case 35666:return wC;case 35674:return SC;case 35675:return CC;case 35676:return PC;case 5124:case 35670:return LC;case 35667:case 35671:return RC;case 35668:case 35672:return IC;case 35669:case 35673:return kC;case 5125:return DC;case 35678:case 36198:case 36298:case 36306:case 35682:return EC;case 35679:case 36299:case 36307:return OC;case 35680:case 36300:case 36308:case 36293:return AC;case 36289:case 36303:case 36311:case 36292:return TC}}function NC(n,e){n.uniform1fv(this.addr,e)}function zC(n,e){n.uniform1iv(this.addr,e)}function UC(n,e){n.uniform2iv(this.addr,e)}function BC(n,e){n.uniform3iv(this.addr,e)}function VC(n,e){n.uniform4iv(this.addr,e)}function GC(n,e){let t=zs(e,this.size,2);n.uniform2fv(this.addr,t)}function HC(n,e){let t=zs(e,this.size,3);n.uniform3fv(this.addr,t)}function WC(n,e){let t=zs(e,this.size,4);n.uniform4fv(this.addr,t)}function qC(n,e){let t=zs(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function jC(n,e){let t=zs(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function YC(n,e){let t=zs(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function XC(n,e,t){let i=e.length,r=Sx(t,i);n.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)t.safeSetTexture2D(e[o]||Mx,r[o])}function ZC(n,e,t){let i=e.length,r=Sx(t,i);n.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)t.safeSetTextureCube(e[o]||wx,r[o])}function JC(n){switch(n){case 5126:return NC;case 35664:return GC;case 35665:return HC;case 35666:return WC;case 35674:return qC;case 35675:return jC;case 35676:return YC;case 5124:case 35670:return zC;case 35667:case 35671:return UC;case 35668:case 35672:return BC;case 35669:case 35673:return VC;case 35678:case 36198:case 36298:case 36306:case 35682:return XC;case 35680:case 36300:case 36308:case 36293:return ZC}}function $C(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=FC(e.type)}function Cx(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=JC(e.type)}Cx.prototype.updateCache=function(n){let e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Cn(e,n)};function Px(n){this.id=n,this.seq=[],this.map={}}Px.prototype.setValue=function(n,e,t){let i=this.seq;for(let r=0,o=i.length;r!==o;++r){let s=i[r];s.setValue(n,e[s.id],t)}};var xf=/(\w+)(\])?(\[|\.)?/g;function q0(n,e){n.seq.push(e),n.map[e.id]=e}function KC(n,e,t){let i=n.name,r=i.length;for(xf.lastIndex=0;;){let o=xf.exec(i),s=xf.lastIndex,a=o[1],l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===r){q0(t,c===void 0?new $C(a,n,e):new Cx(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new Px(a),q0(t,u)),t=u}}}function xr(n,e){this.seq=[],this.map={};let t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){let r=n.getActiveUniform(e,i),o=n.getUniformLocation(e,r.name);KC(r,o,this)}}xr.prototype.setValue=function(n,e,t,i){let r=this.map[e];r!==void 0&&r.setValue(n,t,i)};xr.prototype.setOptional=function(n,e,t){let i=e[t];i!==void 0&&this.setValue(n,t,i)};xr.upload=function(n,e,t,i){for(let r=0,o=e.length;r!==o;++r){let s=e[r],a=t[s.id];a.needsUpdate!==!1&&s.setValue(n,a.value,i)}};xr.seqWithValue=function(n,e){let t=[];for(let i=0,r=n.length;i!==r;++i){let o=n[i];o.id in e&&t.push(o)}return t};function j0(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var QC=0;function e2(n){let e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function Ex(n){switch(n){case Qt:return["Linear","( value )"];case Ll:return["sRGB","( value )"];case _d:return["RGBE","( value )"];case Np:return["RGBM","( value, 7.0 )"];case zp:return["RGBM","( value, 16.0 )"];case Up:return["RGBD","( value, 256.0 )"];case gd:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case hx:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function Y0(n,e,t){let i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=n.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+`
`+r+e2(o)}function xa(n,e){let t=Ex(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function t2(n,e){let t=Ex(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function n2(n,e){let t;switch(e){case dy:t="Linear";break;case hy:t="Reinhard";break;case fy:t="OptimizedCineon";break;case py:t="ACESFilmic";break;case my:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function i2(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Pa).join(`
`)}function r2(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function o2(n,e){let t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){let s=n.getActiveAttrib(e,r).name;t[s]=n.getAttribLocation(e,s)}return t}function Pa(n){return n!==""}function X0(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Z0(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var s2=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jf(n){return n.replace(s2,a2)}function a2(n,e){let t=Ge[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Jf(t)}var l2=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,c2=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function J0(n){return n.replace(c2,Tx).replace(l2,u2)}function u2(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Tx(n,e,t,i)}function Tx(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function $0(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function d2(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Lp?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===H_?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ds&&(e="SHADOWMAP_TYPE_VSM"),e}function h2(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Tl:case Ol:e="ENVMAP_TYPE_CUBE";break;case Ds:case Al:e="ENVMAP_TYPE_CUBE_UV";break}return e}function f2(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ol:case Al:e="ENVMAP_MODE_REFRACTION";break}return e}function p2(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case El:e="ENVMAP_BLENDING_MULTIPLY";break;case cy:e="ENVMAP_BLENDING_MIX";break;case uy:e="ENVMAP_BLENDING_ADD";break}return e}function m2(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=d2(t),c=h2(t),d=f2(t),u=p2(t),h=n.gammaFactor>0?n.gammaFactor:1,f=t.isWebGL2?"":i2(t),p=r2(o),m=r.createProgram(),y,_,g=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[p].filter(Pa).join(`
`),y.length>0&&(y+=`
`),_=[f,p].filter(Pa).join(`
`),_.length>0&&(_+=`
`)):(y=[$0(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Pa).join(`
`),_=[f,$0(t),"#define SHADER_NAME "+t.shaderName,p,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ro?"#define TONE_MAPPING":"",t.toneMapping!==ro?Ge.tonemapping_pars_fragment:"",t.toneMapping!==ro?n2("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",Ge.encodings_pars_fragment,t.map?xa("mapTexelToLinear",t.mapEncoding):"",t.matcap?xa("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?xa("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?xa("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?xa("lightMapTexelToLinear",t.lightMapEncoding):"",t2("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Pa).join(`
`)),s=Jf(s),s=X0(s,t),s=Z0(s,t),a=Jf(a),a=X0(a,t),a=Z0(a,t),s=J0(s),a=J0(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,y=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===Yf?"":"out highp vec4 pc_fragColor;",t.glslVersion===Yf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);let v=g+y+s,b=g+_+a,M=j0(r,35633,v),x=j0(r,35632,b);if(r.attachShader(m,M),r.attachShader(m,x),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){let L=r.getProgramInfoLog(m).trim(),H=r.getShaderInfoLog(M).trim(),z=r.getShaderInfoLog(x).trim(),B=!0,V=!0;if(r.getProgramParameter(m,35714)===!1){B=!1;let U=Y0(r,M,"vertex"),D=Y0(r,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(m,35715),"gl.getProgramInfoLog",L,U,D)}else L!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):(H===""||z==="")&&(V=!1);V&&(this.diagnostics={runnable:B,programLog:L,vertexShader:{log:H,prefix:y},fragmentShader:{log:z,prefix:_}})}r.deleteShader(M),r.deleteShader(x);let C;this.getUniforms=function(){return C===void 0&&(C=new xr(r,m)),C};let A;return this.getAttributes=function(){return A===void 0&&(A=o2(r,m)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=QC++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=M,this.fragmentShader=x,this}function g2(n,e,t,i,r,o){let s=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,d=i.maxVertexUniforms,u=i.vertexTextures,h=i.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(x){let A=x.skeleton.bones;if(c)return 1024;{let H=Math.floor((d-20)/4),z=Math.min(H,A.length);return z<A.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+A.length+" bones. This GPU supports "+z+"."),0):z}}function y(x){let C;return x&&x.isTexture?C=x.encoding:x&&x.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),C=x.texture.encoding):C=Qt,C}function _(x,C,A,L,H){let z=L.fog,B=x.isMeshStandardMaterial?L.environment:null,V=e.get(x.envMap||B),U=f[x.type],D=H.isSkinnedMesh?m(H):0;x.precision!==null&&(h=i.getMaxPrecision(x.precision),h!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",h,"instead."));let I,G;if(U){let Q=$n[U];I=Q.vertexShader,G=Q.fragmentShader}else I=x.vertexShader,G=x.fragmentShader;let q=n.getRenderTarget();return{isWebGL2:a,shaderID:U,shaderName:x.type,vertexShader:I,fragmentShader:G,defines:x.defines,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:h,instancing:H.isInstancedMesh===!0,instancingColor:H.isInstancedMesh===!0&&H.instanceColor!==null,supportsVertexTextures:u,outputEncoding:q!==null?y(q.texture):n.outputEncoding,map:!!x.map,mapEncoding:y(x.map),matcap:!!x.matcap,matcapEncoding:y(x.matcap),envMap:!!V,envMapMode:V&&V.mapping,envMapEncoding:y(V),envMapCubeUV:!!V&&(V.mapping===Ds||V.mapping===Al),lightMap:!!x.lightMap,lightMapEncoding:y(x.lightMap),aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,emissiveMapEncoding:y(x.emissiveMap),bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===mx,tangentSpaceNormalMap:x.normalMapType===wo,clearcoatMap:!!x.clearcoatMap,clearcoatRoughnessMap:!!x.clearcoatRoughnessMap,clearcoatNormalMap:!!x.clearcoatNormalMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,alphaMap:!!x.alphaMap,gradientMap:!!x.gradientMap,sheen:!!x.sheen,transmissionMap:!!x.transmissionMap,combine:x.combine,vertexTangents:x.normalMap&&x.vertexTangents,vertexColors:x.vertexColors,vertexUvs:!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatMap||!!x.clearcoatRoughnessMap||!!x.clearcoatNormalMap||!!x.displacementMap||!!x.transmissionMap,uvsVertexOnly:!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||x.transmissionMap)&&!!x.displacementMap,fog:!!z,useFog:x.fog,fogExp2:z&&z.isFogExp2,flatShading:x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:l,skinning:x.skinning&&D>0,maxBones:D,useVertexTexture:c,morphTargets:x.morphTargets,morphNormals:x.morphNormals,maxMorphTargets:n.maxMorphTargets,maxMorphNormals:n.maxMorphNormals,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:x.toneMapped?n.toneMapping:ro,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,alphaTest:x.alphaTest,doubleSided:x.side===Pl,flipSided:x.side===Lt,depthPacking:x.depthPacking!==void 0?x.depthPacking:!1,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||t.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function g(x){let C=[];if(x.shaderID?C.push(x.shaderID):(C.push(x.fragmentShader),C.push(x.vertexShader)),x.defines!==void 0)for(let A in x.defines)C.push(A),C.push(x.defines[A]);if(x.isRawShaderMaterial===!1){for(let A=0;A<p.length;A++)C.push(x[p[A]]);C.push(n.outputEncoding),C.push(n.gammaFactor)}return C.push(x.customProgramCacheKey),C.join()}function v(x){let C=f[x.type],A;if(C){let L=$n[C];A=vx.clone(L.uniforms)}else A=x.uniforms;return A}function b(x,C){let A;for(let L=0,H=s.length;L<H;L++){let z=s[L];if(z.cacheKey===C){A=z,++A.usedTimes;break}}return A===void 0&&(A=new m2(n,C,x,r),s.push(A)),A}function M(x){if(--x.usedTimes===0){let C=s.indexOf(x);s[C]=s[s.length-1],s.pop(),x.destroy()}}return{getParameters:_,getProgramCacheKey:g,getUniforms:v,acquireProgram:b,releaseProgram:M,programs:s}}function _2(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function t(o){n.delete(o)}function i(o,s,a){n.get(o)[s]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function y2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function x2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function K0(n){let e=[],t=0,i=[],r=[],o={id:-1};function s(){t=0,i.length=0,r.length=0}function a(h,f,p,m,y,_){let g=e[t],v=n.get(p);return g===void 0?(g={id:h.id,object:h,geometry:f,material:p,program:v.program||o,groupOrder:m,renderOrder:h.renderOrder,z:y,group:_},e[t]=g):(g.id=h.id,g.object=h,g.geometry=f,g.material=p,g.program=v.program||o,g.groupOrder=m,g.renderOrder=h.renderOrder,g.z=y,g.group=_),t++,g}function l(h,f,p,m,y,_){let g=a(h,f,p,m,y,_);(p.transparent===!0?r:i).push(g)}function c(h,f,p,m,y,_){let g=a(h,f,p,m,y,_);(p.transparent===!0?r:i).unshift(g)}function d(h,f){i.length>1&&i.sort(h||y2),r.length>1&&r.sort(f||x2)}function u(){for(let h=t,f=e.length;h<f;h++){let p=e[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:i,transparent:r,init:s,push:l,unshift:c,finish:u,sort:d}}function v2(n){let e=new WeakMap;function t(r,o){let s=e.get(r),a;return s===void 0?(a=new K0(n),e.set(r,new WeakMap),e.get(r).set(o,a)):(a=s.get(o),a===void 0&&(a=new K0(n),s.set(o,a))),a}function i(){e=new WeakMap}return{get:t,dispose:i}}function b2(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new P,color:new fe};break;case"SpotLight":t={position:new P,direction:new P,color:new fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new P,color:new fe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new P,skyColor:new fe,groundColor:new fe};break;case"RectAreaLight":t={color:new fe,position:new P,halfWidth:new P,halfHeight:new P};break}return n[e.id]=t,t}}}function M2(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var w2=0;function S2(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function C2(n,e){let t=new b2,i=M2(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)r.probe.push(new P);let o=new P,s=new Ue,a=new Ue;function l(d){let u=0,h=0,f=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let p=0,m=0,y=0,_=0,g=0,v=0,b=0,M=0;d.sort(S2);for(let C=0,A=d.length;C<A;C++){let L=d[C],H=L.color,z=L.intensity,B=L.distance,V=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=H.r*z,h+=H.g*z,f+=H.b*z;else if(L.isLightProbe)for(let U=0;U<9;U++)r.probe[U].addScaledVector(L.sh.coefficients[U],z);else if(L.isDirectionalLight){let U=t.get(L);if(U.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){let D=L.shadow,I=i.get(L);I.shadowBias=D.bias,I.shadowNormalBias=D.normalBias,I.shadowRadius=D.radius,I.shadowMapSize=D.mapSize,r.directionalShadow[p]=I,r.directionalShadowMap[p]=V,r.directionalShadowMatrix[p]=L.shadow.matrix,v++}r.directional[p]=U,p++}else if(L.isSpotLight){let U=t.get(L);if(U.position.setFromMatrixPosition(L.matrixWorld),U.color.copy(H).multiplyScalar(z),U.distance=B,U.coneCos=Math.cos(L.angle),U.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),U.decay=L.decay,L.castShadow){let D=L.shadow,I=i.get(L);I.shadowBias=D.bias,I.shadowNormalBias=D.normalBias,I.shadowRadius=D.radius,I.shadowMapSize=D.mapSize,r.spotShadow[y]=I,r.spotShadowMap[y]=V,r.spotShadowMatrix[y]=L.shadow.matrix,M++}r.spot[y]=U,y++}else if(L.isRectAreaLight){let U=t.get(L);U.color.copy(H).multiplyScalar(z),U.halfWidth.set(L.width*.5,0,0),U.halfHeight.set(0,L.height*.5,0),r.rectArea[_]=U,_++}else if(L.isPointLight){let U=t.get(L);if(U.color.copy(L.color).multiplyScalar(L.intensity),U.distance=L.distance,U.decay=L.decay,L.castShadow){let D=L.shadow,I=i.get(L);I.shadowBias=D.bias,I.shadowNormalBias=D.normalBias,I.shadowRadius=D.radius,I.shadowMapSize=D.mapSize,I.shadowCameraNear=D.camera.near,I.shadowCameraFar=D.camera.far,r.pointShadow[m]=I,r.pointShadowMap[m]=V,r.pointShadowMatrix[m]=L.shadow.matrix,b++}r.point[m]=U,m++}else if(L.isHemisphereLight){let U=t.get(L);U.skyColor.copy(L.color).multiplyScalar(z),U.groundColor.copy(L.groundColor).multiplyScalar(z),r.hemi[g]=U,g++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=oe.LTC_FLOAT_1,r.rectAreaLTC2=oe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=oe.LTC_HALF_1,r.rectAreaLTC2=oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=f;let x=r.hash;(x.directionalLength!==p||x.pointLength!==m||x.spotLength!==y||x.rectAreaLength!==_||x.hemiLength!==g||x.numDirectionalShadows!==v||x.numPointShadows!==b||x.numSpotShadows!==M)&&(r.directional.length=p,r.spot.length=y,r.rectArea.length=_,r.point.length=m,r.hemi.length=g,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=b,r.spotShadowMatrix.length=M,x.directionalLength=p,x.pointLength=m,x.spotLength=y,x.rectAreaLength=_,x.hemiLength=g,x.numDirectionalShadows=v,x.numPointShadows=b,x.numSpotShadows=M,r.version=w2++)}function c(d,u){let h=0,f=0,p=0,m=0,y=0,_=u.matrixWorldInverse;for(let g=0,v=d.length;g<v;g++){let b=d[g];if(b.isDirectionalLight){let M=r.directional[h];M.direction.setFromMatrixPosition(b.matrixWorld),o.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(o),M.direction.transformDirection(_),h++}else if(b.isSpotLight){let M=r.spot[p];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(_),M.direction.setFromMatrixPosition(b.matrixWorld),o.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(o),M.direction.transformDirection(_),p++}else if(b.isRectAreaLight){let M=r.rectArea[m];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(_),a.identity(),s.copy(b.matrixWorld),s.premultiply(_),a.extractRotation(s),M.halfWidth.set(b.width*.5,0,0),M.halfHeight.set(0,b.height*.5,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){let M=r.point[f];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(_),f++}else if(b.isHemisphereLight){let M=r.hemi[y];M.direction.setFromMatrixPosition(b.matrixWorld),M.direction.transformDirection(_),M.direction.normalize(),y++}}}return{setup:l,setupView:c,state:r}}function Q0(n,e){let t=new C2(n,e),i=[],r=[];function o(){i.length=0,r.length=0}function s(u){i.push(u)}function a(u){r.push(u)}function l(){t.setup(i)}function c(u){t.setupView(i,u)}return{init:o,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function P2(n,e){let t=new WeakMap;function i(o,s=0){let a;return t.has(o)===!1?(a=new Q0(n,e),t.set(o,[]),t.get(o).push(a)):s>=t.get(o).length?(a=new Q0(n,e),t.get(o).push(a)):a=t.get(o)[s],a}function r(){t=new WeakMap}return{get:i,dispose:r}}function wr(n){Oe.call(this),this.type="MeshDepthMaterial",this.depthPacking=fx,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(n)}wr.prototype=Object.create(Oe.prototype);wr.prototype.constructor=wr;wr.prototype.isMeshDepthMaterial=!0;wr.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.depthPacking=n.depthPacking,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this};function Sr(n){Oe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new P,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(n)}Sr.prototype=Object.create(Oe.prototype);Sr.prototype.constructor=Sr;Sr.prototype.isMeshDistanceMaterial=!0;Sr.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.referencePosition.copy(n.referencePosition),this.nearDistance=n.nearDistance,this.farDistance=n.farDistance,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this};var E2=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,T2=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Ox(n,e,t){let i=new fo,r=new $,o=new $,s=new $e,a=[],l=[],c={},d={0:Lt,1:ks,2:Pl},u=new en({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new $},radius:{value:4}},vertexShader:T2,fragmentShader:E2}),h=u.clone();h.defines.HORIZONTAL_PASS=1;let f=new Se;f.setAttribute("position",new Ce(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let p=new ct(f,u),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Lp,this.render=function(M,x,C){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||M.length===0)return;let A=n.getRenderTarget(),L=n.getActiveCubeFace(),H=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Wi),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);for(let B=0,V=M.length;B<V;B++){let U=M[B],D=U.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;r.copy(D.mapSize);let I=D.getFrameExtents();if(r.multiply(I),o.copy(D.mapSize),(r.x>t||r.y>t)&&(r.x>t&&(o.x=Math.floor(t/I.x),r.x=o.x*I.x,D.mapSize.x=o.x),r.y>t&&(o.y=Math.floor(t/I.y),r.y=o.y*I.y,D.mapSize.y=o.y)),D.map===null&&!D.isPointLightShadow&&this.type===ds){let q={minFilter:Nt,magFilter:Nt,format:bn};D.map=new Mn(r.x,r.y,q),D.map.texture.name=U.name+".shadowMap",D.mapPass=new Mn(r.x,r.y,q),D.camera.updateProjectionMatrix()}if(D.map===null){let q={minFilter:Rt,magFilter:Rt,format:bn};D.map=new Mn(r.x,r.y,q),D.map.texture.name=U.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();let G=D.getViewportCount();for(let q=0;q<G;q++){let Z=D.getViewport(q);s.set(o.x*Z.x,o.y*Z.y,o.x*Z.z,o.y*Z.w),z.viewport(s),D.updateMatrices(U,q),i=D.getFrustum(),b(x,C,D.camera,U,this.type)}!D.isPointLightShadow&&this.type===ds&&y(D,C),D.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(A,L,H)};function y(M,x){let C=e.update(p);u.uniforms.shadow_pass.value=M.map.texture,u.uniforms.resolution.value=M.mapSize,u.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(x,null,C,u,p,null),h.uniforms.shadow_pass.value=M.mapPass.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(x,null,C,h,p,null)}function _(M,x,C){let A=M<<0|x<<1|C<<2,L=a[A];return L===void 0&&(L=new wr({depthPacking:px,morphTargets:M,skinning:x}),a[A]=L),L}function g(M,x,C){let A=M<<0|x<<1|C<<2,L=l[A];return L===void 0&&(L=new Sr({morphTargets:M,skinning:x}),l[A]=L),L}function v(M,x,C,A,L,H,z){let B=null,V=_,U=M.customDepthMaterial;if(A.isPointLight===!0&&(V=g,U=M.customDistanceMaterial),U===void 0){let D=!1;C.morphTargets===!0&&(D=x.morphAttributes&&x.morphAttributes.position&&x.morphAttributes.position.length>0);let I=!1;M.isSkinnedMesh===!0&&(C.skinning===!0?I=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",M));let G=M.isInstancedMesh===!0;B=V(D,I,G)}else B=U;if(n.localClippingEnabled&&C.clipShadows===!0&&C.clippingPlanes.length!==0){let D=B.uuid,I=C.uuid,G=c[D];G===void 0&&(G={},c[D]=G);let q=G[I];q===void 0&&(q=B.clone(),G[I]=q),B=q}return B.visible=C.visible,B.wireframe=C.wireframe,z===ds?B.side=C.shadowSide!==null?C.shadowSide:C.side:B.side=C.shadowSide!==null?C.shadowSide:d[C.side],B.clipShadows=C.clipShadows,B.clippingPlanes=C.clippingPlanes,B.clipIntersection=C.clipIntersection,B.wireframeLinewidth=C.wireframeLinewidth,B.linewidth=C.linewidth,A.isPointLight===!0&&B.isMeshDistanceMaterial===!0&&(B.referencePosition.setFromMatrixPosition(A.matrixWorld),B.nearDistance=L,B.farDistance=H),B}function b(M,x,C,A,L){if(M.visible===!1)return;if(M.layers.test(x.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&L===ds)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,M.matrixWorld);let B=e.update(M),V=M.material;if(Array.isArray(V)){let U=B.groups;for(let D=0,I=U.length;D<I;D++){let G=U[D],q=V[G.materialIndex];if(q&&q.visible){let Z=v(M,B,q,A,C.near,C.far,L);n.renderBufferDirect(C,null,B,Z,M,G)}}}else if(V.visible){let U=v(M,B,V,A,C.near,C.far,L);n.renderBufferDirect(C,null,B,U,M,null)}}let z=M.children;for(let B=0,V=z.length;B<V;B++)b(z[B],x,C,A,L)}}function O2(n,e,t){let i=t.isWebGL2;function r(){let F=!1,ne=new $e,de=null,be=new $e(0,0,0,0);return{setMask:function(se){de!==se&&!F&&(n.colorMask(se,se,se,se),de=se)},setLocked:function(se){F=se},setClear:function(se,xe,Te,Fe,_e){_e===!0&&(se*=Fe,xe*=Fe,Te*=Fe),ne.set(se,xe,Te,Fe),be.equals(ne)===!1&&(n.clearColor(se,xe,Te,Fe),be.copy(ne))},reset:function(){F=!1,de=null,be.set(-1,0,0,0)}}}function o(){let F=!1,ne=null,de=null,be=null;return{setTest:function(se){se?Q(2929):ie(2929)},setMask:function(se){ne!==se&&!F&&(n.depthMask(se),ne=se)},setFunc:function(se){if(de!==se){if(se)switch(se){case ny:n.depthFunc(512);break;case iy:n.depthFunc(519);break;case ry:n.depthFunc(513);break;case hu:n.depthFunc(515);break;case oy:n.depthFunc(514);break;case sy:n.depthFunc(518);break;case ay:n.depthFunc(516);break;case ly:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);de=se}},setLocked:function(se){F=se},setClear:function(se){be!==se&&(n.clearDepth(se),be=se)},reset:function(){F=!1,ne=null,de=null,be=null}}}function s(){let F=!1,ne=null,de=null,be=null,se=null,xe=null,Te=null,Fe=null,_e=null;return{setTest:function(Le){F||(Le?Q(2960):ie(2960))},setMask:function(Le){ne!==Le&&!F&&(n.stencilMask(Le),ne=Le)},setFunc:function(Le,pt,on){(de!==Le||be!==pt||se!==on)&&(n.stencilFunc(Le,pt,on),de=Le,be=pt,se=on)},setOp:function(Le,pt,on){(xe!==Le||Te!==pt||Fe!==on)&&(n.stencilOp(Le,pt,on),xe=Le,Te=pt,Fe=on)},setLocked:function(Le){F=Le},setClear:function(Le){_e!==Le&&(n.clearStencil(Le),_e=Le)},reset:function(){F=!1,ne=null,de=null,be=null,se=null,xe=null,Te=null,Fe=null,_e=null}}}let a=new r,l=new o,c=new s,d={},u=null,h=null,f=null,p=null,m=null,y=null,_=null,g=null,v=null,b=!1,M=null,x=null,C=null,A=null,L=null,H=n.getParameter(35661),z=!1,B=0,V=n.getParameter(7938);V.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(V)[1]),z=B>=1):V.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),z=B>=2);let U=null,D={},I=new $e,G=new $e;function q(F,ne,de){let be=new Uint8Array(4),se=n.createTexture();n.bindTexture(F,se),n.texParameteri(F,10241,9728),n.texParameteri(F,10240,9728);for(let xe=0;xe<de;xe++)n.texImage2D(ne+xe,0,6408,1,1,0,6408,5121,be);return se}let Z={};Z[3553]=q(3553,3553,1),Z[34067]=q(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Q(2929),l.setFunc(hu),pe(!1),ke(Lf),Q(2884),X(Wi);function Q(F){d[F]!==!0&&(n.enable(F),d[F]=!0)}function ie(F){d[F]!==!1&&(n.disable(F),d[F]=!1)}function ge(F){return u!==F?(n.useProgram(F),u=F,!0):!1}let Pe={[to]:32774,[q_]:32778,[j_]:32779};if(i)Pe[Df]=32775,Pe[Ff]=32776;else{let F=e.get("EXT_blend_minmax");F!==null&&(Pe[Df]=F.MIN_EXT,Pe[Ff]=F.MAX_EXT)}let ve={[Y_]:0,[X_]:1,[Z_]:768,[Ip]:770,[ty]:776,[Q_]:774,[$_]:772,[J_]:769,[kp]:771,[ey]:775,[K_]:773};function X(F,ne,de,be,se,xe,Te,Fe){if(F===Wi){h&&(ie(3042),h=!1);return}if(h||(Q(3042),h=!0),F!==W_){if(F!==f||Fe!==b){if((p!==to||_!==to)&&(n.blendEquation(32774),p=to,_=to),Fe)switch(F){case gs:n.blendFuncSeparate(1,771,1,771);break;case Rf:n.blendFunc(1,1);break;case If:n.blendFuncSeparate(0,0,769,771);break;case kf:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",F);break}else switch(F){case gs:n.blendFuncSeparate(770,771,1,771);break;case Rf:n.blendFunc(770,1);break;case If:n.blendFunc(0,769);break;case kf:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",F);break}m=null,y=null,g=null,v=null,f=F,b=Fe}return}se=se||ne,xe=xe||de,Te=Te||be,(ne!==p||se!==_)&&(n.blendEquationSeparate(Pe[ne],Pe[se]),p=ne,_=se),(de!==m||be!==y||xe!==g||Te!==v)&&(n.blendFuncSeparate(ve[de],ve[be],ve[xe],ve[Te]),m=de,y=be,g=xe,v=Te),f=F,b=null}function kt(F,ne){F.side===Pl?ie(2884):Q(2884);let de=F.side===Lt;ne&&(de=!de),pe(de),F.blending===gs&&F.transparent===!1?X(Wi):X(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.premultipliedAlpha),l.setFunc(F.depthFunc),l.setTest(F.depthTest),l.setMask(F.depthWrite),a.setMask(F.colorWrite);let be=F.stencilWrite;c.setTest(be),be&&(c.setMask(F.stencilWriteMask),c.setFunc(F.stencilFunc,F.stencilRef,F.stencilFuncMask),c.setOp(F.stencilFail,F.stencilZFail,F.stencilZPass)),Xe(F.polygonOffset,F.polygonOffsetFactor,F.polygonOffsetUnits)}function pe(F){M!==F&&(F?n.frontFace(2304):n.frontFace(2305),M=F)}function ke(F){F!==V_?(Q(2884),F!==x&&(F===Lf?n.cullFace(1029):F===G_?n.cullFace(1028):n.cullFace(1032))):ie(2884),x=F}function we(F){F!==C&&(z&&n.lineWidth(F),C=F)}function Xe(F,ne,de){F?(Q(32823),(A!==ne||L!==de)&&(n.polygonOffset(ne,de),A=ne,L=de)):ie(32823)}function De(F){F?Q(3089):ie(3089)}function ee(F){F===void 0&&(F=33984+H-1),U!==F&&(n.activeTexture(F),U=F)}function re(F,ne){U===null&&ee();let de=D[U];de===void 0&&(de={type:void 0,texture:void 0},D[U]=de),(de.type!==F||de.texture!==ne)&&(n.bindTexture(F,ne||Z[F]),de.type=F,de.texture=ne)}function le(){let F=D[U];F!==void 0&&F.type!==void 0&&(n.bindTexture(F.type,null),F.type=void 0,F.texture=void 0)}function Ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}}function he(){try{n.texImage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}}function R(){try{n.texImage3D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}}function T(F){I.equals(F)===!1&&(n.scissor(F.x,F.y,F.z,F.w),I.copy(F))}function te(F){G.equals(F)===!1&&(n.viewport(F.x,F.y,F.z,F.w),G.copy(F))}function K(){d={},U=null,D={},u=null,h=null,f=null,p=null,m=null,y=null,_=null,g=null,v=null,b=!1,M=null,x=null,C=null,A=null,L=null,a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Q,disable:ie,useProgram:ge,setBlending:X,setMaterial:kt,setFlipSided:pe,setCullFace:ke,setLineWidth:we,setPolygonOffset:Xe,setScissorTest:De,activeTexture:ee,bindTexture:re,unbindTexture:le,compressedTexImage2D:Ee,texImage2D:he,texImage3D:R,scissor:T,viewport:te,reset:K}}function A2(n,e,t,i,r,o,s){let a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,u=r.maxSamples,h=new WeakMap,f,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(R,T){return p?new OffscreenCanvas(R,T):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(R,T,te,K){let F=1;if((R.width>K||R.height>K)&&(F=K/Math.max(R.width,R.height)),F<1||T===!0)if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){let ne=T?Re.floorPowerOfTwo:Math.floor,de=ne(F*R.width),be=ne(F*R.height);f===void 0&&(f=m(de,be));let se=te?m(de,be):f;return se.width=de,se.height=be,se.getContext("2d").drawImage(R,0,0,de,be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+de+"x"+be+")."),se}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function _(R){return Re.isPowerOfTwo(R.width)&&Re.isPowerOfTwo(R.height)}function g(R){return a?!1:R.wrapS!==Kt||R.wrapT!==Kt||R.minFilter!==Rt&&R.minFilter!==Nt}function v(R,T){return R.generateMipmaps&&T&&R.minFilter!==Rt&&R.minFilter!==Nt}function b(R,T,te,K){n.generateMipmap(R);let F=i.get(T);F.__maxMipLevel=Math.log(Math.max(te,K))*Math.LOG2E}function M(R,T,te){if(a===!1)return T;if(R!==null){if(n[R]!==void 0)return n[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let K=T;return T===6403&&(te===5126&&(K=33326),te===5131&&(K=33325),te===5121&&(K=33321)),T===6407&&(te===5126&&(K=34837),te===5131&&(K=34843),te===5121&&(K=32849)),T===6408&&(te===5126&&(K=34836),te===5131&&(K=34842),te===5121&&(K=32856)),(K===33325||K===33326||K===34842||K===34836)&&e.get("EXT_color_buffer_float"),K}function x(R){return R===Rt||R===mu||R===gu?9728:9729}function C(R){let T=R.target;T.removeEventListener("dispose",C),L(T),T.isVideoTexture&&h.delete(T),s.memory.textures--}function A(R){let T=R.target;T.removeEventListener("dispose",A),H(T),s.memory.textures--}function L(R){let T=i.get(R);T.__webglInit!==void 0&&(n.deleteTexture(T.__webglTexture),i.remove(R))}function H(R){let T=i.get(R),te=i.get(R.texture);if(R){if(te.__webglTexture!==void 0&&n.deleteTexture(te.__webglTexture),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let K=0;K<6;K++)n.deleteFramebuffer(T.__webglFramebuffer[K]),T.__webglDepthbuffer&&n.deleteRenderbuffer(T.__webglDepthbuffer[K]);else n.deleteFramebuffer(T.__webglFramebuffer),T.__webglDepthbuffer&&n.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&n.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer&&n.deleteRenderbuffer(T.__webglColorRenderbuffer),T.__webglDepthRenderbuffer&&n.deleteRenderbuffer(T.__webglDepthRenderbuffer);i.remove(R.texture),i.remove(R)}}let z=0;function B(){z=0}function V(){let R=z;return R>=l&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+l),z+=1,R}function U(R,T){let te=i.get(R);if(R.isVideoTexture&&ee(R),R.version>0&&te.__version!==R.version){let K=R.image;if(K===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(K.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(te,R,T);return}}t.activeTexture(33984+T),t.bindTexture(3553,te.__webglTexture)}function D(R,T){let te=i.get(R);if(R.version>0&&te.__version!==R.version){ge(te,R,T);return}t.activeTexture(33984+T),t.bindTexture(35866,te.__webglTexture)}function I(R,T){let te=i.get(R);if(R.version>0&&te.__version!==R.version){ge(te,R,T);return}t.activeTexture(33984+T),t.bindTexture(32879,te.__webglTexture)}function G(R,T){let te=i.get(R);if(R.version>0&&te.__version!==R.version){Pe(te,R,T);return}t.activeTexture(33984+T),t.bindTexture(34067,te.__webglTexture)}let q={[Ia]:10497,[Kt]:33071,[ka]:33648},Z={[Rt]:9728,[mu]:9984,[gu]:9986,[Nt]:9729,[Dp]:9985,[Fs]:9987};function Q(R,T,te){te?(n.texParameteri(R,10242,q[T.wrapS]),n.texParameteri(R,10243,q[T.wrapT]),(R===32879||R===35866)&&n.texParameteri(R,32882,q[T.wrapR]),n.texParameteri(R,10240,Z[T.magFilter]),n.texParameteri(R,10241,Z[T.minFilter])):(n.texParameteri(R,10242,33071),n.texParameteri(R,10243,33071),(R===32879||R===35866)&&n.texParameteri(R,32882,33071),(T.wrapS!==Kt||T.wrapT!==Kt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(R,10240,x(T.magFilter)),n.texParameteri(R,10241,x(T.minFilter)),T.minFilter!==Rt&&T.minFilter!==Nt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));let K=e.get("EXT_texture_filter_anisotropic");if(K){if(T.type===Gi&&e.get("OES_texture_float_linear")===null||T.type===Fa&&(a||e.get("OES_texture_half_float_linear"))===null)return;(T.anisotropy>1||i.get(T).__currentAnisotropy)&&(n.texParameterf(R,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,r.getMaxAnisotropy())),i.get(T).__currentAnisotropy=T.anisotropy)}}function ie(R,T){R.__webglInit===void 0&&(R.__webglInit=!0,T.addEventListener("dispose",C),R.__webglTexture=n.createTexture(),s.memory.textures++)}function ge(R,T,te){let K=3553;T.isDataTexture2DArray&&(K=35866),T.isDataTexture3D&&(K=32879),ie(R,T),t.activeTexture(33984+te),t.bindTexture(K,R.__webglTexture),n.pixelStorei(37440,T.flipY),n.pixelStorei(37441,T.premultiplyAlpha),n.pixelStorei(3317,T.unpackAlignment);let F=g(T)&&_(T.image)===!1,ne=y(T.image,F,!1,d),de=_(ne)||a,be=o.convert(T.format),se=o.convert(T.type),xe=M(T.internalFormat,be,se);Q(K,T,de);let Te,Fe=T.mipmaps;if(T.isDepthTexture)xe=6402,a?T.type===Gi?xe=36012:T.type===Ea?xe=33190:T.type===_s?xe=35056:xe=33189:T.type===Gi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),T.format===oo&&xe===6402&&T.type!==Da&&T.type!==Ea&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=Da,se=o.convert(T.type)),T.format===xs&&xe===6402&&(xe=34041,T.type!==_s&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=_s,se=o.convert(T.type))),t.texImage2D(3553,0,xe,ne.width,ne.height,0,be,se,null);else if(T.isDataTexture)if(Fe.length>0&&de){for(let _e=0,Le=Fe.length;_e<Le;_e++)Te=Fe[_e],t.texImage2D(3553,_e,xe,Te.width,Te.height,0,be,se,Te.data);T.generateMipmaps=!1,R.__maxMipLevel=Fe.length-1}else t.texImage2D(3553,0,xe,ne.width,ne.height,0,be,se,ne.data),R.__maxMipLevel=0;else if(T.isCompressedTexture){for(let _e=0,Le=Fe.length;_e<Le;_e++)Te=Fe[_e],T.format!==bn&&T.format!==yr?be!==null?t.compressedTexImage2D(3553,_e,xe,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,_e,xe,Te.width,Te.height,0,be,se,Te.data);R.__maxMipLevel=Fe.length-1}else if(T.isDataTexture2DArray)t.texImage3D(35866,0,xe,ne.width,ne.height,ne.depth,0,be,se,ne.data),R.__maxMipLevel=0;else if(T.isDataTexture3D)t.texImage3D(32879,0,xe,ne.width,ne.height,ne.depth,0,be,se,ne.data),R.__maxMipLevel=0;else if(Fe.length>0&&de){for(let _e=0,Le=Fe.length;_e<Le;_e++)Te=Fe[_e],t.texImage2D(3553,_e,xe,be,se,Te);T.generateMipmaps=!1,R.__maxMipLevel=Fe.length-1}else t.texImage2D(3553,0,xe,be,se,ne),R.__maxMipLevel=0;v(T,de)&&b(K,T,ne.width,ne.height),R.__version=T.version,T.onUpdate&&T.onUpdate(T)}function Pe(R,T,te){if(T.image.length!==6)return;ie(R,T),t.activeTexture(33984+te),t.bindTexture(34067,R.__webglTexture),n.pixelStorei(37440,T.flipY);let K=T&&(T.isCompressedTexture||T.image[0].isCompressedTexture),F=T.image[0]&&T.image[0].isDataTexture,ne=[];for(let _e=0;_e<6;_e++)!K&&!F?ne[_e]=y(T.image[_e],!1,!0,c):ne[_e]=F?T.image[_e].image:T.image[_e];let de=ne[0],be=_(de)||a,se=o.convert(T.format),xe=o.convert(T.type),Te=M(T.internalFormat,se,xe);Q(34067,T,be);let Fe;if(K){for(let _e=0;_e<6;_e++){Fe=ne[_e].mipmaps;for(let Le=0;Le<Fe.length;Le++){let pt=Fe[Le];T.format!==bn&&T.format!==yr?se!==null?t.compressedTexImage2D(34069+_e,Le,Te,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+_e,Le,Te,pt.width,pt.height,0,se,xe,pt.data)}}R.__maxMipLevel=Fe.length-1}else{Fe=T.mipmaps;for(let _e=0;_e<6;_e++)if(F){t.texImage2D(34069+_e,0,Te,ne[_e].width,ne[_e].height,0,se,xe,ne[_e].data);for(let Le=0;Le<Fe.length;Le++){let on=Fe[Le].image[_e].image;t.texImage2D(34069+_e,Le+1,Te,on.width,on.height,0,se,xe,on.data)}}else{t.texImage2D(34069+_e,0,Te,se,xe,ne[_e]);for(let Le=0;Le<Fe.length;Le++){let pt=Fe[Le];t.texImage2D(34069+_e,Le+1,Te,se,xe,pt.image[_e])}}R.__maxMipLevel=Fe.length}v(T,be)&&b(34067,T,de.width,de.height),R.__version=T.version,T.onUpdate&&T.onUpdate(T)}function ve(R,T,te,K){let F=o.convert(T.texture.format),ne=o.convert(T.texture.type),de=M(T.texture.internalFormat,F,ne);t.texImage2D(K,0,de,T.width,T.height,0,F,ne,null),n.bindFramebuffer(36160,R),n.framebufferTexture2D(36160,te,K,i.get(T.texture).__webglTexture,0),n.bindFramebuffer(36160,null)}function X(R,T,te){if(n.bindRenderbuffer(36161,R),T.depthBuffer&&!T.stencilBuffer){let K=33189;if(te){let F=T.depthTexture;F&&F.isDepthTexture&&(F.type===Gi?K=36012:F.type===Ea&&(K=33190));let ne=De(T);n.renderbufferStorageMultisample(36161,ne,K,T.width,T.height)}else n.renderbufferStorage(36161,K,T.width,T.height);n.framebufferRenderbuffer(36160,36096,36161,R)}else if(T.depthBuffer&&T.stencilBuffer){if(te){let K=De(T);n.renderbufferStorageMultisample(36161,K,35056,T.width,T.height)}else n.renderbufferStorage(36161,34041,T.width,T.height);n.framebufferRenderbuffer(36160,33306,36161,R)}else{let K=o.convert(T.texture.format),F=o.convert(T.texture.type),ne=M(T.texture.internalFormat,K,F);if(te){let de=De(T);n.renderbufferStorageMultisample(36161,de,ne,T.width,T.height)}else n.renderbufferStorage(36161,ne,T.width,T.height)}n.bindRenderbuffer(36161,null)}function kt(R,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,R),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),U(T.depthTexture,0);let K=i.get(T.depthTexture).__webglTexture;if(T.depthTexture.format===oo)n.framebufferTexture2D(36160,36096,3553,K,0);else if(T.depthTexture.format===xs)n.framebufferTexture2D(36160,33306,3553,K,0);else throw new Error("Unknown depthTexture format")}function pe(R){let T=i.get(R),te=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture){if(te)throw new Error("target.depthTexture not supported in Cube render targets");kt(T.__webglFramebuffer,R)}else if(te){T.__webglDepthbuffer=[];for(let K=0;K<6;K++)n.bindFramebuffer(36160,T.__webglFramebuffer[K]),T.__webglDepthbuffer[K]=n.createRenderbuffer(),X(T.__webglDepthbuffer[K],R,!1)}else n.bindFramebuffer(36160,T.__webglFramebuffer),T.__webglDepthbuffer=n.createRenderbuffer(),X(T.__webglDepthbuffer,R,!1);n.bindFramebuffer(36160,null)}function ke(R){let T=i.get(R),te=i.get(R.texture);R.addEventListener("dispose",A),te.__webglTexture=n.createTexture(),s.memory.textures++;let K=R.isWebGLCubeRenderTarget===!0,F=R.isWebGLMultisampleRenderTarget===!0,ne=_(R)||a;if(a&&R.texture.format===yr&&(R.texture.type===Gi||R.texture.type===Fa)&&(R.texture.format=bn,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),K){T.__webglFramebuffer=[];for(let de=0;de<6;de++)T.__webglFramebuffer[de]=n.createFramebuffer()}else if(T.__webglFramebuffer=n.createFramebuffer(),F)if(a){T.__webglMultisampledFramebuffer=n.createFramebuffer(),T.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,T.__webglColorRenderbuffer);let de=o.convert(R.texture.format),be=o.convert(R.texture.type),se=M(R.texture.internalFormat,de,be),xe=De(R);n.renderbufferStorageMultisample(36161,xe,se,R.width,R.height),n.bindFramebuffer(36160,T.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,T.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),R.depthBuffer&&(T.__webglDepthRenderbuffer=n.createRenderbuffer(),X(T.__webglDepthRenderbuffer,R,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(K){t.bindTexture(34067,te.__webglTexture),Q(34067,R.texture,ne);for(let de=0;de<6;de++)ve(T.__webglFramebuffer[de],R,36064,34069+de);v(R.texture,ne)&&b(34067,R.texture,R.width,R.height),t.bindTexture(34067,null)}else t.bindTexture(3553,te.__webglTexture),Q(3553,R.texture,ne),ve(T.__webglFramebuffer,R,36064,3553),v(R.texture,ne)&&b(3553,R.texture,R.width,R.height),t.bindTexture(3553,null);R.depthBuffer&&pe(R)}function we(R){let T=R.texture,te=_(R)||a;if(v(T,te)){let K=R.isWebGLCubeRenderTarget?34067:3553,F=i.get(T).__webglTexture;t.bindTexture(K,F),b(K,T,R.width,R.height),t.bindTexture(K,null)}}function Xe(R){if(R.isWebGLMultisampleRenderTarget)if(a){let T=i.get(R);n.bindFramebuffer(36008,T.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,T.__webglFramebuffer);let te=R.width,K=R.height,F=16384;R.depthBuffer&&(F|=256),R.stencilBuffer&&(F|=1024),n.blitFramebuffer(0,0,te,K,0,0,te,K,F,9728),n.bindFramebuffer(36160,T.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function De(R){return a&&R.isWebGLMultisampleRenderTarget?Math.min(u,R.samples):0}function ee(R){let T=s.render.frame;h.get(R)!==T&&(h.set(R,T),R.update())}let re=!1,le=!1;function Ee(R,T){R&&R.isWebGLRenderTarget&&(re===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),re=!0),R=R.texture),U(R,T)}function he(R,T){R&&R.isWebGLCubeRenderTarget&&(le===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),le=!0),R=R.texture),G(R,T)}this.allocateTextureUnit=V,this.resetTextureUnits=B,this.setTexture2D=U,this.setTexture2DArray=D,this.setTexture3D=I,this.setTextureCube=G,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Xe,this.safeSetTexture2D=Ee,this.safeSetTextureCube=he}function Ax(n,e,t){let i=t.isWebGL2;function r(o){let s;if(o===Ns)return 5121;if(o===xy)return 32819;if(o===vy)return 32820;if(o===by)return 33635;if(o===gy)return 5120;if(o===_y)return 5122;if(o===Da)return 5123;if(o===yy)return 5124;if(o===Ea)return 5125;if(o===Gi)return 5126;if(o===Fa)return i?5131:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===My)return 6406;if(o===yr)return 6407;if(o===bn)return 6408;if(o===wy)return 6409;if(o===Sy)return 6410;if(o===oo)return 6402;if(o===xs)return 34041;if(o===Py)return 6403;if(o===Ey)return 36244;if(o===Ty)return 33319;if(o===Oy)return 33320;if(o===Ay)return 36248;if(o===Ly)return 36249;if(o===Nf||o===zf||o===Uf||o===Bf)if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===Nf)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===zf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Uf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Bf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===Vf||o===Gf||o===Hf||o===Wf)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===Vf)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Gf)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Hf)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===Wf)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===Ry)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((o===qf||o===jf)&&(s=e.get("WEBGL_compressed_texture_etc"),s!==null)){if(o===qf)return s.COMPRESSED_RGB8_ETC2;if(o===jf)return s.COMPRESSED_RGBA8_ETC2_EAC}if(o===Iy||o===ky||o===Dy||o===Fy||o===Ny||o===zy||o===Uy||o===By||o===Vy||o===Gy||o===Hy||o===Wy||o===qy||o===jy||o===Xy||o===Zy||o===Jy||o===$y||o===Ky||o===Qy||o===ex||o===tx||o===nx||o===ix||o===rx||o===ox||o===sx||o===ax)return s=e.get("WEBGL_compressed_texture_astc"),s!==null?o:null;if(o===Yy)return s=e.get("EXT_texture_compression_bptc"),s!==null?o:null;if(o===_s)return i?34042:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function _u(n=[]){Tt.call(this),this.cameras=n}_u.prototype=Object.assign(Object.create(Tt.prototype),{constructor:_u,isArrayCamera:!0});function _r(){ye.call(this),this.type="Group"}_r.prototype=Object.assign(Object.create(ye.prototype),{constructor:_r,isGroup:!0});function Aa(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Aa.prototype,{constructor:Aa,getHandSpace:function(){if(this._hand===null&&(this._hand=new _r,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let n=0;n<=window.XRHand.LITTLE_PHALANX_TIP;n++){let e=new _r;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new _r,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new _r,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this},disconnect:function(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(n,e,t){let i=null,r=null,o=null,s=this._targetRay,a=this._grip,l=this._hand;if(n&&e.session.visibilityState!=="visible-blurred")if(l&&n.hand){o=!0;for(let c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(n.hand[c]){let d=e.getJointPose(n.hand[c],t),u=l.joints[c];d!==null&&(u.matrix.fromArray(d.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.jointRadius=d.radius),u.visible=d!==null;let h=l.joints[window.XRHand.INDEX_PHALANX_TIP],f=l.joints[window.XRHand.THUMB_PHALANX_TIP],p=h.position.distanceTo(f.position),m=.02,y=.005;l.inputState.pinching&&p>m+y?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!l.inputState.pinching&&p<=m-y&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}}else s!==null&&(i=e.getPose(n.targetRaySpace,t),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale))),a!==null&&n.gripSpace&&(r=e.getPose(n.gripSpace,t),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return s!==null&&(s.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),this}});function Lx(n,e){let t=this,i=null,r=1,o=null,s="local-floor",a=null,l=[],c=new Map,d=new Tt;d.layers.enable(1),d.viewport=new $e;let u=new Tt;u.layers.enable(2),u.viewport=new $e;let h=[d,u],f=new _u;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let B=l[z];return B===void 0&&(B=new Aa,l[z]=B),B.getTargetRaySpace()},this.getControllerGrip=function(z){let B=l[z];return B===void 0&&(B=new Aa,l[z]=B),B.getGripSpace()},this.getHand=function(z){let B=l[z];return B===void 0&&(B=new Aa,l[z]=B),B.getHandSpace()};function y(z){let B=c.get(z.inputSource);B&&B.dispatchEvent({type:z.type,data:z.inputSource})}function _(){c.forEach(function(z,B){z.disconnect(B)}),c.clear(),n.setFramebuffer(null),n.setRenderTarget(n.getRenderTarget()),H.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}function g(z){o=z,H.setContext(i),H.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(z){r=z,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){s=z,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=function(z){if(i=z,i!==null){i.addEventListener("select",y),i.addEventListener("selectstart",y),i.addEventListener("selectend",y),i.addEventListener("squeeze",y),i.addEventListener("squeezestart",y),i.addEventListener("squeezeend",y),i.addEventListener("end",_);let B=e.getContextAttributes();B.xrCompatible!==!0&&e.makeXRCompatible();let V={antialias:B.antialias,alpha:B.alpha,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:r},U=new XRWebGLLayer(i,e,V);i.updateRenderState({baseLayer:U}),i.requestReferenceSpace(s).then(g),i.addEventListener("inputsourceschange",v)}};function v(z){let B=i.inputSources;for(let V=0;V<l.length;V++)c.set(B[V],l[V]);for(let V=0;V<z.removed.length;V++){let U=z.removed[V],D=c.get(U);D&&(D.dispatchEvent({type:"disconnected",data:U}),c.delete(U))}for(let V=0;V<z.added.length;V++){let U=z.added[V],D=c.get(U);D&&D.dispatchEvent({type:"connected",data:U})}}let b=new P,M=new P;function x(z,B,V){b.setFromMatrixPosition(B.matrixWorld),M.setFromMatrixPosition(V.matrixWorld);let U=b.distanceTo(M),D=B.projectionMatrix.elements,I=V.projectionMatrix.elements,G=D[14]/(D[10]-1),q=D[14]/(D[10]+1),Z=(D[9]+1)/D[5],Q=(D[9]-1)/D[5],ie=(D[8]-1)/D[0],ge=(I[8]+1)/I[0],Pe=G*ie,ve=G*ge,X=U/(-ie+ge),kt=X*-ie;B.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(kt),z.translateZ(X),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();let pe=G+X,ke=q+X,we=Pe-kt,Xe=ve+(U-kt),De=Z*q/ke*pe,ee=Q*q/ke*pe;z.projectionMatrix.makePerspective(we,Xe,De,ee,pe,ke)}function C(z,B){B===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(B.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.getCamera=function(z){f.near=u.near=d.near=z.near,f.far=u.far=d.far=z.far,(p!==f.near||m!==f.far)&&(i.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);let B=z.parent,V=f.cameras;C(f,B);for(let D=0;D<V.length;D++)C(V[D],B);z.matrixWorld.copy(f.matrixWorld);let U=z.children;for(let D=0,I=U.length;D<I;D++)U[D].updateMatrixWorld(!0);return V.length===2?x(f,d,u):f.projectionMatrix.copy(d.projectionMatrix),f};let A=null;function L(z,B){if(a=B.getViewerPose(o),a!==null){let U=a.views,D=i.renderState.baseLayer;n.setFramebuffer(D.framebuffer);let I=!1;U.length!==f.cameras.length&&(f.cameras.length=0,I=!0);for(let G=0;G<U.length;G++){let q=U[G],Z=D.getViewport(q),Q=h[G];Q.matrix.fromArray(q.transform.matrix),Q.projectionMatrix.fromArray(q.projectionMatrix),Q.viewport.set(Z.x,Z.y,Z.width,Z.height),G===0&&f.matrix.copy(Q.matrix),I===!0&&f.cameras.push(Q)}}let V=i.inputSources;for(let U=0;U<l.length;U++){let D=l[U],I=V[U];D.update(I,B,o)}A&&A(z,B)}let H=new bx;H.setAnimationLoop(L),this.setAnimationLoop=function(z){A=z},this.dispose=function(){}}Object.assign(Lx.prototype,Ei.prototype);function L2(n){function e(_,g){_.fogColor.value.copy(g.color),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function t(_,g,v,b){g.isMeshBasicMaterial?i(_,g):g.isMeshLambertMaterial?(i(_,g),l(_,g)):g.isMeshToonMaterial?(i(_,g),d(_,g)):g.isMeshPhongMaterial?(i(_,g),c(_,g)):g.isMeshStandardMaterial?(i(_,g),g.isMeshPhysicalMaterial?h(_,g):u(_,g)):g.isMeshMatcapMaterial?(i(_,g),f(_,g)):g.isMeshDepthMaterial?(i(_,g),p(_,g)):g.isMeshDistanceMaterial?(i(_,g),m(_,g)):g.isMeshNormalMaterial?(i(_,g),y(_,g)):g.isLineBasicMaterial?(r(_,g),g.isLineDashedMaterial&&o(_,g)):g.isPointsMaterial?s(_,g,v,b):g.isSpriteMaterial?a(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map),g.alphaMap&&(_.alphaMap.value=g.alphaMap),g.specularMap&&(_.specularMap.value=g.specularMap);let v=n.get(g).envMap;if(v){_.envMap.value=v,_.flipEnvMap.value=v.isCubeTexture&&v._needsFlipEnvMap?-1:1,_.reflectivity.value=g.reflectivity,_.refractionRatio.value=g.refractionRatio;let x=n.get(v).__maxMipLevel;x!==void 0&&(_.maxMipLevel.value=x)}g.lightMap&&(_.lightMap.value=g.lightMap,_.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity);let b;g.map?b=g.map:g.specularMap?b=g.specularMap:g.displacementMap?b=g.displacementMap:g.normalMap?b=g.normalMap:g.bumpMap?b=g.bumpMap:g.roughnessMap?b=g.roughnessMap:g.metalnessMap?b=g.metalnessMap:g.alphaMap?b=g.alphaMap:g.emissiveMap?b=g.emissiveMap:g.clearcoatMap?b=g.clearcoatMap:g.clearcoatNormalMap?b=g.clearcoatNormalMap:g.clearcoatRoughnessMap&&(b=g.clearcoatRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),_.uvTransform.value.copy(b.matrix));let M;g.aoMap?M=g.aoMap:g.lightMap&&(M=g.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),_.uv2Transform.value.copy(M.matrix))}function r(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity}function o(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function s(_,g,v,b){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*v,_.scale.value=b*.5,g.map&&(_.map.value=g.map),g.alphaMap&&(_.alphaMap.value=g.alphaMap);let M;g.map?M=g.map:g.alphaMap&&(M=g.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),_.uvTransform.value.copy(M.matrix))}function a(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map),g.alphaMap&&(_.alphaMap.value=g.alphaMap);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),_.uvTransform.value.copy(v.matrix))}function l(_,g){g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap)}function c(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap),g.bumpMap&&(_.bumpMap.value=g.bumpMap,_.bumpScale.value=g.bumpScale,g.side===Lt&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,_.normalScale.value.copy(g.normalScale),g.side===Lt&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias)}function d(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap),g.bumpMap&&(_.bumpMap.value=g.bumpMap,_.bumpScale.value=g.bumpScale,g.side===Lt&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,_.normalScale.value.copy(g.normalScale),g.side===Lt&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias)}function u(_,g){_.roughness.value=g.roughness,_.metalness.value=g.metalness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap),g.bumpMap&&(_.bumpMap.value=g.bumpMap,_.bumpScale.value=g.bumpScale,g.side===Lt&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,_.normalScale.value.copy(g.normalScale),g.side===Lt&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),n.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function h(_,g){u(_,g),_.reflectivity.value=g.reflectivity,_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.sheen&&_.sheen.value.copy(g.sheen),g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),_.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Lt&&_.clearcoatNormalScale.value.negate()),_.transmission.value=g.transmission,g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap)}function f(_,g){g.matcap&&(_.matcap.value=g.matcap),g.bumpMap&&(_.bumpMap.value=g.bumpMap,_.bumpScale.value=g.bumpScale,g.side===Lt&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,_.normalScale.value.copy(g.normalScale),g.side===Lt&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias)}function p(_,g){g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias)}function m(_,g){g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),_.referencePosition.value.copy(g.referencePosition),_.nearDistance.value=g.nearDistance,_.farDistance.value=g.farDistance}function y(_,g){g.bumpMap&&(_.bumpMap.value=g.bumpMap,_.bumpScale.value=g.bumpScale,g.side===Lt&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,_.normalScale.value.copy(g.normalScale),g.side===Lt&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function R2(){let n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function Il(n){n=n||{};let e=n.canvas!==void 0?n.canvas:R2(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,o=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,c=n.powerPreference!==void 0?n.powerPreference:"default",d=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1,u=null,h=null,f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Qt,this.physicallyCorrectLights=!1,this.toneMapping=ro,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;let p=this,m=!1,y=null,_=0,g=0,v=null,b=null,M=-1,x=null,C=new $e,A=new $e,L=null,H=e.width,z=e.height,B=1,V=null,U=null,D=new $e(0,0,H,z),I=new $e(0,0,H,z),G=!1,q=new fo,Z=!1,Q=!1,ie=new Ue,ge=new P,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return v===null?B:1}let X=t;function kt(E,Y){for(let j=0;j<E.length;j++){let J=E[j],ue=e.getContext(J,Y);if(ue!==null)return ue}return null}try{let E={alpha:i,depth:r,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if(e.addEventListener("webglcontextlost",pt,!1),e.addEventListener("webglcontextrestored",on,!1),X===null){let Y=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&Y.shift(),X=kt(Y,E),X===null)throw kt(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(E){throw console.error("THREE.WebGLRenderer: "+E.message),E}let pe,ke,we,Xe,De,ee,re,le,Ee,he,R,T,te,K,F,ne,de,be,se,xe,Te;function Fe(){pe=new uC(X),ke=new aC(X,pe,n),ke.isWebGL2===!1&&(pe.get("WEBGL_depth_texture"),pe.get("OES_texture_float"),pe.get("OES_texture_half_float"),pe.get("OES_texture_half_float_linear"),pe.get("OES_standard_derivatives"),pe.get("OES_element_index_uint"),pe.get("OES_vertex_array_object"),pe.get("ANGLE_instanced_arrays")),pe.get("OES_texture_float_linear"),xe=new Ax(X,pe,ke),we=new O2(X,pe,ke),we.scissor(A.copy(I).multiplyScalar(B).floor()),we.viewport(C.copy(D).multiplyScalar(B).floor()),Xe=new fC(X),De=new _2,ee=new A2(X,pe,we,De,ke,xe,Xe),re=new cC(p),le=new FM(X,ke),Te=new oC(X,pe,le,ke),Ee=new dC(X,le,Xe,Te),he=new _C(X,Ee,le,Xe),de=new gC(X),F=new lC(De),R=new g2(p,re,pe,ke,Te,F),T=new L2(De),te=new v2(De),K=new P2(pe,ke),ne=new rC(p,re,we,he,a),be=new sC(X,pe,Xe,ke),se=new hC(X,pe,Xe,ke),Xe.programs=R.programs,p.capabilities=ke,p.extensions=pe,p.properties=De,p.renderLists=te,p.state=we,p.info=Xe}Fe();let _e=new Lx(p,X);this.xr=_e;let Le=new Ox(p,he,ke.maxTextureSize);this.shadowMap=Le,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){let E=pe.get("WEBGL_lose_context");E&&E.loseContext()},this.forceContextRestore=function(){let E=pe.get("WEBGL_lose_context");E&&E.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(E){E!==void 0&&(B=E,this.setSize(H,z,!1))},this.getSize=function(E){return E===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),E=new $),E.set(H,z)},this.setSize=function(E,Y,j){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=E,z=Y,e.width=Math.floor(E*B),e.height=Math.floor(Y*B),j!==!1&&(e.style.width=E+"px",e.style.height=Y+"px"),this.setViewport(0,0,E,Y)},this.getDrawingBufferSize=function(E){return E===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),E=new $),E.set(H*B,z*B).floor()},this.setDrawingBufferSize=function(E,Y,j){H=E,z=Y,B=j,e.width=Math.floor(E*j),e.height=Math.floor(Y*j),this.setViewport(0,0,E,Y)},this.getCurrentViewport=function(E){return E===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),E=new $e),E.copy(C)},this.getViewport=function(E){return E.copy(D)},this.setViewport=function(E,Y,j,J){E.isVector4?D.set(E.x,E.y,E.z,E.w):D.set(E,Y,j,J),we.viewport(C.copy(D).multiplyScalar(B).floor())},this.getScissor=function(E){return E.copy(I)},this.setScissor=function(E,Y,j,J){E.isVector4?I.set(E.x,E.y,E.z,E.w):I.set(E,Y,j,J),we.scissor(A.copy(I).multiplyScalar(B).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(E){we.setScissorTest(G=E)},this.setOpaqueSort=function(E){V=E},this.setTransparentSort=function(E){U=E},this.getClearColor=function(E){return E===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),E=new fe),E.copy(ne.getClearColor())},this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)},this.getClearAlpha=function(){return ne.getClearAlpha()},this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)},this.clear=function(E,Y,j){let J=0;(E===void 0||E)&&(J|=16384),(Y===void 0||Y)&&(J|=256),(j===void 0||j)&&(J|=1024),X.clear(J)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",pt,!1),e.removeEventListener("webglcontextrestored",on,!1),te.dispose(),K.dispose(),De.dispose(),re.dispose(),he.dispose(),Te.dispose(),_e.dispose(),ta.stop()};function pt(E){E.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function on(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1,Fe()}function ng(E){let Y=E.target;Y.removeEventListener("dispose",ng),Db(Y)}function Db(E){ig(E),De.remove(E)}function ig(E){let Y=De.get(E).program;Y!==void 0&&R.releaseProgram(Y)}function Fb(E,Y){E.render(function(j){p.renderBufferImmediate(j,Y)})}this.renderBufferImmediate=function(E,Y){Te.initAttributes();let j=De.get(E);E.hasPositions&&!j.position&&(j.position=X.createBuffer()),E.hasNormals&&!j.normal&&(j.normal=X.createBuffer()),E.hasUvs&&!j.uv&&(j.uv=X.createBuffer()),E.hasColors&&!j.color&&(j.color=X.createBuffer());let J=Y.getAttributes();E.hasPositions&&(X.bindBuffer(34962,j.position),X.bufferData(34962,E.positionArray,35048),Te.enableAttribute(J.position),X.vertexAttribPointer(J.position,3,5126,!1,0,0)),E.hasNormals&&(X.bindBuffer(34962,j.normal),X.bufferData(34962,E.normalArray,35048),Te.enableAttribute(J.normal),X.vertexAttribPointer(J.normal,3,5126,!1,0,0)),E.hasUvs&&(X.bindBuffer(34962,j.uv),X.bufferData(34962,E.uvArray,35048),Te.enableAttribute(J.uv),X.vertexAttribPointer(J.uv,2,5126,!1,0,0)),E.hasColors&&(X.bindBuffer(34962,j.color),X.bufferData(34962,E.colorArray,35048),Te.enableAttribute(J.color),X.vertexAttribPointer(J.color,3,5126,!1,0,0)),Te.disableUnusedAttributes(),X.drawArrays(4,0,E.count),E.count=0},this.renderBufferDirect=function(E,Y,j,J,ue,He){Y===null&&(Y=Pe);let Be=ue.isMesh&&ue.matrixWorld.determinant()<0,je=ag(E,Y,J,ue);we.setMaterial(J,Be);let Ve=j.index,Et=j.attributes.position;if(Ve===null){if(Et===void 0||Et.count===0)return}else if(Ve.count===0)return;let St=1;J.wireframe===!0&&(Ve=Ee.getWireframeAttribute(j),St=2),(J.morphTargets||J.morphNormals)&&de.update(ue,j,J,je),Te.setup(ue,J,je,j,Ve);let Ne,rt=be;Ve!==null&&(Ne=le.get(Ve),rt=se,rt.setIndex(Ne));let Di=Ve!==null?Ve.count:Et.count,ot=j.drawRange.start*St,Br=j.drawRange.count*St,Dt=He!==null?He.start*St:0,ch=He!==null?He.count*St:1/0,sn=Math.max(ot,Dt),na=Math.min(Di,ot+Br,Dt+ch)-1,Fo=Math.max(0,na-sn+1);if(Fo!==0){if(ue.isMesh)J.wireframe===!0?(we.setLineWidth(J.wireframeLinewidth*ve()),rt.setMode(1)):rt.setMode(4);else if(ue.isLine){let ia=J.linewidth;ia===void 0&&(ia=1),we.setLineWidth(ia*ve()),ue.isLineSegments?rt.setMode(1):ue.isLineLoop?rt.setMode(2):rt.setMode(3)}else ue.isPoints?rt.setMode(0):ue.isSprite&&rt.setMode(4);if(ue.isInstancedMesh)rt.renderInstances(sn,Fo,ue.count);else if(j.isInstancedBufferGeometry){let ia=Math.min(j.instanceCount,j._maxInstanceCount);rt.renderInstances(sn,Fo,ia)}else rt.render(sn,Fo)}},this.compile=function(E,Y){h=K.get(E),h.init(),E.traverseVisible(function(J){J.isLight&&J.layers.test(Y.layers)&&(h.pushLight(J),J.castShadow&&h.pushShadow(J))}),h.setupLights();let j=new WeakMap;E.traverse(function(J){let ue=J.material;if(ue)if(Array.isArray(ue))for(let He=0;He<ue.length;He++){let Be=ue[He];j.has(Be)===!1&&(ki(Be,E,J),j.set(Be))}else j.has(ue)===!1&&(ki(ue,E,J),j.set(ue))})};let lh=null;function Nb(E){_e.isPresenting||lh&&lh(E)}let ta=new bx;ta.setAnimationLoop(Nb),typeof window<"u"&&ta.setContext(window),this.setAnimationLoop=function(E){lh=E,_e.setAnimationLoop(E),E===null?ta.stop():ta.start()},this.render=function(E,Y){let j,J;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),j=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),J=arguments[3]),Y!==void 0&&Y.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;Te.resetDefaultState(),M=-1,x=null,E.autoUpdate===!0&&E.updateMatrixWorld(),Y.parent===null&&Y.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(Y=_e.getCamera(Y)),E.isScene===!0&&E.onBeforeRender(p,E,Y,j||v),h=K.get(E,f.length),h.init(),f.push(h),ie.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),q.setFromProjectionMatrix(ie),Q=this.localClippingEnabled,Z=F.init(this.clippingPlanes,Q,Y),u=te.get(E,Y),u.init(),rg(E,Y,0,p.sortObjects),u.finish(),p.sortObjects===!0&&u.sort(V,U),Z===!0&&F.beginShadows();let ue=h.state.shadowsArray;Le.render(ue,E,Y),h.setupLights(),h.setupLightsView(Y),Z===!0&&F.endShadows(),this.info.autoReset===!0&&this.info.reset(),j!==void 0&&this.setRenderTarget(j),ne.render(u,E,Y,J);let He=u.opaque,Be=u.transparent;He.length>0&&og(He,E,Y),Be.length>0&&og(Be,E,Y),E.isScene===!0&&E.onAfterRender(p,E,Y),v!==null&&(ee.updateRenderTargetMipmap(v),ee.updateMultisampleRenderTarget(v)),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1),f.pop(),f.length>0?h=f[f.length-1]:h=null,u=null};function rg(E,Y,j,J){if(E.visible===!1)return;if(E.layers.test(Y.layers)){if(E.isGroup)j=E.renderOrder;else if(E.isLOD)E.autoUpdate===!0&&E.update(Y);else if(E.isLight)h.pushLight(E),E.castShadow&&h.pushShadow(E);else if(E.isSprite){if(!E.frustumCulled||q.intersectsSprite(E)){J&&ge.setFromMatrixPosition(E.matrixWorld).applyMatrix4(ie);let Be=he.update(E),je=E.material;je.visible&&u.push(E,Be,je,j,ge.z,null)}}else if(E.isImmediateRenderObject)J&&ge.setFromMatrixPosition(E.matrixWorld).applyMatrix4(ie),u.push(E,null,E.material,j,ge.z,null);else if((E.isMesh||E.isLine||E.isPoints)&&(E.isSkinnedMesh&&E.skeleton.frame!==Xe.render.frame&&(E.skeleton.update(),E.skeleton.frame=Xe.render.frame),!E.frustumCulled||q.intersectsObject(E))){J&&ge.setFromMatrixPosition(E.matrixWorld).applyMatrix4(ie);let Be=he.update(E),je=E.material;if(Array.isArray(je)){let Ve=Be.groups;for(let Et=0,St=Ve.length;Et<St;Et++){let Ne=Ve[Et],rt=je[Ne.materialIndex];rt&&rt.visible&&u.push(E,Be,rt,j,ge.z,Ne)}}else je.visible&&u.push(E,Be,je,j,ge.z,null)}}let He=E.children;for(let Be=0,je=He.length;Be<je;Be++)rg(He[Be],Y,j,J)}function og(E,Y,j){let J=Y.isScene===!0?Y.overrideMaterial:null;for(let ue=0,He=E.length;ue<He;ue++){let Be=E[ue],je=Be.object,Ve=Be.geometry,Et=J===null?Be.material:J,St=Be.group;if(j.isArrayCamera){let Ne=j.cameras;for(let rt=0,Di=Ne.length;rt<Di;rt++){let ot=Ne[rt];je.layers.test(ot.layers)&&(we.viewport(C.copy(ot.viewport)),h.setupLightsView(ot),sg(je,Y,ot,Ve,Et,St))}}else sg(je,Y,j,Ve,Et,St)}}function sg(E,Y,j,J,ue,He){if(E.onBeforeRender(p,Y,j,J,ue,He),E.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,E.matrixWorld),E.normalMatrix.getNormalMatrix(E.modelViewMatrix),E.isImmediateRenderObject){let Be=ag(j,Y,ue,E);we.setMaterial(ue),Te.reset(),Fb(E,Be)}else p.renderBufferDirect(j,Y,J,ue,E,He);E.onAfterRender(p,Y,j,J,ue,He)}function ki(E,Y,j){Y.isScene!==!0&&(Y=Pe);let J=De.get(E),ue=h.state.lights,He=h.state.shadowsArray,Be=ue.state.version,je=R.getParameters(E,ue.state,He,Y,j),Ve=R.getProgramCacheKey(je),Et=J.program,St=!0;if(Et===void 0)E.addEventListener("dispose",ng);else if(Et.cacheKey!==Ve)ig(E);else if(J.lightsStateVersion!==Be)St=!1;else if(je.shaderID!==void 0){let ot=E.isMeshStandardMaterial?Y.environment:null;J.envMap=re.get(E.envMap||ot);return}else St=!1;St&&(je.uniforms=R.getUniforms(E),E.onBeforeCompile(je,p),Et=R.acquireProgram(je,Ve),J.program=Et,J.uniforms=je.uniforms,J.outputEncoding=je.outputEncoding);let Ne=J.uniforms;(!E.isShaderMaterial&&!E.isRawShaderMaterial||E.clipping===!0)&&(J.numClippingPlanes=F.numPlanes,J.numIntersection=F.numIntersection,Ne.clippingPlanes=F.uniform),J.environment=E.isMeshStandardMaterial?Y.environment:null,J.fog=Y.fog,J.envMap=re.get(E.envMap||J.environment),J.needsLights=Ub(E),J.lightsStateVersion=Be,J.needsLights&&(Ne.ambientLightColor.value=ue.state.ambient,Ne.lightProbe.value=ue.state.probe,Ne.directionalLights.value=ue.state.directional,Ne.directionalLightShadows.value=ue.state.directionalShadow,Ne.spotLights.value=ue.state.spot,Ne.spotLightShadows.value=ue.state.spotShadow,Ne.rectAreaLights.value=ue.state.rectArea,Ne.ltc_1.value=ue.state.rectAreaLTC1,Ne.ltc_2.value=ue.state.rectAreaLTC2,Ne.pointLights.value=ue.state.point,Ne.pointLightShadows.value=ue.state.pointShadow,Ne.hemisphereLights.value=ue.state.hemi,Ne.directionalShadowMap.value=ue.state.directionalShadowMap,Ne.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,Ne.spotShadowMap.value=ue.state.spotShadowMap,Ne.spotShadowMatrix.value=ue.state.spotShadowMatrix,Ne.pointShadowMap.value=ue.state.pointShadowMap,Ne.pointShadowMatrix.value=ue.state.pointShadowMatrix);let rt=J.program.getUniforms(),Di=xr.seqWithValue(rt.seq,Ne);J.uniformsList=Di}function ag(E,Y,j,J){Y.isScene!==!0&&(Y=Pe),ee.resetTextureUnits();let ue=Y.fog,He=j.isMeshStandardMaterial?Y.environment:null,Be=v===null?p.outputEncoding:v.texture.encoding,je=re.get(j.envMap||He),Ve=De.get(j),Et=h.state.lights;if(Z===!0&&(Q===!0||E!==x)){let Dt=E===x&&j.id===M;F.setState(j,E,Dt)}j.version===Ve.__version?(j.fog&&Ve.fog!==ue||Ve.environment!==He||Ve.needsLights&&Ve.lightsStateVersion!==Et.state.version||Ve.numClippingPlanes!==void 0&&(Ve.numClippingPlanes!==F.numPlanes||Ve.numIntersection!==F.numIntersection)||Ve.outputEncoding!==Be||Ve.envMap!==je)&&ki(j,Y,J):(ki(j,Y,J),Ve.__version=j.version);let St=!1,Ne=!1,rt=!1,Di=Ve.program,ot=Di.getUniforms(),Br=Ve.uniforms;if(we.useProgram(Di.program)&&(St=!0,Ne=!0,rt=!0),j.id!==M&&(M=j.id,Ne=!0),St||x!==E){if(ot.setValue(X,"projectionMatrix",E.projectionMatrix),ke.logarithmicDepthBuffer&&ot.setValue(X,"logDepthBufFC",2/(Math.log(E.far+1)/Math.LN2)),x!==E&&(x=E,Ne=!0,rt=!0),j.isShaderMaterial||j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshStandardMaterial||j.envMap){let Dt=ot.map.cameraPosition;Dt!==void 0&&Dt.setValue(X,ge.setFromMatrixPosition(E.matrixWorld))}(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial)&&ot.setValue(X,"isOrthographic",E.isOrthographicCamera===!0),(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial||j.isShadowMaterial||j.skinning)&&ot.setValue(X,"viewMatrix",E.matrixWorldInverse)}if(j.skinning){ot.setOptional(X,J,"bindMatrix"),ot.setOptional(X,J,"bindMatrixInverse");let Dt=J.skeleton;if(Dt){let ch=Dt.bones;if(ke.floatVertexTextures){if(Dt.boneTexture===null){let sn=Math.sqrt(ch.length*4);sn=Re.ceilPowerOfTwo(sn),sn=Math.max(sn,4);let na=new Float32Array(sn*sn*4);na.set(Dt.boneMatrices);let Fo=new Yi(na,sn,sn,bn,Gi);Dt.boneMatrices=na,Dt.boneTexture=Fo,Dt.boneTextureSize=sn}ot.setValue(X,"boneTexture",Dt.boneTexture,ee),ot.setValue(X,"boneTextureSize",Dt.boneTextureSize)}else ot.setOptional(X,Dt,"boneMatrices")}}return(Ne||Ve.receiveShadow!==J.receiveShadow)&&(Ve.receiveShadow=J.receiveShadow,ot.setValue(X,"receiveShadow",J.receiveShadow)),Ne&&(ot.setValue(X,"toneMappingExposure",p.toneMappingExposure),Ve.needsLights&&zb(Br,rt),ue&&j.fog&&T.refreshFogUniforms(Br,ue),T.refreshMaterialUniforms(Br,j,B,z),xr.upload(X,Ve.uniformsList,Br,ee)),j.isShaderMaterial&&j.uniformsNeedUpdate===!0&&(xr.upload(X,Ve.uniformsList,Br,ee),j.uniformsNeedUpdate=!1),j.isSpriteMaterial&&ot.setValue(X,"center",J.center),ot.setValue(X,"modelViewMatrix",J.modelViewMatrix),ot.setValue(X,"normalMatrix",J.normalMatrix),ot.setValue(X,"modelMatrix",J.matrixWorld),Di}function zb(E,Y){E.ambientLightColor.needsUpdate=Y,E.lightProbe.needsUpdate=Y,E.directionalLights.needsUpdate=Y,E.directionalLightShadows.needsUpdate=Y,E.pointLights.needsUpdate=Y,E.pointLightShadows.needsUpdate=Y,E.spotLights.needsUpdate=Y,E.spotLightShadows.needsUpdate=Y,E.rectAreaLights.needsUpdate=Y,E.hemisphereLights.needsUpdate=Y}function Ub(E){return E.isMeshLambertMaterial||E.isMeshToonMaterial||E.isMeshPhongMaterial||E.isMeshStandardMaterial||E.isShadowMaterial||E.isShaderMaterial&&E.lights===!0}this.setFramebuffer=function(E){y!==E&&v===null&&X.bindFramebuffer(36160,E),y=E},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return g},this.getRenderList=function(){return u},this.setRenderList=function(E){u=E},this.getRenderTarget=function(){return v},this.setRenderTarget=function(E,Y=0,j=0){v=E,_=Y,g=j,E&&De.get(E).__webglFramebuffer===void 0&&ee.setupRenderTarget(E);let J=y,ue=!1;if(E){let He=De.get(E).__webglFramebuffer;E.isWebGLCubeRenderTarget?(J=He[Y],ue=!0):E.isWebGLMultisampleRenderTarget?J=De.get(E).__webglMultisampledFramebuffer:J=He,C.copy(E.viewport),A.copy(E.scissor),L=E.scissorTest}else C.copy(D).multiplyScalar(B).floor(),A.copy(I).multiplyScalar(B).floor(),L=G;if(b!==J&&(X.bindFramebuffer(36160,J),b=J),we.viewport(C),we.scissor(A),we.setScissorTest(L),ue){let He=De.get(E.texture);X.framebufferTexture2D(36160,36064,34069+Y,He.__webglTexture,j)}},this.readRenderTargetPixels=function(E,Y,j,J,ue,He,Be){if(!(E&&E.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=De.get(E).__webglFramebuffer;if(E.isWebGLCubeRenderTarget&&Be!==void 0&&(je=je[Be]),je){let Ve=!1;je!==b&&(X.bindFramebuffer(36160,je),Ve=!0);try{let Et=E.texture,St=Et.format,Ne=Et.type;if(St!==bn&&xe.convert(St)!==X.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Ne!==Ns&&xe.convert(Ne)!==X.getParameter(35738)&&!(Ne===Gi&&(ke.isWebGL2||pe.get("OES_texture_float")||pe.get("WEBGL_color_buffer_float")))&&!(Ne===Fa&&(ke.isWebGL2?pe.get("EXT_color_buffer_float"):pe.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}X.checkFramebufferStatus(36160)===36053?Y>=0&&Y<=E.width-J&&j>=0&&j<=E.height-ue&&X.readPixels(Y,j,J,ue,xe.convert(St),xe.convert(Ne),He):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Ve&&X.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(E,Y,j=0){let J=Math.pow(2,-j),ue=Math.floor(Y.image.width*J),He=Math.floor(Y.image.height*J),Be=xe.convert(Y.format);ee.setTexture2D(Y,0),X.copyTexImage2D(3553,j,Be,E.x,E.y,ue,He,0),we.unbindTexture()},this.copyTextureToTexture=function(E,Y,j,J=0){let ue=Y.image.width,He=Y.image.height,Be=xe.convert(j.format),je=xe.convert(j.type);ee.setTexture2D(j,0),X.pixelStorei(37440,j.flipY),X.pixelStorei(37441,j.premultiplyAlpha),X.pixelStorei(3317,j.unpackAlignment),Y.isDataTexture?X.texSubImage2D(3553,J,E.x,E.y,ue,He,Be,je,Y.image.data):Y.isCompressedTexture?X.compressedTexSubImage2D(3553,J,E.x,E.y,Y.mipmaps[0].width,Y.mipmaps[0].height,Be,Y.mipmaps[0].data):X.texSubImage2D(3553,J,E.x,E.y,Be,je,Y.image),J===0&&j.generateMipmaps&&X.generateMipmap(3553),we.unbindTexture()},this.initTexture=function(E){ee.setTexture2D(E,0),we.unbindTexture()},this.resetState=function(){we.reset(),Te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function $f(n){Il.call(this,n)}$f.prototype=Object.assign(Object.create(Il.prototype),{constructor:$f,isWebGL1Renderer:!0});var yu=class n{constructor(e,t){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new fe(e),this.density=t!==void 0?t:25e-5}clone(){return new n(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}},xu=class n{constructor(e,t,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new fe(e),this.near=t!==void 0?t:1,this.far=i!==void 0?i:1e3}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Ya=class extends ye{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};function vn(n,e){this.array=n,this.stride=e,this.count=n!==void 0?n.length/e:0,this.usage=Rl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Re.generateUUID()}Object.defineProperty(vn.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(vn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.stride,t*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[n+i]=e.array[t+i];return this},set:function(n,e=0){return this.array.set(n,e),this},clone:function(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Re.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),t=new vn(e,this.stride);return t.setUsage(this.usage),t},onUpload:function(n){return this.onUploadCallback=n,this},toJSON:function(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Re.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var Zr=new P;function Cr(n,e,t,i){this.name="",this.data=n,this.itemSize=e,this.offset=t,this.normalized=i===!0}Object.defineProperties(Cr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(n){this.data.needsUpdate=n}}});Object.assign(Cr.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(n){for(let e=0,t=this.data.count;e<t;e++)Zr.x=this.getX(e),Zr.y=this.getY(e),Zr.z=this.getZ(e),Zr.applyMatrix4(n),this.setXYZ(e,Zr.x,Zr.y,Zr.z);return this},setX:function(n,e){return this.data.array[n*this.data.stride+this.offset]=e,this},setY:function(n,e){return this.data.array[n*this.data.stride+this.offset+1]=e,this},setZ:function(n,e){return this.data.array[n*this.data.stride+this.offset+2]=e,this},setW:function(n,e){return this.data.array[n*this.data.stride+this.offset+3]=e,this},getX:function(n){return this.data.array[n*this.data.stride+this.offset]},getY:function(n){return this.data.array[n*this.data.stride+this.offset+1]},getZ:function(n){return this.data.array[n*this.data.stride+this.offset+2]},getW:function(n){return this.data.array[n*this.data.stride+this.offset+3]},setXY:function(n,e,t){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this},setXYZ:function(n,e,t,i){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=i,this},setXYZW:function(n,e,t,i,r){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=i,this.data.array[n+3]=r,this},clone:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let i=t*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new Ce(new this.array.constructor(e),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new Cr(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let i=t*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function Pr(n){Oe.call(this),this.type="SpriteMaterial",this.color=new fe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(n)}Pr.prototype=Object.create(Oe.prototype);Pr.prototype.constructor=Pr;Pr.prototype.isSpriteMaterial=!0;Pr.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this};var os,va=new P,ss=new P,as=new P,ls=new $,ba=new $,Rx=new Ue,Nc=new P,Ma=new P,zc=new P,e_=new $,vf=new $,t_=new $;function Xa(n){if(ye.call(this),this.type="Sprite",os===void 0){os=new Se;let e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new vn(e,5);os.setIndex([0,1,2,0,2,3]),os.setAttribute("position",new Cr(t,3,0,!1)),os.setAttribute("uv",new Cr(t,2,3,!1))}this.geometry=os,this.material=n!==void 0?n:new Pr,this.center=new $(.5,.5)}Xa.prototype=Object.assign(Object.create(ye.prototype),{constructor:Xa,isSprite:!0,raycast:function(n,e){n.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ss.setFromMatrixScale(this.matrixWorld),Rx.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),as.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ss.multiplyScalar(-as.z);let t=this.material.rotation,i,r;t!==0&&(r=Math.cos(t),i=Math.sin(t));let o=this.center;Uc(Nc.set(-.5,-.5,0),as,o,ss,i,r),Uc(Ma.set(.5,-.5,0),as,o,ss,i,r),Uc(zc.set(.5,.5,0),as,o,ss,i,r),e_.set(0,0),vf.set(1,0),t_.set(1,1);let s=n.ray.intersectTriangle(Nc,Ma,zc,!1,va);if(s===null&&(Uc(Ma.set(-.5,.5,0),as,o,ss,i,r),vf.set(0,1),s=n.ray.intersectTriangle(Nc,zc,Ma,!1,va),s===null))return;let a=n.ray.origin.distanceTo(va);a<n.near||a>n.far||e.push({distance:a,point:va.clone(),uv:wn.getUV(va,Nc,Ma,zc,e_,vf,t_,new $),face:null,object:this})},copy:function(n){return ye.prototype.copy.call(this,n),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}});function Uc(n,e,t,i,r,o){ls.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(ba.x=o*ls.x-r*ls.y,ba.y=r*ls.x+o*ls.y):ba.copy(ls),n.copy(e),n.x+=ba.x,n.y+=ba.y,n.applyMatrix4(Rx)}var Bc=new P,n_=new P;function Za(){ye.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Za.prototype=Object.assign(Object.create(ye.prototype),{constructor:Za,isLOD:!0,copy:function(n){ye.prototype.copy.call(this,n,!1);let e=n.levels;for(let t=0,i=e.length;t<i;t++){let r=e[t];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=n.autoUpdate,this},addLevel:function(n,e=0){e=Math.abs(e);let t=this.levels,i;for(i=0;i<t.length&&!(e<t[i].distance);i++);return t.splice(i,0,{distance:e,object:n}),this.add(n),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(n){let e=this.levels;if(e.length>0){let t,i;for(t=1,i=e.length;t<i&&!(n<e[t].distance);t++);return e[t-1].object}return null},raycast:function(n,e){if(this.levels.length>0){Bc.setFromMatrixPosition(this.matrixWorld);let i=n.ray.origin.distanceTo(Bc);this.getObjectForDistance(i).raycast(n,e)}},update:function(n){let e=this.levels;if(e.length>1){Bc.setFromMatrixPosition(n.matrixWorld),n_.setFromMatrixPosition(this.matrixWorld);let t=Bc.distanceTo(n_)/n.zoom;e[0].object.visible=!0;let i,r;for(i=1,r=e.length;i<r&&t>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(n){let e=ye.prototype.toJSON.call(this,n);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];let t=this.levels;for(let i=0,r=t.length;i<r;i++){let o=t[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}});var i_=new P,r_=new $e,o_=new $e,I2=new P,s_=new Ue;function Ja(n,e){n&&n.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ct.call(this,n,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ue,this.bindMatrixInverse=new Ue}Ja.prototype=Object.assign(Object.create(ct.prototype),{constructor:Ja,isSkinnedMesh:!0,copy:function(n){return ct.prototype.copy.call(this,n),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,this},bind:function(n,e){this.skeleton=n,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){let n=new $e,e=this.geometry.attributes.skinWeight;for(let t=0,i=e.count;t<i;t++){n.x=e.getX(t),n.y=e.getY(t),n.z=e.getZ(t),n.w=e.getW(t);let r=1/n.manhattanLength();r!==1/0?n.multiplyScalar(r):n.set(1,0,0,0),e.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(n){ct.prototype.updateMatrixWorld.call(this,n),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(n,e){let t=this.skeleton,i=this.geometry;r_.fromBufferAttribute(i.attributes.skinIndex,n),o_.fromBufferAttribute(i.attributes.skinWeight,n),i_.fromBufferAttribute(i.attributes.position,n).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){let o=o_.getComponent(r);if(o!==0){let s=r_.getComponent(r);s_.multiplyMatrices(t.bones[s].matrixWorld,t.boneInverses[s]),e.addScaledVector(I2.copy(i_).applyMatrix4(s_),o)}}return e.applyMatrix4(this.bindMatrixInverse)}});function $a(){ye.call(this),this.type="Bone"}$a.prototype=Object.assign(Object.create(ye.prototype),{constructor:$a,isBone:!0});var a_=new Ue,k2=new Ue;function Ka(n=[],e=[]){this.uuid=Re.generateUUID(),this.bones=n.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(Ka.prototype,{init:function(){let n=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),e.length===0)this.calculateInverses();else if(n.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,i=this.bones.length;t<i;t++)this.boneInverses.push(new Ue)}},calculateInverses:function(){this.boneInverses.length=0;for(let n=0,e=this.bones.length;n<e;n++){let t=new Ue;this.bones[n]&&t.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(t)}},pose:function(){for(let n=0,e=this.bones.length;n<e;n++){let t=this.bones[n];t&&t.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,e=this.bones.length;n<e;n++){let t=this.bones[n];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){let n=this.bones,e=this.boneInverses,t=this.boneMatrices,i=this.boneTexture;for(let r=0,o=n.length;r<o;r++){let s=n[r]?n[r].matrixWorld:k2;a_.multiplyMatrices(s,e[r]),a_.toArray(t,r*16)}i!==null&&(i.needsUpdate=!0)},clone:function(){return new Ka(this.bones,this.boneInverses)},getBoneByName:function(n){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];if(i.name===n)return i}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(n,e){this.uuid=n.uuid;for(let t=0,i=n.bones.length;t<i;t++){let r=n.bones[t],o=e[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new $a),this.bones.push(o),this.boneInverses.push(new Ue().fromArray(n.boneInverses[t]))}return this.init(),this},toJSON:function(){let n={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;let e=this.bones,t=this.boneInverses;for(let i=0,r=e.length;i<r;i++){let o=e[i];n.bones.push(o.uuid);let s=t[i];n.boneInverses.push(s.toArray())}return n}});var l_=new Ue,c_=new Ue,Vc=[],wa=new ct;function vu(n,e,t){ct.call(this,n,e),this.instanceMatrix=new Ce(new Float32Array(t*16),16),this.instanceColor=null,this.count=t,this.frustumCulled=!1}vu.prototype=Object.assign(Object.create(ct.prototype),{constructor:vu,isInstancedMesh:!0,copy:function(n){return ct.prototype.copy.call(this,n),this.instanceMatrix.copy(n.instanceMatrix),this.count=n.count,this},getColorAt:function(n,e){e.fromArray(this.instanceColor.array,n*3)},getMatrixAt:function(n,e){e.fromArray(this.instanceMatrix.array,n*16)},raycast:function(n,e){let t=this.matrixWorld,i=this.count;if(wa.geometry=this.geometry,wa.material=this.material,wa.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,l_),c_.multiplyMatrices(t,l_),wa.matrixWorld=c_,wa.raycast(n,Vc);for(let o=0,s=Vc.length;o<s;o++){let a=Vc[o];a.instanceId=r,a.object=this,e.push(a)}Vc.length=0}},setColorAt:function(n,e){this.instanceColor===null&&(this.instanceColor=new Ce(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,n*3)},setMatrixAt:function(n,e){e.toArray(this.instanceMatrix.array,n*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function ht(n){Oe.call(this),this.type="LineBasicMaterial",this.color=new fe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(n)}ht.prototype=Object.create(Oe.prototype);ht.prototype.constructor=ht;ht.prototype.isLineBasicMaterial=!0;ht.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.morphTargets=n.morphTargets,this};var u_=new P,d_=new P,h_=new Ue,Gc=new Mr,Hc=new Qn;function zn(n=new Se,e=new ht){ye.call(this),this.type="Line",this.geometry=n,this.material=e,this.updateMorphTargets()}zn.prototype=Object.assign(Object.create(ye.prototype),{constructor:zn,isLine:!0,copy:function(n){return ye.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},computeLineDistances:function(){let n=this.geometry;if(n.isBufferGeometry)if(n.index===null){let e=n.attributes.position,t=[0];for(let i=1,r=e.count;i<r;i++)u_.fromBufferAttribute(e,i-1),d_.fromBufferAttribute(e,i),t[i]=t[i-1],t[i]+=u_.distanceTo(d_);n.setAttribute("lineDistance",new ce(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){let e=n.vertices,t=n.lineDistances;t[0]=0;for(let i=1,r=e.length;i<r;i++)t[i]=t[i-1],t[i]+=e[i-1].distanceTo(e[i])}return this},raycast:function(n,e){let t=this.geometry,i=this.matrixWorld,r=n.params.Line.threshold;if(t.boundingSphere===null&&t.computeBoundingSphere(),Hc.copy(t.boundingSphere),Hc.applyMatrix4(i),Hc.radius+=r,n.ray.intersectsSphere(Hc)===!1)return;h_.copy(i).invert(),Gc.copy(n.ray).applyMatrix4(h_);let o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new P,l=new P,c=new P,d=new P,u=this.isLineSegments?2:1;if(t.isBufferGeometry){let h=t.index,p=t.attributes.position;if(h!==null){let m=h.array;for(let y=0,_=m.length-1;y<_;y+=u){let g=m[y],v=m[y+1];if(a.fromBufferAttribute(p,g),l.fromBufferAttribute(p,v),Gc.distanceSqToSegment(a,l,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);let M=n.ray.origin.distanceTo(d);M<n.near||M>n.far||e.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(let m=0,y=p.count-1;m<y;m+=u){if(a.fromBufferAttribute(p,m),l.fromBufferAttribute(p,m+1),Gc.distanceSqToSegment(a,l,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);let g=n.ray.origin.distanceTo(d);g<n.near||g>n.far||e.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(t.isGeometry){let h=t.vertices,f=h.length;for(let p=0;p<f-1;p+=u){if(Gc.distanceSqToSegment(h[p],h[p+1],d,c)>s)continue;d.applyMatrix4(this.matrixWorld);let y=n.ray.origin.distanceTo(d);y<n.near||y>n.far||e.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){let n=this.geometry;if(n.isBufferGeometry){let e=n.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{let e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Wc=new P,qc=new P;function tn(n,e){zn.call(this,n,e),this.type="LineSegments"}tn.prototype=Object.assign(Object.create(zn.prototype),{constructor:tn,isLineSegments:!0,computeLineDistances:function(){let n=this.geometry;if(n.isBufferGeometry)if(n.index===null){let e=n.attributes.position,t=[];for(let i=0,r=e.count;i<r;i+=2)Wc.fromBufferAttribute(e,i),qc.fromBufferAttribute(e,i+1),t[i]=i===0?0:t[i-1],t[i+1]=t[i]+Wc.distanceTo(qc);n.setAttribute("lineDistance",new ce(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){let e=n.vertices,t=n.lineDistances;for(let i=0,r=e.length;i<r;i+=2)Wc.copy(e[i]),qc.copy(e[i+1]),t[i]=i===0?0:t[i-1],t[i+1]=t[i]+Wc.distanceTo(qc)}return this}});function bu(n,e){zn.call(this,n,e),this.type="LineLoop"}bu.prototype=Object.assign(Object.create(zn.prototype),{constructor:bu,isLineLoop:!0});function ei(n){Oe.call(this),this.type="PointsMaterial",this.color=new fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(n)}ei.prototype=Object.create(Oe.prototype);ei.prototype.constructor=ei;ei.prototype.isPointsMaterial=!0;ei.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.morphTargets=n.morphTargets,this};var f_=new Ue,Kf=new Mr,jc=new Qn,Yc=new P;function Ss(n=new Se,e=new ei){ye.call(this),this.type="Points",this.geometry=n,this.material=e,this.updateMorphTargets()}Ss.prototype=Object.assign(Object.create(ye.prototype),{constructor:Ss,isPoints:!0,copy:function(n){return ye.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},raycast:function(n,e){let t=this.geometry,i=this.matrixWorld,r=n.params.Points.threshold;if(t.boundingSphere===null&&t.computeBoundingSphere(),jc.copy(t.boundingSphere),jc.applyMatrix4(i),jc.radius+=r,n.ray.intersectsSphere(jc)===!1)return;f_.copy(i).invert(),Kf.copy(n.ray).applyMatrix4(f_);let o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(t.isBufferGeometry){let a=t.index,c=t.attributes.position;if(a!==null){let d=a.array;for(let u=0,h=d.length;u<h;u++){let f=d[u];Yc.fromBufferAttribute(c,f),bf(Yc,f,s,i,n,e,this)}}else for(let d=0,u=c.count;d<u;d++)Yc.fromBufferAttribute(c,d),bf(Yc,d,s,i,n,e,this)}else{let a=t.vertices;for(let l=0,c=a.length;l<c;l++)bf(a[l],l,s,i,n,e,this)}},updateMorphTargets:function(){let n=this.geometry;if(n.isBufferGeometry){let e=n.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){let s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{let e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function bf(n,e,t,i,r,o,s){let a=Kf.distanceSqToPoint(n);if(a<t){let l=new P;Kf.closestPointToPoint(n,l),l.applyMatrix4(i);let c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}function Qf(n,e,t,i,r,o,s,a,l){tt.call(this,n,e,t,i,r,o,s,a,l),this.format=s!==void 0?s:yr,this.minFilter=o!==void 0?o:Nt,this.magFilter=r!==void 0?r:Nt,this.generateMipmaps=!1;let c=this;function d(){c.needsUpdate=!0,n.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(d)}Qf.prototype=Object.assign(Object.create(tt.prototype),{constructor:Qf,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){let n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Cs(n,e,t,i,r,o,s,a,l,c,d,u){tt.call(this,null,o,s,a,l,c,i,r,d,u),this.image={width:e,height:t},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}Cs.prototype=Object.create(tt.prototype);Cs.prototype.constructor=Cs;Cs.prototype.isCompressedTexture=!0;function Qa(n,e,t,i,r,o,s,a,l){tt.call(this,n,e,t,i,r,o,s,a,l),this.needsUpdate=!0}Qa.prototype=Object.create(tt.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isCanvasTexture=!0;function el(n,e,t,i,r,o,s,a,l,c){if(c=c!==void 0?c:oo,c!==oo&&c!==xs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&c===oo&&(t=Da),t===void 0&&c===xs&&(t=_s),tt.call(this,null,i,r,o,s,a,c,t,l),this.image={width:n,height:e},this.magFilter=s!==void 0?s:Rt,this.minFilter=a!==void 0?a:Rt,this.flipY=!1,this.generateMipmaps=!1}el.prototype=Object.create(tt.prototype);el.prototype.constructor=el;el.prototype.isDepthTexture=!0;var D2=0,xi=new Ue,Mf=new ye,Xc=new P;function et(){Object.defineProperty(this,"id",{value:D2+=2}),this.uuid=Re.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}et.prototype=Object.assign(Object.create(Ei.prototype),{constructor:et,isGeometry:!0,applyMatrix4:function(n){let e=new Bt().getNormalMatrix(n);for(let t=0,i=this.vertices.length;t<i;t++)this.vertices[t].applyMatrix4(n);for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal.applyMatrix3(e).normalize();for(let o=0,s=r.vertexNormals.length;o<s;o++)r.vertexNormals[o].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(n){return xi.makeRotationX(n),this.applyMatrix4(xi),this},rotateY:function(n){return xi.makeRotationY(n),this.applyMatrix4(xi),this},rotateZ:function(n){return xi.makeRotationZ(n),this.applyMatrix4(xi),this},translate:function(n,e,t){return xi.makeTranslation(n,e,t),this.applyMatrix4(xi),this},scale:function(n,e,t){return xi.makeScale(n,e,t),this.applyMatrix4(xi),this},lookAt:function(n){return Mf.lookAt(n),Mf.updateMatrix(),this.applyMatrix4(Mf.matrix),this},fromBufferGeometry:function(n){let e=this,t=n.index!==null?n.index:void 0,i=n.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=i.position,o=i.normal,s=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)e.vertices.push(new P().fromBufferAttribute(r,u)),s!==void 0&&e.colors.push(new fe().fromBufferAttribute(s,u));function c(u,h,f,p){let m=s===void 0?[]:[e.colors[u].clone(),e.colors[h].clone(),e.colors[f].clone()],y=o===void 0?[]:[new P().fromBufferAttribute(o,u),new P().fromBufferAttribute(o,h),new P().fromBufferAttribute(o,f)],_=new ao(u,h,f,y,m,p);e.faces.push(_),a!==void 0&&e.faceVertexUvs[0].push([new $().fromBufferAttribute(a,u),new $().fromBufferAttribute(a,h),new $().fromBufferAttribute(a,f)]),l!==void 0&&e.faceVertexUvs[1].push([new $().fromBufferAttribute(l,u),new $().fromBufferAttribute(l,h),new $().fromBufferAttribute(l,f)])}let d=n.groups;if(d.length>0)for(let u=0;u<d.length;u++){let h=d[u],f=h.start,p=h.count;for(let m=f,y=f+p;m<y;m+=3)t!==void 0?c(t.getX(m),t.getX(m+1),t.getX(m+2),h.materialIndex):c(m,m+1,m+2,h.materialIndex)}else if(t!==void 0)for(let u=0;u<t.count;u+=3)c(t.getX(u),t.getX(u+1),t.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xc).negate(),this.translate(Xc.x,Xc.y,Xc.z),this},normalize:function(){this.computeBoundingSphere();let n=this.boundingSphere.center,e=this.boundingSphere.radius,t=e===0?1:1/e,i=new Ue;return i.set(t,0,0,-t*n.x,0,t,0,-t*n.y,0,0,t,-t*n.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){let n=new P,e=new P;for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t],o=this.vertices[r.a],s=this.vertices[r.b],a=this.vertices[r.c];n.subVectors(a,s),e.subVectors(o,s),n.cross(e),n.normalize(),r.normal.copy(n)}},computeVertexNormals:function(n=!0){let e=new Array(this.vertices.length);for(let t=0,i=this.vertices.length;t<i;t++)e[t]=new P;if(n){let t=new P,i=new P;for(let r=0,o=this.faces.length;r<o;r++){let s=this.faces[r],a=this.vertices[s.a],l=this.vertices[s.b],c=this.vertices[s.c];t.subVectors(c,l),i.subVectors(a,l),t.cross(i),e[s.a].add(t),e[s.b].add(t),e[s.c].add(t)}}else{this.computeFaceNormals();for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let t=0,i=this.vertices.length;t<i;t++)e[t].normalize();for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t],o=r.vertexNormals;o.length===3?(o[0].copy(e[r.a]),o[1].copy(e[r.b]),o[2].copy(e[r.c])):(o[0]=e[r.a].clone(),o[1]=e[r.b].clone(),o[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let n=0,e=this.faces.length;n<e;n++){let t=this.faces[n],i=t.vertexNormals;i.length===3?(i[0].copy(t.normal),i[1].copy(t.normal),i[2].copy(t.normal)):(i[0]=t.normal.clone(),i[1]=t.normal.clone(),i[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,o=i.vertexNormals.length;r<o;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}let n=new et;n.faces=this.faces;for(let e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let r=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals;for(let s=0,a=this.faces.length;s<a;s++){let l=new P,c={a:new P,b:new P,c:new P};r.push(l),o.push(c)}}let i=this.morphNormals[e];n.vertices=this.morphTargets[e].vertices,n.computeFaceNormals(),n.computeVertexNormals();for(let r=0,o=this.faces.length;r<o;r++){let s=this.faces[r],a=i.faceNormals[r],l=i.vertexNormals[r];a.copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Dn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Qn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(n,e,t=0){if(!(n&&n.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",n);return}let i,r=this.vertices.length,o=this.vertices,s=n.vertices,a=this.faces,l=n.faces,c=this.colors,d=n.colors;e!==void 0&&(i=new Bt().getNormalMatrix(e));for(let u=0,h=s.length;u<h;u++){let p=s[u].clone();e!==void 0&&p.applyMatrix4(e),o.push(p)}for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone());for(let u=0,h=l.length;u<h;u++){let f=l[u],p,m,y=f.vertexNormals,_=f.vertexColors,g=new ao(f.a+r,f.b+r,f.c+r);g.normal.copy(f.normal),i!==void 0&&g.normal.applyMatrix3(i).normalize();for(let v=0,b=y.length;v<b;v++)p=y[v].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),g.vertexNormals.push(p);g.color.copy(f.color);for(let v=0,b=_.length;v<b;v++)m=_[v],g.vertexColors.push(m.clone());g.materialIndex=f.materialIndex+t,a.push(g)}for(let u=0,h=n.faceVertexUvs.length;u<h;u++){let f=n.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let y=f[p],_=[];for(let g=0,v=y.length;g<v;g++)_.push(y[g].clone());this.faceVertexUvs[u].push(_)}}},mergeMesh:function(n){if(!(n&&n.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",n);return}n.matrixAutoUpdate&&n.updateMatrix(),this.merge(n.geometry,n.matrix)},mergeVertices:function(n=4){let e={},t=[],i=[],r=Math.pow(10,n);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],d=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[d]===void 0?(e[d]=a,t.push(this.vertices[a]),i[a]=t.length-1):i[a]=i[e[d]]}let o=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let d=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(d[u]===d[(u+1)%3]){o.push(a);break}}for(let a=o.length-1;a>=0;a--){let l=o[a];this.faces.splice(l,1);for(let c=0,d=this.faceVertexUvs.length;c<d;c++)this.faceVertexUvs[c].splice(l,1)}let s=this.vertices.length-t.length;return this.vertices=t,s},setFromPoints:function(n){this.vertices=[];for(let e=0,t=n.length;e<t;e++){let i=n[e];this.vertices.push(new P(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){let n=this.faces,e=n.length;for(let a=0;a<e;a++)n[a]._id=a;function t(a,l){return a.materialIndex-l.materialIndex}n.sort(t);let i=this.faceVertexUvs[0],r=this.faceVertexUvs[1],o,s;i&&i.length===e&&(o=[]),r&&r.length===e&&(s=[]);for(let a=0;a<e;a++){let l=n[a]._id;o&&o.push(i[l]),s&&s.push(r[l])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){let n={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(n[p]=f[p]);return n}let e=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];e.push(p.x,p.y,p.z)}let t=[],i=[],r={},o=[],s={},a=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,y=!1,_=this.faceVertexUvs[0][f]!==void 0,g=p.normal.length()>0,v=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,M=p.vertexColors.length>0,x=0;if(x=c(x,0,0),x=c(x,1,m),x=c(x,2,y),x=c(x,3,_),x=c(x,4,g),x=c(x,5,v),x=c(x,6,b),x=c(x,7,M),t.push(x),t.push(p.a,p.b,p.c),t.push(p.materialIndex),_){let C=this.faceVertexUvs[0][f];t.push(h(C[0]),h(C[1]),h(C[2]))}if(g&&t.push(d(p.normal)),v){let C=p.vertexNormals;t.push(d(C[0]),d(C[1]),d(C[2]))}if(b&&t.push(u(p.color)),M){let C=p.vertexColors;t.push(u(C[0]),u(C[1]),u(C[2]))}}function c(f,p,m){return m?f|1<<p:f&~(1<<p)}function d(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=i.length/3,i.push(f.x,f.y,f.z)),r[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return s[p]!==void 0||(s[p]=o.length,o.push(f.getHex())),s[p]}function h(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return n.data={},n.data.vertices=e,n.data.normals=i,o.length>0&&(n.data.colors=o),a.length>0&&(n.data.uvs=[a]),n.data.faces=t,n},clone:function(){return new et().copy(this)},copy:function(n){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=n.name;let e=n.vertices;for(let u=0,h=e.length;u<h;u++)this.vertices.push(e[u].clone());let t=n.colors;for(let u=0,h=t.length;u<h;u++)this.colors.push(t[u].clone());let i=n.faces;for(let u=0,h=i.length;u<h;u++)this.faces.push(i[u].clone());for(let u=0,h=n.faceVertexUvs.length;u<h;u++){let f=n.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let y=f[p],_=[];for(let g=0,v=y.length;g<v;g++){let b=y[g];_.push(b.clone())}this.faceVertexUvs[u].push(_)}}let r=n.morphTargets;for(let u=0,h=r.length;u<h;u++){let f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,m=r[u].vertices.length;p<m;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,m=r[u].normals.length;p<m;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}let o=n.morphNormals;for(let u=0,h=o.length;u<h;u++){let f={};if(o[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=o[u].vertexNormals.length;p<m;p++){let y=o[u].vertexNormals[p],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),f.vertexNormals.push(_)}}if(o[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=o[u].faceNormals.length;p<m;p++)f.faceNormals.push(o[u].faceNormals[p].clone())}this.morphNormals.push(f)}let s=n.skinWeights;for(let u=0,h=s.length;u<h;u++)this.skinWeights.push(s[u].clone());let a=n.skinIndices;for(let u=0,h=a.length;u<h;u++)this.skinIndices.push(a[u].clone());let l=n.lineDistances;for(let u=0,h=l.length;u<h;u++)this.lineDistances.push(l[u]);let c=n.boundingBox;c!==null&&(this.boundingBox=c.clone());let d=n.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=n.elementsNeedUpdate,this.verticesNeedUpdate=n.verticesNeedUpdate,this.uvsNeedUpdate=n.uvsNeedUpdate,this.normalsNeedUpdate=n.normalsNeedUpdate,this.colorsNeedUpdate=n.colorsNeedUpdate,this.lineDistancesNeedUpdate=n.lineDistancesNeedUpdate,this.groupsNeedUpdate=n.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Mu=class extends et{constructor(e,t,i,r,o,s){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s},this.fromBufferGeometry(new uo(e,t,i,r,o,s)),this.mergeVertices()}},tl=class extends Se{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);let o=[],s=[],a=[],l=[],c=new P,d=new $;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){let f=i+u/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(s[h]/e+1)/2,d.y=(s[h+1]/e+1)/2,l.push(d.x,d.y)}for(let u=1;u<=t;u++)o.push(u,u+1,0);this.setIndex(o),this.setAttribute("position",new ce(s,3)),this.setAttribute("normal",new ce(a,3)),this.setAttribute("uv",new ce(l,2))}},wu=class extends et{constructor(e,t,i,r){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},this.fromBufferGeometry(new tl(e,t,i,r)),this.mergeVertices()}},po=class extends Se{constructor(e=1,t=1,i=1,r=8,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};let c=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],f=[],p=0,m=[],y=i/2,_=0;g(),s===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(d),this.setAttribute("position",new ce(u,3)),this.setAttribute("normal",new ce(h,3)),this.setAttribute("uv",new ce(f,2));function g(){let b=new P,M=new P,x=0,C=(t-e)/i;for(let A=0;A<=o;A++){let L=[],H=A/o,z=H*(t-e)+e;for(let B=0;B<=r;B++){let V=B/r,U=V*l+a,D=Math.sin(U),I=Math.cos(U);M.x=z*D,M.y=-H*i+y,M.z=z*I,u.push(M.x,M.y,M.z),b.set(D,C,I).normalize(),h.push(b.x,b.y,b.z),f.push(V,1-H),L.push(p++)}m.push(L)}for(let A=0;A<r;A++)for(let L=0;L<o;L++){let H=m[L][A],z=m[L+1][A],B=m[L+1][A+1],V=m[L][A+1];d.push(H,z,V),d.push(z,B,V),x+=6}c.addGroup(_,x,0),_+=x}function v(b){let M=p,x=new $,C=new P,A=0,L=b===!0?e:t,H=b===!0?1:-1;for(let B=1;B<=r;B++)u.push(0,y*H,0),h.push(0,H,0),f.push(.5,.5),p++;let z=p;for(let B=0;B<=r;B++){let U=B/r*l+a,D=Math.cos(U),I=Math.sin(U);C.x=L*I,C.y=y*H,C.z=L*D,u.push(C.x,C.y,C.z),h.push(0,H,0),x.x=D*.5+.5,x.y=I*.5*H+.5,f.push(x.x,x.y),p++}for(let B=0;B<r;B++){let V=M+B,U=z+B;b===!0?d.push(U,U+1,V):d.push(U+1,U,V),A+=3}c.addGroup(_,A,b===!0?1:2),_+=A}}},nl=class extends et{constructor(e,t,i,r,o,s,a,l){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l},this.fromBufferGeometry(new po(e,t,i,r,o,s,a,l)),this.mergeVertices()}},Su=class extends nl{constructor(e,t,i,r,o,s,a){super(0,e,t,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}},Cu=class extends po{constructor(e=1,t=1,i=8,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,i,r,o,s,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}},Xi=class extends Se{constructor(e,t,i=1,r=0){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let o=[],s=[];a(r),c(i),d(),this.setAttribute("position",new ce(o,3)),this.setAttribute("normal",new ce(o.slice(),3)),this.setAttribute("uv",new ce(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(g){let v=new P,b=new P,M=new P;for(let x=0;x<t.length;x+=3)f(t[x+0],v),f(t[x+1],b),f(t[x+2],M),l(v,b,M,g)}function l(g,v,b,M){let x=M+1,C=[];for(let A=0;A<=x;A++){C[A]=[];let L=g.clone().lerp(b,A/x),H=v.clone().lerp(b,A/x),z=x-A;for(let B=0;B<=z;B++)B===0&&A===x?C[A][B]=L:C[A][B]=L.clone().lerp(H,B/z)}for(let A=0;A<x;A++)for(let L=0;L<2*(x-A)-1;L++){let H=Math.floor(L/2);L%2===0?(h(C[A][H+1]),h(C[A+1][H]),h(C[A][H])):(h(C[A][H+1]),h(C[A+1][H+1]),h(C[A+1][H]))}}function c(g){let v=new P;for(let b=0;b<o.length;b+=3)v.x=o[b+0],v.y=o[b+1],v.z=o[b+2],v.normalize().multiplyScalar(g),o[b+0]=v.x,o[b+1]=v.y,o[b+2]=v.z}function d(){let g=new P;for(let v=0;v<o.length;v+=3){g.x=o[v+0],g.y=o[v+1],g.z=o[v+2];let b=y(g)/2/Math.PI+.5,M=_(g)/Math.PI+.5;s.push(b,1-M)}p(),u()}function u(){for(let g=0;g<s.length;g+=6){let v=s[g+0],b=s[g+2],M=s[g+4],x=Math.max(v,b,M),C=Math.min(v,b,M);x>.9&&C<.1&&(v<.2&&(s[g+0]+=1),b<.2&&(s[g+2]+=1),M<.2&&(s[g+4]+=1))}}function h(g){o.push(g.x,g.y,g.z)}function f(g,v){let b=g*3;v.x=e[b+0],v.y=e[b+1],v.z=e[b+2]}function p(){let g=new P,v=new P,b=new P,M=new P,x=new $,C=new $,A=new $;for(let L=0,H=0;L<o.length;L+=9,H+=6){g.set(o[L+0],o[L+1],o[L+2]),v.set(o[L+3],o[L+4],o[L+5]),b.set(o[L+6],o[L+7],o[L+8]),x.set(s[H+0],s[H+1]),C.set(s[H+2],s[H+3]),A.set(s[H+4],s[H+5]),M.copy(g).add(v).add(b).divideScalar(3);let z=y(M);m(x,H+0,g,z),m(C,H+2,v,z),m(A,H+4,b,z)}}function m(g,v,b,M){M<0&&g.x===1&&(s[v]=g.x-1),b.x===0&&b.z===0&&(s[v]=M/2/Math.PI+.5)}function y(g){return Math.atan2(g.z,-g.x)}function _(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}},il=class extends Xi{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}},Pu=class extends et{constructor(e,t){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new il(e,t)),this.mergeVertices()}},Zc=new P,Jc=new P,wf=new P,$c=new wn,rl=class extends Se{constructor(e,t){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1,e.isGeometry&&(e=new Se().fromGeometry(e));let r=Math.pow(10,4),o=Math.cos(Re.DEG2RAD*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let p=0;p<l;p+=3){s?(c[0]=s.getX(p),c[1]=s.getX(p+1),c[2]=s.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);let{a:m,b:y,c:_}=$c;if(m.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),$c.getNormal(wf),u[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,u[1]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,u[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let g=0;g<3;g++){let v=(g+1)%3,b=u[g],M=u[v],x=$c[d[g]],C=$c[d[v]],A=`${b}_${M}`,L=`${M}_${b}`;L in h&&h[L]?(wf.dot(h[L].normal)<=o&&(f.push(x.x,x.y,x.z),f.push(C.x,C.y,C.z)),h[L]=null):A in h||(h[A]={index0:c[g],index1:c[v],normal:wf.clone()})}}for(let p in h)if(h[p]){let{index0:m,index1:y}=h[p];Zc.fromBufferAttribute(a,m),Jc.fromBufferAttribute(a,y),f.push(Zc.x,Zc.y,Zc.z),f.push(Jc.x,Jc.y,Jc.z)}this.setAttribute("position",new ce(f,3))}},F2={triangulate:function(n,e,t){t=t||2;let i=e&&e.length,r=i?e[0]*t:n.length,o=Ix(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,c,d,u,h,f;if(i&&(o=V2(n,e,o,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let p=t;p<r;p+=t)u=n[p],h=n[p+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=f!==0?1/f:0}return ol(o,s,t,a,l,f),s}};function Ix(n,e,t,i,r){let o,s;if(r===K2(n,e,t,i)>0)for(o=e;o<t;o+=i)s=p_(o,n[o],n[o+1],s);else for(o=t-i;o>=e;o-=i)s=p_(o,n[o],n[o+1],s);return s&&yd(s,s.next)&&(al(s),s=s.next),s}function Er(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(yd(t,t.next)||mt(t.prev,t,t.next)===0)){if(al(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ol(n,e,t,i,r,o,s){if(!n)return;!s&&o&&j2(n,i,r,o);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,o?z2(n,i,r,o):N2(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),al(n),n=c.next,a=c.next;continue}if(n=c,n===a){s?s===1?(n=U2(Er(n),e,t),ol(n,e,t,i,r,o,2)):s===2&&B2(n,e,t,i,r,o):ol(Er(n),e,t,i,r,o,1);break}}}function N2(n){let e=n.prev,t=n,i=n.next;if(mt(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(ms(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&mt(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function z2(n,e,t,i){let r=n.prev,o=n,s=n.next;if(mt(r,o,s)>=0)return!1;let a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,d=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,u=ep(a,l,e,t,i),h=ep(c,d,e,t,i),f=n.prevZ,p=n.nextZ;for(;f&&f.z>=u&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&ms(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&mt(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&ms(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&mt(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==n.prev&&f!==n.next&&ms(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&mt(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&ms(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&mt(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function U2(n,e,t){let i=n;do{let r=i.prev,o=i.next.next;!yd(r,o)&&kx(r,i,i.next,o)&&sl(r,o)&&sl(o,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(o.i/t),al(i),al(i.next),i=n=o),i=i.next}while(i!==n);return Er(i)}function B2(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Z2(s,a)){let l=Dx(s,a);s=Er(s,s.next),l=Er(l,l.next),ol(s,e,t,i,r,o),ol(l,e,t,i,r,o);return}a=a.next}s=s.next}while(s!==n)}function V2(n,e,t,i){let r=[],o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,c=Ix(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(X2(c));for(r.sort(G2),o=0;o<r.length;o++)H2(r[o],t),t=Er(t,t.next);return t}function G2(n,e){return n.x-e.x}function H2(n,e){if(e=W2(n,e),e){let t=Dx(e,n);Er(e,e.next),Er(t,t.next)}}function W2(n,e){let t=e,i=n.x,r=n.y,o=-1/0,s;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>o){if(o=h,h===i){if(r===t.y)return t;if(r===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(i===o)return s;let a=s,l=s.x,c=s.y,d=1/0,u;t=s;do i>=t.x&&t.x>=l&&i!==t.x&&ms(r<c?i:o,r,l,c,r<c?o:i,r,t.x,t.y)&&(u=Math.abs(r-t.y)/(i-t.x),sl(t,n)&&(u<d||u===d&&(t.x>s.x||t.x===s.x&&q2(s,t)))&&(s=t,d=u)),t=t.next;while(t!==a);return s}function q2(n,e){return mt(n.prev,n,e.prev)<0&&mt(e.next,n,n.next)<0}function j2(n,e,t,i){let r=n;do r.z===null&&(r.z=ep(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Y2(r)}function Y2(n){let e,t,i,r,o,s,a,l,c=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;t=i}o.nextZ=null,c*=2}while(s>1);return n}function ep(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function X2(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ms(n,e,t,i,r,o,s,a){return(r-s)*(e-a)-(n-s)*(o-a)>=0&&(n-s)*(i-a)-(t-s)*(e-a)>=0&&(t-s)*(o-a)-(r-s)*(i-a)>=0}function Z2(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!J2(n,e)&&(sl(n,e)&&sl(e,n)&&$2(n,e)&&(mt(n.prev,n,e.prev)||mt(n,e.prev,e))||yd(n,e)&&mt(n.prev,n,n.next)>0&&mt(e.prev,e,e.next)>0)}function mt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function yd(n,e){return n.x===e.x&&n.y===e.y}function kx(n,e,t,i){let r=Qc(mt(n,e,t)),o=Qc(mt(n,e,i)),s=Qc(mt(t,i,n)),a=Qc(mt(t,i,e));return!!(r!==o&&s!==a||r===0&&Kc(n,t,e)||o===0&&Kc(n,i,e)||s===0&&Kc(t,n,i)||a===0&&Kc(t,e,i))}function Kc(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Qc(n){return n>0?1:n<0?-1:0}function J2(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&kx(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function sl(n,e){return mt(n.prev,n,n.next)<0?mt(n,e,n.next)>=0&&mt(n,n.prev,e)>=0:mt(n,e,n.prev)<0||mt(n,n.next,e)<0}function $2(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Dx(n,e){let t=new tp(n.i,n.x,n.y),i=new tp(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function p_(n,e,t,i){let r=new tp(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function al(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function tp(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function K2(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var qi={area:function(n){let e=n.length,t=0;for(let i=e-1,r=0;r<e;i=r++)t+=n[i].x*n[r].y-n[r].x*n[i].y;return t*.5},isClockWise:function(n){return qi.area(n)<0},triangulateShape:function(n,e){let t=[],i=[],r=[];m_(n),g_(t,n);let o=n.length;e.forEach(m_);for(let a=0;a<e.length;a++)i.push(o),o+=e[a].length,g_(t,e[a]);let s=F2.triangulate(t,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function m_(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function g_(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var mo=class extends Se{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++){let c=e[a];s(c)}this.setAttribute("position",new ce(r,3)),this.setAttribute("uv",new ce(o,2)),this.computeVertexNormals();function s(a){let l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,u=t.depth!==void 0?t.depth:100,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:6,p=t.bevelSize!==void 0?t.bevelSize:f-2,m=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3,_=t.extrudePath,g=t.UVGenerator!==void 0?t.UVGenerator:Q2;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let v,b=!1,M,x,C,A;_&&(v=_.getSpacedPoints(d),b=!0,h=!1,M=_.computeFrenetFrames(d,!1),x=new P,C=new P,A=new P),h||(y=0,f=0,p=0,m=0);let L=a.extractPoints(c),H=L.shape,z=L.holes;if(!qi.isClockWise(H)){H=H.reverse();for(let ee=0,re=z.length;ee<re;ee++){let le=z[ee];qi.isClockWise(le)&&(z[ee]=le.reverse())}}let V=qi.triangulateShape(H,z),U=H;for(let ee=0,re=z.length;ee<re;ee++){let le=z[ee];H=H.concat(le)}function D(ee,re,le){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().multiplyScalar(le).add(ee)}let I=H.length,G=V.length;function q(ee,re,le){let Ee,he,R,T=ee.x-re.x,te=ee.y-re.y,K=le.x-ee.x,F=le.y-ee.y,ne=T*T+te*te,de=T*F-te*K;if(Math.abs(de)>Number.EPSILON){let be=Math.sqrt(ne),se=Math.sqrt(K*K+F*F),xe=re.x-te/be,Te=re.y+T/be,Fe=le.x-F/se,_e=le.y+K/se,Le=((Fe-xe)*F-(_e-Te)*K)/(T*F-te*K);Ee=xe+T*Le-ee.x,he=Te+te*Le-ee.y;let pt=Ee*Ee+he*he;if(pt<=2)return new $(Ee,he);R=Math.sqrt(pt/2)}else{let be=!1;T>Number.EPSILON?K>Number.EPSILON&&(be=!0):T<-Number.EPSILON?K<-Number.EPSILON&&(be=!0):Math.sign(te)===Math.sign(F)&&(be=!0),be?(Ee=-te,he=T,R=Math.sqrt(ne)):(Ee=T,he=te,R=Math.sqrt(ne/2))}return new $(Ee/R,he/R)}let Z=[];for(let ee=0,re=U.length,le=re-1,Ee=ee+1;ee<re;ee++,le++,Ee++)le===re&&(le=0),Ee===re&&(Ee=0),Z[ee]=q(U[ee],U[le],U[Ee]);let Q=[],ie,ge=Z.concat();for(let ee=0,re=z.length;ee<re;ee++){let le=z[ee];ie=[];for(let Ee=0,he=le.length,R=he-1,T=Ee+1;Ee<he;Ee++,R++,T++)R===he&&(R=0),T===he&&(T=0),ie[Ee]=q(le[Ee],le[R],le[T]);Q.push(ie),ge=ge.concat(ie)}for(let ee=0;ee<y;ee++){let re=ee/y,le=f*Math.cos(re*Math.PI/2),Ee=p*Math.sin(re*Math.PI/2)+m;for(let he=0,R=U.length;he<R;he++){let T=D(U[he],Z[he],Ee);pe(T.x,T.y,-le)}for(let he=0,R=z.length;he<R;he++){let T=z[he];ie=Q[he];for(let te=0,K=T.length;te<K;te++){let F=D(T[te],ie[te],Ee);pe(F.x,F.y,-le)}}}let Pe=p+m;for(let ee=0;ee<I;ee++){let re=h?D(H[ee],ge[ee],Pe):H[ee];b?(C.copy(M.normals[0]).multiplyScalar(re.x),x.copy(M.binormals[0]).multiplyScalar(re.y),A.copy(v[0]).add(C).add(x),pe(A.x,A.y,A.z)):pe(re.x,re.y,0)}for(let ee=1;ee<=d;ee++)for(let re=0;re<I;re++){let le=h?D(H[re],ge[re],Pe):H[re];b?(C.copy(M.normals[ee]).multiplyScalar(le.x),x.copy(M.binormals[ee]).multiplyScalar(le.y),A.copy(v[ee]).add(C).add(x),pe(A.x,A.y,A.z)):pe(le.x,le.y,u/d*ee)}for(let ee=y-1;ee>=0;ee--){let re=ee/y,le=f*Math.cos(re*Math.PI/2),Ee=p*Math.sin(re*Math.PI/2)+m;for(let he=0,R=U.length;he<R;he++){let T=D(U[he],Z[he],Ee);pe(T.x,T.y,u+le)}for(let he=0,R=z.length;he<R;he++){let T=z[he];ie=Q[he];for(let te=0,K=T.length;te<K;te++){let F=D(T[te],ie[te],Ee);b?pe(F.x,F.y+v[d-1].y,v[d-1].x+le):pe(F.x,F.y,u+le)}}}ve(),X();function ve(){let ee=r.length/3;if(h){let re=0,le=I*re;for(let Ee=0;Ee<G;Ee++){let he=V[Ee];ke(he[2]+le,he[1]+le,he[0]+le)}re=d+y*2,le=I*re;for(let Ee=0;Ee<G;Ee++){let he=V[Ee];ke(he[0]+le,he[1]+le,he[2]+le)}}else{for(let re=0;re<G;re++){let le=V[re];ke(le[2],le[1],le[0])}for(let re=0;re<G;re++){let le=V[re];ke(le[0]+I*d,le[1]+I*d,le[2]+I*d)}}i.addGroup(ee,r.length/3-ee,0)}function X(){let ee=r.length/3,re=0;kt(U,re),re+=U.length;for(let le=0,Ee=z.length;le<Ee;le++){let he=z[le];kt(he,re),re+=he.length}i.addGroup(ee,r.length/3-ee,1)}function kt(ee,re){let le=ee.length;for(;--le>=0;){let Ee=le,he=le-1;he<0&&(he=ee.length-1);for(let R=0,T=d+y*2;R<T;R++){let te=I*R,K=I*(R+1),F=re+Ee+te,ne=re+he+te,de=re+he+K,be=re+Ee+K;we(F,ne,de,be)}}}function pe(ee,re,le){l.push(ee),l.push(re),l.push(le)}function ke(ee,re,le){Xe(ee),Xe(re),Xe(le);let Ee=r.length/3,he=g.generateTopUV(i,r,Ee-3,Ee-2,Ee-1);De(he[0]),De(he[1]),De(he[2])}function we(ee,re,le,Ee){Xe(ee),Xe(re),Xe(Ee),Xe(re),Xe(le),Xe(Ee);let he=r.length/3,R=g.generateSideWallUV(i,r,he-6,he-3,he-2,he-1);De(R[0]),De(R[1]),De(R[3]),De(R[1]),De(R[2]),De(R[3])}function Xe(ee){r.push(l[ee*3+0]),r.push(l[ee*3+1]),r.push(l[ee*3+2])}function De(ee){o.push(ee.x),o.push(ee.y)}}}toJSON(){let e=Se.prototype.toJSON.call(this),t=this.parameters.shapes,i=this.parameters.options;return eP(t,i,e)}},Q2={generateTopUV:function(n,e,t,i,r){let o=e[t*3],s=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new $(o,s),new $(a,l),new $(c,d)]},generateSideWallUV:function(n,e,t,i,r,o){let s=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],d=e[i*3+1],u=e[i*3+2],h=e[r*3],f=e[r*3+1],p=e[r*3+2],m=e[o*3],y=e[o*3+1],_=e[o*3+2];return Math.abs(a-d)<.01?[new $(s,1-l),new $(c,1-u),new $(h,1-p),new $(m,1-_)]:[new $(a,1-l),new $(d,1-u),new $(f,1-p),new $(y,1-_)]}};function eP(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var ll=class extends et{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new mo(e,t)),this.mergeVertices()}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return tP(t,i,e)}};function tP(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var cl=class extends Xi{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}},Eu=class extends et{constructor(e,t){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new cl(e,t)),this.mergeVertices()}},ul=class extends Se{constructor(e,t=12,i=0,r=Math.PI*2){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Re.clamp(r,0,Math.PI*2);let o=[],s=[],a=[],l=1/t,c=new P,d=new $;for(let u=0;u<=t;u++){let h=i+u*l*r,f=Math.sin(h),p=Math.cos(h);for(let m=0;m<=e.length-1;m++)c.x=e[m].x*f,c.y=e[m].y,c.z=e[m].x*p,s.push(c.x,c.y,c.z),d.x=u/t,d.y=m/(e.length-1),a.push(d.x,d.y)}for(let u=0;u<t;u++)for(let h=0;h<e.length-1;h++){let f=h+u*e.length,p=f,m=f+e.length,y=f+e.length+1,_=f+1;o.push(p,m,_),o.push(m,y,_)}if(this.setIndex(o),this.setAttribute("position",new ce(s,3)),this.setAttribute("uv",new ce(a,2)),this.computeVertexNormals(),r===Math.PI*2){let u=this.attributes.normal.array,h=new P,f=new P,p=new P,m=t*e.length*3;for(let y=0,_=0;y<e.length;y++,_+=3)h.x=u[_+0],h.y=u[_+1],h.z=u[_+2],f.x=u[m+_+0],f.y=u[m+_+1],f.z=u[m+_+2],p.addVectors(h,f).normalize(),u[_+0]=u[m+_+0]=p.x,u[_+1]=u[m+_+1]=p.y,u[_+2]=u[m+_+2]=p.z}}},Tu=class extends et{constructor(e,t,i,r){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},this.fromBufferGeometry(new ul(e,t,i,r)),this.mergeVertices()}},Ps=class extends Xi{constructor(e=1,t=0){let i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}},Ou=class extends et{constructor(e,t){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ps(e,t)),this.mergeVertices()}};function Es(n,e,t){Se.call(this),this.type="ParametricBufferGeometry",this.parameters={func:n,slices:e,stacks:t};let i=[],r=[],o=[],s=[],a=1e-5,l=new P,c=new P,d=new P,u=new P,h=new P;n.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");let f=e+1;for(let p=0;p<=t;p++){let m=p/t;for(let y=0;y<=e;y++){let _=y/e;n(_,m,c),r.push(c.x,c.y,c.z),_-a>=0?(n(_-a,m,d),u.subVectors(c,d)):(n(_+a,m,d),u.subVectors(d,c)),m-a>=0?(n(_,m-a,d),h.subVectors(c,d)):(n(_,m+a,d),h.subVectors(d,c)),l.crossVectors(u,h).normalize(),o.push(l.x,l.y,l.z),s.push(_,m)}}for(let p=0;p<t;p++)for(let m=0;m<e;m++){let y=p*f+m,_=p*f+m+1,g=(p+1)*f+m+1,v=(p+1)*f+m;i.push(y,_,v),i.push(_,g,v)}this.setIndex(i),this.setAttribute("position",new ce(r,3)),this.setAttribute("normal",new ce(o,3)),this.setAttribute("uv",new ce(s,2))}Es.prototype=Object.create(Se.prototype);Es.prototype.constructor=Es;function dl(n,e,t){et.call(this),this.type="ParametricGeometry",this.parameters={func:n,slices:e,stacks:t},this.fromBufferGeometry(new Es(n,e,t)),this.mergeVertices()}dl.prototype=Object.create(et.prototype);dl.prototype.constructor=dl;var Au=class extends et{constructor(e,t,i,r){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new bs(e,t,i,r)),this.mergeVertices()}},Lu=class extends et{constructor(e,t,i,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},this.fromBufferGeometry(new Xi(e,t,i,r)),this.mergeVertices()}},hl=class extends Se{constructor(e=.5,t=1,i=8,r=1,o=0,s=Math.PI*2){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);let a=[],l=[],c=[],d=[],u=e,h=(t-e)/r,f=new P,p=new $;for(let m=0;m<=r;m++){for(let y=0;y<=i;y++){let _=o+y/i*s;f.x=u*Math.cos(_),f.y=u*Math.sin(_),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,d.push(p.x,p.y)}u+=h}for(let m=0;m<r;m++){let y=m*(i+1);for(let _=0;_<i;_++){let g=_+y,v=g,b=g+i+1,M=g+i+2,x=g+1;a.push(v,b,x),a.push(b,M,x)}}this.setIndex(a),this.setAttribute("position",new ce(l,3)),this.setAttribute("normal",new ce(c,3)),this.setAttribute("uv",new ce(d,2))}},Ru=class extends et{constructor(e,t,i,r,o,s){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new hl(e,t,i,r,o,s)),this.mergeVertices()}},fl=class extends Se{constructor(e,t=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ce(r,3)),this.setAttribute("normal",new ce(o,3)),this.setAttribute("uv",new ce(s,2));function c(d){let u=r.length/3,h=d.extractPoints(t),f=h.shape,p=h.holes;qi.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,_=p.length;y<_;y++){let g=p[y];qi.isClockWise(g)===!0&&(p[y]=g.reverse())}let m=qi.triangulateShape(f,p);for(let y=0,_=p.length;y<_;y++){let g=p[y];f=f.concat(g)}for(let y=0,_=f.length;y<_;y++){let g=f[y];r.push(g.x,g.y,0),o.push(0,0,1),s.push(g.x,g.y)}for(let y=0,_=m.length;y<_;y++){let g=m[y],v=g[0]+u,b=g[1]+u,M=g[2]+u;i.push(v,b,M),l+=3}}}toJSON(){let e=Se.prototype.toJSON.call(this),t=this.parameters.shapes;return nP(t,e)}};function nP(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var pl=class extends et{constructor(e,t){super(),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new fl(e,t)),this.mergeVertices()}toJSON(){let e=et.prototype.toJSON.call(this),t=this.parameters.shapes;return iP(t,e)}};function iP(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var Ts=class extends Se{constructor(e=1,t=8,i=6,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let l=Math.min(s+a,Math.PI),c=0,d=[],u=new P,h=new P,f=[],p=[],m=[],y=[];for(let _=0;_<=i;_++){let g=[],v=_/i,b=0;_==0&&s==0?b=.5/t:_==i&&l==Math.PI&&(b=-.5/t);for(let M=0;M<=t;M++){let x=M/t;u.x=-e*Math.cos(r+x*o)*Math.sin(s+v*a),u.y=e*Math.cos(s+v*a),u.z=e*Math.sin(r+x*o)*Math.sin(s+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),m.push(h.x,h.y,h.z),y.push(x+b,1-v),g.push(c++)}d.push(g)}for(let _=0;_<i;_++)for(let g=0;g<t;g++){let v=d[_][g+1],b=d[_][g],M=d[_+1][g],x=d[_+1][g+1];(_!==0||s>0)&&f.push(v,b,x),(_!==i-1||l<Math.PI)&&f.push(b,M,x)}this.setIndex(f),this.setAttribute("position",new ce(p,3)),this.setAttribute("normal",new ce(m,3)),this.setAttribute("uv",new ce(y,2))}},Iu=class extends et{constructor(e,t,i,r,o,s,a){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new Ts(e,t,i,r,o,s,a)),this.mergeVertices()}},ml=class extends Xi{constructor(e=1,t=0){let i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}},ku=class extends et{constructor(e,t){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ml(e,t)),this.mergeVertices()}},gl=class extends mo{constructor(e,t={}){let i=t.font;if(!(i&&i.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Se;let r=i.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t),this.type="TextBufferGeometry"}},Du=class extends et{constructor(e,t){super(),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new gl(e,t)),this.mergeVertices()}},_l=class extends Se{constructor(e=1,t=.4,i=8,r=6,o=Math.PI*2){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);let s=[],a=[],l=[],c=[],d=new P,u=new P,h=new P;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){let m=p/r*o,y=f/i*Math.PI*2;u.x=(e+t*Math.cos(y))*Math.cos(m),u.y=(e+t*Math.cos(y))*Math.sin(m),u.z=t*Math.sin(y),a.push(u.x,u.y,u.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(p/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){let m=(r+1)*f+p-1,y=(r+1)*(f-1)+p-1,_=(r+1)*(f-1)+p,g=(r+1)*f+p;s.push(m,y,g),s.push(y,_,g)}this.setIndex(s),this.setAttribute("position",new ce(a,3)),this.setAttribute("normal",new ce(l,3)),this.setAttribute("uv",new ce(c,2))}},Fu=class extends et{constructor(e,t,i,r,o){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:o},this.fromBufferGeometry(new _l(e,t,i,r,o)),this.mergeVertices()}},yl=class extends Se{constructor(e=1,t=.4,i=64,r=8,o=2,s=3){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:o,q:s},i=Math.floor(i),r=Math.floor(r);let a=[],l=[],c=[],d=[],u=new P,h=new P,f=new P,p=new P,m=new P,y=new P,_=new P;for(let v=0;v<=i;++v){let b=v/i*o*Math.PI*2;g(b,o,s,e,f),g(b+.01,o,s,e,p),y.subVectors(p,f),_.addVectors(p,f),m.crossVectors(y,_),_.crossVectors(m,y),m.normalize(),_.normalize();for(let M=0;M<=r;++M){let x=M/r*Math.PI*2,C=-t*Math.cos(x),A=t*Math.sin(x);u.x=f.x+(C*_.x+A*m.x),u.y=f.y+(C*_.y+A*m.y),u.z=f.z+(C*_.z+A*m.z),l.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),c.push(h.x,h.y,h.z),d.push(v/i),d.push(M/r)}}for(let v=1;v<=i;v++)for(let b=1;b<=r;b++){let M=(r+1)*(v-1)+(b-1),x=(r+1)*v+(b-1),C=(r+1)*v+b,A=(r+1)*(v-1)+b;a.push(M,x,A),a.push(x,C,A)}this.setIndex(a),this.setAttribute("position",new ce(l,3)),this.setAttribute("normal",new ce(c,3)),this.setAttribute("uv",new ce(d,2));function g(v,b,M,x,C){let A=Math.cos(v),L=Math.sin(v),H=M/b*v,z=Math.cos(H);C.x=x*(2+z)*.5*A,C.y=x*(2+z)*L*.5,C.z=x*Math.sin(H)*.5}}},Nu=class extends et{constructor(e,t,i,r,o,s,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:o,q:s},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new yl(e,t,i,r,o,s)),this.mergeVertices()}},xl=class extends Se{constructor(e,t=64,i=1,r=8,o=!1){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:o};let s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new P,l=new P,c=new $,d=new P,u=[],h=[],f=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new ce(u,3)),this.setAttribute("normal",new ce(h,3)),this.setAttribute("uv",new ce(f,2));function m(){for(let v=0;v<t;v++)y(v);y(o===!1?t:0),g(),_()}function y(v){d=e.getPointAt(v/t,d);let b=s.normals[v],M=s.binormals[v];for(let x=0;x<=r;x++){let C=x/r*Math.PI*2,A=Math.sin(C),L=-Math.cos(C);l.x=L*b.x+A*M.x,l.y=L*b.y+A*M.y,l.z=L*b.z+A*M.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,u.push(a.x,a.y,a.z)}}function _(){for(let v=1;v<=t;v++)for(let b=1;b<=r;b++){let M=(r+1)*(v-1)+(b-1),x=(r+1)*v+(b-1),C=(r+1)*v+b,A=(r+1)*(v-1)+b;p.push(M,x,A),p.push(x,C,A)}}function g(){for(let v=0;v<=t;v++)for(let b=0;b<=r;b++)c.x=v/t,c.y=b/r,f.push(c.x,c.y)}}toJSON(){let e=Se.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}},zu=class extends et{constructor(e,t,i,r,o,s){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:o},s!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");let a=new xl(e,t,i,r,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}},vl=class extends Se{constructor(e){super(),this.type="WireframeGeometry";let t=[],i=[0,0],r={},o=["a","b","c"];if(e&&e.isGeometry){let s=e.faces;for(let a=0,l=s.length;a<l;a++){let c=s[a];for(let d=0;d<3;d++){let u=c[o[d]],h=c[o[(d+1)%3]];i[0]=Math.min(u,h),i[1]=Math.max(u,h);let f=i[0]+","+i[1];r[f]===void 0&&(r[f]={index1:i[0],index2:i[1]})}}for(let a in r){let l=r[a],c=e.vertices[l.index1];t.push(c.x,c.y,c.z),c=e.vertices[l.index2],t.push(c.x,c.y,c.z)}}else if(e&&e.isBufferGeometry){let s=new P;if(e.index!==null){let a=e.attributes.position,l=e.index,c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,u=c.length;d<u;++d){let h=c[d],f=h.start,p=h.count;for(let m=f,y=f+p;m<y;m+=3)for(let _=0;_<3;_++){let g=l.getX(m+_),v=l.getX(m+(_+1)%3);i[0]=Math.min(g,v),i[1]=Math.max(g,v);let b=i[0]+","+i[1];r[b]===void 0&&(r[b]={index1:i[0],index2:i[1]})}}for(let d in r){let u=r[d];s.fromBufferAttribute(a,u.index1),t.push(s.x,s.y,s.z),s.fromBufferAttribute(a,u.index2),t.push(s.x,s.y,s.z)}}else{let a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let d=0;d<3;d++){let u=3*l+d;s.fromBufferAttribute(a,u),t.push(s.x,s.y,s.z);let h=3*l+(d+1)%3;s.fromBufferAttribute(a,h),t.push(s.x,s.y,s.z)}}}this.setAttribute("position",new ce(t,3))}},$t=Object.freeze({__proto__:null,BoxGeometry:Mu,BoxBufferGeometry:uo,CircleGeometry:wu,CircleBufferGeometry:tl,ConeGeometry:Su,ConeBufferGeometry:Cu,CylinderGeometry:nl,CylinderBufferGeometry:po,DodecahedronGeometry:Pu,DodecahedronBufferGeometry:il,EdgesGeometry:rl,ExtrudeGeometry:ll,ExtrudeBufferGeometry:mo,IcosahedronGeometry:Eu,IcosahedronBufferGeometry:cl,LatheGeometry:Tu,LatheBufferGeometry:ul,OctahedronGeometry:Ou,OctahedronBufferGeometry:Ps,ParametricGeometry:dl,ParametricBufferGeometry:Es,PlaneGeometry:Au,PlaneBufferGeometry:bs,PolyhedronGeometry:Lu,PolyhedronBufferGeometry:Xi,RingGeometry:Ru,RingBufferGeometry:hl,ShapeGeometry:pl,ShapeBufferGeometry:fl,SphereGeometry:Iu,SphereBufferGeometry:Ts,TetrahedronGeometry:ku,TetrahedronBufferGeometry:ml,TextGeometry:Du,TextBufferGeometry:gl,TorusGeometry:Fu,TorusBufferGeometry:_l,TorusKnotGeometry:Nu,TorusKnotBufferGeometry:yl,TubeGeometry:zu,TubeBufferGeometry:xl,WireframeGeometry:vl});function go(n){Oe.call(this),this.type="ShadowMaterial",this.color=new fe(0),this.transparent=!0,this.setValues(n)}go.prototype=Object.create(Oe.prototype);go.prototype.constructor=go;go.prototype.isShadowMaterial=!0;go.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this};function Zi(n){en.call(this,n),this.type="RawShaderMaterial"}Zi.prototype=Object.create(en.prototype);Zi.prototype.constructor=Zi;Zi.prototype.isRawShaderMaterial=!0;function Si(n){Oe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wo,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(n)}Si.prototype=Object.create(Oe.prototype);Si.prototype.constructor=Si;Si.prototype.isMeshStandardMaterial=!0;Si.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.vertexTangents=n.vertexTangents,this};function Tr(n){Si.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Re.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(n)}Tr.prototype=Object.create(Si.prototype);Tr.prototype.constructor=Tr;Tr.prototype.isMeshPhysicalMaterial=!0;Tr.prototype.copy=function(n){return Si.prototype.copy.call(this,n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.reflectivity=n.reflectivity,n.sheen?this.sheen=(this.sheen||new fe).copy(n.sheen):this.sheen=null,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this};function Or(n){Oe.call(this),this.type="MeshPhongMaterial",this.color=new fe(16777215),this.specular=new fe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wo,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=El,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}Or.prototype=Object.create(Oe.prototype);Or.prototype.constructor=Or;Or.prototype.isMeshPhongMaterial=!0;Or.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function _o(n){Oe.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new fe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wo,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}_o.prototype=Object.create(Oe.prototype);_o.prototype.constructor=_o;_o.prototype.isMeshToonMaterial=!0;_o.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function yo(n){Oe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wo,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}yo.prototype=Object.create(Oe.prototype);yo.prototype.constructor=yo;yo.prototype.isMeshNormalMaterial=!0;yo.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function xo(n){Oe.call(this),this.type="MeshLambertMaterial",this.color=new fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=El,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}xo.prototype=Object.create(Oe.prototype);xo.prototype.constructor=xo;xo.prototype.isMeshLambertMaterial=!0;xo.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function vo(n){Oe.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new fe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wo,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}vo.prototype=Object.create(Oe.prototype);vo.prototype.constructor=vo;vo.prototype.isMeshMatcapMaterial=!0;vo.prototype.copy=function(n){return Oe.prototype.copy.call(this,n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function bo(n){ht.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}bo.prototype=Object.create(ht.prototype);bo.prototype.constructor=bo;bo.prototype.isLineDashedMaterial=!0;bo.prototype.copy=function(n){return ht.prototype.copy.call(this,n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this};var rP=Object.freeze({__proto__:null,ShadowMaterial:go,SpriteMaterial:Pr,RawShaderMaterial:Zi,ShaderMaterial:en,PointsMaterial:ei,MeshPhysicalMaterial:Tr,MeshStandardMaterial:Si,MeshPhongMaterial:Or,MeshToonMaterial:_o,MeshNormalMaterial:yo,MeshLambertMaterial:xo,MeshDepthMaterial:wr,MeshDistanceMaterial:Sr,MeshBasicMaterial:Fn,MeshMatcapMaterial:vo,LineDashedMaterial:bo,LineBasicMaterial:ht,Material:Oe}),lt={arraySlice:function(n,e,t){return lt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)},subclip:function(n,e,t,i,r=30){let o=n.clone();o.name=e;let s=[];for(let l=0;l<o.tracks.length;++l){let c=o.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){let p=c.times[f]*r;if(!(p<t||p>=i)){u.push(c.times[f]);for(let m=0;m<d;++m)h.push(c.values[f*d+m])}}u.length!==0&&(c.times=lt.convertArray(u,c.times.constructor),c.values=lt.convertArray(h,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);let r=t.tracks.length,o=e/i;for(let s=0;s<r;++s){let a=t.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;let c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let d=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0,f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=a.times.length-1,m;if(o<=a.times[0]){let _=d,g=u-d;m=lt.arraySlice(a.values,_,g)}else if(o>=a.times[p]){let _=p*u+d,g=_+u-d;m=lt.arraySlice(a.values,_,g)}else{let _=a.createInterpolant(),g=d,v=u-d;_.evaluate(o),m=lt.arraySlice(_.resultBuffer,g,v)}l==="quaternion"&&new zt().fromArray(m).normalize().conjugate().toArray(m);let y=c.times.length;for(let _=0;_<y;++_){let g=_*f+h;if(l==="quaternion")zt.multiplyQuaternionsFlat(c.values,g,m,0,c.values,g);else{let v=f-h*2;for(let b=0;b<v;++b)c.values[g+b]-=m[b]}}}return n.blendMode=Fp,n}};function Sn(n,e,t,i){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(t),this.sampleValues=e,this.valueSize=t}Object.assign(Sn.prototype,{evaluate:function(n){let e=this.parameterPositions,t=this._cachedIndex,i=e[t],r=e[t-1];e:{t:{let o;n:{i:if(!(n<i)){for(let s=t+2;;){if(i===void 0){if(n<r)break i;return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,n,r)}if(t===s)break;if(r=i,i=e[++t],n<i)break t}o=e.length;break n}if(!(n>=r)){let s=e[1];n<s&&(t=2,r=s);for(let a=t-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,i);if(t===a)break;if(i=r,r=e[--t-1],n>=r)break t}o=t,t=0;break n}break e}for(;t<o;){let s=t+o>>>1;n<e[s]?o=s:t=s+1}if(i=e[t],r=e[t-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,i);if(i===void 0)return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,r,n)}this._cachedIndex=t,this.intervalChanged_(t,r,i)}return this.interpolate_(t,r,n,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(n){let e=this.resultBuffer,t=this.sampleValues,i=this.valueSize,r=n*i;for(let o=0;o!==i;++o)e[o]=t[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Sn.prototype,{beforeStart_:Sn.prototype.copySampleValue_,afterEnd_:Sn.prototype.copySampleValue_});function Uu(n,e,t,i){Sn.call(this,n,e,t,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Uu.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Uu,DefaultSettings_:{endingStart:no,endingEnd:no},intervalChanged_:function(n,e,t){let i=this.parameterPositions,r=n-2,o=n+1,s=i[r],a=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case io:r=n,s=2*e-t;break;case za:r=i.length-2,s=e+i[r]-i[r+1];break;default:r=n,s=t}if(a===void 0)switch(this.getSettings_().endingEnd){case io:o=n,a=2*t-e;break;case za:o=1,a=t+i[1]-i[0];break;default:o=n-1,a=e}let l=(t-e)*.5,c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-t),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(n,e,t,i){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=n*s,l=a-s,c=this._offsetPrev,d=this._offsetNext,u=this._weightPrev,h=this._weightNext,f=(t-e)/(i-e),p=f*f,m=p*f,y=-u*m+2*u*p-u*f,_=(1+u)*m+(-1.5-2*u)*p+(-.5+u)*f+1,g=(-1-h)*m+(1.5+h)*p+.5*f,v=h*m-h*p;for(let b=0;b!==s;++b)r[b]=y*o[c+b]+_*o[l+b]+g*o[a+b]+v*o[d+b];return r}});function bl(n,e,t,i){Sn.call(this,n,e,t,i)}bl.prototype=Object.assign(Object.create(Sn.prototype),{constructor:bl,interpolate_:function(n,e,t,i){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=n*s,l=a-s,c=(t-e)/(i-e),d=1-c;for(let u=0;u!==s;++u)r[u]=o[l+u]*d+o[a+u]*c;return r}});function Bu(n,e,t,i){Sn.call(this,n,e,t,i)}Bu.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Bu,interpolate_:function(n){return this.copySampleValue_(n-1)}});function Vt(n,e,t,i){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=lt.convertArray(e,this.TimeBufferType),this.values=lt.convertArray(t,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(Vt,{toJSON:function(n){let e=n.constructor,t;if(e.toJSON!==void 0)t=e.toJSON(n);else{t={name:n.name,times:lt.convertArray(n.times,Array),values:lt.convertArray(n.values,Array)};let i=n.getInterpolation();i!==n.DefaultInterpolation&&(t.interpolation=i)}return t.type=n.ValueTypeName,t}});Object.assign(Vt.prototype,{constructor:Vt,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ta,InterpolantFactoryMethodDiscrete:function(n){return new Bu(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodLinear:function(n){return new bl(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodSmooth:function(n){return new Uu(this.times,this.values,this.getValueSize(),n)},setInterpolation:function(n){let e;switch(n){case Na:e=this.InterpolantFactoryMethodDiscrete;break;case Ta:e=this.InterpolantFactoryMethodLinear;break;case uu:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Na;case this.InterpolantFactoryMethodLinear:return Ta;case this.InterpolantFactoryMethodSmooth:return uu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(n){if(n!==0){let e=this.times;for(let t=0,i=e.length;t!==i;++t)e[t]+=n}return this},scale:function(n){if(n!==1){let e=this.times;for(let t=0,i=e.length;t!==i;++t)e[t]*=n}return this},trim:function(n,e){let t=this.times,i=t.length,r=0,o=i-1;for(;r!==i&&t[r]<n;)++r;for(;o!==-1&&t[o]>e;)--o;if(++o,r!==0||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);let s=this.getValueSize();this.times=lt.arraySlice(t,r,o),this.values=lt.arraySlice(this.values,r*s,o*s)}return this},validate:function(){let n=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);let t=this.times,i=this.values,r=t.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let o=null;for(let s=0;s!==r;s++){let a=t[s];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),n=!1;break}if(o!==null&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),n=!1;break}o=a}if(i!==void 0&&lt.isTypedArray(i))for(let s=0,a=i.length;s!==a;++s){let l=i[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),n=!1;break}}return n},optimize:function(){let n=lt.arraySlice(this.times),e=lt.arraySlice(this.values),t=this.getValueSize(),i=this.getInterpolation()===uu,r=n.length-1,o=1;for(let s=1;s<r;++s){let a=!1,l=n[s],c=n[s+1];if(l!==c&&(s!==1||l!==l[0]))if(i)a=!0;else{let d=s*t,u=d-t,h=d+t;for(let f=0;f!==t;++f){let p=e[d+f];if(p!==e[u+f]||p!==e[h+f]){a=!0;break}}}if(a){if(s!==o){n[o]=n[s];let d=s*t,u=o*t;for(let h=0;h!==t;++h)e[u+h]=e[d+h]}++o}}if(r>0){n[o]=n[r];for(let s=r*t,a=o*t,l=0;l!==t;++l)e[a+l]=e[s+l];++o}return o!==n.length?(this.times=lt.arraySlice(n,0,o),this.values=lt.arraySlice(e,0,o*t)):(this.times=n,this.values=e),this},clone:function(){let n=lt.arraySlice(this.times,0),e=lt.arraySlice(this.values,0),t=this.constructor,i=new t(this.name,n,e);return i.createInterpolant=this.createInterpolant,i}});function Vu(n,e,t){Vt.call(this,n,e,t)}Vu.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Vu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Na,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Gu(n,e,t,i){Vt.call(this,n,e,t,i)}Gu.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Gu,ValueTypeName:"color"});function Os(n,e,t,i){Vt.call(this,n,e,t,i)}Os.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Os,ValueTypeName:"number"});function Hu(n,e,t,i){Sn.call(this,n,e,t,i)}Hu.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Hu,interpolate_:function(n,e,t,i){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(t-e)/(i-e),l=n*s;for(let c=l+s;l!==c;l+=4)zt.slerpFlat(r,0,o,l-s,o,l,a);return r}});function Ml(n,e,t,i){Vt.call(this,n,e,t,i)}Ml.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Ml,ValueTypeName:"quaternion",DefaultInterpolation:Ta,InterpolantFactoryMethodLinear:function(n){return new Hu(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodSmooth:void 0});function Wu(n,e,t,i){Vt.call(this,n,e,t,i)}Wu.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Wu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Na,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function As(n,e,t,i){Vt.call(this,n,e,t,i)}As.prototype=Object.assign(Object.create(Vt.prototype),{constructor:As,ValueTypeName:"vector"});function xn(n,e=-1,t,i=md){this.name=n,this.tracks=t,this.duration=e,this.blendMode=i,this.uuid=Re.generateUUID(),this.duration<0&&this.resetDuration()}function oP(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Os;case"vector":case"vector2":case"vector3":case"vector4":return As;case"color":return Gu;case"quaternion":return Ml;case"bool":case"boolean":return Vu;case"string":return Wu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function sP(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=oP(n.type);if(n.times===void 0){let t=[],i=[];lt.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}Object.assign(xn,{parse:function(n){let e=[],t=n.tracks,i=1/(n.fps||1);for(let o=0,s=t.length;o!==s;++o)e.push(sP(t[o]).scale(i));let r=new xn(n.name,n.duration,e,n.blendMode);return r.uuid=n.uuid,r},toJSON:function(n){let e=[],t=n.tracks,i={name:n.name,duration:n.duration,tracks:e,uuid:n.uuid,blendMode:n.blendMode};for(let r=0,o=t.length;r!==o;++r)e.push(Vt.toJSON(t[r]));return i},CreateFromMorphTargetSequence:function(n,e,t,i){let r=e.length,o=[];for(let s=0;s<r;s++){let a=[],l=[];a.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);let c=lt.getKeyframeOrder(a);a=lt.sortedArray(a,1,c),l=lt.sortedArray(l,1,c),!i&&a[0]===0&&(a.push(r),l.push(l[0])),o.push(new Os(".morphTargetInfluences["+e[s].name+"]",a,l).scale(1/t))}return new xn(n,-1,o)},findByName:function(n,e){let t=n;if(!Array.isArray(n)){let i=n;t=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},CreateClipsFromMorphTargetSequences:function(n,e,t){let i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=n.length;s<a;s++){let l=n[s],c=l.name.match(r);if(c&&c.length>1){let d=c[1],u=i[d];u||(i[d]=u=[]),u.push(l)}}let o=[];for(let s in i)o.push(xn.CreateFromMorphTargetSequence(s,i[s],e,t));return o},parseAnimation:function(n,e){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let t=function(d,u,h,f,p){if(h.length!==0){let m=[],y=[];lt.flattenJSON(h,m,y,f),m.length!==0&&p.push(new d(u,m,y))}},i=[],r=n.name||"default",o=n.fps||30,s=n.blendMode,a=n.length||-1,l=n.hierarchy||[];for(let d=0;d<l.length;d++){let u=l[d].keys;if(!(!u||u.length===0))if(u[0].morphTargets){let h={},f;for(f=0;f<u.length;f++)if(u[f].morphTargets)for(let p=0;p<u[f].morphTargets.length;p++)h[u[f].morphTargets[p]]=-1;for(let p in h){let m=[],y=[];for(let _=0;_!==u[f].morphTargets.length;++_){let g=u[f];m.push(g.time),y.push(g.morphTarget===p?1:0)}i.push(new Os(".morphTargetInfluence["+p+"]",m,y))}a=h.length*(o||1)}else{let h=".bones["+e[d].name+"]";t(As,h+".position",u,"pos",i),t(Ml,h+".quaternion",u,"rot",i),t(As,h+".scale",u,"scl",i)}}return i.length===0?null:new xn(r,a,i,s)}});Object.assign(xn.prototype,{resetDuration:function(){let n=this.tracks,e=0;for(let t=0,i=n.length;t!==i;++t){let r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this},validate:function(){let n=!0;for(let e=0;e<this.tracks.length;e++)n=n&&this.tracks[e].validate();return n},optimize:function(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this},clone:function(){let n=[];for(let e=0;e<this.tracks.length;e++)n.push(this.tracks[e].clone());return new xn(this.name,this.duration,n,this.blendMode)},toJSON:function(){return xn.toJSON(this)}});var Mo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};function Bp(n,e,t){let i=this,r=!1,o=0,s=0,a,l=[];this.onStart=void 0,this.onLoad=n,this.onProgress=e,this.onError=t,this.itemStart=function(c){s++,r===!1&&i.onStart!==void 0&&i.onStart(c,o,s),r=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,s),o===s&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,d){return l.push(c,d),this},this.removeHandler=function(c){let d=l.indexOf(c);return d!==-1&&l.splice(d,2),this},this.getHandler=function(c){for(let d=0,u=l.length;d<u;d+=2){let h=l[d],f=l[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return f}return null}}var Fx=new Bp;function Ke(n){this.manager=n!==void 0?n:Fx,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Ke.prototype,{load:function(){},loadAsync:function(n,e){let t=this;return new Promise(function(i,r){t.load(n,i,e,r)})},parse:function(){},setCrossOrigin:function(n){return this.crossOrigin=n,this},setWithCredentials:function(n){return this.withCredentials=n,this},setPath:function(n){return this.path=n,this},setResourcePath:function(n){return this.resourcePath=n,this},setRequestHeader:function(n){return this.requestHeader=n,this}});var Jn={};function Un(n){Ke.call(this,n)}Un.prototype=Object.assign(Object.create(Ke.prototype),{constructor:Un,load:function(n,e,t,i){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);let r=this,o=Mo.get(n);if(o!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(o),r.manager.itemEnd(n)},0),o;if(Jn[n]!==void 0){Jn[n].push({onLoad:e,onProgress:t,onError:i});return}let s=/^data:(.*?)(;base64)?,(.*)$/,a=n.match(s),l;if(a){let c=a[1],d=!!a[2],u=a[3];u=decodeURIComponent(u),d&&(u=atob(u));try{let h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":let p=new Uint8Array(u.length);for(let y=0;y<u.length;y++)p[y]=u.charCodeAt(y);f==="blob"?h=new Blob([p.buffer],{type:c}):h=p.buffer;break;case"document":h=new DOMParser().parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u;break}setTimeout(function(){e&&e(h),r.manager.itemEnd(n)},0)}catch(h){setTimeout(function(){i&&i(h),r.manager.itemError(n),r.manager.itemEnd(n)},0)}}else{Jn[n]=[],Jn[n].push({onLoad:e,onProgress:t,onError:i}),l=new XMLHttpRequest,l.open("GET",n,!0),l.addEventListener("load",function(c){let d=this.response,u=Jn[n];if(delete Jn[n],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Mo.add(n,d);for(let h=0,f=u.length;h<f;h++){let p=u[h];p.onLoad&&p.onLoad(d)}r.manager.itemEnd(n)}else{for(let h=0,f=u.length;h<f;h++){let p=u[h];p.onError&&p.onError(c)}r.manager.itemError(n),r.manager.itemEnd(n)}},!1),l.addEventListener("progress",function(c){let d=Jn[n];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onProgress&&f.onProgress(c)}},!1),l.addEventListener("error",function(c){let d=Jn[n];delete Jn[n];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(c)}r.manager.itemError(n),r.manager.itemEnd(n)},!1),l.addEventListener("abort",function(c){let d=Jn[n];delete Jn[n];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(c)}r.manager.itemError(n),r.manager.itemEnd(n)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(let c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return r.manager.itemStart(n),l},setResponseType:function(n){return this.responseType=n,this},setMimeType:function(n){return this.mimeType=n,this}});function np(n){Ke.call(this,n)}np.prototype=Object.assign(Object.create(Ke.prototype),{constructor:np,load:function(n,e,t,i){let r=this,o=new Un(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(n,function(s){try{e(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)},parse:function(n){let e=[];for(let t=0;t<n.length;t++){let i=xn.parse(n[t]);e.push(i)}return e}});function ip(n){Ke.call(this,n)}ip.prototype=Object.assign(Object.create(Ke.prototype),{constructor:ip,load:function(n,e,t,i){let r=this,o=[],s=new Cs,a=new Un(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function c(d){a.load(n[d],function(u){let h=r.parse(u,!0);o[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},l+=1,l===6&&(h.mipmapCount===1&&(s.minFilter=Nt),s.image=o,s.format=h.format,s.needsUpdate=!0,e&&e(s))},t,i)}if(Array.isArray(n))for(let d=0,u=n.length;d<u;++d)c(d);else a.load(n,function(d){let u=r.parse(d,!0);if(u.isCubemap){let h=u.mipmaps.length/u.mipmapCount;for(let f=0;f<h;f++){o[f]={mipmaps:[]};for(let p=0;p<u.mipmapCount;p++)o[f].mipmaps.push(u.mipmaps[f*u.mipmapCount+p]),o[f].format=u.format,o[f].width=u.width,o[f].height=u.height}s.image=o}else s.image.width=u.width,s.image.height=u.height,s.mipmaps=u.mipmaps;u.mipmapCount===1&&(s.minFilter=Nt),s.format=u.format,s.needsUpdate=!0,e&&e(s)},t,i);return s}});function Ls(n){Ke.call(this,n)}Ls.prototype=Object.assign(Object.create(Ke.prototype),{constructor:Ls,load:function(n,e,t,i){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);let r=this,o=Mo.get(n);if(o!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(o),r.manager.itemEnd(n)},0),o;let s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),Mo.add(n,this),e&&e(this),r.manager.itemEnd(n)}function l(c){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),i&&i(c),r.manager.itemError(n),r.manager.itemEnd(n)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),n.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(n),s.src=n,s}});function qu(n){Ke.call(this,n)}qu.prototype=Object.assign(Object.create(Ke.prototype),{constructor:qu,load:function(n,e,t,i){let r=new wi,o=new Ls(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(l){o.load(n[l],function(c){r.images[l]=c,s++,s===6&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let l=0;l<n.length;++l)a(l);return r}});function ju(n){Ke.call(this,n)}ju.prototype=Object.assign(Object.create(Ke.prototype),{constructor:ju,load:function(n,e,t,i){let r=this,o=new Yi,s=new Un(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(n,function(a){let l=r.parse(a);l&&(l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:Kt,o.wrapT=l.wrapT!==void 0?l.wrapT:Kt,o.magFilter=l.magFilter!==void 0?l.magFilter:Nt,o.minFilter=l.minFilter!==void 0?l.minFilter:Nt,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=Fs),l.mipmapCount===1&&(o.minFilter=Nt),o.needsUpdate=!0,e&&e(o,l))},t,i),o}});function Yu(n){Ke.call(this,n)}Yu.prototype=Object.assign(Object.create(Ke.prototype),{constructor:Yu,load:function(n,e,t,i){let r=new tt,o=new Ls(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(n,function(s){r.image=s;let a=n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0;r.format=a?yr:bn,r.needsUpdate=!0,e!==void 0&&e(r)},t,i),r}});function Me(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Me.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(n,e){let t=this.getUtoTmapping(n);return this.getPoint(t,e)},getPoints:function(n=5){let e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return e},getSpacedPoints:function(n=5){let e=[];for(let t=0;t<=n;t++)e.push(this.getPointAt(t/n));return e},getLength:function(){let n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e=[],t,i=this.getPoint(0),r=0;e.push(0);for(let o=1;o<=n;o++)t=this.getPoint(o/n),r+=t.distanceTo(i),e.push(r),i=t;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(n,e){let t=this.getLengths(),i=0,r=t.length,o;e?o=e:o=n*t[r-1];let s=0,a=r-1,l;for(;s<=a;)if(i=Math.floor(s+(a-s)/2),l=t[i]-o,l<0)s=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,t[i]===o)return i/(r-1);let c=t[i],u=t[i+1]-c,h=(o-c)/u;return(i+h)/(r-1)},getTangent:function(n,e){let i=n-1e-4,r=n+1e-4;i<0&&(i=0),r>1&&(r=1);let o=this.getPoint(i),s=this.getPoint(r),a=e||(o.isVector2?new $:new P);return a.copy(s).sub(o).normalize(),a},getTangentAt:function(n,e){let t=this.getUtoTmapping(n);return this.getTangent(t,e)},computeFrenetFrames:function(n,e){let t=new P,i=[],r=[],o=[],s=new P,a=new Ue;for(let h=0;h<=n;h++){let f=h/n;i[h]=this.getTangentAt(f,new P),i[h].normalize()}r[0]=new P,o[0]=new P;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),d=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,t.set(1,0,0)),d<=l&&(l=d,t.set(0,1,0)),u<=l&&t.set(0,0,1),s.crossVectors(i[0],t).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let h=1;h<=n;h++){if(r[h]=r[h-1].clone(),o[h]=o[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();let f=Math.acos(Re.clamp(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(a.makeRotationAxis(s,f))}o[h].crossVectors(i[h],r[h])}if(e===!0){let h=Math.acos(Re.clamp(r[0].dot(r[n]),-1,1));h/=n,i[0].dot(s.crossVectors(r[0],r[n]))>0&&(h=-h);for(let f=1;f<=n;f++)r[f].applyMatrix4(a.makeRotationAxis(i[f],h*f)),o[f].crossVectors(i[f],r[f])}return{tangents:i,normals:r,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this},toJSON:function(){let n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n},fromJSON:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}});function Pn(n,e,t,i,r,o,s,a){Me.call(this),this.type="EllipseCurve",this.aX=n||0,this.aY=e||0,this.xRadius=t||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}Pn.prototype=Object.create(Me.prototype);Pn.prototype.constructor=Pn;Pn.prototype.isEllipseCurve=!0;Pn.prototype.getPoint=function(n,e){let t=e||new $,i=Math.PI*2,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(o?r=0:r=i),this.aClockwise===!0&&!o&&(r===i?r=-i:r=r-i);let s=this.aStartAngle+n*r,a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){let c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),u=a-this.aX,h=l-this.aY;a=u*c-h*d+this.aX,l=u*d+h*c+this.aY}return t.set(a,l)};Pn.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this};Pn.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n};Pn.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this};function Rs(n,e,t,i,r,o){Pn.call(this,n,e,t,t,i,r,o),this.type="ArcCurve"}Rs.prototype=Object.create(Pn.prototype);Rs.prototype.constructor=Rs;Rs.prototype.isArcCurve=!0;function Vp(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,d,u){let h=(s-o)/c-(a-o)/(c+d)+(a-s)/d,f=(a-s)/d-(l-s)/(d+u)+(l-a)/u;h*=d,f*=d,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var eu=new P,Sf=new Vp,Cf=new Vp,Pf=new Vp;function Xt(n=[],e=!1,t="centripetal",i=.5){Me.call(this),this.type="CatmullRomCurve3",this.points=n,this.closed=e,this.curveType=t,this.tension=i}Xt.prototype=Object.create(Me.prototype);Xt.prototype.constructor=Xt;Xt.prototype.isCatmullRomCurve3=!0;Xt.prototype.getPoint=function(n,e=new P){let t=e,i=this.points,r=i.length,o=(r-(this.closed?0:1))*n,s=Math.floor(o),a=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:a===0&&s===r-1&&(s=r-2,a=1);let l,c;this.closed||s>0?l=i[(s-1)%r]:(eu.subVectors(i[0],i[1]).add(i[0]),l=eu);let d=i[s%r],u=i[(s+1)%r];if(this.closed||s+2<r?c=i[(s+2)%r]:(eu.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=eu),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(d),h),p=Math.pow(d.distanceToSquared(u),h),m=Math.pow(u.distanceToSquared(c),h);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),Sf.initNonuniformCatmullRom(l.x,d.x,u.x,c.x,f,p,m),Cf.initNonuniformCatmullRom(l.y,d.y,u.y,c.y,f,p,m),Pf.initNonuniformCatmullRom(l.z,d.z,u.z,c.z,f,p,m)}else this.curveType==="catmullrom"&&(Sf.initCatmullRom(l.x,d.x,u.x,c.x,this.tension),Cf.initCatmullRom(l.y,d.y,u.y,c.y,this.tension),Pf.initCatmullRom(l.z,d.z,u.z,c.z,this.tension));return t.set(Sf.calc(a),Cf.calc(a),Pf.calc(a)),t};Xt.prototype.copy=function(n){Me.prototype.copy.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){let i=n.points[e];this.points.push(i.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this};Xt.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);n.points=[];for(let e=0,t=this.points.length;e<t;e++){let i=this.points[e];n.points.push(i.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n};Xt.prototype.fromJSON=function(n){Me.prototype.fromJSON.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){let i=n.points[e];this.points.push(new P().fromArray(i))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this};function __(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function aP(n,e){let t=1-n;return t*t*e}function lP(n,e){return 2*(1-n)*n*e}function cP(n,e){return n*n*e}function La(n,e,t,i){return aP(n,e)+lP(n,t)+cP(n,i)}function uP(n,e){let t=1-n;return t*t*t*e}function dP(n,e){let t=1-n;return 3*t*t*n*e}function hP(n,e){return 3*(1-n)*n*n*e}function fP(n,e){return n*n*n*e}function Ra(n,e,t,i,r){return uP(n,e)+dP(n,t)+hP(n,i)+fP(n,r)}function ti(n=new $,e=new $,t=new $,i=new $){Me.call(this),this.type="CubicBezierCurve",this.v0=n,this.v1=e,this.v2=t,this.v3=i}ti.prototype=Object.create(Me.prototype);ti.prototype.constructor=ti;ti.prototype.isCubicBezierCurve=!0;ti.prototype.getPoint=function(n,e=new $){let t=e,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return t.set(Ra(n,i.x,r.x,o.x,s.x),Ra(n,i.y,r.y,o.y,s.y)),t};ti.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this};ti.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n};ti.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this};function Ci(n=new P,e=new P,t=new P,i=new P){Me.call(this),this.type="CubicBezierCurve3",this.v0=n,this.v1=e,this.v2=t,this.v3=i}Ci.prototype=Object.create(Me.prototype);Ci.prototype.constructor=Ci;Ci.prototype.isCubicBezierCurve3=!0;Ci.prototype.getPoint=function(n,e=new P){let t=e,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return t.set(Ra(n,i.x,r.x,o.x,s.x),Ra(n,i.y,r.y,o.y,s.y),Ra(n,i.z,r.z,o.z,s.z)),t};Ci.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this};Ci.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n};Ci.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this};function un(n=new $,e=new $){Me.call(this),this.type="LineCurve",this.v1=n,this.v2=e}un.prototype=Object.create(Me.prototype);un.prototype.constructor=un;un.prototype.isLineCurve=!0;un.prototype.getPoint=function(n,e=new $){let t=e;return n===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(n).add(this.v1)),t};un.prototype.getPointAt=function(n,e){return this.getPoint(n,e)};un.prototype.getTangent=function(n,e){let t=e||new $;return t.copy(this.v2).sub(this.v1).normalize(),t};un.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this};un.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};un.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function ni(n=new P,e=new P){Me.call(this),this.type="LineCurve3",this.v1=n,this.v2=e}ni.prototype=Object.create(Me.prototype);ni.prototype.constructor=ni;ni.prototype.isLineCurve3=!0;ni.prototype.getPoint=function(n,e=new P){let t=e;return n===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(n).add(this.v1)),t};ni.prototype.getPointAt=function(n,e){return this.getPoint(n,e)};ni.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this};ni.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};ni.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function ii(n=new $,e=new $,t=new $){Me.call(this),this.type="QuadraticBezierCurve",this.v0=n,this.v1=e,this.v2=t}ii.prototype=Object.create(Me.prototype);ii.prototype.constructor=ii;ii.prototype.isQuadraticBezierCurve=!0;ii.prototype.getPoint=function(n,e=new $){let t=e,i=this.v0,r=this.v1,o=this.v2;return t.set(La(n,i.x,r.x,o.x),La(n,i.y,r.y,o.y)),t};ii.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this};ii.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};ii.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function Pi(n=new P,e=new P,t=new P){Me.call(this),this.type="QuadraticBezierCurve3",this.v0=n,this.v1=e,this.v2=t}Pi.prototype=Object.create(Me.prototype);Pi.prototype.constructor=Pi;Pi.prototype.isQuadraticBezierCurve3=!0;Pi.prototype.getPoint=function(n,e=new P){let t=e,i=this.v0,r=this.v1,o=this.v2;return t.set(La(n,i.x,r.x,o.x),La(n,i.y,r.y,o.y),La(n,i.z,r.z,o.z)),t};Pi.prototype.copy=function(n){return Me.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this};Pi.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};Pi.prototype.fromJSON=function(n){return Me.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function ri(n=[]){Me.call(this),this.type="SplineCurve",this.points=n}ri.prototype=Object.create(Me.prototype);ri.prototype.constructor=ri;ri.prototype.isSplineCurve=!0;ri.prototype.getPoint=function(n,e=new $){let t=e,i=this.points,r=(i.length-1)*n,o=Math.floor(r),s=r-o,a=i[o===0?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return t.set(__(s,a.x,l.x,c.x,d.x),__(s,a.y,l.y,c.y,d.y)),t};ri.prototype.copy=function(n){Me.prototype.copy.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){let i=n.points[e];this.points.push(i.clone())}return this};ri.prototype.toJSON=function(){let n=Me.prototype.toJSON.call(this);n.points=[];for(let e=0,t=this.points.length;e<t;e++){let i=this.points[e];n.points.push(i.toArray())}return n};ri.prototype.fromJSON=function(n){Me.prototype.fromJSON.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){let i=n.points[e];this.points.push(new $().fromArray(i))}return this};var rp=Object.freeze({__proto__:null,ArcCurve:Rs,CatmullRomCurve3:Xt,CubicBezierCurve:ti,CubicBezierCurve3:Ci,EllipseCurve:Pn,LineCurve:un,LineCurve3:ni,QuadraticBezierCurve:ii,QuadraticBezierCurve3:Pi,SplineCurve:ri});function Hi(){Me.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Hi.prototype=Object.assign(Object.create(Me.prototype),{constructor:Hi,add:function(n){this.curves.push(n)},closePath:function(){let n=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);n.equals(e)||this.curves.push(new un(e,n))},getPoint:function(n){let e=n*this.getLength(),t=this.getCurveLengths(),i=0;for(;i<t.length;){if(t[i]>=e){let r=t[i]-e,o=this.curves[i],s=o.getLength(),a=s===0?0:1-r/s;return o.getPointAt(a)}i++}return null},getLength:function(){let n=this.getCurveLengths();return n[n.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let n=[],e=0;for(let t=0,i=this.curves.length;t<i;t++)e+=this.curves[t].getLength(),n.push(e);return this.cacheLengths=n,n},getSpacedPoints:function(n=40){let e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return this.autoClose&&e.push(e[0]),e},getPoints:function(n=12){let e=[],t;for(let i=0,r=this.curves;i<r.length;i++){let o=r[i],s=o&&o.isEllipseCurve?n*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?n*o.points.length:n,a=o.getPoints(s);for(let l=0;l<a.length;l++){let c=a[l];t&&t.equals(c)||(e.push(c),t=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(n){Me.prototype.copy.call(this,n),this.curves=[];for(let e=0,t=n.curves.length;e<t;e++){let i=n.curves[e];this.curves.push(i.clone())}return this.autoClose=n.autoClose,this},toJSON:function(){let n=Me.prototype.toJSON.call(this);n.autoClose=this.autoClose,n.curves=[];for(let e=0,t=this.curves.length;e<t;e++){let i=this.curves[e];n.curves.push(i.toJSON())}return n},fromJSON:function(n){Me.prototype.fromJSON.call(this,n),this.autoClose=n.autoClose,this.curves=[];for(let e=0,t=n.curves.length;e<t;e++){let i=n.curves[e];this.curves.push(new rp[i.type]().fromJSON(i))}return this}});function Kn(n){Hi.call(this),this.type="Path",this.currentPoint=new $,n&&this.setFromPoints(n)}Kn.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Kn,setFromPoints:function(n){this.moveTo(n[0].x,n[0].y);for(let e=1,t=n.length;e<t;e++)this.lineTo(n[e].x,n[e].y);return this},moveTo:function(n,e){return this.currentPoint.set(n,e),this},lineTo:function(n,e){let t=new un(this.currentPoint.clone(),new $(n,e));return this.curves.push(t),this.currentPoint.set(n,e),this},quadraticCurveTo:function(n,e,t,i){let r=new ii(this.currentPoint.clone(),new $(n,e),new $(t,i));return this.curves.push(r),this.currentPoint.set(t,i),this},bezierCurveTo:function(n,e,t,i,r,o){let s=new ti(this.currentPoint.clone(),new $(n,e),new $(t,i),new $(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this},splineThru:function(n){let e=[this.currentPoint.clone()].concat(n),t=new ri(e);return this.curves.push(t),this.currentPoint.copy(n[n.length-1]),this},arc:function(n,e,t,i,r,o){let s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(n+s,e+a,t,i,r,o),this},absarc:function(n,e,t,i,r,o){return this.absellipse(n,e,t,t,i,r,o),this},ellipse:function(n,e,t,i,r,o,s,a){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(n+l,e+c,t,i,r,o,s,a),this},absellipse:function(n,e,t,i,r,o,s,a){let l=new Pn(n,e,t,i,r,o,s,a);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(n){return Hi.prototype.copy.call(this,n),this.currentPoint.copy(n.currentPoint),this},toJSON:function(){let n=Hi.prototype.toJSON.call(this);return n.currentPoint=this.currentPoint.toArray(),n},fromJSON:function(n){return Hi.prototype.fromJSON.call(this,n),this.currentPoint.fromArray(n.currentPoint),this}});function vr(n){Kn.call(this,n),this.uuid=Re.generateUUID(),this.type="Shape",this.holes=[]}vr.prototype=Object.assign(Object.create(Kn.prototype),{constructor:vr,getPointsHoles:function(n){let e=[];for(let t=0,i=this.holes.length;t<i;t++)e[t]=this.holes[t].getPoints(n);return e},extractPoints:function(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}},copy:function(n){Kn.prototype.copy.call(this,n),this.holes=[];for(let e=0,t=n.holes.length;e<t;e++){let i=n.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){let n=Kn.prototype.toJSON.call(this);n.uuid=this.uuid,n.holes=[];for(let e=0,t=this.holes.length;e<t;e++){let i=this.holes[e];n.holes.push(i.toJSON())}return n},fromJSON:function(n){Kn.prototype.fromJSON.call(this,n),this.uuid=n.uuid,this.holes=[];for(let e=0,t=n.holes.length;e<t;e++){let i=n.holes[e];this.holes.push(new Kn().fromJSON(i))}return this}});function at(n,e=1){ye.call(this),this.type="Light",this.color=new fe(n),this.intensity=e}at.prototype=Object.assign(Object.create(ye.prototype),{constructor:at,isLight:!0,copy:function(n){return ye.prototype.copy.call(this,n),this.color.copy(n.color),this.intensity=n.intensity,this},toJSON:function(n){let e=ye.prototype.toJSON.call(this,n);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function Xu(n,e,t){at.call(this,n,t),this.type="HemisphereLight",this.position.copy(ye.DefaultUp),this.updateMatrix(),this.groundColor=new fe(e)}Xu.prototype=Object.assign(Object.create(at.prototype),{constructor:Xu,isHemisphereLight:!0,copy:function(n){return at.prototype.copy.call(this,n),this.groundColor.copy(n.groundColor),this}});function Ji(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new $(512,512),this.map=null,this.mapPass=null,this.matrix=new Ue,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fo,this._frameExtents=new $(1,1),this._viewportCount=1,this._viewports=[new $e(0,0,1,1)]}Object.assign(Ji.prototype,{_projScreenMatrix:new Ue,_lightPositionWorld:new P,_lookTarget:new P,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(n){let e=this.camera,t=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(n.matrixWorld),e.position.copy(o),r.setFromMatrixPosition(n.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(e.projectionMatrix),t.multiply(e.matrixWorldInverse)},getViewport:function(n){return this._viewports[n]},getFrameExtents:function(){return this._frameExtents},copy:function(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){let n={};return this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}});function op(){Ji.call(this,new Tt(50,1,.5,500)),this.focus=1}op.prototype=Object.assign(Object.create(Ji.prototype),{constructor:op,isSpotLightShadow:!0,updateMatrices:function(n){let e=this.camera,t=Re.RAD2DEG*2*n.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=n.distance||e.far;(t!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=t,e.aspect=i,e.far=r,e.updateProjectionMatrix()),Ji.prototype.updateMatrices.call(this,n)}});function Zu(n,e,t,i,r,o){at.call(this,n,e),this.type="SpotLight",this.position.copy(ye.DefaultUp),this.updateMatrix(),this.target=new ye,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(s){this.intensity=s/Math.PI}}),this.distance=t!==void 0?t:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=o!==void 0?o:1,this.shadow=new op}Zu.prototype=Object.assign(Object.create(at.prototype),{constructor:Zu,isSpotLight:!0,copy:function(n){return at.prototype.copy.call(this,n),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}});function sp(){Ji.call(this,new Tt(90,1,.5,500)),this._frameExtents=new $(4,2),this._viewportCount=6,this._viewports=[new $e(2,1,1,1),new $e(0,1,1,1),new $e(3,1,1,1),new $e(1,1,1,1),new $e(3,0,1,1),new $e(1,0,1,1)],this._cubeDirections=[new P(1,0,0),new P(-1,0,0),new P(0,0,1),new P(0,0,-1),new P(0,1,0),new P(0,-1,0)],this._cubeUps=[new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,0,1),new P(0,0,-1)]}sp.prototype=Object.assign(Object.create(Ji.prototype),{constructor:sp,isPointLightShadow:!0,updateMatrices:function(n,e=0){let t=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(n.matrixWorld),t.position.copy(r),o.copy(t.position),o.add(this._cubeDirections[e]),t.up.copy(this._cubeUps[e]),t.lookAt(o),t.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}});function Ju(n,e,t,i){at.call(this,n,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=t!==void 0?t:0,this.decay=i!==void 0?i:1,this.shadow=new sp}Ju.prototype=Object.assign(Object.create(at.prototype),{constructor:Ju,isPointLight:!0,copy:function(n){return at.prototype.copy.call(this,n),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}});function Is(n=-1,e=1,t=1,i=-1,r=.1,o=2e3){Mi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=e,this.top=t,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}Is.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Is,isOrthographicCamera:!0,copy:function(n,e){return Mi.prototype.copy.call(this,n,e),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this},setViewOffset:function(n,e,t,i,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){let n=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=t-n,o=t+n,s=i+e,a=i-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,o=r+l*this.view.width,s-=c*this.view.offsetY,a=s-c*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){let e=ye.prototype.toJSON.call(this,n);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function ap(){Ji.call(this,new Is(-5,5,5,-5,.5,500))}ap.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ap,isDirectionalLightShadow:!0,updateMatrices:function(n){Ji.prototype.updateMatrices.call(this,n)}});function $u(n,e){at.call(this,n,e),this.type="DirectionalLight",this.position.copy(ye.DefaultUp),this.updateMatrix(),this.target=new ye,this.shadow=new ap}$u.prototype=Object.assign(Object.create(at.prototype),{constructor:$u,isDirectionalLight:!0,copy:function(n){return at.prototype.copy.call(this,n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}});function Ku(n,e){at.call(this,n,e),this.type="AmbientLight"}Ku.prototype=Object.assign(Object.create(at.prototype),{constructor:Ku,isAmbientLight:!0});function Qu(n,e,t,i){at.call(this,n,e),this.type="RectAreaLight",this.width=t!==void 0?t:10,this.height=i!==void 0?i:10}Qu.prototype=Object.assign(Object.create(at.prototype),{constructor:Qu,isRectAreaLight:!0,copy:function(n){return at.prototype.copy.call(this,n),this.width=n.width,this.height=n.height,this},toJSON:function(n){let e=at.prototype.toJSON.call(this,n);return e.object.width=this.width,e.object.height=this.height,e}});var ed=class{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new P)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let i=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*o)),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],1.092548*(i*o)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){let i=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*o),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],2*.429043*i*o),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){let i=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-r*r)}};function kn(n,e){at.call(this,void 0,e),this.type="LightProbe",this.sh=n!==void 0?n:new ed}kn.prototype=Object.assign(Object.create(at.prototype),{constructor:kn,isLightProbe:!0,copy:function(n){return at.prototype.copy.call(this,n),this.sh.copy(n.sh),this},fromJSON:function(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this},toJSON:function(n){let e=at.prototype.toJSON.call(this,n);return e.object.sh=this.sh.toArray(),e}});function td(n){Ke.call(this,n),this.textures={}}td.prototype=Object.assign(Object.create(Ke.prototype),{constructor:td,load:function(n,e,t,i){let r=this,o=new Un(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(n,function(s){try{e(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)},parse:function(n){let e=this.textures;function t(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}let i=new rP[n.type];if(n.uuid!==void 0&&(i.uuid=n.uuid),n.name!==void 0&&(i.name=n.name),n.color!==void 0&&i.color!==void 0&&i.color.setHex(n.color),n.roughness!==void 0&&(i.roughness=n.roughness),n.metalness!==void 0&&(i.metalness=n.metalness),n.sheen!==void 0&&(i.sheen=new fe().setHex(n.sheen)),n.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(n.emissive),n.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(n.specular),n.shininess!==void 0&&(i.shininess=n.shininess),n.clearcoat!==void 0&&(i.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=n.clearcoatRoughness),n.fog!==void 0&&(i.fog=n.fog),n.flatShading!==void 0&&(i.flatShading=n.flatShading),n.blending!==void 0&&(i.blending=n.blending),n.combine!==void 0&&(i.combine=n.combine),n.side!==void 0&&(i.side=n.side),n.opacity!==void 0&&(i.opacity=n.opacity),n.transparent!==void 0&&(i.transparent=n.transparent),n.alphaTest!==void 0&&(i.alphaTest=n.alphaTest),n.depthTest!==void 0&&(i.depthTest=n.depthTest),n.depthWrite!==void 0&&(i.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(i.colorWrite=n.colorWrite),n.stencilWrite!==void 0&&(i.stencilWrite=n.stencilWrite),n.stencilWriteMask!==void 0&&(i.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(i.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(i.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(i.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(i.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(i.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(i.stencilZPass=n.stencilZPass),n.wireframe!==void 0&&(i.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(i.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(i.rotation=n.rotation),n.linewidth!==1&&(i.linewidth=n.linewidth),n.dashSize!==void 0&&(i.dashSize=n.dashSize),n.gapSize!==void 0&&(i.gapSize=n.gapSize),n.scale!==void 0&&(i.scale=n.scale),n.polygonOffset!==void 0&&(i.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=n.polygonOffsetUnits),n.skinning!==void 0&&(i.skinning=n.skinning),n.morphTargets!==void 0&&(i.morphTargets=n.morphTargets),n.morphNormals!==void 0&&(i.morphNormals=n.morphNormals),n.dithering!==void 0&&(i.dithering=n.dithering),n.vertexTangents!==void 0&&(i.vertexTangents=n.vertexTangents),n.visible!==void 0&&(i.visible=n.visible),n.toneMapped!==void 0&&(i.toneMapped=n.toneMapped),n.userData!==void 0&&(i.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?i.vertexColors=n.vertexColors>0:i.vertexColors=n.vertexColors),n.uniforms!==void 0)for(let r in n.uniforms){let o=n.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=t(o.value);break;case"c":i.uniforms[r].value=new fe().setHex(o.value);break;case"v2":i.uniforms[r].value=new $().fromArray(o.value);break;case"v3":i.uniforms[r].value=new P().fromArray(o.value);break;case"v4":i.uniforms[r].value=new $e().fromArray(o.value);break;case"m3":i.uniforms[r].value=new Bt().fromArray(o.value);break;case"m4":i.uniforms[r].value=new Ue().fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(n.defines!==void 0&&(i.defines=n.defines),n.vertexShader!==void 0&&(i.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(i.fragmentShader=n.fragmentShader),n.extensions!==void 0)for(let r in n.extensions)i.extensions[r]=n.extensions[r];if(n.shading!==void 0&&(i.flatShading=n.shading===1),n.size!==void 0&&(i.size=n.size),n.sizeAttenuation!==void 0&&(i.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(i.map=t(n.map)),n.matcap!==void 0&&(i.matcap=t(n.matcap)),n.alphaMap!==void 0&&(i.alphaMap=t(n.alphaMap)),n.bumpMap!==void 0&&(i.bumpMap=t(n.bumpMap)),n.bumpScale!==void 0&&(i.bumpScale=n.bumpScale),n.normalMap!==void 0&&(i.normalMap=t(n.normalMap)),n.normalMapType!==void 0&&(i.normalMapType=n.normalMapType),n.normalScale!==void 0){let r=n.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new $().fromArray(r)}return n.displacementMap!==void 0&&(i.displacementMap=t(n.displacementMap)),n.displacementScale!==void 0&&(i.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(i.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(i.roughnessMap=t(n.roughnessMap)),n.metalnessMap!==void 0&&(i.metalnessMap=t(n.metalnessMap)),n.emissiveMap!==void 0&&(i.emissiveMap=t(n.emissiveMap)),n.emissiveIntensity!==void 0&&(i.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(i.specularMap=t(n.specularMap)),n.envMap!==void 0&&(i.envMap=t(n.envMap)),n.envMapIntensity!==void 0&&(i.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(i.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(i.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(i.lightMap=t(n.lightMap)),n.lightMapIntensity!==void 0&&(i.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(i.aoMap=t(n.aoMap)),n.aoMapIntensity!==void 0&&(i.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(i.gradientMap=t(n.gradientMap)),n.clearcoatMap!==void 0&&(i.clearcoatMap=t(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=t(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=t(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new $().fromArray(n.clearcoatNormalScale)),n.transmission!==void 0&&(i.transmission=n.transmission),n.transmissionMap!==void 0&&(i.transmissionMap=t(n.transmissionMap)),i},setTextures:function(n){return this.textures=n,this}});var Gp={decodeText:function(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(n){let e=n.lastIndexOf("/");return e===-1?"./":n.substr(0,e+1)}};function wl(){Se.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}wl.prototype=Object.assign(Object.create(Se.prototype),{constructor:wl,isInstancedBufferGeometry:!0,copy:function(n){return Se.prototype.copy.call(this,n),this.instanceCount=n.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){let n=Se.prototype.toJSON.call(this);return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}});function nd(n,e,t,i){typeof t=="number"&&(i=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ce.call(this,n,e,t),this.meshPerAttribute=i||1}nd.prototype=Object.assign(Object.create(Ce.prototype),{constructor:nd,isInstancedBufferAttribute:!0,copy:function(n){return Ce.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},toJSON:function(){let n=Ce.prototype.toJSON.call(this);return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}});function id(n){Ke.call(this,n)}id.prototype=Object.assign(Object.create(Ke.prototype),{constructor:id,load:function(n,e,t,i){let r=this,o=new Un(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(n,function(s){try{e(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)},parse:function(n){let e={},t={};function i(h,f){if(e[f]!==void 0)return e[f];let m=h.interleavedBuffers[f],y=r(h,m.buffer),_=Ca(m.type,y),g=new vn(_,m.stride);return g.uuid=m.uuid,e[f]=g,g}function r(h,f){if(t[f]!==void 0)return t[f];let m=h.arrayBuffers[f],y=new Uint32Array(m).buffer;return t[f]=y,y}let o=n.isInstancedBufferGeometry?new wl:new Se,s=n.data.index;if(s!==void 0){let h=Ca(s.type,s.array);o.setIndex(new Ce(h,1))}let a=n.data.attributes;for(let h in a){let f=a[h],p;if(f.isInterleavedBufferAttribute){let m=i(n.data,f.data);p=new Cr(m,f.itemSize,f.offset,f.normalized)}else{let m=Ca(f.type,f.array),y=f.isInstancedBufferAttribute?nd:Ce;p=new y(m,f.itemSize,f.normalized)}f.name!==void 0&&(p.name=f.name),o.setAttribute(h,p)}let l=n.data.morphAttributes;if(l)for(let h in l){let f=l[h],p=[];for(let m=0,y=f.length;m<y;m++){let _=f[m],g;if(_.isInterleavedBufferAttribute){let v=i(n.data,_.data);g=new Cr(v,_.itemSize,_.offset,_.normalized)}else{let v=Ca(_.type,_.array);g=new Ce(v,_.itemSize,_.normalized)}_.name!==void 0&&(g.name=_.name),p.push(g)}o.morphAttributes[h]=p}n.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);let d=n.data.groups||n.data.drawcalls||n.data.offsets;if(d!==void 0)for(let h=0,f=d.length;h!==f;++h){let p=d[h];o.addGroup(p.start,p.count,p.materialIndex)}let u=n.data.boundingSphere;if(u!==void 0){let h=new P;u.center!==void 0&&h.fromArray(u.center),o.boundingSphere=new Qn(h,u.radius)}return n.name&&(o.name=n.name),n.userData&&(o.userData=n.userData),o}});var lp=class extends Ke{constructor(e){super(e)}load(e,t,i,r){let o=this,s=this.path===""?Gp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;let a=new Un(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}let d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(c,t)},i,r)}parse(e,t){let i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,o,l,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),t!==void 0){let u=!1;for(let h in s)if(s[h]instanceof HTMLImageElement){u=!0;break}u===!1&&t(c)}return c}parseShapes(e){let t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){let o=new vr().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){let i={},r={};if(t.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=new Ka().fromJSON(e[o],r);i[a.uuid]=a}return i}parseGeometries(e,t){let i={},r;if(e!==void 0){let o=new id;for(let s=0,a=e.length;s<a;s++){let l,c=e[s];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":l=new $t[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new $t[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new $t[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new $t[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new $t[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new $t[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new $t[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new $t[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new $t[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new $t[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"TubeGeometry":case"TubeBufferGeometry":l=new $t[c.type](new rp[c.path.type]().fromJSON(c.path),c.tubularSegments,c.radius,c.radialSegments,c.closed);break;case"LatheGeometry":case"LatheBufferGeometry":l=new $t[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new $t[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let u=0,h=c.shapes.length;u<h;u++){let f=t[c.shapes[u]];r.push(f)}l=new $t[c.type](r,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let u=0,h=c.shapes.length;u<h;u++){let f=t[c.shapes[u]];r.push(f)}let d=c.options.extrudePath;d!==void 0&&(c.options.extrudePath=new rp[d.type]().fromJSON(d)),l=new $t[c.type](r,c.options);break;case"BufferGeometry":case"InstancedBufferGeometry":l=o.parse(c);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),l.isBufferGeometry===!0&&c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){let i={},r={};if(e!==void 0){let o=new td;o.setTextures(t);for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l.type==="MultiMaterial"){let c=[];for(let d=0;d<l.materials.length;d++){let u=l.materials[d];i[u.uuid]===void 0&&(i[u.uuid]=o.parse(u)),c.push(i[u.uuid])}r[l.uuid]=c}else i[l.uuid]===void 0&&(i[l.uuid]=o.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){let t={};if(e!==void 0)for(let i=0;i<e.length;i++){let r=e[i],o=xn.parse(r);t[o.uuid]=o}return t}parseImages(e,t){let i=this,r={},o;function s(l){return i.manager.itemStart(l),o.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){let c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return s(d)}else return l.data?{data:Ca(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){let l=new Bp(t);o=new Ls(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){let u=e[c],h=u.url;if(Array.isArray(h)){r[u.uuid]=[];for(let f=0,p=h.length;f<p;f++){let m=h[f],y=a(m);y!==null&&(y instanceof HTMLImageElement?r[u.uuid].push(y):r[u.uuid].push(new Yi(y.data,y.width,y.height)))}}else{let f=a(u.url);f!==null&&(r[u.uuid]=f)}}}return r}parseTextures(e,t){function i(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}let r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let l,c=t[a.image];Array.isArray(c)?(l=new wi(c),c.length===6&&(l.needsUpdate=!0)):(c&&c.data?l=new Yi(c.data,c.width,c.height):l=new tt(c),c&&(l.needsUpdate=!0)),l.uuid=a.uuid,a.name!==void 0&&(l.name=a.name),a.mapping!==void 0&&(l.mapping=i(a.mapping,pP)),a.offset!==void 0&&l.offset.fromArray(a.offset),a.repeat!==void 0&&l.repeat.fromArray(a.repeat),a.center!==void 0&&l.center.fromArray(a.center),a.rotation!==void 0&&(l.rotation=a.rotation),a.wrap!==void 0&&(l.wrapS=i(a.wrap[0],y_),l.wrapT=i(a.wrap[1],y_)),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.encoding!==void 0&&(l.encoding=a.encoding),a.minFilter!==void 0&&(l.minFilter=i(a.minFilter,x_)),a.magFilter!==void 0&&(l.magFilter=i(a.magFilter,x_)),a.anisotropy!==void 0&&(l.anisotropy=a.anisotropy),a.flipY!==void 0&&(l.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(l.unpackAlignment=a.unpackAlignment),r[a.uuid]=l}return r}parseObject(e,t,i,r){let o;function s(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function a(d){if(d!==void 0){if(Array.isArray(d)){let u=[];for(let h=0,f=d.length;h<f;h++){let p=d[h];i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),u.push(i[p])}return u}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}let l,c;switch(e.type){case"Scene":o=new Ya,e.background!==void 0&&Number.isInteger(e.background)&&(o.background=new fe(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new xu(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new yu(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Tt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Is(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Ku(e.color,e.intensity);break;case"DirectionalLight":o=new $u(e.color,e.intensity);break;case"PointLight":o=new Ju(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Qu(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Zu(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Xu(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new kn().fromJSON(e);break;case"SkinnedMesh":l=s(e.geometry),c=a(e.material),o=new Ja(l,c),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":l=s(e.geometry),c=a(e.material),o=new ct(l,c);break;case"InstancedMesh":l=s(e.geometry),c=a(e.material);let d=e.count,u=e.instanceMatrix;o=new vu(l,c,d),o.instanceMatrix=new Ce(new Float32Array(u.array),16);break;case"LOD":o=new Za;break;case"Line":o=new zn(s(e.geometry),a(e.material));break;case"LineLoop":o=new bu(s(e.geometry),a(e.material));break;case"LineSegments":o=new tn(s(e.geometry),a(e.material));break;case"PointCloud":case"Points":o=new Ss(s(e.geometry),a(e.material));break;case"Sprite":o=new Xa(a(e.material));break;case"Group":o=new _r;break;case"Bone":o=new $a;break;default:o=new ye}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){let d=e.children;for(let u=0;u<d.length;u++)o.add(this.parseObject(d[u],t,i,r))}if(e.animations!==void 0){let d=e.animations;for(let u=0;u<d.length;u++){let h=d[u];o.animations.push(r[h])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);let d=e.levels;for(let u=0;u<d.length;u++){let h=d[u],f=o.getObjectByProperty("uuid",h.object);f!==void 0&&o.addLevel(f,h.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){let r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}},pP={UVMapping:pd,CubeReflectionMapping:Tl,CubeRefractionMapping:Ol,EquirectangularReflectionMapping:fu,EquirectangularRefractionMapping:pu,CubeUVReflectionMapping:Ds,CubeUVRefractionMapping:Al},y_={RepeatWrapping:Ia,ClampToEdgeWrapping:Kt,MirroredRepeatWrapping:ka},x_={NearestFilter:Rt,NearestMipmapNearestFilter:mu,NearestMipmapLinearFilter:gu,LinearFilter:Nt,LinearMipmapNearestFilter:Dp,LinearMipmapLinearFilter:Fs};function cp(n){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ke.call(this,n),this.options={premultiplyAlpha:"none"}}cp.prototype=Object.assign(Object.create(Ke.prototype),{constructor:cp,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(n,e,t,i){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);let r=this,o=Mo.get(n);if(o!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(o),r.manager.itemEnd(n)},0),o;let s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(n,s).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,r.options)}).then(function(a){Mo.add(n,a),e&&e(a),r.manager.itemEnd(n)}).catch(function(a){i&&i(a),r.manager.itemError(n),r.manager.itemEnd(n)}),r.manager.itemStart(n)}});function Hp(){this.type="ShapePath",this.color=new fe,this.subPaths=[],this.currentPath=null}Object.assign(Hp.prototype,{moveTo:function(n,e){return this.currentPath=new Kn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,e),this},lineTo:function(n,e){return this.currentPath.lineTo(n,e),this},quadraticCurveTo:function(n,e,t,i){return this.currentPath.quadraticCurveTo(n,e,t,i),this},bezierCurveTo:function(n,e,t,i,r,o){return this.currentPath.bezierCurveTo(n,e,t,i,r,o),this},splineThru:function(n){return this.currentPath.splineThru(n),this},toShapes:function(n,e){function t(_){let g=[];for(let v=0,b=_.length;v<b;v++){let M=_[v],x=new vr;x.curves=M.curves,g.push(x)}return g}function i(_,g){let v=g.length,b=!1;for(let M=v-1,x=0;x<v;M=x++){let C=g[M],A=g[x],L=A.x-C.x,H=A.y-C.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(C=g[x],L=-L,A=g[M],H=-H),_.y<C.y||_.y>A.y)continue;if(_.y===C.y){if(_.x===C.x)return!0}else{let z=H*(_.x-C.x)-L*(_.y-C.y);if(z===0)return!0;if(z<0)continue;b=!b}}else{if(_.y!==C.y)continue;if(A.x<=_.x&&_.x<=C.x||C.x<=_.x&&_.x<=A.x)return!0}}return b}let r=qi.isClockWise,o=this.subPaths;if(o.length===0)return[];if(e===!0)return t(o);let s,a,l,c=[];if(o.length===1)return a=o[0],l=new vr,l.curves=a.curves,c.push(l),c;let d=!r(o[0].getPoints());d=n?!d:d;let u=[],h=[],f=[],p=0,m;h[p]=void 0,f[p]=[];for(let _=0,g=o.length;_<g;_++)a=o[_],m=a.getPoints(),s=r(m),s=n?!s:s,s?(!d&&h[p]&&p++,h[p]={s:new vr,p:m},h[p].s.curves=a.curves,d&&p++,f[p]=[]):f[p].push({h:a,p:m[0]});if(!h[0])return t(o);if(h.length>1){let _=!1,g=[];for(let v=0,b=h.length;v<b;v++)u[v]=[];for(let v=0,b=h.length;v<b;v++){let M=f[v];for(let x=0;x<M.length;x++){let C=M[x],A=!0;for(let L=0;L<h.length;L++)i(C.p,h[L].p)&&(v!==L&&g.push({froms:v,tos:L,hole:x}),A?(A=!1,u[L].push(C)):_=!0);A&&u[v].push(C)}}g.length>0&&(_||(f=u))}let y;for(let _=0,g=h.length;_<g;_++){l=h[_].s,c.push(l),y=f[_];for(let v=0,b=y.length;v<b;v++)l.holes.push(y[v].h)}return c}});function Wp(n){this.type="Font",this.data=n}Object.assign(Wp.prototype,{isFont:!0,generateShapes:function(n,e=100){let t=[],i=mP(n,e,this.data);for(let r=0,o=i.length;r<o;r++)Array.prototype.push.apply(t,i[r].toShapes());return t}});function mP(n,e,t){let i=Array.from?Array.from(n):String(n).split(""),r=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,s=[],a=0,l=0;for(let c=0;c<i.length;c++){let d=i[c];if(d===`
`)a=0,l-=o;else{let u=gP(d,r,a,l,t);a+=u.offsetX,s.push(u.path)}}return s}function gP(n,e,t,i,r){let o=r.glyphs[n]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}let s=new Hp,a,l,c,d,u,h,f,p;if(o.o){let m=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let y=0,_=m.length;y<_;)switch(m[y++]){case"m":a=m[y++]*e+t,l=m[y++]*e+i,s.moveTo(a,l);break;case"l":a=m[y++]*e+t,l=m[y++]*e+i,s.lineTo(a,l);break;case"q":c=m[y++]*e+t,d=m[y++]*e+i,u=m[y++]*e+t,h=m[y++]*e+i,s.quadraticCurveTo(u,h,c,d);break;case"b":c=m[y++]*e+t,d=m[y++]*e+i,u=m[y++]*e+t,h=m[y++]*e+i,f=m[y++]*e+t,p=m[y++]*e+i,s.bezierCurveTo(u,h,f,p,c,d);break}}return{offsetX:o.ha*e,path:s}}function up(n){Ke.call(this,n)}up.prototype=Object.assign(Object.create(Ke.prototype),{constructor:up,load:function(n,e,t,i){let r=this,o=new Un(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials),o.load(n,function(s){let a;try{a=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(s.substring(65,s.length-2))}let l=r.parse(a);e&&e(l)},t,i)},parse:function(n){return new Wp(n)}});var tu,qp={getContext:function(){return tu===void 0&&(tu=new(window.AudioContext||window.webkitAudioContext)),tu},setContext:function(n){tu=n}};function rd(n){Ke.call(this,n)}rd.prototype=Object.assign(Object.create(Ke.prototype),{constructor:rd,load:function(n,e,t,i){let r=this,o=new Un(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(n,function(s){try{let a=s.slice(0);qp.getContext().decodeAudioData(a,function(c){e(c)})}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)}});function dp(n,e,t){kn.call(this,void 0,t);let i=new fe().set(n),r=new fe().set(e),o=new P(i.r,i.g,i.b),s=new P(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}dp.prototype=Object.assign(Object.create(kn.prototype),{constructor:dp,isHemisphereLightProbe:!0,copy:function(n){return kn.prototype.copy.call(this,n),this},toJSON:function(n){return kn.prototype.toJSON.call(this,n)}});function hp(n,e){kn.call(this,void 0,e);let t=new fe().set(n);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}hp.prototype=Object.assign(Object.create(kn.prototype),{constructor:hp,isAmbientLightProbe:!0,copy:function(n){return kn.prototype.copy.call(this,n),this},toJSON:function(n){return kn.prototype.toJSON.call(this,n)}});var v_=new Ue,b_=new Ue;function Nx(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Tt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Tt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Nx.prototype,{update:function(n){let e=this._cache;if(e.focus!==n.focus||e.fov!==n.fov||e.aspect!==n.aspect*this.aspect||e.near!==n.near||e.far!==n.far||e.zoom!==n.zoom||e.eyeSep!==this.eyeSep){e.focus=n.focus,e.fov=n.fov,e.aspect=n.aspect*this.aspect,e.near=n.near,e.far=n.far,e.zoom=n.zoom,e.eyeSep=this.eyeSep;let i=n.projectionMatrix.clone(),r=e.eyeSep/2,o=r*e.near/e.focus,s=e.near*Math.tan(Re.DEG2RAD*e.fov*.5)/e.zoom,a,l;b_.elements[12]=-r,v_.elements[12]=r,a=-s*e.aspect+o,l=s*e.aspect+o,i.elements[0]=2*e.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(i),a=-s*e.aspect-o,l=s*e.aspect-o,i.elements[0]=2*e.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(b_),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(v_)}});var od=class{constructor(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=M_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=M_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function M_(){return(typeof performance>"u"?Date:performance).now()}var Jr=new P,w_=new zt,_P=new P,$r=new P,fp=class extends ye{constructor(){super(),this.type="AudioListener",this.context=qp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new od}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Jr,w_,_P),$r.set(0,0,-1).applyQuaternion(w_),t.positionX){let r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Jr.x,r),t.positionY.linearRampToValueAtTime(Jr.y,r),t.positionZ.linearRampToValueAtTime(Jr.z,r),t.forwardX.linearRampToValueAtTime($r.x,r),t.forwardY.linearRampToValueAtTime($r.y,r),t.forwardZ.linearRampToValueAtTime($r.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Jr.x,Jr.y,Jr.z),t.setOrientation($r.x,$r.y,$r.z,i.x,i.y,i.z)}},Sl=class extends ye{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},Kr=new P,S_=new zt,yP=new P,Qr=new P,pp=class extends Sl{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Kr,S_,yP),Qr.set(0,0,1).applyQuaternion(S_);let t=this.panner;if(t.positionX){let i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Kr.x,i),t.positionY.linearRampToValueAtTime(Kr.y,i),t.positionZ.linearRampToValueAtTime(Kr.z,i),t.orientationX.linearRampToValueAtTime(Qr.x,i),t.orientationY.linearRampToValueAtTime(Qr.y,i),t.orientationZ.linearRampToValueAtTime(Qr.z,i)}else t.setPosition(Kr.x,Kr.y,Kr.z),t.setOrientation(Qr.x,Qr.y,Qr.z)}},sd=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}};function jp(n,e,t){this.binding=n,this.valueSize=t;let i,r,o;switch(e){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(jp.prototype,{accumulate:function(n,e){let t=this.buffer,i=this.valueSize,r=n*i+i,o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)t[r+s]=t[s];o=e}else{o+=e;let s=e/o;this._mixBufferRegion(t,r,0,s,i)}this.cumulativeWeight=o},accumulateAdditive:function(n){let e=this.buffer,t=this.valueSize,i=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,n,t),this.cumulativeWeightAdditive+=n},apply:function(n){let e=this.valueSize,t=this.buffer,i=n*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){let a=e*this._origIndex;this._mixBufferRegion(t,i,a,1-r,e)}o>0&&this._mixBufferRegionAdditive(t,i,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(t[a]!==t[a+e]){s.setValue(t,i);break}},saveOriginalState:function(){let n=this.binding,e=this.buffer,t=this.valueSize,i=t*this._origIndex;n.getValue(e,i);for(let r=t,o=i;r!==o;++r)e[r]=e[i+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){let n=this.valueSize*3;this.binding.setValue(this.buffer,n)},_setAdditiveIdentityNumeric:function(){let n=this._addIndex*this.valueSize,e=n+this.valueSize;for(let t=n;t<e;t++)this.buffer[t]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){let n=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[e+t]=this.buffer[n+t]},_select:function(n,e,t,i,r){if(i>=.5)for(let o=0;o!==r;++o)n[e+o]=n[t+o]},_slerp:function(n,e,t,i){zt.slerpFlat(n,e,n,e,n,t,i)},_slerpAdditive:function(n,e,t,i,r){let o=this._workIndex*r;zt.multiplyQuaternionsFlat(n,o,n,e,n,t),zt.slerpFlat(n,e,n,e,n,o,i)},_lerp:function(n,e,t,i,r){let o=1-i;for(let s=0;s!==r;++s){let a=e+s;n[a]=n[a]*o+n[t+s]*i}},_lerpAdditive:function(n,e,t,i,r){for(let o=0;o!==r;++o){let s=e+o;n[s]=n[s]+n[t+o]*i}}});var Yp="\\[\\]\\.:\\/",xP=new RegExp("["+Yp+"]","g"),Xp="[^"+Yp+"]",vP="[^"+Yp.replace("\\.","")+"]",bP=/((?:WC+[\/:])*)/.source.replace("WC",Xp),MP=/(WCOD+)?/.source.replace("WCOD",vP),wP=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xp),SP=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xp),CP=new RegExp("^"+bP+MP+wP+SP+"$"),PP=["material","materials","bones"];function zx(n,e,t){let i=t||Yt.parseTrackName(e);this._targetGroup=n,this._bindings=n.subscribe_(e,i)}Object.assign(zx.prototype,{getValue:function(n,e){this.bind();let t=this._targetGroup.nCachedObjects_,i=this._bindings[t];i!==void 0&&i.getValue(n,e)},setValue:function(n,e){let t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].setValue(n,e)},bind:function(){let n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].bind()},unbind:function(){let n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].unbind()}});function Yt(n,e,t){this.path=e,this.parsedPath=t||Yt.parseTrackName(e),this.node=Yt.findNode(n,this.parsedPath.nodeName)||n,this.rootNode=n}Object.assign(Yt,{Composite:zx,create:function(n,e,t){return n&&n.isAnimationObjectGroup?new Yt.Composite(n,e,t):new Yt(n,e,t)},sanitizeNodeName:function(n){return n.replace(/\s/g,"_").replace(xP,"")},parseTrackName:function(n){let e=CP.exec(n);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+n);let t={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=t.nodeName&&t.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let r=t.nodeName.substring(i+1);PP.indexOf(r)!==-1&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=r)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return t},findNode:function(n,e){if(!e||e===""||e==="."||e===-1||e===n.name||e===n.uuid)return n;if(n.skeleton){let t=n.skeleton.getBoneByName(e);if(t!==void 0)return t}if(n.children){let t=function(r){for(let o=0;o<r.length;o++){let s=r[o];if(s.name===e||s.uuid===e)return s;let a=t(s.children);if(a)return a}return null},i=t(n.children);if(i)return i}return null}});Object.assign(Yt.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){let i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)e[t++]=i[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){let i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[t++]},function(e,t){let i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){let i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let n=this.node,e=this.parsedPath,t=e.objectName,i=e.propertyName,r=e.propertyIndex;if(n||(n=Yt.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(t){let l=e.objectIndex;switch(t){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let c=0;c<n.length;c++)if(n[c].name===l){l=c;break}break;default:if(n[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[t]}if(l!==void 0){if(n[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[l]}}let o=n[i];if(o===void 0){let l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",n);return}let s=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(n.geometry.isBufferGeometry){if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[r]!==void 0&&(r=n.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(Yt.prototype,{_getValue_unbound:Yt.prototype.getValue,_setValue_unbound:Yt.prototype.setValue});function Ux(){this.uuid=Re.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let n={};this._indicesByUUID=n;for(let t=0,i=arguments.length;t!==i;++t)n[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(Ux.prototype,{isAnimationObjectGroup:!0,add:function(){let n=this._objects,e=this._indicesByUUID,t=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length,s,a=n.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){let u=arguments[c],h=u.uuid,f=e[h];if(f===void 0){f=a++,e[h]=f,n.push(u);for(let p=0,m=o;p!==m;++p)r[p].push(new Yt(u,t[p],i[p]))}else if(f<l){s=n[f];let p=--l,m=n[p];e[m.uuid]=f,n[f]=m,e[h]=p,n[p]=u;for(let y=0,_=o;y!==_;++y){let g=r[y],v=g[p],b=g[f];g[f]=v,b===void 0&&(b=new Yt(u,t[y],i[y])),g[p]=b}}else n[f]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){let n=this._objects,e=this._indicesByUUID,t=this._bindings,i=t.length,r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){let a=arguments[o],l=a.uuid,c=e[l];if(c!==void 0&&c>=r){let d=r++,u=n[d];e[u.uuid]=c,n[c]=u,e[l]=d,n[d]=a;for(let h=0,f=i;h!==f;++h){let p=t[h],m=p[d],y=p[c];p[c]=m,p[d]=y}}}this.nCachedObjects_=r},uncache:function(){let n=this._objects,e=this._indicesByUUID,t=this._bindings,i=t.length,r=this.nCachedObjects_,o=n.length;for(let s=0,a=arguments.length;s!==a;++s){let l=arguments[s],c=l.uuid,d=e[c];if(d!==void 0)if(delete e[c],d<r){let u=--r,h=n[u],f=--o,p=n[f];e[h.uuid]=d,n[d]=h,e[p.uuid]=u,n[u]=p,n.pop();for(let m=0,y=i;m!==y;++m){let _=t[m],g=_[u],v=_[f];_[d]=g,_[u]=v,_.pop()}}else{let u=--o,h=n[u];u>0&&(e[h.uuid]=d),n[d]=h,n.pop();for(let f=0,p=i;f!==p;++f){let m=t[f];m[d]=m[u],m.pop()}}}this.nCachedObjects_=r},subscribe_:function(n,e){let t=this._bindingsIndicesByPath,i=t[n],r=this._bindings;if(i!==void 0)return r[i];let o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,d=new Array(l);i=r.length,t[n]=i,o.push(n),s.push(e),r.push(d);for(let u=c,h=a.length;u!==h;++u){let f=a[u];d[u]=new Yt(f,n,e)}return d},unsubscribe_:function(n){let e=this._bindingsIndicesByPath,t=e[n];if(t!==void 0){let i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s],l=n[s];e[l]=t,o[t]=a,o.pop(),r[t]=r[s],r.pop(),i[t]=i[s],i.pop()}}});var mp=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;let o=t.tracks,s=o.length,a=new Array(s),l={endingStart:no,endingEnd:no};for(let c=0;c!==s;++c){let d=o[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cx,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+i,c[0]=e/s,c[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}let o=this._startTime;if(o!==null){let l=(e-o)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Fp:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulateAdditive(a);break;case md:default:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,r=this.time+e,o=this._loopCount,s=i===ux;if(e===0)return o===-1?r:s&&(o&1)===1?t-r:r;if(i===lx){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){let a=Math.floor(r/t);r-=t*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return t-r}return r}_setEndings(e,t,i){let r=this._interpolantSettings;i?(r.endingStart=io,r.endingEnd=io):(e?r.endingStart=this.zeroSlopeAtStart?io:no:r.endingStart=za,t?r.endingEnd=this.zeroSlopeAtEnd?io:no:r.endingEnd=za)}_scheduleFading(e,t,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=i,this}};function gp(n){this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}gp.prototype=Object.assign(Object.create(Ei.prototype),{constructor:gp,_bindAction:function(n,e){let t=n._localRoot||this._root,i=n._clip.tracks,r=i.length,o=n._propertyBindings,s=n._interpolants,a=t.uuid,l=this._bindingsByRootAndName,c=l[a];c===void 0&&(c={},l[a]=c);for(let d=0;d!==r;++d){let u=i[d],h=u.name,f=c[h];if(f!==void 0)o[d]=f;else{if(f=o[d],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,a,h));continue}let p=e&&e._propertyBindings[d].binding.parsedPath;f=new jp(Yt.create(t,h,p),u.ValueTypeName,u.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,h),o[d]=f}s[d].resultBuffer=f.buffer}},_activateAction:function(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){let t=(n._localRoot||this._root).uuid,i=n._clip.uuid,r=this._actionsByClip[i];this._bindAction(n,r&&r.knownActions[0]),this._addInactiveAction(n,i,t)}let e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){let r=e[t];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(n)}},_deactivateAction:function(n){if(this._isActiveAction(n)){let e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){let r=e[t];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(n)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}},_isActiveAction:function(n){let e=n._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(n,e,t){let i=this._actions,r=this._actionsByClip,o=r[e];if(o===void 0)o={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,r[e]=o;else{let s=o.knownActions;n._byClipCacheIndex=s.length,s.push(n)}n._cacheIndex=i.length,i.push(n),o.actionByRoot[t]=n},_removeInactiveAction:function(n){let e=this._actions,t=e[e.length-1],i=n._cacheIndex;t._cacheIndex=i,e[i]=t,e.pop(),n._cacheIndex=null;let r=n._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],c=n._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),n._byClipCacheIndex=null;let d=s.actionByRoot,u=(n._localRoot||this._root).uuid;delete d[u],a.length===0&&delete o[r],this._removeInactiveBindingsForAction(n)},_removeInactiveBindingsForAction:function(n){let e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){let r=e[t];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(n){let e=this._actions,t=n._cacheIndex,i=this._nActiveActions++,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_takeBackAction:function(n){let e=this._actions,t=n._cacheIndex,i=--this._nActiveActions,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_addInactiveBinding:function(n,e,t){let i=this._bindingsByRootAndName,r=this._bindings,o=i[e];o===void 0&&(o={},i[e]=o),o[t]=n,n._cacheIndex=r.length,r.push(n)},_removeInactiveBinding:function(n){let e=this._bindings,t=n.binding,i=t.rootNode.uuid,r=t.path,o=this._bindingsByRootAndName,s=o[i],a=e[e.length-1],l=n._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete s[r],Object.keys(s).length===0&&delete o[i]},_lendBinding:function(n){let e=this._bindings,t=n._cacheIndex,i=this._nActiveBindings++,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_takeBackBinding:function(n){let e=this._bindings,t=n._cacheIndex,i=--this._nActiveBindings,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_lendControlInterpolant:function(){let n=this._controlInterpolants,e=this._nActiveControlInterpolants++,t=n[e];return t===void 0&&(t=new bl(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),t.__cacheIndex=e,n[e]=t),t},_takeBackControlInterpolant:function(n){let e=this._controlInterpolants,t=n.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];n.__cacheIndex=i,e[i]=n,r.__cacheIndex=t,e[t]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(n,e,t){let i=e||this._root,r=i.uuid,o=typeof n=="string"?xn.findByName(i,n):n,s=o!==null?o.uuid:n,a=this._actionsByClip[s],l=null;if(t===void 0&&(o!==null?t=o.blendMode:t=md),a!==void 0){let d=a.actionByRoot[r];if(d!==void 0&&d.blendMode===t)return d;l=a.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;let c=new mp(this,o,e,t);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c},existingAction:function(n,e){let t=e||this._root,i=t.uuid,r=typeof n=="string"?xn.findByName(t,n):n,o=r?r.uuid:n,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null},stopAllAction:function(){let n=this._actions,e=this._nActiveActions;for(let t=e-1;t>=0;--t)n[t].stop();return this},update:function(n){n*=this.timeScale;let e=this._actions,t=this._nActiveActions,i=this.time+=n,r=Math.sign(n),o=this._accuIndex^=1;for(let l=0;l!==t;++l)e[l]._update(i,n,r,o);let s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this},setTime:function(n){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(n)},getRoot:function(){return this._root},uncacheClip:function(n){let e=this._actions,t=n.uuid,i=this._actionsByClip,r=i[t];if(r!==void 0){let o=r.knownActions;for(let s=0,a=o.length;s!==a;++s){let l=o[s];this._deactivateAction(l);let c=l._cacheIndex,d=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=c,e[c]=d,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[t]}},uncacheRoot:function(n){let e=n.uuid,t=this._actionsByClip;for(let o in t){let s=t[o].actionByRoot,a=s[e];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}let i=this._bindingsByRootAndName,r=i[e];if(r!==void 0)for(let o in r){let s=r[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(n,e){let t=this.existingAction(n,e);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}});var ad=class n{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}};function _p(n,e,t){vn.call(this,n,e),this.meshPerAttribute=t||1}_p.prototype=Object.assign(Object.create(vn.prototype),{constructor:_p,isInstancedInterleavedBuffer:!0,copy:function(n){return vn.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},clone:function(n){let e=vn.prototype.clone.call(this,n);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(n){let e=vn.prototype.toJSON.call(this,n);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function Zp(n,e,t,i,r){this.buffer=n,this.type=e,this.itemSize=t,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(Zp.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(Zp.prototype,{isGLBufferAttribute:!0,setBuffer:function(n){return this.buffer=n,this},setType:function(n,e){return this.type=n,this.elementSize=e,this},setItemSize:function(n){return this.itemSize=n,this},setCount:function(n){return this.count=n,this}});function Jp(n,e,t,i){this.ray=new Mr(n,e),this.near=t||0,this.far=i||1/0,this.camera=null,this.layers=new Ua,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function C_(n,e){return n.distance-e.distance}function yp(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){let r=n.children;for(let o=0,s=r.length;o<s;o++)yp(r[o],e,t,!0)}}Object.assign(Jp.prototype,{set:function(n,e){this.ray.set(n,e)},setFromCamera:function(n,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(n,e,t){let i=t||[];return yp(n,this,i,e),i.sort(C_),i},intersectObjects:function(n,e,t){let i=t||[];if(Array.isArray(n)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,o=n.length;r<o;r++)yp(n[r],this,i,e);return i.sort(C_),i}});var xp=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}clone(){return new this.constructor().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Re.clamp(t/this.radius,-1,1))),this}},vp=class{constructor(e,t,i){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=i!==void 0?i:0,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}clone(){return new this.constructor().copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}},P_=new $,ld=class{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new $(1/0,1/0),this.max=t!==void 0?t:new $(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=P_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new $),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new $),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new $),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new $),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return P_.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},E_=new P,nu=new P,cd=class{constructor(e,t){this.start=e!==void 0?e:new P,this.end=t!==void 0?t:new P}set(e,t){return this.start.copy(e),this.end.copy(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new P),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new P),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return t===void 0&&(console.warn("THREE.Line3: .at() target is now required"),t=new P),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){E_.subVectors(e,this.start),nu.subVectors(this.end,this.start);let i=nu.dot(nu),o=nu.dot(E_)/i;return t&&(o=Re.clamp(o,0,1)),o}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return i===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new P),this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}};function Cl(n){ye.call(this),this.material=n,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Cl.prototype=Object.create(ye.prototype);Cl.prototype.constructor=Cl;Cl.prototype.isImmediateRenderObject=!0;var T_=new P,bp=class extends ye{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let i=new Se,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){let c=s/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new ce(r,3));let o=new ht({fog:!1,toneMapped:!1});this.cone=new tn(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),T_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(T_),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},gr=new P,iu=new Ue,Ef=new Ue,ud=class extends tn{constructor(e){let t=Bx(e),i=new Se,r=[],o=[],s=new fe(0,0,1),a=new fe(0,1,0);for(let c=0;c<t.length;c++){let d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}i.setAttribute("position",new ce(r,3)),i.setAttribute("color",new ce(o,3));let l=new ht({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,i=this.geometry,r=i.getAttribute("position");Ef.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){let a=t[o];a.parent&&a.parent.isBone&&(iu.multiplyMatrices(Ef,a.matrixWorld),gr.setFromMatrixPosition(iu),r.setXYZ(s,gr.x,gr.y,gr.z),iu.multiplyMatrices(Ef,a.parent.matrixWorld),gr.setFromMatrixPosition(iu),r.setXYZ(s+1,gr.x,gr.y,gr.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}};function Bx(n){let e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Bx(n.children[t]));return e}var Mp=class extends ct{constructor(e,t,i){let r=new Ts(t,4,2),o=new Fn({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},EP=new P,O_=new fe,A_=new fe,wp=class extends ye{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;let r=new Ps(t);r.rotateY(Math.PI*.5),this.material=new Fn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new Ce(s,3)),this.add(new ct(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");O_.copy(this.light.color),A_.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){let o=i<r/2?O_:A_;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(EP.setFromMatrixPosition(this.light.matrixWorld).negate())}},dd=class extends tn{constructor(e=10,t=10,i=4473924,r=8947848){i=new fe(i),r=new fe(r);let o=t/2,s=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=t;h++,p+=s){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);let m=h===o?i:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}let d=new Se;d.setAttribute("position",new ce(l,3)),d.setAttribute("color",new ce(c,3));let u=new ht({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}},Sp=class extends tn{constructor(e=10,t=16,i=8,r=64,o=4473924,s=8947848){o=new fe(o),s=new fe(s);let a=[],l=[];for(let u=0;u<=t;u++){let h=u/t*(Math.PI*2),f=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,p);let m=u&1?o:s;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let u=0;u<=i;u++){let h=u&1?o:s,f=e-e/i*u;for(let p=0;p<r;p++){let m=p/r*(Math.PI*2),y=Math.sin(m)*f,_=Math.cos(m)*f;a.push(y,0,_),l.push(h.r,h.g,h.b),m=(p+1)/r*(Math.PI*2),y=Math.sin(m)*f,_=Math.cos(m)*f,a.push(y,0,_),l.push(h.r,h.g,h.b)}}let c=new Se;c.setAttribute("position",new ce(a,3)),c.setAttribute("color",new ce(l,3));let d=new ht({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}},L_=new P,ru=new P,R_=new P,Cp=class extends ye{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new Se;r.setAttribute("position",new ce([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let o=new ht({fog:!1,toneMapped:!1});this.lightPlane=new zn(r,o),this.add(this.lightPlane),r=new Se,r.setAttribute("position",new ce([0,0,0,0,0,1],3)),this.targetLine=new zn(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){L_.setFromMatrixPosition(this.light.matrixWorld),ru.setFromMatrixPosition(this.light.target.matrixWorld),R_.subVectors(ru,L_),this.lightPlane.lookAt(ru),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ru),this.targetLine.scale.z=R_.length()}},ou=new P,xt=new Mi,Pp=class extends tn{constructor(e){let t=new Se,i=new ht({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={},a=new fe(16755200),l=new fe(16711680),c=new fe(43775),d=new fe(16777215),u=new fe(3355443);h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",l),h("p","n2",l),h("p","n3",l),h("p","n4",l),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",d),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u);function h(p,m,y){f(p,y),f(m,y)}function f(p,m){r.push(0,0,0),o.push(m.r,m.g,m.b),s[p]===void 0&&(s[p]=[]),s[p].push(r.length/3-1)}t.setAttribute("position",new ce(r,3)),t.setAttribute("color",new ce(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;xt.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ct("c",t,e,xt,0,0,-1),Ct("t",t,e,xt,0,0,1),Ct("n1",t,e,xt,-i,-r,-1),Ct("n2",t,e,xt,i,-r,-1),Ct("n3",t,e,xt,-i,r,-1),Ct("n4",t,e,xt,i,r,-1),Ct("f1",t,e,xt,-i,-r,1),Ct("f2",t,e,xt,i,-r,1),Ct("f3",t,e,xt,-i,r,1),Ct("f4",t,e,xt,i,r,1),Ct("u1",t,e,xt,i*.7,r*1.1,-1),Ct("u2",t,e,xt,-i*.7,r*1.1,-1),Ct("u3",t,e,xt,0,r*2,-1),Ct("cf1",t,e,xt,-i,0,1),Ct("cf2",t,e,xt,i,0,1),Ct("cf3",t,e,xt,0,-r,1),Ct("cf4",t,e,xt,0,r,1),Ct("cn1",t,e,xt,-i,0,-1),Ct("cn2",t,e,xt,i,0,-1),Ct("cn3",t,e,xt,0,-r,-1),Ct("cn4",t,e,xt,0,r,-1),e.getAttribute("position").needsUpdate=!0}};function Ct(n,e,t,i,r,o,s){ou.set(r,o,s).unproject(i);let a=e[n];if(a!==void 0){let l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],ou.x,ou.y,ou.z)}}var su=new Dn,hd=class extends tn{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new Se;o.setIndex(new Ce(i,1)),o.setAttribute("position",new Ce(r,3)),super(o,new ht({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&su.setFromObject(this.object),su.isEmpty())return;let t=su.min,i=su.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return tn.prototype.copy.call(this,e),this.object=e.object,this}},Ep=class extends tn{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Se;o.setIndex(new Ce(i,1)),o.setAttribute("position",new ce(r,3)),super(o,new ht({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},Tp=class extends zn{constructor(e,t=1,i=16776960){let r=i,o=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],s=new Se;s.setAttribute("position",new ce(o,3)),s.computeBoundingSphere(),super(s,new ht({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],l=new Se;l.setAttribute("position",new ce(a,3)),l.computeBoundingSphere(),this.add(new ct(l,new Fn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Lt:ks,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}},I_=new P,au,Tf,Op=class extends ye{constructor(e,t,i,r,o,s){super(),this.type="ArrowHelper",e===void 0&&(e=new P(0,0,1)),t===void 0&&(t=new P(0,0,0)),i===void 0&&(i=1),r===void 0&&(r=16776960),o===void 0&&(o=.2*i),s===void 0&&(s=.2*o),au===void 0&&(au=new Se,au.setAttribute("position",new ce([0,0,0,0,1,0],3)),Tf=new po(0,.5,1,5,1),Tf.translate(0,-.5,0)),this.position.copy(t),this.line=new zn(au,new ht({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ct(Tf,new Fn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{I_.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(I_,t)}}setLength(e,t,i){t===void 0&&(t=.2*e),i===void 0&&(i=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},fd=class extends tn{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Se;r.setAttribute("position",new ce(t,3)),r.setAttribute("color",new ce(i,3));let o=new ht({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}},Vx=new Float32Array(1),TP=new Int32Array(Vx.buffer),OP={toHalfFloat:function(n){Vx[0]=n;let e=TP[0],t=e>>16&32768,i=e>>12&2047,r=e>>23&255;return r<103?t:r>142?(t|=31744,t|=(r==255?0:1)&&e&8388607,t):r<113?(i|=2048,t|=(i>>114-r)+(i>>113-r&1),t):(t|=r-112<<10|i>>1,t+=i&1,t)}},ys=4,br=8,vi=Math.pow(2,br),Gx=[.125,.215,.35,.446,.526,.582],Hx=br-ys+1+Gx.length,cs=20,bi={[Qt]:0,[Ll]:1,[_d]:2,[Np]:3,[zp]:4,[Up]:5,[gd]:6},Of=new Is,{_lodPlanes:Sa,_sizeLods:k_,_sigmas:lu}=LP(),D_=new fe,Af=null,eo=(1+Math.sqrt(5))/2,us=1/eo,F_=[new P(1,1,1),new P(-1,1,1),new P(1,1,-1),new P(-1,1,-1),new P(0,eo,us),new P(0,eo,-us),new P(us,0,eo),new P(-us,0,eo),new P(eo,us,0),new P(-eo,us,0)],Ap=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=RP(cs),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Af=this._renderer.getRenderTarget();let o=this._allocateTargets();return this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=U_(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=z_(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<Sa.length;e++)Sa[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Af),e.scissorTest=!1,cu(e,0,0,e.width,e.height)}_fromTexture(e){Af=this._renderer.getRenderTarget();let t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){let t={magFilter:Rt,minFilter:Rt,generateMipmaps:!1,type:Ns,format:Cy,encoding:AP(e)?e.encoding:_d,depthBuffer:!1},i=N_(t);return i.depthBuffer=!e,this._pingPongRenderTarget=N_(t),i}_compileMaterial(e){let t=new ct(Sa[0],e);this._renderer.compile(t,Of)}_sceneToCubeUV(e,t,i,r){let a=new Tt(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.outputEncoding,h=d.toneMapping;d.getClearColor(D_);let f=d.getClearAlpha();d.toneMapping=ro,d.outputEncoding=Qt;let p=e.background;if(p&&p.isColor){p.convertSRGBToLinear();let m=Math.max(p.r,p.g,p.b),y=Math.min(Math.max(Math.ceil(Math.log2(m)),-128),127);p=p.multiplyScalar(Math.pow(2,-y));let _=(y+128)/255;d.setClearColor(p,_),e.background=null}for(let m=0;m<6;m++){let y=m%3;y==0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):y==1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m])),cu(r,y*vi,m>2?vi:0,vi,vi),d.setRenderTarget(r),d.render(e,a)}d.toneMapping=h,d.outputEncoding=u,d.setClearColor(D_,f)}_textureToCubeUV(e,t){let i=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=U_()):this._equirectShader==null&&(this._equirectShader=z_());let r=e.isCubeTexture?this._cubemapShader:this._equirectShader,o=new ct(Sa[0],r),s=r.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),s.inputEncoding.value=bi[e.encoding],s.outputEncoding.value=bi[t.texture.encoding],cu(t,0,0,3*vi,2*vi),i.setRenderTarget(t),i.render(o,Of)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<Hx;r++){let o=Math.sqrt(lu[r]*lu[r]-lu[r-1]*lu[r-1]),s=F_[(r-1)%F_.length];this._blur(e,r-1,r,o,s)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,u=new ct(Sa[r],c),h=c.uniforms,f=k_[i]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*cs-1),m=o/p,y=isFinite(o)?1+Math.floor(d*m):cs;y>cs&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${cs}`);let _=[],g=0;for(let x=0;x<cs;++x){let C=x/m,A=Math.exp(-C*C/2);_.push(A),x==0?g+=A:x<y&&(g+=2*A)}for(let x=0;x<_.length;x++)_[x]=_[x]/g;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=_,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a),h.dTheta.value=p,h.mipInt.value=br-i,h.inputEncoding.value=bi[e.texture.encoding],h.outputEncoding.value=bi[e.texture.encoding];let v=k_[r],b=3*Math.max(0,vi-2*v),M=(r===0?0:2*vi)+2*v*(r>br-ys?r-br+ys:0);cu(t,b,M,3*v,2*v),l.setRenderTarget(t),l.render(u,Of)}};function AP(n){return n===void 0||n.type!==Ns?!1:n.encoding===Qt||n.encoding===Ll||n.encoding===gd}function LP(){let n=[],e=[],t=[],i=br;for(let r=0;r<Hx;r++){let o=Math.pow(2,i);e.push(o);let s=1/o;r>br-ys?s=Gx[r-br+ys-1]:r==0&&(s=0),t.push(s);let a=1/(o-1),l=-a/2,c=1+a/2,d=[l,l,c,l,c,c,l,l,c,c,l,c],u=6,h=6,f=3,p=2,m=1,y=new Float32Array(f*h*u),_=new Float32Array(p*h*u),g=new Float32Array(m*h*u);for(let b=0;b<u;b++){let M=b%3*2/3-1,x=b>2?0:-1,C=[M,x,0,M+2/3,x,0,M+2/3,x+1,0,M,x,0,M+2/3,x+1,0,M,x+1,0];y.set(C,f*h*b),_.set(d,p*h*b);let A=[b,b,b,b,b,b];g.set(A,m*h*b)}let v=new Se;v.setAttribute("position",new Ce(y,f)),v.setAttribute("uv",new Ce(_,p)),v.setAttribute("faceIndex",new Ce(g,m)),n.push(v),i>ys&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function N_(n){let e=new Mn(3*vi,3*vi,n);return e.texture.mapping=Ds,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function cu(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function RP(n){let e=new Float32Array(n),t=new P(0,1,0);return new Zi({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:bi[Qt]},outputEncoding:{value:bi[Qt]}},vertexShader:$p(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Kp()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Wi,depthTest:!1,depthWrite:!1})}function z_(){let n=new $(1,1);return new Zi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:bi[Qt]},outputEncoding:{value:bi[Qt]}},vertexShader:$p(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Kp()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Wi,depthTest:!1,depthWrite:!1})}function U_(){return new Zi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:bi[Qt]},outputEncoding:{value:bi[Qt]}},vertexShader:$p(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Kp()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Wi,depthTest:!1,depthWrite:!1})}function $p(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Kp(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function IP(n,e,t,i,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ao(n,e,t,r,o,s)}var kP=0,DP=1,FP=0,NP=1,zP=2;function UP(n){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),n}function BP(n=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),n.isMultiMaterial=!0,n.materials=n,n.clone=function(){return n.slice()},n}function VP(n,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ss(n,e)}function GP(n){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Xa(n)}function HP(n,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ss(n,e)}function WP(n){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ei(n)}function qP(n){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ei(n)}function jP(n){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ei(n)}function YP(n,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new P(n,e,t)}function XP(n,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ce(n,e).setUsage(so)}function ZP(n,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ba(n,e)}function JP(n,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Va(n,e)}function $P(n,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ga(n,e)}function KP(n,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ha(n,e)}function QP(n,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new lo(n,e)}function eE(n,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Wa(n,e)}function tE(n,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new co(n,e)}function nE(n,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ce(n,e)}function iE(n,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new ja(n,e)}Me.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Me.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Object.assign(Hi.prototype,{createPointsGeometry:function(n){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");let e=this.getPoints(n);return this.createGeometry(e)},createSpacedPointsGeometry:function(n){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");let e=this.getSpacedPoints(n);return this.createGeometry(e)},createGeometry:function(n){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");let e=new et;for(let t=0,i=n.length;t<i;t++){let r=n[t];e.vertices.push(new P(r.x,r.y,r.z||0))}return e}});Object.assign(Kn.prototype,{fromPoints:function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)}});function Wx(n){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xt.call(this,n),this.type="catmullrom",this.closed=!0}Wx.prototype=Object.create(Xt.prototype);function qx(n){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xt.call(this,n),this.type="catmullrom"}qx.prototype=Object.create(Xt.prototype);function Qp(n){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Xt.call(this,n),this.type="catmullrom"}Qp.prototype=Object.create(Xt.prototype);Object.assign(Qp.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function rE(n){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fd(n)}function oE(n,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new hd(n,e)}function sE(n,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new tn(new rl(n.geometry),new ht({color:e!==void 0?e:16777215}))}dd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};ud.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function aE(n,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new tn(new vl(n.geometry),new ht({color:e!==void 0?e:16777215}))}Object.assign(Ke.prototype,{extractUrlBase:function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Gp.extractUrlBase(n)}});Ke.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function lE(n){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Un(n)}function cE(n){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ju(n)}Object.assign(ld.prototype,{center:function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},size:function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)}});Object.assign(Dn.prototype,{center:function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},isIntersectionSphere:function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},size:function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)}});Object.assign(Qn.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});fo.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};cd.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Object.assign(Re,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(n){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Re.floorPowerOfTwo(n)},nextPowerOfTwo:function(n){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Re.ceilPowerOfTwo(n)}});Object.assign(Bt.prototype,{flattenToArrayOffset:function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},multiplyVector3:function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()}});Object.assign(Ue.prototype,{extractPosition:function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},flattenToArrayOffset:function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new P().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},multiplyVector4:function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},crossVector:function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(n,e,t,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,o)},getInverse:function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()}});In.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Object.assign(zt.prototype,{multiplyVector3:function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}});Object.assign(Mr.prototype,{isIntersectionBox:function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},isIntersectionPlane:function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},isIntersectionSphere:function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)}});Object.assign(wn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},midpoint:function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},normal:function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},plane:function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)}});Object.assign(wn,{barycoordFromPoint:function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),wn.getBarycoord(n,e,t,i,r)},normal:function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),wn.getNormal(n,e,t,i)}});Object.assign(vr.prototype,{extractAllPoints:function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},extrude:function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ll(this,n)},makeGeometry:function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new pl(this,n)}});Object.assign($.prototype,{fromAttribute:function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},distanceToManhattan:function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(P.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},getScaleFromMatrix:function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},getColumnFromMatrix:function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},applyProjection:function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},fromAttribute:function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},distanceToManhattan:function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign($e.prototype,{fromAttribute:function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(et.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(n){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.assign(ye.prototype,{getChildByName:function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.defineProperties(ye.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(ct.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(ct.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),dx},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Za.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Ka.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Ja.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Me.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(n){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=n}});Tt.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(at.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(Ce.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===so},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(so)}}});Object.assign(Ce.prototype,{setDynamic:function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?so:Rl),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Se.prototype,{addIndex:function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},addAttribute:function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Ce(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)},addDrawCall:function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},applyMatrix:function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.defineProperties(Se.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(wl.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(n){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=n}}});Object.defineProperties(Jp.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(n){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=n}}});Object.defineProperties(vn.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===so},set:function(n){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(n)}}});Object.assign(vn.prototype,{setDynamic:function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?so:Rl),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(mo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(Ya.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(ad.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Oe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new fe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Rp}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}}});Object.defineProperties(Or.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Tr.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(n){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=n}}});Object.defineProperties(en.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Object.assign(Il.prototype,{clearTarget:function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},animate:function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Il.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Ll:Qt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Ox.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function uE(n,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new ji(n,t)}Object.defineProperties(Mn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});Object.defineProperties(Sl.prototype,{load:{value:function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");let e=this;return new rd().load(n,function(i){e.setBuffer(i)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});sd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};ho.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};ho.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};var dE={merge:function(n,e,t){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");let i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),n.merge(e,i,t)},center:function(n){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),n.center()}};So.crossOrigin=void 0;So.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");let r=new Yu;r.setCrossOrigin(this.crossOrigin);let o=r.load(n,t,void 0,i);return e&&(o.mapping=e),o};So.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");let r=new qu;r.setCrossOrigin(this.crossOrigin);let o=r.load(n,t,void 0,i);return e&&(o.mapping=e),o};So.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};So.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function hE(){console.error("THREE.CanvasRenderer has been removed")}function fE(){console.error("THREE.JSONLoader has been removed.")}var pE={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function mE(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:B_}}));function gE(n,e){n&1&&(S(0,"div",83),k(1,"i",84),w())}function _E(n,e){n&1&&(S(0,"div",85),O(1," Name is required. "),w())}function yE(n,e){n&1&&(S(0,"div",83),k(1,"i",84),w())}function xE(n,e){n&1&&(S(0,"span"),O(1,"Age is required."),w())}function vE(n,e){n&1&&(S(0,"span"),O(1,"Age must be at least 1."),w())}function bE(n,e){if(n&1&&(S(0,"div",85),ae(1,xE,2,0,"span",86)(2,vE,2,0,"span",86),w()),n&2){let t,i,r=me();N(),W("ngIf",(t=r.signupForm.get("age"))==null||t.errors==null?null:t.errors.required),N(),W("ngIf",(i=r.signupForm.get("age"))==null||i.errors==null?null:i.errors.min)}}function ME(n,e){n&1&&(S(0,"div",83),k(1,"i",84),w())}function wE(n,e){n&1&&(S(0,"span"),O(1,"Phone is required."),w())}function SE(n,e){n&1&&(S(0,"span"),O(1,"Phone must be 10-15 digits."),w())}function CE(n,e){if(n&1&&(S(0,"div",85),ae(1,wE,2,0,"span",86)(2,SE,2,0,"span",86),w()),n&2){let t,i,r=me();N(),W("ngIf",(t=r.signupForm.get("phone"))==null||t.errors==null?null:t.errors.required),N(),W("ngIf",(i=r.signupForm.get("phone"))==null||i.errors==null?null:i.errors.pattern)}}function PE(n,e){n&1&&k(0,"span",87)}function EE(n,e){n&1&&k(0,"i",88)}function TE(n,e){n&1&&k(0,"i",21)}function OE(n,e){n&1&&(S(0,"span"),O(1,"Email is required."),w())}function AE(n,e){n&1&&(S(0,"span"),O(1,"Invalid email format."),w())}function LE(n,e){if(n&1&&(S(0,"div",85),ae(1,OE,2,0,"span",86)(2,AE,2,0,"span",86),w()),n&2){let t,i,r=me();N(),W("ngIf",(t=r.signupForm.get("email"))==null||t.errors==null?null:t.errors.required),N(),W("ngIf",(i=r.signupForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function RE(n,e){if(n&1&&(S(0,"div",89),k(1,"i",90),O(2),w()),n&2){let t=me();N(2),Je("",t.otpSentMessage," ")}}function IE(n,e){if(n&1&&(S(0,"div",89),k(1,"i",21),O(2),w()),n&2){let t=me();N(2),Je("",t.otpVerifiedMessage," ")}}function kE(n,e){n&1&&k(0,"span",87)}function DE(n,e){n&1&&k(0,"i",97)}function FE(n,e){if(n&1&&(S(0,"div",98),k(1,"i",99),O(2),w()),n&2){let t=me(2);N(2),Je("",t.otpError," ")}}function NE(n,e){if(n&1){let t=ut();S(0,"div",25)(1,"label",91),O(2,"Enter OTP sent to your email"),w(),S(3,"div",27),k(4,"i",92)(5,"input",93),S(6,"button",94),Ae("click",function(){We(t);let r=me();return qe(r.validateOtp())}),ae(7,kE,1,0,"span",48)(8,DE,1,0,"i",95),O(9," Validate OTP "),w()(),ae(10,FE,3,1,"div",96),w()}if(n&2){let t=me();N(6),W("disabled",t.loadingOtp),N(),W("ngIf",t.loadingOtp),N(),W("ngIf",!t.loadingOtp),N(2),W("ngIf",t.otpError)}}function zE(n,e){if(n&1&&(S(0,"div",100)(1,"div",101),k(2,"div",102),w(),S(3,"small"),O(4),w()()),n&2){let t=me();N(2),pg(t.passwordStrengthClass),N(2),Wn(t.passwordStrengthText)}}function UE(n,e){n&1&&(S(0,"div",85),O(1," Password is required. "),w())}function BE(n,e){n&1&&(S(0,"div",85),O(1," Street is required. "),w())}function VE(n,e){n&1&&(S(0,"div",85),O(1," City is required. "),w())}function GE(n,e){n&1&&(S(0,"div",85),O(1," State is required. "),w())}function HE(n,e){n&1&&(S(0,"div",85),O(1," Zip Code is required. "),w())}function WE(n,e){n&1&&(S(0,"div",85),O(1," Country is required. "),w())}function qE(n,e){if(n&1){let t=ut();S(0,"button",103),Ae("click",function(){We(t);let r=me();return qe(r.previousStep())}),k(1,"i",104),O(2,"Previous "),w()}}function jE(n,e){if(n&1){let t=ut();S(0,"button",105),Ae("click",function(){We(t);let r=me();return qe(r.nextStep())}),O(1," Next"),k(2,"i",106),w()}}function YE(n,e){n&1&&k(0,"span",87)}function XE(n,e){n&1&&k(0,"i",11)}function ZE(n,e){if(n&1&&(S(0,"button",107),ae(1,YE,1,0,"span",48)(2,XE,1,0,"i",108),O(3," Register "),w()),n&2){let t=me();W("disabled",t.loadingRegister||!t.otpVerified||t.formStep<3),N(),W("ngIf",t.loadingRegister),N(),W("ngIf",!t.loadingRegister)}}var xd=class n{constructor(e,t,i,r){this.fb=e;this.http=t;this.cdr=i;this.router=r;this.signupForm=this.fb.group({name:["",ze.required],age:["",[ze.required,ze.min(1)]],gender:["MALE",ze.required],phone:["",[ze.required,ze.pattern(/^\d{10,15}$/)]],email:["",[ze.required,ze.email]],otp:[""],password:["",ze.required],street:["",ze.required],city:["",ze.required],state:["",ze.required],zipCode:["",ze.required],country:["",ze.required]}),this.signupForm.get("password")?.valueChanges.subscribe(o=>{this.updatePasswordStrength(o)})}signupForm;otpSent=!1;otpVerified=!1;otpError="";otpSentMessage="";otpVerifiedMessage="";currentYear=new Date().getFullYear();loadingVerify=!1;loadingOtp=!1;loadingRegister=!1;formStep=1;showPassword=!1;passwordStrengthClass="";passwordStrengthText="";vantaEffect;ngAfterViewInit(){this.vantaEffect=(0,Yx.default)({el:"#vanta-bg-signup",THREE:em,highlightColor:16777215,midtoneColor:1668818,lowlightColor:0,baseColor:1668818,blurFactor:.5,speed:1.5,zoom:1})}ngOnDestroy(){this.vantaEffect&&this.vantaEffect.destroy()}nextStep(){this.canProceedToNextStep()&&(this.formStep++,this.cdr.detectChanges())}previousStep(){this.formStep>1&&(this.formStep--,this.cdr.detectChanges())}canProceedToNextStep(){switch(this.formStep){case 1:return!!(this.signupForm.get("name")?.valid&&this.signupForm.get("age")?.valid&&this.signupForm.get("phone")?.valid);case 2:return this.otpVerified;default:return!1}}togglePasswordVisibility(){this.showPassword=!this.showPassword;let e=document.getElementById("password");e&&(e.type=this.showPassword?"text":"password")}updatePasswordStrength(e){if(!e){this.passwordStrengthClass="",this.passwordStrengthText="";return}let t=0,i=[];switch(e.length>=8?t++:i.push("At least 8 characters"),/[a-z]/.test(e)?t++:i.push("Lowercase letter"),/[A-Z]/.test(e)?t++:i.push("Uppercase letter"),/[0-9]/.test(e)?t++:i.push("Number"),/[^A-Za-z0-9]/.test(e)?t++:i.push("Special character"),t){case 0:case 1:this.passwordStrengthClass="strength-weak",this.passwordStrengthText="Very Weak";break;case 2:this.passwordStrengthClass="strength-weak",this.passwordStrengthText="Weak";break;case 3:this.passwordStrengthClass="strength-medium",this.passwordStrengthText="Medium";break;case 4:this.passwordStrengthClass="strength-strong",this.passwordStrengthText="Strong";break;case 5:this.passwordStrengthClass="strength-very-strong",this.passwordStrengthText="Very Strong";break}}verifyEmail(){let e=this.signupForm.get("email")?.value;e&&(this.loadingVerify=!0,this.otpSentMessage="",this.http.post("http://localhost:8081/api/users/request-otp",{email:e}).subscribe({next:t=>{console.log("OTP request success:",t),this.otpSent=!0,this.loadingVerify=!1,this.otpSentMessage="OTP sent to the given email id.",this.cdr.detectChanges()},error:t=>{console.log("OTP request error:",t),this.loadingVerify=!1,this.otpSentMessage="Failed to send OTP: "+(t?.error?.message||"Unknown error"),this.cdr.detectChanges()}}))}validateOtp(){let e=this.signupForm.get("email")?.value,t=this.signupForm.get("otp")?.value;!t||!e||(this.loadingOtp=!0,this.http.post("http://localhost:8081/api/users/verify-otp",{email:e,otp:t}).subscribe({next:()=>{this.otpVerified=!0,this.otpError="",this.loadingOtp=!1,this.otpVerifiedMessage="Email verified successfully.",this.cdr.detectChanges(),setTimeout(()=>{this.otpSent=!1,this.otpVerifiedMessage="",this.cdr.detectChanges()},2e3)},error:i=>{this.loadingOtp=!1,this.otpError=i?.error?.message||"Invalid OTP. Please try again.",this.cdr.detectChanges()}}))}onSubmit(){if(this.signupForm.invalid||!this.otpVerified){this.signupForm.markAllAsTouched();return}let e=si({},this.signupForm.value);delete e.otp,e.timestamp=new Date().toISOString(),this.loadingRegister=!0,this.http.post("http://localhost:8081/api/users/register",e).subscribe({next:()=>{this.loadingRegister=!1,this.otpSentMessage="",alert("Registration successful!"),this.signupForm.reset(),this.otpSent=!1,this.otpVerified=!1},error:t=>{this.loadingRegister=!1,alert("Registration failed: "+(t?.error?.message||"Unknown error"))}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(Qe(fi),Qe(Bo),Qe(zo),Qe(ir))};static \u0275cmp=At({type:n,selectors:[["app-sign-up"]],decls:153,vars:53,consts:[[1,"navbar-wrapper"],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","rounded-pill","px-4","py-2","d-flex","align-items-center","justify-content-between"],["href","#",1,"navbar-brand","fw-bold","fs-3","text-primary"],[1,"logo-icon","me-2"],[1,"auth-buttons","d-flex","gap-3","align-items-center"],[1,"btn","btn-primary","rounded-pill","px-4","py-2","fw-bold","shadow-sm"],[1,"component-container"],[1,"component-content"],[1,"signup-form-wrapper"],[1,"signup-content"],[1,"signup-header"],[1,"bi","bi-person-plus"],[1,"form-progress"],[1,"progress-step"],[1,"timeline-icon","step1"],[1,"bi","bi-person"],[1,"step-label"],[1,"progress-line"],[1,"timeline-icon","step2"],[1,"bi","bi-shield-check"],[1,"timeline-icon","step3"],[1,"bi","bi-check-circle"],["autocomplete","off",1,"signup-form",3,"ngSubmit","formGroup"],[1,"form-step"],[1,"form-grid"],[1,"form-field"],["for","name"],[1,"input-wrapper"],[1,"bi","bi-person","input-icon"],["id","name","type","text","formControlName","name","placeholder","Enter your name",1,"component-input"],["class","input-validation",4,"ngIf"],["class","form-error",4,"ngIf"],["for","age"],[1,"bi","bi-123","input-icon"],["id","age","type","number","formControlName","age","placeholder","Enter your age",1,"component-input"],["for","gender"],[1,"bi","bi-gender-ambiguous","input-icon"],["id","gender","formControlName","gender",1,"component-input"],["value","MALE"],["value","FEMALE"],["value","OTHER"],["for","phone"],[1,"bi","bi-telephone","input-icon"],["id","phone","type","text","formControlName","phone","placeholder","Enter your phone number",1,"component-input"],["for","email"],[1,"bi","bi-envelope","input-icon"],["id","email","type","email","formControlName","email","placeholder","Enter your email",1,"component-input",3,"readonly"],["type","button",1,"component-button-primary","verify-btn",3,"click","disabled"],["class","loading-spinner",4,"ngIf"],["class","bi bi-send",4,"ngIf"],["class","bi bi-check-circle",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","form-field",4,"ngIf"],["for","password"],[1,"bi","bi-lock","input-icon"],["id","password","formControlName","password","placeholder","Create a password",1,"component-input",3,"type"],["type","button",1,"password-toggle",3,"click"],[1,"bi"],["class","password-strength",4,"ngIf"],["for","street"],[1,"bi","bi-geo-alt","input-icon"],["id","street","type","text","formControlName","street","placeholder","Street address",1,"component-input"],["for","city"],[1,"bi","bi-building","input-icon"],["id","city","type","text","formControlName","city","placeholder","City",1,"component-input"],["for","state"],[1,"bi","bi-flag","input-icon"],["id","state","type","text","formControlName","state","placeholder","State",1,"component-input"],["for","zipCode"],[1,"bi","bi-mailbox","input-icon"],["id","zipCode","type","text","formControlName","zipCode","placeholder","Zip code",1,"component-input"],["for","country"],[1,"bi","bi-globe","input-icon"],["id","country","type","text","formControlName","country","placeholder","Country",1,"component-input"],[1,"form-actions"],["type","button","class","component-button-secondary",3,"click",4,"ngIf"],["type","button","class","component-button-primary",3,"click",4,"ngIf"],["type","submit","class","component-button-primary",3,"disabled",4,"ngIf"],[1,"form-footer"],[1,"form-link",3,"click"],[1,"footer","mt-auto","py-3","bg-white","border-top","shadow-sm","rounded-top-4"],[1,"container","text-center"],[1,"text-muted"],[1,"input-validation"],[1,"bi","bi-check-circle-fill"],[1,"form-error"],[4,"ngIf"],[1,"loading-spinner"],[1,"bi","bi-send"],[1,"alert","alert-success"],[1,"bi","bi-info-circle"],["for","otp"],[1,"bi","bi-shield-lock","input-icon"],["id","otp","type","text","formControlName","otp","placeholder","Enter OTP","maxlength","6",1,"component-input"],["type","button",1,"component-button-primary",3,"click","disabled"],["class","bi bi-check2",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"bi","bi-check2"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-fill"],["type","button",1,"component-button-secondary",3,"click"],[1,"bi","bi-arrow-left"],["type","button",1,"component-button-primary",3,"click"],[1,"bi","bi-arrow-right"],["type","submit",1,"component-button-primary",3,"disabled"],["class","bi bi-person-plus",4,"ngIf"]],template:function(t,i){if(t&1&&(S(0,"div",0)(1,"nav",1)(2,"a",2),k(3,"span",3),O(4," DispatchTrack "),w(),S(5,"div",4)(6,"span"),O(7,"Existing user?"),w(),S(8,"a",5),O(9,"Login"),w()()()(),S(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"h2"),k(16,"i",11),O(17,"Create Your Account"),w(),S(18,"p"),O(19,"Join DispatchTrack to connect with trusted travelers and send your parcels safely"),w()(),S(20,"div",12)(21,"div",13)(22,"div",14),k(23,"i",15),w(),S(24,"span",16),O(25,"Basic Info"),w()(),k(26,"div",17),S(27,"div",13)(28,"div",18),k(29,"i",19),w(),S(30,"span",16),O(31,"Verification"),w()(),k(32,"div",17),S(33,"div",13)(34,"div",20),k(35,"i",21),w(),S(36,"span",16),O(37,"Complete"),w()()(),S(38,"form",22),Ae("ngSubmit",function(){return i.onSubmit()}),S(39,"div",23)(40,"div",24)(41,"div",25)(42,"label",26),O(43,"Name"),w(),S(44,"div",27),k(45,"i",28)(46,"input",29),ae(47,gE,2,0,"div",30),w(),ae(48,_E,2,0,"div",31),w(),S(49,"div",25)(50,"label",32),O(51,"Age"),w(),S(52,"div",27),k(53,"i",33)(54,"input",34),ae(55,yE,2,0,"div",30),w(),ae(56,bE,3,2,"div",31),w(),S(57,"div",25)(58,"label",35),O(59,"Gender"),w(),S(60,"div",27),k(61,"i",36),S(62,"select",37)(63,"option",38),O(64,"Male"),w(),S(65,"option",39),O(66,"Female"),w(),S(67,"option",40),O(68,"Other"),w()()()(),S(69,"div",25)(70,"label",41),O(71,"Phone"),w(),S(72,"div",27),k(73,"i",42)(74,"input",43),ae(75,ME,2,0,"div",30),w(),ae(76,CE,3,2,"div",31),w()()(),S(77,"div",23)(78,"div",25)(79,"label",44),O(80,"Email"),w(),S(81,"div",27),k(82,"i",45)(83,"input",46),S(84,"button",47),Ae("click",function(){return i.verifyEmail()}),ae(85,PE,1,0,"span",48)(86,EE,1,0,"i",49)(87,TE,1,0,"i",50),O(88),w()(),ae(89,LE,3,2,"div",31)(90,RE,3,1,"div",51)(91,IE,3,1,"div",51),w(),ae(92,NE,11,4,"div",52),w(),S(93,"div",23)(94,"div",25)(95,"label",53),O(96,"Password"),w(),S(97,"div",27),k(98,"i",54)(99,"input",55),S(100,"button",56),Ae("click",function(){return i.togglePasswordVisibility()}),k(101,"i",57),w()(),ae(102,zE,5,3,"div",58)(103,UE,2,0,"div",31),w(),S(104,"div",24)(105,"div",25)(106,"label",59),O(107,"Street"),w(),S(108,"div",27),k(109,"i",60)(110,"input",61),w(),ae(111,BE,2,0,"div",31),w(),S(112,"div",25)(113,"label",62),O(114,"City"),w(),S(115,"div",27),k(116,"i",63)(117,"input",64),w(),ae(118,VE,2,0,"div",31),w(),S(119,"div",25)(120,"label",65),O(121,"State"),w(),S(122,"div",27),k(123,"i",66)(124,"input",67),w(),ae(125,GE,2,0,"div",31),w(),S(126,"div",25)(127,"label",68),O(128,"Zip Code"),w(),S(129,"div",27),k(130,"i",69)(131,"input",70),w(),ae(132,HE,2,0,"div",31),w(),S(133,"div",25)(134,"label",71),O(135,"Country"),w(),S(136,"div",27),k(137,"i",72)(138,"input",73),w(),ae(139,WE,2,0,"div",31),w()()(),S(140,"div",74),ae(141,qE,3,0,"button",75)(142,jE,3,0,"button",76)(143,ZE,4,3,"button",77),w()(),S(144,"div",78)(145,"span"),O(146,"Already have an account?"),w(),S(147,"a",79),Ae("click",function(){return i.goToLogin()}),O(148,"Sign In"),w()()()()()(),S(149,"footer",80)(150,"div",81)(151,"span",82),O(152),w()()()),t&2){let r,o,s,a,l,c,d,u,h,f,p,m,y,_;N(21),dt("active",i.formStep>=1)("completed",i.formStep>1),N(5),dt("completed",i.formStep>1),N(),dt("active",i.formStep>=2)("completed",i.formStep>2),N(5),dt("completed",i.formStep>2),N(),dt("active",i.formStep>=3),N(5),W("formGroup",i.signupForm),N(),dt("active",i.formStep>=1),N(8),W("ngIf",((r=i.signupForm.get("name"))==null?null:r.valid)&&((r=i.signupForm.get("name"))==null?null:r.dirty)),N(),W("ngIf",((o=i.signupForm.get("name"))==null?null:o.invalid)&&(((o=i.signupForm.get("name"))==null?null:o.dirty)||((o=i.signupForm.get("name"))==null?null:o.touched))),N(7),W("ngIf",((s=i.signupForm.get("age"))==null?null:s.valid)&&((s=i.signupForm.get("age"))==null?null:s.dirty)),N(),W("ngIf",((a=i.signupForm.get("age"))==null?null:a.invalid)&&(((a=i.signupForm.get("age"))==null?null:a.dirty)||((a=i.signupForm.get("age"))==null?null:a.touched))),N(19),W("ngIf",((l=i.signupForm.get("phone"))==null?null:l.valid)&&((l=i.signupForm.get("phone"))==null?null:l.dirty)),N(),W("ngIf",((c=i.signupForm.get("phone"))==null?null:c.invalid)&&(((c=i.signupForm.get("phone"))==null?null:c.dirty)||((c=i.signupForm.get("phone"))==null?null:c.touched))),N(),dt("active",i.formStep>=2),N(6),W("readonly",i.otpVerified),N(),W("disabled",i.loadingVerify||i.otpVerified),N(),W("ngIf",i.loadingVerify),N(),W("ngIf",!i.loadingVerify&&!i.otpVerified),N(),W("ngIf",i.otpVerified),N(),Je(" ",i.otpVerified?"Verified":"Verify"," "),N(),W("ngIf",((d=i.signupForm.get("email"))==null?null:d.invalid)&&(((d=i.signupForm.get("email"))==null?null:d.dirty)||((d=i.signupForm.get("email"))==null?null:d.touched))),N(),W("ngIf",i.otpSentMessage),N(),W("ngIf",i.otpVerifiedMessage),N(),W("ngIf",i.otpSent&&!i.otpVerified),N(),dt("active",i.formStep>=3),N(6),W("type",i.showPassword?"text":"password"),N(2),dt("bi-eye",!i.showPassword)("bi-eye-slash",i.showPassword),N(),W("ngIf",(u=i.signupForm.get("password"))==null?null:u.value),N(),W("ngIf",((h=i.signupForm.get("password"))==null?null:h.invalid)&&(((h=i.signupForm.get("password"))==null?null:h.dirty)||((h=i.signupForm.get("password"))==null?null:h.touched))),N(8),W("ngIf",((f=i.signupForm.get("street"))==null?null:f.invalid)&&(((f=i.signupForm.get("street"))==null?null:f.dirty)||((f=i.signupForm.get("street"))==null?null:f.touched))),N(7),W("ngIf",((p=i.signupForm.get("city"))==null?null:p.invalid)&&(((p=i.signupForm.get("city"))==null?null:p.dirty)||((p=i.signupForm.get("city"))==null?null:p.touched))),N(7),W("ngIf",((m=i.signupForm.get("state"))==null?null:m.invalid)&&(((m=i.signupForm.get("state"))==null?null:m.dirty)||((m=i.signupForm.get("state"))==null?null:m.touched))),N(7),W("ngIf",((y=i.signupForm.get("zipCode"))==null?null:y.invalid)&&(((y=i.signupForm.get("zipCode"))==null?null:y.dirty)||((y=i.signupForm.get("zipCode"))==null?null:y.touched))),N(7),W("ngIf",((_=i.signupForm.get("country"))==null?null:_.invalid)&&(((_=i.signupForm.get("country"))==null?null:_.dirty)||((_=i.signupForm.get("country"))==null?null:_.touched))),N(2),W("ngIf",i.formStep>1),N(),W("ngIf",i.formStep<3&&i.canProceedToNextStep()),N(),W("ngIf",i.formStep===3),N(9),Je("\xA9 ",i.currentYear," DispatchTrack. All rights reserved.")}},dependencies:[pi,ui,or,sr,ai,Vo,rr,li,ci,Eg,di,hi,qt,an,$l],styles:["@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}20%{transform:translateY(-18px)}40%{transform:translateY(0)}60%{transform:translateY(10px)}80%{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_border-glow{0%{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}30%{box-shadow:0 0 16px 4px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}60%{box-shadow:0 0 16px 4px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}to{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}}@keyframes _ngcontent-%COMP%_step3-bounce{0%,to{transform:translateY(0) scale(1)}25%{transform:translateY(-12px) scale(1.02)}50%{transform:translateY(0) scale(1)}75%{transform:translateY(-6px) scale(1.01)}}.component-container[_ngcontent-%COMP%]{min-height:100vh;background:#f3f8ff;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;padding:0;width:100%}.component-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;width:100%;margin-top:-2.5rem;position:relative;z-index:2}.component-card[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:2rem;box-shadow:0 4px 32px #00000012;border:1px solid #e5e7eb;transition:all .3s ease}.component-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #2563eb66}.component-button-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #00000012;letter-spacing:.5px}.component-button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#2563eb);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66;border-color:#1d4ed8}.component-button-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.component-button-secondary[_ngcontent-%COMP%]{background:#fff;color:#2563eb;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;letter-spacing:.5px}.component-button-secondary[_ngcontent-%COMP%]:hover{background:#f3f8ff;transform:translateY(-2px);box-shadow:0 4px 16px #2563eb1a}.component-input[_ngcontent-%COMP%]{width:100%;padding:.3rem 1.2rem;border:2px solid #e5e7eb;border-radius:1rem;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#fff;transition:all .3s ease}.component-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb1a}.component-input[_ngcontent-%COMP%]::placeholder{color:#6c7a89}.component-hero[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f8ff,#fff7ed);border-radius:2rem;box-shadow:0 4px 32px #00000012;padding:4rem 0;text-align:center;position:relative;width:100%;min-height:480px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#555;font-size:16px;z-index:1;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:40px}.promo-badge[_ngcontent-%COMP%]{display:inline-block;background:#e9f1ff;color:#2563eb;font-weight:600;border-radius:2rem;padding:.4rem 1.2rem;font-size:1.1rem;box-shadow:0 2px 8px #00000012}.promo-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#34d399;border-radius:50%;margin-right:.5rem}.timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;box-shadow:0 4px 16px #2563eb1a;margin:0 auto;position:relative;z-index:2}.step-pill[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:.5rem 1.4rem;font-weight:600;font-size:1.1rem;color:#222;box-shadow:0 2px 8px #00000012;border:1px solid #e5e7eb;display:inline-block}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-pending[_ngcontent-%COMP%]{background:#f59e421a;color:#f59e42}.status-badge.status-in-transit[_ngcontent-%COMP%]{background:#22d3ee1a;color:#22d3ee}.status-badge.status-delivered[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}@media (max-width: 991px){.component-content[_ngcontent-%COMP%]{padding:0 1.5rem}.component-hero[_ngcontent-%COMP%]{min-height:400px;padding:2rem .5rem}}@media (max-width: 767px){.component-content[_ngcontent-%COMP%]{padding:0 1rem}.component-hero[_ngcontent-%COMP%]{border-radius:1.2rem;min-height:320px}.timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1.2rem}}.component-container[_ngcontent-%COMP%]{margin-top:2rem}.signup-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;padding:2rem}.signup-content[_ngcontent-%COMP%]{width:100%;max-width:800px;text-align:center}.signup-header[_ngcontent-%COMP%]{margin-bottom:2rem}.signup-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:2.1rem;font-weight:700;color:#222;margin-bottom:.5rem}.signup-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.signup-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;margin:0}.form-progress[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:2rem;gap:1rem}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#e5e7eb;color:#6c7a89;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;transition:all .3s ease}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .timeline-icon.step1[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .timeline-icon.step2[_ngcontent-%COMP%]{background:#a855f7;color:#fff}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .timeline-icon.step3[_ngcontent-%COMP%]{background:#34d399;color:#fff}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6c7a89;font-weight:500}.form-progress[_ngcontent-%COMP%]   .progress-step.active[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{box-shadow:0 4px 16px #2563eb1a}.form-progress[_ngcontent-%COMP%]   .progress-step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#2563eb;font-weight:600}.form-progress[_ngcontent-%COMP%]   .progress-step.completed[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{background:#34d399;color:#fff}.form-progress[_ngcontent-%COMP%]   .progress-step.completed[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#34d399}.form-progress[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]{width:60px;height:2px;background:#e5e7eb;transition:all .3s ease}.form-progress[_ngcontent-%COMP%]   .progress-line.completed[_ngcontent-%COMP%]{background:linear-gradient(180deg,#2563eb,#a855f7)}.signup-form[_ngcontent-%COMP%]   .form-step[_ngcontent-%COMP%]{display:none}.signup-form[_ngcontent-%COMP%]   .form-step.active[_ngcontent-%COMP%]{display:block}.signup-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}.signup-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:left}.signup-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#222;margin-bottom:1rem;font-size:1rem}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c7a89;font-size:1rem;z-index:1}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:2.5rem}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-validation[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#34d399;font-size:1rem}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#6c7a89;cursor:pointer;padding:.5rem;border-radius:.5rem;transition:all .3s ease}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:#2563eb;background:#2563eb1a}.signup-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .verify-btn[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);padding:.5rem 1rem;font-size:.875rem;min-width:auto}.signup-form[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.5rem;text-align:left}.signup-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;margin-top:.5rem;font-size:1rem}.signup-form[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.signup-form[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399;border:1px solid rgba(52,211,153,.2)}.signup-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]{margin-top:1rem}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;margin-bottom:.5rem}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{height:100%;transition:all .3s ease}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill.weak[_ngcontent-%COMP%]{width:33%;background:#ef4444}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill.medium[_ngcontent-%COMP%]{width:66%;background:#f59e42}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill.strong[_ngcontent-%COMP%]{width:100%;background:#34d399}.signup-form[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c7a89;font-size:.75rem}.signup-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:2rem;gap:1.5rem}.signup-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;max-width:200px}.signup-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{text-align:center;padding-top:1.5rem;border-top:1px solid #e5e7eb;color:#555}.signup-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]   .form-link[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none;font-weight:500;cursor:pointer;margin-left:.5rem;transition:color .3s ease}.signup-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]   .form-link[_ngcontent-%COMP%]:hover{color:#1d4ed8;text-decoration:underline}@media (max-width: 991px){.signup-form-wrapper[_ngcontent-%COMP%]{padding:1.5rem;min-height:50vh}.signup-card[_ngcontent-%COMP%]{max-width:100%}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1rem}.form-progress[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{font-size:.75rem}.form-progress[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]{width:40px}.signup-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.signup-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.signup-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 767px){.signup-form-wrapper[_ngcontent-%COMP%]{padding:1rem}.signup-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.form-progress[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.form-progress[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]{width:2px;height:20px}}"]})};function $i(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tv(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var pn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Vs={duration:.5,overwrite:!1,delay:0},vm,Ht,ft,Vn=1e8,it=1/Vn,cm=Math.PI*2,JE=cm/4,$E=0,nv=Math.sqrt,KE=Math.cos,QE=Math.sin,It=function(e){return typeof e=="string"},vt=function(e){return typeof e=="function"},Qi=function(e){return typeof e=="number"},Ad=function(e){return typeof e>"u"},Ai=function(e){return typeof e=="object"},fn=function(e){return e!==!1},bm=function(){return typeof window<"u"},bd=function(e){return vt(e)||It(e)},iv=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Zt=Array.isArray,um=/(?:-?\.?\d|\.)+/gi,Mm=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,To=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,nm=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,wm=/[+-]=-?[.\d]+/,rv=/[^,'"\[\]\s]+/gi,eT=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,gt,Ti,dm,Sm,Tn={},Cd={},ov,sv=function(e){return(Cd=Gs(e,Tn))&&Jt},Ld=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Ul=function(e,t){return!t&&console.warn(e)},av=function(e,t){return e&&(Tn[e]=t)&&Cd&&(Cd[e]=t)||Tn},Bl=function(){return 0},tT={suppressEvents:!0,isStart:!0,kill:!1},Md={suppressEvents:!0,kill:!1},nT={suppressEvents:!0},Cm={},Rr=[],hm={},lv,dn={},im={},Xx=30,wd=[],Pm="",Em=function(e){var t=e[0],i,r;if(Ai(t)||vt(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=wd.length;r--&&!wd[r].targetTest(t););i=wd[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Lm(e[r],i)))||e.splice(r,1);return e},Ir=function(e){return e._gsap||Em(Gn(e))[0]._gsap},Tm=function(e,t,i){return(i=e[t])&&vt(i)?e[t]():Ad(i)&&e.getAttribute&&e.getAttribute(t)||i},nn=function(e,t){return(e=e.split(",")).forEach(t)||e},bt=function(e){return Math.round(e*1e5)/1e5||0},Ot=function(e){return Math.round(e*1e7)/1e7||0},Oo=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},iT=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},Pd=function(){var e=Rr.length,t=Rr.slice(0),i,r;for(hm={},Rr.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Om=function(e){return!!(e._initted||e._startAt||e.add)},cv=function(e,t,i,r){Rr.length&&!Ht&&Pd(),e.render(t,i,r||!!(Ht&&t<0&&Om(e))),Rr.length&&!Ht&&Pd()},uv=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(rv).length<2?t:It(e)?e.trim():e},dv=function(e){return e},On=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},rT=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Gs=function(e,t){for(var i in t)e[i]=t[i];return e},Zx=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Ai(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Ed=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Fl=function(e){var t=e.parent||gt,i=e.keyframes?rT(Zt(e.keyframes)):On;if(fn(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},oT=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},hv=function(e,t,i,r,o){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=e[r],a;if(o)for(a=t[o];s&&s[o]>a;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=s,t.parent=t._dp=e,t},Rd=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=t._prev,s=t._next;o?o._next=s:e[i]===t&&(e[i]=s),s?s._prev=o:e[r]===t&&(e[r]=o),t._next=t._prev=t.parent=null},kr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Co=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},sT=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},fm=function(e,t,i,r){return e._startAt&&(Ht?e._startAt.revert(Md):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},aT=function n(e){return!e||e._ts&&n(e.parent)},Jx=function(e){return e._repeat?Hs(e._tTime,e=e.duration()+e._rDelay)*e:0},Hs=function(e,t){var i=Math.floor(e=Ot(e/t));return e&&i===e?i-1:i},Td=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Id=function(e){return e._end=Ot(e._start+(e._tDur/Math.abs(e._ts||e._rts||it)||0))},kd=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Ot(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Id(e),i._dirty||Co(i,e)),e},fv=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Td(e.rawTime(),t),(!t._dur||Hl(0,t.totalDuration(),i)-t._tTime>it)&&t.render(i,!0)),Co(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-it}},Oi=function(e,t,i,r){return t.parent&&kr(t),t._start=Ot((Qi(i)?i:i||e!==gt?Bn(e,i,t):e._time)+t._delay),t._end=Ot(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),hv(e,t,"_first","_last",e._sort?"_start":0),pm(t)||(e._recent=t),r||fv(e,t),e._ts<0&&kd(e,e._tTime),e},pv=function(e,t){return(Tn.ScrollTrigger||Ld("scrollTrigger",t))&&Tn.ScrollTrigger.create(t,e)},mv=function(e,t,i,r,o){if(km(e,t,o),!e._initted)return 1;if(!i&&e._pt&&!Ht&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&lv!==hn.frame)return Rr.push(e),e._lazy=[o,r],1},lT=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},pm=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},cT=function(e,t,i,r){var o=e.ratio,s=t<0||!t&&(!e._start&&lT(e)&&!(!e._initted&&pm(e))||(e._ts<0||e._dp._ts<0)&&!pm(e))?0:1,a=e._rDelay,l=0,c,d,u;if(a&&e._repeat&&(l=Hl(0,e._tDur,t),d=Hs(l,a),e._yoyo&&d&1&&(s=1-s),d!==Hs(e._tTime,a)&&(o=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==o||Ht||r||e._zTime===it||!t&&e._zTime){if(!e._initted&&mv(e,t,r,i,l))return;for(u=e._zTime,e._zTime=t||(i?it:0),i||(i=t&&!u),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=l,c=e._pt;c;)c.r(s,c.d),c=c._next;t<0&&fm(e,t,i,!0),e._onUpdate&&!i&&En(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&En(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===s&&(s&&kr(e,1),!i&&!Ht&&(En(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},uT=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Ws=function(e,t,i,r){var o=e._repeat,s=Ot(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=o?o<0?1e10:Ot(s*(o+1)+e._rDelay*o):s,a>0&&!r&&kd(e,e._tTime=e._tDur*a),e.parent&&Id(e),i||Co(e.parent,e),e},$x=function(e){return e instanceof Gt?Co(e):Ws(e,e._dur)},dT={_start:0,endTime:Bl,totalDuration:Bl},Bn=function n(e,t,i){var r=e.labels,o=e._recent||dT,s=e.duration()>=Vn?o.endTime(!1):e._dur,a,l,c;return It(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?o:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=s),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(Zt(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:s+l)):t==null?s:+t},Nl=function(e,t,i){var r=Qi(t[1]),o=(r?2:1)+(e<2?0:1),s=t[o],a,l;if(r&&(s.duration=t[1]),s.parent=i,e){for(a=s,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=fn(l.vars.inherit)&&l.parent;s.immediateRender=fn(a.immediateRender),e<2?s.runBackwards=1:s.startAt=t[o-1]}return new Pt(t[0],s,t[o+1])},Dr=function(e,t){return e||e===0?t(e):t},Hl=function(e,t,i){return i<e?e:i>t?t:i},Wt=function(e,t){return!It(e)||!(t=eT.exec(e))?"":t[1]},hT=function(e,t,i){return Dr(i,function(r){return Hl(e,t,r)})},mm=[].slice,gv=function(e,t){return e&&Ai(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ai(e[0]))&&!e.nodeType&&e!==Ti},fT=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var o;return It(r)&&!t||gv(r,1)?(o=i).push.apply(o,Gn(r)):i.push(r)})||i},Gn=function(e,t,i){return ft&&!t&&ft.selector?ft.selector(e):It(e)&&!i&&(dm||!qs())?mm.call((t||Sm).querySelectorAll(e),0):Zt(e)?fT(e,i):gv(e)?mm.call(e,0):e?[e]:[]},gm=function(e){return e=Gn(e)[0]||Ul("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Gn(t,i.querySelectorAll?i:i===e?Ul("Invalid scope")||Sm.createElement("div"):e)}},_v=function(e){return e.sort(function(){return .5-Math.random()})},yv=function(e){if(vt(e))return e;var t=Ai(e)?e:{each:e},i=Po(t.ease),r=t.from||0,o=parseFloat(t.base)||0,s={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,d=r,u=r;return It(r)?d=u={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(d=r[0],u=r[1]),function(h,f,p){var m=(p||t).length,y=s[m],_,g,v,b,M,x,C,A,L;if(!y){if(L=t.grid==="auto"?0:(t.grid||[1,Vn])[1],!L){for(C=-Vn;C<(C=p[L++].getBoundingClientRect().left)&&L<m;);L<m&&L--}for(y=s[m]=[],_=l?Math.min(L,m)*d-.5:r%L,g=L===Vn?0:l?m*u/L-.5:r/L|0,C=0,A=Vn,x=0;x<m;x++)v=x%L-_,b=g-(x/L|0),y[x]=M=c?Math.abs(c==="y"?b:v):nv(v*v+b*b),M>C&&(C=M),M<A&&(A=M);r==="random"&&_v(y),y.max=C-A,y.min=A,y.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(L>m?m-1:c?c==="y"?m/L:L:Math.max(L,m/L))||0)*(r==="edges"?-1:1),y.b=m<0?o-m:o,y.u=Wt(t.amount||t.each)||0,i=i&&m<0?Ev(i):i}return m=(y[h]-y.min)/y.max||0,Ot(y.b+(i?i(m):m)*y.v)+y.u}},_m=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Ot(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Qi(i)?0:Wt(i))}},xv=function(e,t){var i=Zt(e),r,o;return!i&&Ai(e)&&(r=i=e.radius||Vn,e.values?(e=Gn(e.values),(o=!Qi(e[0]))&&(r*=r)):e=_m(e.increment)),Dr(t,i?vt(e)?function(s){return o=e(s),Math.abs(o-s)<=r?o:s}:function(s){for(var a=parseFloat(o?s.x:s),l=parseFloat(o?s.y:0),c=Vn,d=0,u=e.length,h,f;u--;)o?(h=e[u].x-a,f=e[u].y-l,h=h*h+f*f):h=Math.abs(e[u]-a),h<c&&(c=h,d=u);return d=!r||c<=r?e[d]:s,o||d===s||Qi(s)?d:d+Wt(s)}:_m(e))},vv=function(e,t,i,r){return Dr(Zt(e)?!t:i===!0?!!(i=0):!r,function(){return Zt(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},pT=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(o,s){return s(o)},r)}},mT=function(e,t){return function(i){return e(parseFloat(i))+(t||Wt(i))}},gT=function(e,t,i){return Mv(e,t,0,1,i)},bv=function(e,t,i){return Dr(i,function(r){return e[~~t(r)]})},_T=function n(e,t,i){var r=t-e;return Zt(e)?bv(e,n(0,e.length),t):Dr(i,function(o){return(r+(o-e)%r)%r+e})},yT=function n(e,t,i){var r=t-e,o=r*2;return Zt(e)?bv(e,n(0,e.length-1),t):Dr(i,function(s){return s=(o+(s-e)%o)%o||0,e+(s>r?o-s:s)})},js=function(e){for(var t=0,i="",r,o,s,a;~(r=e.indexOf("random(",t));)s=e.indexOf(")",r),a=e.charAt(r+7)==="[",o=e.substr(r+7,s-r-7).match(a?rv:um),i+=e.substr(t,r-t)+vv(a?o:+o[0],a?0:+o[1],+o[2]||1e-5),t=s+1;return i+e.substr(t,e.length-t)},Mv=function(e,t,i,r,o){var s=t-e,a=r-i;return Dr(o,function(l){return i+((l-e)/s*a||0)})},xT=function n(e,t,i,r){var o=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!o){var s=It(e),a={},l,c,d,u,h;if(i===!0&&(r=1)&&(i=null),s)e={p:e},t={p:t};else if(Zt(e)&&!Zt(t)){for(d=[],u=e.length,h=u-2,c=1;c<u;c++)d.push(n(e[c-1],e[c]));u--,o=function(p){p*=u;var m=Math.min(h,~~p);return d[m](p-m)},i=t}else r||(e=Gs(Zt(e)?[]:{},e));if(!d){for(l in t)Rm.call(a,e,l,"get",t[l]);o=function(p){return Nm(p,a)||(s?e.p:e)}}}return Dr(i,o)},Kx=function(e,t,i){var r=e.labels,o=Vn,s,a,l;for(s in r)a=r[s]-t,a<0==!!i&&a&&o>(a=Math.abs(a))&&(l=s,o=a);return l},En=function(e,t,i){var r=e.vars,o=r[t],s=ft,a=e._ctx,l,c,d;if(o)return l=r[t+"Params"],c=r.callbackScope||e,i&&Rr.length&&Pd(),a&&(ft=a),d=l?o.apply(c,l):o.call(c),ft=s,d},kl=function(e){return kr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ht),e.progress()<1&&En(e,"onInterrupt"),e},Bs,wv=[],Sv=function(e){if(e)if(e=!e.name&&e.default||e,bm()||e.headless){var t=e.name,i=vt(e),r=t&&!i&&e.init?function(){this._props=[]}:e,o={init:Bl,render:Nm,add:Rm,kill:DT,modifier:kT,rawVars:0},s={targetTest:0,get:0,getSetter:Dd,aliases:{},register:0};if(qs(),e!==r){if(dn[t])return;On(r,On(Ed(e,o),s)),Gs(r.prototype,Gs(o,Ed(e,s))),dn[r.prop=t]=r,e.targetTest&&(wd.push(r),Cm[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}av(t,r),e.register&&e.register(Jt,r,rn)}else wv.push(e)},nt=255,Dl={aqua:[0,nt,nt],lime:[0,nt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,nt],navy:[0,0,128],white:[nt,nt,nt],olive:[128,128,0],yellow:[nt,nt,0],orange:[nt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[nt,0,0],pink:[nt,192,203],cyan:[0,nt,nt],transparent:[nt,nt,nt,0]},rm=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*nt+.5|0},Cv=function(e,t,i){var r=e?Qi(e)?[e>>16,e>>8&nt,e&nt]:0:Dl.black,o,s,a,l,c,d,u,h,f,p;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Dl[e])r=Dl[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),s=e.charAt(2),a=e.charAt(3),e="#"+o+o+s+s+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&nt,r&nt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&nt,e&nt]}else if(e.substr(0,3)==="hsl"){if(r=p=e.match(um),!t)l=+r[0]%360/360,c=+r[1]/100,d=+r[2]/100,s=d<=.5?d*(c+1):d+c-d*c,o=d*2-s,r.length>3&&(r[3]*=1),r[0]=rm(l+1/3,o,s),r[1]=rm(l,o,s),r[2]=rm(l-1/3,o,s);else if(~e.indexOf("="))return r=e.match(Mm),i&&r.length<4&&(r[3]=1),r}else r=e.match(um)||Dl.transparent;r=r.map(Number)}return t&&!p&&(o=r[0]/nt,s=r[1]/nt,a=r[2]/nt,u=Math.max(o,s,a),h=Math.min(o,s,a),d=(u+h)/2,u===h?l=c=0:(f=u-h,c=d>.5?f/(2-u-h):f/(u+h),l=u===o?(s-a)/f+(s<a?6:0):u===s?(a-o)/f+2:(o-s)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(d*100+.5)),i&&r.length<4&&(r[3]=1),r},Pv=function(e){var t=[],i=[],r=-1;return e.split(Ki).forEach(function(o){var s=o.match(To)||[];t.push.apply(t,s),i.push(r+=s.length+1)}),t.c=i,t},Qx=function(e,t,i){var r="",o=(e+r).match(Ki),s=t?"hsla(":"rgba(",a=0,l,c,d,u;if(!o)return e;if(o=o.map(function(h){return(h=Cv(h,t,1))&&s+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(d=Pv(e),l=i.c,l.join(r)!==d.c.join(r)))for(c=e.replace(Ki,"1").split(To),u=c.length-1;a<u;a++)r+=c[a]+(~l.indexOf(a)?o.shift()||s+"0,0,0,0)":(d.length?d:o.length?o:i).shift());if(!c)for(c=e.split(Ki),u=c.length-1;a<u;a++)r+=c[a]+o[a];return r+c[u]},Ki=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Dl)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),vT=/hsl[a]?\(/,Am=function(e){var t=e.join(" "),i;if(Ki.lastIndex=0,Ki.test(t))return i=vT.test(t),e[1]=Qx(e[1],i),e[0]=Qx(e[0],i,Pv(e[1])),!0},Vl,hn=function(){var n=Date.now,e=500,t=33,i=n(),r=i,o=1e3/240,s=o,a=[],l,c,d,u,h,f,p=function m(y){var _=n()-r,g=y===!0,v,b,M,x;if((_>e||_<0)&&(i+=_-t),r+=_,M=r-i,v=M-s,(v>0||g)&&(x=++u.frame,h=M-u.time*1e3,u.time=M=M/1e3,s+=v+(v>=o?4:o-v),b=1),g||(l=c(m)),b)for(f=0;f<a.length;f++)a[f](M,h,x,y)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(y){return h/(1e3/(y||60))},wake:function(){ov&&(!dm&&bm()&&(Ti=dm=window,Sm=Ti.document||{},Tn.gsap=Jt,(Ti.gsapVersions||(Ti.gsapVersions=[])).push(Jt.version),sv(Cd||Ti.GreenSockGlobals||!Ti.gsap&&Ti||{}),wv.forEach(Sv)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&u.sleep(),c=d||function(y){return setTimeout(y,s-u.time*1e3+1|0)},Vl=1,p(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),Vl=0,c=Bl},lagSmoothing:function(y,_){e=y||1/0,t=Math.min(_||33,e)},fps:function(y){o=1e3/(y||240),s=u.time*1e3+o},add:function(y,_,g){var v=_?function(b,M,x,C){y(b,M,x,C),u.remove(v)}:y;return u.remove(y),a[g?"unshift":"push"](v),qs(),v},remove:function(y,_){~(_=a.indexOf(y))&&a.splice(_,1)&&f>=_&&f--},_listeners:a},u}(),qs=function(){return!Vl&&hn.wake()},Ye={},bT=/^[\d.\-M][\d.\-,\s]/,MT=/["']/g,wT=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],o=1,s=i.length,a,l,c;o<s;o++)l=i[o],a=o!==s-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(MT,"").trim():+c,r=l.substr(a+1).trim();return t},ST=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},CT=function(e){var t=(e+"").split("("),i=Ye[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[wT(t[1])]:ST(e).split(",").map(uv)):Ye._CE&&bT.test(e)?Ye._CE("",e):i},Ev=function(e){return function(t){return 1-e(1-t)}},Tv=function n(e,t){for(var i=e._first,r;i;)i instanceof Gt?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Po=function(e,t){return e&&(vt(e)?e:Ye[e]||CT(e))||t},Ao=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var o={easeIn:t,easeOut:i,easeInOut:r},s;return nn(e,function(a){Ye[a]=Tn[a]=o,Ye[s=a.toLowerCase()]=i;for(var l in o)Ye[s+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ye[a+"."+l]=o[l]}),o},Ov=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},om=function n(e,t,i){var r=t>=1?t:1,o=(i||(e?.3:.45))/(t<1?t:1),s=o/cm*(Math.asin(1/r)||0),a=function(d){return d===1?1:r*Math.pow(2,-10*d)*QE((d-s)*o)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Ov(a);return o=cm/o,l.config=function(c,d){return n(e,c,d)},l},sm=function n(e,t){t===void 0&&(t=1.70158);var i=function(s){return s?--s*s*((t+1)*s+t)+1:0},r=e==="out"?i:e==="in"?function(o){return 1-i(1-o)}:Ov(i);return r.config=function(o){return n(e,o)},r};nn("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ao(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Ye.Linear.easeNone=Ye.none=Ye.Linear.easeIn;Ao("Elastic",om("in"),om("out"),om());(function(n,e){var t=1/e,i=2*t,r=2.5*t,o=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ao("Bounce",function(s){return 1-o(1-s)},o)})(7.5625,2.75);Ao("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Ao("Circ",function(n){return-(nv(1-n*n)-1)});Ao("Sine",function(n){return n===1?1:-KE(n*JE)+1});Ao("Back",sm("in"),sm("out"),sm());Ye.SteppedEase=Ye.steps=Tn.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),o=t?1:0,s=1-it;return function(a){return((r*Hl(0,s,a)|0)+o)*i}}};Vs.ease=Ye["quad.out"];nn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Pm+=n+","+n+"Params,"});var Lm=function(e,t){this.id=$E++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Tm,this.set=t?t.getSetter:Dd},Gl=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ws(this,+t.duration,1,1),this.data=t.data,ft&&(this._ctx=ft,ft.data.push(this)),Vl||hn.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Ws(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(qs(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(kd(this,i),!o._dp||o.parent||fv(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Oi(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===it||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),cv(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Jx(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Jx(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*o,r):this._repeat?Hs(this._tTime,o)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-it?0:this._rts;if(this._rts===i)return this;var o=this.parent&&this._ts?Td(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-it?0:this._rts,this.totalTime(Hl(-Math.abs(this._delay),this.totalDuration(),o),r!==!1),Id(this),sT(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(qs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==it&&(this._tTime-=it)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Oi(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(fn(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Td(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=nT);var r=Ht;return Ht=i,Om(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ht=r,this},e.globalTime=function(i){for(var r=this,o=arguments.length?i:r.rawTime();r;)o=r._start+o/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):o},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,$x(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,$x(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Bn(this,i),fn(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,fn(r)),this._dur||(this._zTime=-it),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-it:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-it,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,o;return!!(!i||this._ts&&this._initted&&i.isActive()&&(o=i.rawTime(!0))>=r&&o<this.endTime(!0)-it)},e.eventCallback=function(i,r,o){var s=this.vars;return arguments.length>1?(r?(s[i]=r,o&&(s[i+"Params"]=o),i==="onUpdate"&&(this._onUpdate=r)):delete s[i],this):s[i]},e.then=function(i){var r=this;return new Promise(function(o){var s=vt(i)?i:dv,a=function(){var c=r.then;r.then=null,vt(s)&&(s=s(r))&&(s.then||s===r)&&(r.then=c),o(s),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){kl(this)},n}();On(Gl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-it,_prom:0,_ps:!1,_rts:1});var Gt=function(n){tv(e,n);function e(i,r){var o;return i===void 0&&(i={}),o=n.call(this,i)||this,o.labels={},o.smoothChildTiming=!!i.smoothChildTiming,o.autoRemoveChildren=!!i.autoRemoveChildren,o._sort=fn(i.sortChildren),gt&&Oi(i.parent||gt,$i(o),r),i.reversed&&o.reverse(),i.paused&&o.paused(!0),i.scrollTrigger&&pv($i(o),i.scrollTrigger),o}var t=e.prototype;return t.to=function(r,o,s){return Nl(0,arguments,this),this},t.from=function(r,o,s){return Nl(1,arguments,this),this},t.fromTo=function(r,o,s,a){return Nl(2,arguments,this),this},t.set=function(r,o,s){return o.duration=0,o.parent=this,Fl(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new Pt(r,o,Bn(this,s),1),this},t.call=function(r,o,s){return Oi(this,Pt.delayedCall(0,r,o),s)},t.staggerTo=function(r,o,s,a,l,c,d){return s.duration=o,s.stagger=s.stagger||a,s.onComplete=c,s.onCompleteParams=d,s.parent=this,new Pt(r,s,Bn(this,l)),this},t.staggerFrom=function(r,o,s,a,l,c,d){return s.runBackwards=1,Fl(s).immediateRender=fn(s.immediateRender),this.staggerTo(r,o,s,a,l,c,d)},t.staggerFromTo=function(r,o,s,a,l,c,d,u){return a.startAt=s,Fl(a).immediateRender=fn(a.immediateRender),this.staggerTo(r,o,a,l,c,d,u)},t.render=function(r,o,s){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=r<=0?0:Ot(r),u=this._zTime<0!=r<0&&(this._initted||!c),h,f,p,m,y,_,g,v,b,M,x,C;if(this!==gt&&d>l&&r>=0&&(d=l),d!==this._tTime||s||u){if(a!==this._time&&c&&(d+=this._time-a,r+=this._time-a),h=d,b=this._start,v=this._ts,_=!v,u&&(c||(a=this._zTime),(r||!o)&&(this._zTime=r)),this._repeat){if(x=this._yoyo,y=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,o,s);if(h=Ot(d%y),d===l?(m=this._repeat,h=c):(M=Ot(d/y),m=~~M,m&&m===M&&(h=c,m--),h>c&&(h=c)),M=Hs(this._tTime,y),!a&&this._tTime&&M!==m&&this._tTime-M*y-this._dur<=0&&(M=m),x&&m&1&&(h=c-h,C=1),m!==M&&!this._lock){var A=x&&M&1,L=A===(x&&m&1);if(m<M&&(A=!A),a=A?0:d%c?c:d,this._lock=1,this.render(a||(C?0:Ot(m*y)),o,!c)._lock=0,this._tTime=d,!o&&this.parent&&En(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,L&&(this._lock=2,a=A?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Tv(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=uT(this,Ot(a),Ot(h)),g&&(d-=h-(h=g._start))),this._tTime=d,this._time=h,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!o&&!M&&(En(this,"onStart"),this._tTime!==d))return this;if(h>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||h>=f._start)&&f._ts&&g!==f){if(f.parent!==this)return this.render(r,o,s);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,o,s),h!==this._time||!this._ts&&!_){g=0,p&&(d+=this._zTime=-it);break}}f=p}else{f=this._last;for(var H=r<0?r:h;f;){if(p=f._prev,(f._act||H<=f._end)&&f._ts&&g!==f){if(f.parent!==this)return this.render(r,o,s);if(f.render(f._ts>0?(H-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(H-f._start)*f._ts,o,s||Ht&&Om(f)),h!==this._time||!this._ts&&!_){g=0,p&&(d+=this._zTime=H?-it:it);break}}f=p}}if(g&&!o&&(this.pause(),g.render(h>=a?0:-it)._zTime=h>=a?1:-1,this._ts))return this._start=b,Id(this),this.render(r,o,s);this._onUpdate&&!o&&En(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&a)&&(b===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&kr(this,1),!o&&!(r<0&&!a)&&(d||a||!l)&&(En(this,d===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,o){var s=this;if(Qi(o)||(o=Bn(this,o,r)),!(r instanceof Gl)){if(Zt(r))return r.forEach(function(a){return s.add(a,o)}),this;if(It(r))return this.addLabel(r,o);if(vt(r))r=Pt.delayedCall(0,r);else return this}return this!==r?Oi(this,r,o):this},t.getChildren=function(r,o,s,a){r===void 0&&(r=!0),o===void 0&&(o=!0),s===void 0&&(s=!0),a===void 0&&(a=-Vn);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Pt?o&&l.push(c):(s&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,o,s)))),c=c._next;return l},t.getById=function(r){for(var o=this.getChildren(1,1,1),s=o.length;s--;)if(o[s].vars.id===r)return o[s]},t.remove=function(r){return It(r)?this.removeLabel(r):vt(r)?this.killTweensOf(r):(r.parent===this&&Rd(this,r),r===this._recent&&(this._recent=this._last),Co(this))},t.totalTime=function(r,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ot(hn.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,o),this._forcing=0,this):this._tTime},t.addLabel=function(r,o){return this.labels[r]=Bn(this,o),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,o,s){var a=Pt.delayedCall(0,o||Bl,s);return a.data="isPause",this._hasPause=1,Oi(this,a,Bn(this,r))},t.removePause=function(r){var o=this._first;for(r=Bn(this,r);o;)o._start===r&&o.data==="isPause"&&kr(o),o=o._next},t.killTweensOf=function(r,o,s){for(var a=this.getTweensOf(r,s),l=a.length;l--;)Lr!==a[l]&&a[l].kill(r,o);return this},t.getTweensOf=function(r,o){for(var s=[],a=Gn(r),l=this._first,c=Qi(o),d;l;)l instanceof Pt?iT(l._targets,a)&&(c?(!Lr||l._initted&&l._ts)&&l.globalTime(0)<=o&&l.globalTime(l.totalDuration())>o:!o||l.isActive())&&s.push(l):(d=l.getTweensOf(a,o)).length&&s.push.apply(s,d),l=l._next;return s},t.tweenTo=function(r,o){o=o||{};var s=this,a=Bn(s,r),l=o,c=l.startAt,d=l.onStart,u=l.onStartParams,h=l.immediateRender,f,p=Pt.to(s,On({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:o.duration||Math.abs((a-(c&&"time"in c?c.time:s._time))/s.timeScale())||it,onStart:function(){if(s.pause(),!f){var y=o.duration||Math.abs((a-(c&&"time"in c?c.time:s._time))/s.timeScale());p._dur!==y&&Ws(p,y,0,1).render(p._time,!0,!0),f=1}d&&d.apply(p,u||[])}},o));return h?p.render(0):p},t.tweenFromTo=function(r,o,s){return this.tweenTo(o,On({startAt:{time:Bn(this,r)}},s))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Kx(this,Bn(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Kx(this,Bn(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+it)},t.shiftChildren=function(r,o,s){s===void 0&&(s=0);for(var a=this._first,l=this.labels,c;a;)a._start>=s&&(a._start+=r,a._end+=r),a=a._next;if(o)for(c in l)l[c]>=s&&(l[c]+=r);return Co(this)},t.invalidate=function(r){var o=this._first;for(this._lock=0;o;)o.invalidate(r),o=o._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var o=this._first,s;o;)s=o._next,this.remove(o),o=s;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Co(this)},t.totalDuration=function(r){var o=0,s=this,a=s._last,l=Vn,c,d,u;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-r:r));if(s._dirty){for(u=s.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>l&&s._sort&&a._ts&&!s._lock?(s._lock=1,Oi(s,a,d-a._delay,1)._lock=0):l=d,d<0&&a._ts&&(o-=d,(!u&&!s._dp||u&&u.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),l=0),a._end>o&&a._ts&&(o=a._end),a=c;Ws(s,s===gt&&s._time>o?s._time:o,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(r){if(gt._ts&&(cv(gt,Td(r,gt)),lv=hn.frame),hn.frame>=Xx){Xx+=pn.autoSleep||120;var o=gt._first;if((!o||!o._ts)&&pn.autoSleep&&hn._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||hn.sleep()}}},e}(Gl);On(Gt.prototype,{_lock:0,_hasPause:0,_forcing:0});var PT=function(e,t,i,r,o,s,a){var l=new rn(this._pt,e,t,0,1,Fm,null,o),c=0,d=0,u,h,f,p,m,y,_,g;for(l.b=i,l.e=r,i+="",r+="",(_=~r.indexOf("random("))&&(r=js(r)),s&&(g=[i,r],s(g,e,t),i=g[0],r=g[1]),h=i.match(nm)||[];u=nm.exec(r);)p=u[0],m=r.substring(c,u.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),p!==h[d++]&&(y=parseFloat(h[d-1])||0,l._pt={_next:l._pt,p:m||d===1?m:",",s:y,c:p.charAt(1)==="="?Oo(y,p)-y:parseFloat(p)-y,m:f&&f<4?Math.round:0},c=nm.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(wm.test(r)||_)&&(l.e=0),this._pt=l,l},Rm=function(e,t,i,r,o,s,a,l,c,d){vt(r)&&(r=r(o||0,e,s));var u=e[t],h=i!=="get"?i:vt(u)?c?e[t.indexOf("set")||!vt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():u,f=vt(u)?c?LT:Rv:Dm,p;if(It(r)&&(~r.indexOf("random(")&&(r=js(r)),r.charAt(1)==="="&&(p=Oo(h,r)+(Wt(h)||0),(p||p===0)&&(r=p))),!d||h!==r||ym)return!isNaN(h*r)&&r!==""?(p=new rn(this._pt,e,t,+h||0,r-(h||0),typeof u=="boolean"?IT:Iv,0,f),c&&(p.fp=c),a&&p.modifier(a,this,e),this._pt=p):(!u&&!(t in e)&&Ld(t,r),PT.call(this,e,t,h,r,f,l||pn.stringFilter,c))},ET=function(e,t,i,r,o){if(vt(e)&&(e=zl(e,o,t,i,r)),!Ai(e)||e.style&&e.nodeType||Zt(e)||iv(e))return It(e)?zl(e,o,t,i,r):e;var s={},a;for(a in e)s[a]=zl(e[a],o,t,i,r);return s},Im=function(e,t,i,r,o,s){var a,l,c,d;if(dn[e]&&(a=new dn[e]).init(o,a.rawVars?t[e]:ET(t[e],r,o,s,i),i,r,s)!==!1&&(i._pt=l=new rn(i._pt,o,e,0,1,a.render,a,0,a.priority),i!==Bs))for(c=i._ptLookup[i._targets.indexOf(o)],d=a._props.length;d--;)c[a._props[d]]=l;return a},Lr,ym,km=function n(e,t,i){var r=e.vars,o=r.ease,s=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,d=r.runBackwards,u=r.yoyoEase,h=r.keyframes,f=r.autoRevert,p=e._dur,m=e._startAt,y=e._targets,_=e.parent,g=_&&_.data==="nested"?_.vars.targets:y,v=e._overwrite==="auto"&&!vm,b=e.timeline,M,x,C,A,L,H,z,B,V,U,D,I,G;if(b&&(!h||!o)&&(o="none"),e._ease=Po(o,Vs.ease),e._yEase=u?Ev(Po(u===!0?o:u,Vs.ease)):0,u&&e._yoyo&&!e._repeat&&(u=e._yEase,e._yEase=e._ease,e._ease=u),e._from=!b&&!!r.runBackwards,!b||h&&!r.stagger){if(B=y[0]?Ir(y[0]).harness:0,I=B&&r[B.prop],M=Ed(r,Cm),m&&(m._zTime<0&&m.progress(1),t<0&&d&&a&&!f?m.render(-1,!0):m.revert(d&&p?Md:tT),m._lazy=0),s){if(kr(e._startAt=Pt.set(y,On({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!m&&fn(l),startAt:null,delay:0,onUpdate:c&&function(){return En(e,"onUpdate")},stagger:0},s))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ht||!a&&!f)&&e._startAt.revert(Md),a&&p&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&p&&!m){if(t&&(a=!1),C=On({overwrite:!1,data:"isFromStart",lazy:a&&!m&&fn(l),immediateRender:a,stagger:0,parent:_},M),I&&(C[B.prop]=I),kr(e._startAt=Pt.set(y,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ht?e._startAt.revert(Md):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,it,it);else if(!t)return}for(e._pt=e._ptCache=0,l=p&&fn(l)||l&&!p,x=0;x<y.length;x++){if(L=y[x],z=L._gsap||Em(y)[x]._gsap,e._ptLookup[x]=U={},hm[z.id]&&Rr.length&&Pd(),D=g===y?x:g.indexOf(L),B&&(V=new B).init(L,I||M,e,D,g)!==!1&&(e._pt=A=new rn(e._pt,L,V.name,0,1,V.render,V,0,V.priority),V._props.forEach(function(q){U[q]=A}),V.priority&&(H=1)),!B||I)for(C in M)dn[C]&&(V=Im(C,M,e,D,L,g))?V.priority&&(H=1):U[C]=A=Rm.call(e,L,C,"get",M[C],D,g,0,r.stringFilter);e._op&&e._op[x]&&e.kill(L,e._op[x]),v&&e._pt&&(Lr=e,gt.killTweensOf(L,U,e.globalTime(t)),G=!e.parent,Lr=0),e._pt&&l&&(hm[z.id]=1)}H&&zm(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!G,h&&t<=0&&b.render(Vn,!0,!0)},TT=function(e,t,i,r,o,s,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,u,h,f;if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,f=e._targets.length;f--;){if(d=h[f][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return ym=1,e.vars[t]="+=0",km(e,a),ym=0,l?Ul(t+" not eligible for reset"):1;c.push(d)}for(f=c.length;f--;)u=c[f],d=u._pt||u,d.s=(r||r===0)&&!o?r:d.s+(r||0)+s*d.c,d.c=i-d.s,u.e&&(u.e=bt(i)+Wt(u.e)),u.b&&(u.b=d.s+Wt(u.b))},OT=function(e,t){var i=e[0]?Ir(e[0]).harness:0,r=i&&i.aliases,o,s,a,l;if(!r)return t;o=Gs({},t);for(s in r)if(s in o)for(l=r[s].split(","),a=l.length;a--;)o[l[a]]=o[s];return o},AT=function(e,t,i,r){var o=t.ease||r||"power1.inOut",s,a;if(Zt(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:o})});else for(s in t)a=i[s]||(i[s]=[]),s==="ease"||a.push({t:parseFloat(e),v:t[s],e:o})},zl=function(e,t,i,r,o){return vt(e)?e.call(t,i,r,o):It(e)&&~e.indexOf("random(")?js(e):e},Av=Pm+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Lv={};nn(Av+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Lv[n]=1});var Pt=function(n){tv(e,n);function e(i,r,o,s){var a;typeof r=="number"&&(o.duration=r,r=o,o=null),a=n.call(this,s?r:Fl(r))||this;var l=a.vars,c=l.duration,d=l.delay,u=l.immediateRender,h=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,y=l.scrollTrigger,_=l.yoyoEase,g=r.parent||gt,v=(Zt(i)||iv(i)?Qi(i[0]):"length"in r)?[i]:Gn(i),b,M,x,C,A,L,H,z;if(a._targets=v.length?Em(v):Ul("GSAP target "+i+" not found. https://gsap.com",!pn.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||h||bd(c)||bd(d)){if(r=a.vars,b=a.timeline=new Gt({data:"nested",defaults:m||{},targets:g&&g.data==="nested"?g.vars.targets:v}),b.kill(),b.parent=b._dp=$i(a),b._start=0,h||bd(c)||bd(d)){if(C=v.length,H=h&&yv(h),Ai(h))for(A in h)~Av.indexOf(A)&&(z||(z={}),z[A]=h[A]);for(M=0;M<C;M++)x=Ed(r,Lv),x.stagger=0,_&&(x.yoyoEase=_),z&&Gs(x,z),L=v[M],x.duration=+zl(c,$i(a),M,L,v),x.delay=(+zl(d,$i(a),M,L,v)||0)-a._delay,!h&&C===1&&x.delay&&(a._delay=d=x.delay,a._start+=d,x.delay=0),b.to(L,x,H?H(M,L,v):0),b._ease=Ye.none;b.duration()?c=d=0:a.timeline=0}else if(p){Fl(On(b.vars.defaults,{ease:"none"})),b._ease=Po(p.ease||r.ease||"none");var B=0,V,U,D;if(Zt(p))p.forEach(function(I){return b.to(v,I,">")}),b.duration();else{x={};for(A in p)A==="ease"||A==="easeEach"||AT(A,p[A],x,p.easeEach);for(A in x)for(V=x[A].sort(function(I,G){return I.t-G.t}),B=0,M=0;M<V.length;M++)U=V[M],D={ease:U.e,duration:(U.t-(M?V[M-1].t:0))/100*c},D[A]=U.v,b.to(v,D,B),B+=D.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return f===!0&&!vm&&(Lr=$i(a),gt.killTweensOf(v),Lr=0),Oi(g,$i(a),o),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(u||!c&&!p&&a._start===Ot(g._time)&&fn(u)&&aT($i(a))&&g.data!=="nested")&&(a._tTime=-it,a.render(Math.max(0,-d)||0)),y&&pv($i(a),y),a}var t=e.prototype;return t.render=function(r,o,s){var a=this._time,l=this._tDur,c=this._dur,d=r<0,u=r>l-it&&!d?l:r<it?0:r,h,f,p,m,y,_,g,v,b;if(!c)cT(this,r,o,s);else if(u!==this._tTime||!r||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(h=u,v=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(m*100+r,o,s);if(h=Ot(u%m),u===l?(p=this._repeat,h=c):(y=Ot(u/m),p=~~y,p&&p===y?(h=c,p--):h>c&&(h=c)),_=this._yoyo&&p&1,_&&(b=this._yEase,h=c-h),y=Hs(this._tTime,m),h===a&&!s&&this._initted&&p===y)return this._tTime=u,this;p!==y&&(v&&this._yEase&&Tv(v,_),this.vars.repeatRefresh&&!_&&!this._lock&&h!==m&&this._initted&&(this._lock=s=1,this.render(Ot(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(mv(this,d?r:h,s,o,u))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&p!==y))return this;if(c!==this._dur)return this.render(r,o,s)}if(this._tTime=u,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(b||this._ease)(h/c),this._from&&(this.ratio=g=1-g),!a&&u&&!o&&!y&&(En(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(g,f.d),f=f._next;v&&v.render(r<0?r:v._dur*v._ease(h/this._dur),o,s)||this._startAt&&(this._zTime=r),this._onUpdate&&!o&&(d&&fm(this,r,o,s),En(this,"onUpdate")),this._repeat&&p!==y&&this.vars.onRepeat&&!o&&this.parent&&En(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(d&&!this._onUpdate&&fm(this,r,!0,!0),(r||!c)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&kr(this,1),!o&&!(d&&!a)&&(u||a||_)&&(En(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,o,s,a,l){Vl||hn.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||km(this,c),d=this._ease(c/this._dur),TT(this,r,o,s,a,d,c,l)?this.resetTo(r,o,s,a,1):(kd(this,0),this.parent||hv(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,o){if(o===void 0&&(o="all"),!r&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?kl(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ht),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(r,o,Lr&&Lr.vars.overwrite!==!0)._first||kl(this),this.parent&&s!==this.timeline.totalDuration()&&Ws(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,l=r?Gn(r):a,c=this._ptLookup,d=this._pt,u,h,f,p,m,y,_;if((!o||o==="all")&&oT(a,l))return o==="all"&&(this._pt=0),kl(this);for(u=this._op=this._op||[],o!=="all"&&(It(o)&&(m={},nn(o,function(g){return m[g]=1}),o=m),o=OT(a,o)),_=a.length;_--;)if(~l.indexOf(a[_])){h=c[_],o==="all"?(u[_]=o,p=h,f={}):(f=u[_]=u[_]||{},p=o);for(m in p)y=h&&h[m],y&&((!("kill"in y.d)||y.d.kill(m)===!0)&&Rd(this,y,"_pt"),delete h[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&d&&kl(this),this},e.to=function(r,o){return new e(r,o,arguments[2])},e.from=function(r,o){return Nl(1,arguments)},e.delayedCall=function(r,o,s,a){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:o,onReverseComplete:o,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},e.fromTo=function(r,o,s){return Nl(2,arguments)},e.set=function(r,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(r,o)},e.killTweensOf=function(r,o,s){return gt.killTweensOf(r,o,s)},e}(Gl);On(Pt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});nn("staggerTo,staggerFrom,staggerFromTo",function(n){Pt[n]=function(){var e=new Gt,t=mm.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var Dm=function(e,t,i){return e[t]=i},Rv=function(e,t,i){return e[t](i)},LT=function(e,t,i,r){return e[t](r.fp,i)},RT=function(e,t,i){return e.setAttribute(t,i)},Dd=function(e,t){return vt(e[t])?Rv:Ad(e[t])&&e.setAttribute?RT:Dm},Iv=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},IT=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Fm=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},Nm=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},kT=function(e,t,i,r){for(var o=this._pt,s;o;)s=o._next,o.p===r&&o.modifier(e,t,i),o=s},DT=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Rd(this,t,"_pt"):t.dep||(i=1),t=r;return!i},FT=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},zm=function(e){for(var t=e._pt,i,r,o,s;t;){for(i=t._next,r=o;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:s)?t._prev._next=t:o=t,(t._next=r)?r._prev=t:s=t,t=i}e._pt=o},rn=function(){function n(t,i,r,o,s,a,l,c,d){this.t=i,this.s=o,this.c=s,this.p=r,this.r=a||Iv,this.d=l||this,this.set=c||Dm,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,o){this.mSet=this.mSet||this.set,this.set=FT,this.m=i,this.mt=o,this.tween=r},n}();nn(Pm+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Cm[n]=1});Tn.TweenMax=Tn.TweenLite=Pt;Tn.TimelineLite=Tn.TimelineMax=Gt;gt=new Gt({sortChildren:!1,defaults:Vs,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});pn.stringFilter=Am;var Eo=[],Sd={},NT=[],ev=0,zT=0,am=function(e){return(Sd[e]||NT).map(function(t){return t()})},xm=function(){var e=Date.now(),t=[];e-ev>2&&(am("matchMediaInit"),Eo.forEach(function(i){var r=i.queries,o=i.conditions,s,a,l,c;for(a in r)s=Ti.matchMedia(r[a]).matches,s&&(l=1),s!==o[a]&&(o[a]=s,c=1);c&&(i.revert(),l&&t.push(i))}),am("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),ev=e,am("matchMedia"))},kv=function(){function n(t,i){this.selector=i&&gm(i),this.data=[],this._r=[],this.isReverted=!1,this.id=zT++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,o){vt(i)&&(o=r,r=i,i=vt);var s=this,a=function(){var c=ft,d=s.selector,u;return c&&c!==s&&c.data.push(s),o&&(s.selector=gm(o)),ft=s,u=r.apply(s,arguments),vt(u)&&s._r.push(u),ft=c,s.selector=d,s.isReverted=!1,u};return s.last=a,i===vt?a(s,function(l){return s.add(null,l)}):i?s[i]=a:a},e.ignore=function(i){var r=ft;ft=null,i(this),ft=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Pt&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var o=this;if(i?function(){for(var a=o.getTweens(),l=o.data.length,c;l--;)c=o.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,u){return u.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),l=o.data.length;l--;)c=o.data[l],c instanceof Gt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Pt)&&c.revert&&c.revert(i);o._r.forEach(function(d){return d(i,o)}),o.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var s=Eo.length;s--;)Eo[s].id===this.id&&Eo.splice(s,1)},e.revert=function(i){this.kill(i||{})},n}(),UT=function(){function n(t){this.contexts=[],this.scope=t,ft&&ft.data.push(this)}var e=n.prototype;return e.add=function(i,r,o){Ai(i)||(i={matches:i});var s=new kv(0,o||this.scope),a=s.conditions={},l,c,d;ft&&!s.selector&&(s.selector=ft.selector),this.contexts.push(s),r=s.add("onMatch",r),s.queries=i;for(c in i)c==="all"?d=1:(l=Ti.matchMedia(i[c]),l&&(Eo.indexOf(s)<0&&Eo.push(s),(a[c]=l.matches)&&(d=1),l.addListener?l.addListener(xm):l.addEventListener("change",xm)));return d&&r(s,function(u){return s.add(null,u)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),Od={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return Sv(r)})},timeline:function(e){return new Gt(e)},getTweensOf:function(e,t){return gt.getTweensOf(e,t)},getProperty:function(e,t,i,r){It(e)&&(e=Gn(e)[0]);var o=Ir(e||{}).get,s=i?dv:uv;return i==="native"&&(i=""),e&&(t?s((dn[t]&&dn[t].get||o)(e,t,i,r)):function(a,l,c){return s((dn[a]&&dn[a].get||o)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Gn(e),e.length>1){var r=e.map(function(d){return Jt.quickSetter(d,t,i)}),o=r.length;return function(d){for(var u=o;u--;)r[u](d)}}e=e[0]||{};var s=dn[t],a=Ir(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=s?function(d){var u=new s;Bs._pt=0,u.init(e,i?d+i:d,Bs,0,[e]),u.render(1,u),Bs._pt&&Nm(1,Bs)}:a.set(e,l);return s?c:function(d){return c(e,l,i?d+i:d,a,1)}},quickTo:function(e,t,i){var r,o=Jt.to(e,On((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),s=function(l,c,d){return o.resetTo(t,l,c,d)};return s.tween=o,s},isTweening:function(e){return gt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Po(e.ease,Vs.ease)),Zx(Vs,e||{})},config:function(e){return Zx(pn,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,o=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!dn[a]&&!Tn[a]&&Ul(t+" effect requires "+a+" plugin.")}),im[t]=function(a,l,c){return i(Gn(a),On(l||{},o),c)},s&&(Gt.prototype[t]=function(a,l,c){return this.add(im[t](a,Ai(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Ye[e]=Po(t)},parseEase:function(e,t){return arguments.length?Po(e,t):Ye},getById:function(e){return gt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Gt(e),r,o;for(i.smoothChildTiming=fn(e.smoothChildTiming),gt.remove(i),i._dp=0,i._time=i._tTime=gt._time,r=gt._first;r;)o=r._next,(t||!(!r._dur&&r instanceof Pt&&r.vars.onComplete===r._targets[0]))&&Oi(i,r,r._start-r._delay),r=o;return Oi(gt,i,0),i},context:function(e,t){return e?new kv(e,t):ft},matchMedia:function(e){return new UT(e)},matchMediaRefresh:function(){return Eo.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||xm()},addEventListener:function(e,t){var i=Sd[e]||(Sd[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Sd[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:_T,wrapYoyo:yT,distribute:yv,random:vv,snap:xv,normalize:gT,getUnit:Wt,clamp:hT,splitColor:Cv,toArray:Gn,selector:gm,mapRange:Mv,pipe:pT,unitize:mT,interpolate:xT,shuffle:_v},install:sv,effects:im,ticker:hn,updateRoot:Gt.updateRoot,plugins:dn,globalTimeline:gt,core:{PropTween:rn,globals:av,Tween:Pt,Timeline:Gt,Animation:Gl,getCache:Ir,_removeLinkedListItem:Rd,reverting:function(){return Ht},context:function(e){return e&&ft&&(ft.data.push(e),e._ctx=ft),ft},suppressOverwrites:function(e){return vm=e}}};nn("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Od[n]=Pt[n]});hn.add(Gt.updateRoot);Bs=Od.to({},{duration:0});var BT=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},VT=function(e,t){var i=e._targets,r,o,s;for(r in t)for(o=i.length;o--;)s=e._ptLookup[o][r],s&&(s=s.d)&&(s._pt&&(s=BT(s,r)),s&&s.modifier&&s.modifier(t[r],e,i[o],r))},lm=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,o,s){s._onInit=function(a){var l,c;if(It(o)&&(l={},nn(o,function(d){return l[d]=1}),o=l),t){l={};for(c in o)l[c]=t(o[c]);o=l}VT(a,o)}}}},Jt=Od.registerPlugin({name:"attr",init:function(e,t,i,r,o){var s,a,l;this.tween=i;for(s in t)l=e.getAttribute(s)||"",a=this.add(e,"setAttribute",(l||0)+"",t[s],r,o,0,0,s),a.op=s,a.b=l,this._props.push(s)},render:function(e,t){for(var i=t._pt;i;)Ht?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},lm("roundProps",_m),lm("modifiers"),lm("snap",xv))||Od;Pt.version=Gt.version=Jt.version="3.13.0";ov=1;bm()&&qs();var GT=Ye.Power0,HT=Ye.Power1,WT=Ye.Power2,qT=Ye.Power3,jT=Ye.Power4,YT=Ye.Linear,XT=Ye.Quad,ZT=Ye.Cubic,JT=Ye.Quart,$T=Ye.Quint,KT=Ye.Strong,QT=Ye.Elastic,eO=Ye.Back,tO=Ye.SteppedEase,nO=Ye.Bounce,iO=Ye.Sine,rO=Ye.Expo,oO=Ye.Circ;var Dv,Fr,Xs,Wm,ko,sO,Fv,qm,aO=function(){return typeof window<"u"},tr={},Io=180/Math.PI,Zs=Math.PI/180,Ys=Math.atan2,Nv=1e8,jm=/([A-Z])/g,lO=/(left|right|width|margin|padding|x)/i,cO=/[\s,\(]\S/,Li={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Bm=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},uO=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},dO=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},hO=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},qv=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},jv=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},fO=function(e,t,i){return e.style[t]=i},pO=function(e,t,i){return e.style.setProperty(t,i)},mO=function(e,t,i){return e._gsap[t]=i},gO=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},_O=function(e,t,i,r,o){var s=e._gsap;s.scaleX=s.scaleY=i,s.renderTransform(o,s)},yO=function(e,t,i,r,o){var s=e._gsap;s[t]=i,s.renderTransform(o,s)},_t="transform",mn=_t+"Origin",xO=function n(e,t){var i=this,r=this.target,o=r.style,s=r._gsap;if(e in tr&&o){if(this.tfm=this.tfm||{},e!=="transform")e=Li[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=er(r,a)}):this.tfm[e]=s.x?s[e]:er(r,e),e===mn&&(this.tfm.zOrigin=s.zOrigin);else return Li.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(_t)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(mn,t,"")),e=_t}(o||t)&&this.props.push(e,t,o[e])},Yv=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},vO=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,o,s;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?t[e[o]](e[o+2]):t[e[o]]=e[o+2]:e[o+2]?i[e[o]]=e[o+2]:i.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(jm,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)r[s]=this.tfm[s];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),o=qm(),(!o||!o.isStart)&&!i[_t]&&(Yv(i),r.zOrigin&&i[mn]&&(i[mn]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Xv=function(e,t){var i={target:e,props:[],revert:vO,save:xO};return e._gsap||Jt.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},Zv,Vm=function(e,t){var i=Fr.createElementNS?Fr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Fr.createElement(e);return i&&i.style?i:Fr.createElement(e)},Hn=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(jm,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Js(t)||t,1)||""},zv="O,Moz,ms,Ms,Webkit".split(","),Js=function(e,t,i){var r=t||ko,o=r.style,s=5;if(e in o&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(zv[s]+e in o););return s<0?null:(s===3?"ms":s>=0?zv[s]:"")+e},Gm=function(){aO()&&window.document&&(Dv=window,Fr=Dv.document,Xs=Fr.documentElement,ko=Vm("div")||{style:{}},sO=Vm("div"),_t=Js(_t),mn=_t+"Origin",ko.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Zv=!!Js("perspective"),qm=Jt.core.reverting,Wm=1)},Uv=function(e){var t=e.ownerSVGElement,i=Vm("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),o;r.style.display="block",i.appendChild(r),Xs.appendChild(i);try{o=r.getBBox()}catch{}return i.removeChild(r),Xs.removeChild(i),o},Bv=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Jv=function(e){var t,i;try{t=e.getBBox()}catch{t=Uv(e),i=1}return t&&(t.width||t.height)||i||(t=Uv(e)),t&&!t.width&&!t.x&&!t.y?{x:+Bv(e,["x","cx","x1"])||0,y:+Bv(e,["y","cy","y1"])||0,width:0,height:0}:t},$v=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Jv(e))},Do=function(e,t){if(t){var i=e.style,r;t in tr&&t!==mn&&(t=_t),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(jm,"-$1").toLowerCase())):i.removeAttribute(t)}},Nr=function(e,t,i,r,o,s){var a=new rn(e._pt,t,i,0,1,s?jv:qv);return e._pt=a,a.b=r,a.e=o,e._props.push(i),a},Vv={deg:1,rad:1,turn:1},bO={grid:1,flex:1},zr=function n(e,t,i,r){var o=parseFloat(i)||0,s=(i+"").trim().substr((o+"").length)||"px",a=ko.style,l=lO.test(t),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),u=100,h=r==="px",f=r==="%",p,m,y,_;if(r===s||!o||Vv[r]||Vv[s])return o;if(s!=="px"&&!h&&(o=n(e,t,i,"px")),_=e.getCTM&&$v(e),(f||s==="%")&&(tr[t]||~t.indexOf("adius")))return p=_?e.getBBox()[l?"width":"height"]:e[d],bt(f?o/p*u:o/100*p);if(a[l?"width":"height"]=u+(h?s:r),m=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Fr||!m.appendChild)&&(m=Fr.body),y=m._gsap,y&&f&&y.width&&l&&y.time===hn.time&&!y.uncache)return bt(o/y.width*u);if(f&&(t==="height"||t==="width")){var g=e.style[t];e.style[t]=u+r,p=e[d],g?e.style[t]=g:Do(e,t)}else(f||s==="%")&&!bO[Hn(m,"display")]&&(a.position=Hn(e,"position")),m===e&&(a.position="static"),m.appendChild(ko),p=ko[d],m.removeChild(ko),a.position="absolute";return l&&f&&(y=Ir(m),y.time=hn.time,y.width=m[d]),bt(h?p*o/u:p&&o?u/p*o:0)},er=function(e,t,i,r){var o;return Wm||Gm(),t in Li&&t!=="transform"&&(t=Li[t],~t.indexOf(",")&&(t=t.split(",")[0])),tr[t]&&t!=="transform"?(o=jl(e,r),o=t!=="transformOrigin"?o[t]:o.svg?o.origin:Nd(Hn(e,mn))+" "+o.zOrigin+"px"):(o=e.style[t],(!o||o==="auto"||r||~(o+"").indexOf("calc("))&&(o=Fd[t]&&Fd[t](e,t,i)||Hn(e,t)||Tm(e,t)||(t==="opacity"?1:0))),i&&!~(o+"").trim().indexOf(" ")?zr(e,t,o,i)+i:o},MO=function(e,t,i,r){if(!i||i==="none"){var o=Js(t,e,1),s=o&&Hn(e,o,1);s&&s!==i?(t=o,i=s):t==="borderColor"&&(i=Hn(e,"borderTopColor"))}var a=new rn(this._pt,e.style,t,0,1,Fm),l=0,c=0,d,u,h,f,p,m,y,_,g,v,b,M;if(a.b=i,a.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Hn(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(m=e.style[t],e.style[t]=r,r=Hn(e,t)||r,m?e.style[t]=m:Do(e,t)),d=[i,r],Am(d),i=d[0],r=d[1],h=i.match(To)||[],M=r.match(To)||[],M.length){for(;u=To.exec(r);)y=u[0],g=r.substring(l,u.index),p?p=(p+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(p=1),y!==(m=h[c++]||"")&&(f=parseFloat(m)||0,b=m.substr((f+"").length),y.charAt(1)==="="&&(y=Oo(f,y)+b),_=parseFloat(y),v=y.substr((_+"").length),l=To.lastIndex-v.length,v||(v=v||pn.units[t]||b,l===r.length&&(r+=v,a.e+=v)),b!==v&&(f=zr(e,t,m,v)||0),a._pt={_next:a._pt,p:g||c===1?g:",",s:f,c:_-f,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?jv:qv;return wm.test(r)&&(a.e=0),this._pt=a,a},Gv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},wO=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=Gv[i]||i,t[1]=Gv[r]||r,t.join(" ")},SO=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,o=t.u,s=i._gsap,a,l,c;if(o==="all"||o===!0)r.cssText="",l=1;else for(o=o.split(","),c=o.length;--c>-1;)a=o[c],tr[a]&&(l=1,a=a==="transformOrigin"?mn:_t),Do(i,a);l&&(Do(i,_t),s&&(s.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",jl(i,1),s.uncache=1,Yv(r)))}},Fd={clearProps:function(e,t,i,r,o){if(o.data!=="isFromStart"){var s=e._pt=new rn(e._pt,t,i,0,0,SO);return s.u=r,s.pr=-10,s.tween=o,e._props.push(i),1}}},ql=[1,0,0,1,0,0],Kv={},Qv=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Hv=function(e){var t=Hn(e,_t);return Qv(t)?ql:t.substr(7).match(Mm).map(bt)},Ym=function(e,t){var i=e._gsap||Ir(e),r=e.style,o=Hv(e),s,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,o=[l.a,l.b,l.c,l.d,l.e,l.f],o.join(",")==="1,0,0,1,0,0"?ql:o):(o===ql&&!e.offsetParent&&e!==Xs&&!i.svg&&(l=r.display,r.display="block",s=e.parentNode,(!s||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,Xs.appendChild(e)),o=Hv(e),l?r.display=l:Do(e,"display"),c&&(a?s.insertBefore(e,a):s?s.appendChild(e):Xs.removeChild(e))),t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},Hm=function(e,t,i,r,o,s){var a=e._gsap,l=o||Ym(e,!0),c=a.xOrigin||0,d=a.yOrigin||0,u=a.xOffset||0,h=a.yOffset||0,f=l[0],p=l[1],m=l[2],y=l[3],_=l[4],g=l[5],v=t.split(" "),b=parseFloat(v[0])||0,M=parseFloat(v[1])||0,x,C,A,L;i?l!==ql&&(C=f*y-p*m)&&(A=b*(y/C)+M*(-m/C)+(m*g-y*_)/C,L=b*(-p/C)+M*(f/C)-(f*g-p*_)/C,b=A,M=L):(x=Jv(e),b=x.x+(~v[0].indexOf("%")?b/100*x.width:b),M=x.y+(~(v[1]||v[0]).indexOf("%")?M/100*x.height:M)),r||r!==!1&&a.smooth?(_=b-c,g=M-d,a.xOffset=u+(_*f+g*m)-_,a.yOffset=h+(_*p+g*y)-g):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=M,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[mn]="0px 0px",s&&(Nr(s,a,"xOrigin",c,b),Nr(s,a,"yOrigin",d,M),Nr(s,a,"xOffset",u,a.xOffset),Nr(s,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+M)},jl=function(e,t){var i=e._gsap||new Lm(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,o=i.scaleX<0,s="px",a="deg",l=getComputedStyle(e),c=Hn(e,mn)||"0",d,u,h,f,p,m,y,_,g,v,b,M,x,C,A,L,H,z,B,V,U,D,I,G,q,Z,Q,ie,ge,Pe,ve,X;return d=u=h=m=y=_=g=v=b=0,f=p=1,i.svg=!!(e.getCTM&&$v(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[_t]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[_t]!=="none"?l[_t]:"")),r.scale=r.rotate=r.translate="none"),C=Ym(e,i.svg),i.svg&&(i.uncache?(q=e.getBBox(),c=i.xOrigin-q.x+"px "+(i.yOrigin-q.y)+"px",G=""):G=!t&&e.getAttribute("data-svg-origin"),Hm(e,G||c,!!G||i.originIsAbsolute,i.smooth!==!1,C)),M=i.xOrigin||0,x=i.yOrigin||0,C!==ql&&(z=C[0],B=C[1],V=C[2],U=C[3],d=D=C[4],u=I=C[5],C.length===6?(f=Math.sqrt(z*z+B*B),p=Math.sqrt(U*U+V*V),m=z||B?Ys(B,z)*Io:0,g=V||U?Ys(V,U)*Io+m:0,g&&(p*=Math.abs(Math.cos(g*Zs))),i.svg&&(d-=M-(M*z+x*V),u-=x-(M*B+x*U))):(X=C[6],Pe=C[7],Q=C[8],ie=C[9],ge=C[10],ve=C[11],d=C[12],u=C[13],h=C[14],A=Ys(X,ge),y=A*Io,A&&(L=Math.cos(-A),H=Math.sin(-A),G=D*L+Q*H,q=I*L+ie*H,Z=X*L+ge*H,Q=D*-H+Q*L,ie=I*-H+ie*L,ge=X*-H+ge*L,ve=Pe*-H+ve*L,D=G,I=q,X=Z),A=Ys(-V,ge),_=A*Io,A&&(L=Math.cos(-A),H=Math.sin(-A),G=z*L-Q*H,q=B*L-ie*H,Z=V*L-ge*H,ve=U*H+ve*L,z=G,B=q,V=Z),A=Ys(B,z),m=A*Io,A&&(L=Math.cos(A),H=Math.sin(A),G=z*L+B*H,q=D*L+I*H,B=B*L-z*H,I=I*L-D*H,z=G,D=q),y&&Math.abs(y)+Math.abs(m)>359.9&&(y=m=0,_=180-_),f=bt(Math.sqrt(z*z+B*B+V*V)),p=bt(Math.sqrt(I*I+X*X)),A=Ys(D,I),g=Math.abs(A)>2e-4?A*Io:0,b=ve?1/(ve<0?-ve:ve):0),i.svg&&(G=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Qv(Hn(e,_t)),G&&e.setAttribute("transform",G))),Math.abs(g)>90&&Math.abs(g)<270&&(o?(f*=-1,g+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,g+=g<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+s,i.y=u-((i.yPercent=u&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+s,i.z=h+s,i.scaleX=bt(f),i.scaleY=bt(p),i.rotation=bt(m)+a,i.rotationX=bt(y)+a,i.rotationY=bt(_)+a,i.skewX=g+a,i.skewY=v+a,i.transformPerspective=b+s,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[mn]=Nd(c)),i.xOffset=i.yOffset=0,i.force3D=pn.force3D,i.renderTransform=i.svg?PO:Zv?eb:CO,i.uncache=0,i},Nd=function(e){return(e=e.split(" "))[0]+" "+e[1]},Um=function(e,t,i){var r=Wt(t);return bt(parseFloat(t)+parseFloat(zr(e,"x",i+"px",r)))+r},CO=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,eb(e,t)},Lo="0deg",Wl="0px",Ro=") ",eb=function(e,t){var i=t||this,r=i.xPercent,o=i.yPercent,s=i.x,a=i.y,l=i.z,c=i.rotation,d=i.rotationY,u=i.rotationX,h=i.skewX,f=i.skewY,p=i.scaleX,m=i.scaleY,y=i.transformPerspective,_=i.force3D,g=i.target,v=i.zOrigin,b="",M=_==="auto"&&e&&e!==1||_===!0;if(v&&(u!==Lo||d!==Lo)){var x=parseFloat(d)*Zs,C=Math.sin(x),A=Math.cos(x),L;x=parseFloat(u)*Zs,L=Math.cos(x),s=Um(g,s,C*L*-v),a=Um(g,a,-Math.sin(x)*-v),l=Um(g,l,A*L*-v+v)}y!==Wl&&(b+="perspective("+y+Ro),(r||o)&&(b+="translate("+r+"%, "+o+"%) "),(M||s!==Wl||a!==Wl||l!==Wl)&&(b+=l!==Wl||M?"translate3d("+s+", "+a+", "+l+") ":"translate("+s+", "+a+Ro),c!==Lo&&(b+="rotate("+c+Ro),d!==Lo&&(b+="rotateY("+d+Ro),u!==Lo&&(b+="rotateX("+u+Ro),(h!==Lo||f!==Lo)&&(b+="skew("+h+", "+f+Ro),(p!==1||m!==1)&&(b+="scale("+p+", "+m+Ro),g.style[_t]=b||"translate(0, 0)"},PO=function(e,t){var i=t||this,r=i.xPercent,o=i.yPercent,s=i.x,a=i.y,l=i.rotation,c=i.skewX,d=i.skewY,u=i.scaleX,h=i.scaleY,f=i.target,p=i.xOrigin,m=i.yOrigin,y=i.xOffset,_=i.yOffset,g=i.forceCSS,v=parseFloat(s),b=parseFloat(a),M,x,C,A,L;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=Zs,c*=Zs,M=Math.cos(l)*u,x=Math.sin(l)*u,C=Math.sin(l-c)*-h,A=Math.cos(l-c)*h,c&&(d*=Zs,L=Math.tan(c-d),L=Math.sqrt(1+L*L),C*=L,A*=L,d&&(L=Math.tan(d),L=Math.sqrt(1+L*L),M*=L,x*=L)),M=bt(M),x=bt(x),C=bt(C),A=bt(A)):(M=u,A=h,x=C=0),(v&&!~(s+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(v=zr(f,"x",s,"px"),b=zr(f,"y",a,"px")),(p||m||y||_)&&(v=bt(v+p-(p*M+m*C)+y),b=bt(b+m-(p*x+m*A)+_)),(r||o)&&(L=f.getBBox(),v=bt(v+r/100*L.width),b=bt(b+o/100*L.height)),L="matrix("+M+","+x+","+C+","+A+","+v+","+b+")",f.setAttribute("transform",L),g&&(f.style[_t]=L)},EO=function(e,t,i,r,o){var s=360,a=It(o),l=parseFloat(o)*(a&&~o.indexOf("rad")?Io:1),c=l-r,d=r+c+"deg",u,h;return a&&(u=o.split("_")[1],u==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),u==="cw"&&c<0?c=(c+s*Nv)%s-~~(c/s)*s:u==="ccw"&&c>0&&(c=(c-s*Nv)%s-~~(c/s)*s)),e._pt=h=new rn(e._pt,t,i,r,c,uO),h.e=d,h.u="deg",e._props.push(i),h},Wv=function(e,t){for(var i in t)e[i]=t[i];return e},TO=function(e,t,i){var r=Wv({},i._gsap),o="perspective,force3D,transformOrigin,svgOrigin",s=i.style,a,l,c,d,u,h,f,p;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),s[_t]=t,a=jl(i,1),Do(i,_t),i.setAttribute("transform",c)):(c=getComputedStyle(i)[_t],s[_t]=t,a=jl(i,1),s[_t]=c);for(l in tr)c=r[l],d=a[l],c!==d&&o.indexOf(l)<0&&(f=Wt(c),p=Wt(d),u=f!==p?zr(i,l,c,p):parseFloat(c),h=parseFloat(d),e._pt=new rn(e._pt,a,l,u,h-u,Bm),e._pt.u=p||0,e._props.push(l));Wv(a,r)};nn("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",o="Left",s=(e<3?[t,i,r,o]:[t+o,t+i,r+i,r+o]).map(function(a){return e<2?n+a:"border"+a+n});Fd[e>1?"border"+n:n]=function(a,l,c,d,u){var h,f;if(arguments.length<4)return h=s.map(function(p){return er(a,p,c)}),f=h.join(" "),f.split(h[0]).length===5?h[0]:f;h=(d+"").split(" "),f={},s.forEach(function(p,m){return f[p]=h[m]=h[m]||h[(m-1)/2|0]}),a.init(l,f,u)}});var Xm={name:"css",register:Gm,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,o){var s=this._props,a=e.style,l=i.vars.startAt,c,d,u,h,f,p,m,y,_,g,v,b,M,x,C,A;Wm||Gm(),this.styles=this.styles||Xv(e),A=this.styles.props,this.tween=i;for(m in t)if(m!=="autoRound"&&(d=t[m],!(dn[m]&&Im(m,t,i,r,e,o)))){if(f=typeof d,p=Fd[m],f==="function"&&(d=d.call(i,r,e,o),f=typeof d),f==="string"&&~d.indexOf("random(")&&(d=js(d)),p)p(this,e,m,d,i)&&(C=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),d+="",Ki.lastIndex=0,Ki.test(c)||(y=Wt(c),_=Wt(d)),_?y!==_&&(c=zr(e,m,c,_)+_):y&&(d+=y),this.add(a,"setProperty",c,d,r,o,0,0,m),s.push(m),A.push(m,0,a[m]);else if(f!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(i,r,e,o):l[m],It(c)&&~c.indexOf("random(")&&(c=js(c)),Wt(c+"")||c==="auto"||(c+=pn.units[m]||Wt(er(e,m))||""),(c+"").charAt(1)==="="&&(c=er(e,m))):c=er(e,m),h=parseFloat(c),g=f==="string"&&d.charAt(1)==="="&&d.substr(0,2),g&&(d=d.substr(2)),u=parseFloat(d),m in Li&&(m==="autoAlpha"&&(h===1&&er(e,"visibility")==="hidden"&&u&&(h=0),A.push("visibility",0,a.visibility),Nr(this,a,"visibility",h?"inherit":"hidden",u?"inherit":"hidden",!u)),m!=="scale"&&m!=="transform"&&(m=Li[m],~m.indexOf(",")&&(m=m.split(",")[0]))),v=m in tr,v){if(this.styles.save(m),f==="string"&&d.substring(0,6)==="var(--"&&(d=Hn(e,d.substring(4,d.indexOf(")"))),u=parseFloat(d)),b||(M=e._gsap,M.renderTransform&&!t.parseTransform||jl(e,t.parseTransform),x=t.smoothOrigin!==!1&&M.smooth,b=this._pt=new rn(this._pt,a,_t,0,1,M.renderTransform,M,0,-1),b.dep=1),m==="scale")this._pt=new rn(this._pt,M,"scaleY",M.scaleY,(g?Oo(M.scaleY,g+u):u)-M.scaleY||0,Bm),this._pt.u=0,s.push("scaleY",m),m+="X";else if(m==="transformOrigin"){A.push(mn,0,a[mn]),d=wO(d),M.svg?Hm(e,d,0,x,0,this):(_=parseFloat(d.split(" ")[2])||0,_!==M.zOrigin&&Nr(this,M,"zOrigin",M.zOrigin,_),Nr(this,a,m,Nd(c),Nd(d)));continue}else if(m==="svgOrigin"){Hm(e,d,1,x,0,this);continue}else if(m in Kv){EO(this,M,m,h,g?Oo(h,g+d):d);continue}else if(m==="smoothOrigin"){Nr(this,M,"smooth",M.smooth,d);continue}else if(m==="force3D"){M[m]=d;continue}else if(m==="transform"){TO(this,d,e);continue}}else m in a||(m=Js(m)||m);if(v||(u||u===0)&&(h||h===0)&&!cO.test(d)&&m in a)y=(c+"").substr((h+"").length),u||(u=0),_=Wt(d)||(m in pn.units?pn.units[m]:y),y!==_&&(h=zr(e,m,c,_)),this._pt=new rn(this._pt,v?M:a,m,h,(g?Oo(h,g+u):u)-h,!v&&(_==="px"||m==="zIndex")&&t.autoRound!==!1?hO:Bm),this._pt.u=_||0,y!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=dO);else if(m in a)MO.call(this,e,m,c,g?g+d:d);else if(m in e)this.add(e,m,c||e[m],g?g+d:d,r,o);else if(m!=="parseTransform"){Ld(m,d);continue}v||(m in a?A.push(m,0,a[m]):typeof e[m]=="function"?A.push(m,2,e[m]()):A.push(m,1,c||e[m])),s.push(m)}}C&&zm(this)},render:function(e,t){if(t.tween._time||!qm())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:er,aliases:Li,getSetter:function(e,t,i){var r=Li[t];return r&&r.indexOf(",")<0&&(t=r),t in tr&&t!==mn&&(e._gsap.x||er(e,"x"))?i&&Fv===i?t==="scale"?gO:mO:(Fv=i||{})&&(t==="scale"?_O:yO):e.style&&!Ad(e.style[t])?fO:~t.indexOf("-")?pO:Dd(e,t)},core:{_removeProperty:Do,_getMatrix:Ym}};Jt.utils.checkPrefix=Js;Jt.core.getStyleSaver=Xv;(function(n,e,t,i){var r=nn(n+","+e+","+t,function(o){tr[o]=1});nn(e,function(o){pn.units[o]="deg",Kv[o]=1}),Li[r[13]]=n+","+e,nn(i,function(o){var s=o.split(":");Li[s[1]]=r[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");nn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){pn.units[n]="px"});Jt.registerPlugin(Xm);var $s=Jt.registerPlugin(Xm)||Jt,IA=$s.core.Tween;var OO=["loginCard"],AO=["loginSlogan"];function LO(n,e){n&1&&(S(0,"span"),O(1,"Email is required."),w())}function RO(n,e){n&1&&(S(0,"span"),O(1,"Invalid email format."),w())}function IO(n,e){if(n&1&&(S(0,"div",31),ae(1,LO,2,0,"span",32)(2,RO,2,0,"span",32),w()),n&2){let t,i,r=me(2);N(),W("ngIf",(t=r.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),N(),W("ngIf",(i=r.loginForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function kO(n,e){n&1&&(S(0,"span"),O(1,"Password is required."),w())}function DO(n,e){n&1&&(S(0,"span"),O(1,"Password must be at least 6 characters."),w())}function FO(n,e){if(n&1&&(S(0,"div",31),ae(1,kO,2,0,"span",32)(2,DO,2,0,"span",32),w()),n&2){let t,i,r=me(2);N(),W("ngIf",(t=r.loginForm.get("password"))==null||t.errors==null?null:t.errors.required),N(),W("ngIf",(i=r.loginForm.get("password"))==null||i.errors==null?null:i.errors.minlength)}}function NO(n,e){if(n&1&&(S(0,"div",33),k(1,"i",34),O(2),w()),n&2){let t=me(2);N(2),Je("",t.loginError," ")}}function zO(n,e){n&1&&k(0,"span",35)}function UO(n,e){if(n&1){let t=ut();S(0,"form",15),Ae("ngSubmit",function(){We(t);let r=me();return qe(r.onSubmit())}),S(1,"div",16)(2,"label",17),O(3,"Email"),w(),S(4,"div",18),k(5,"i",19)(6,"input",20),w(),ae(7,IO,3,2,"div",21),w(),S(8,"div",16)(9,"label",22),O(10,"Password"),w(),S(11,"div",18),k(12,"i",23)(13,"input",24),S(14,"button",25),Ae("click",function(){We(t);let r=me();return qe(r.togglePasswordVisibility())}),k(15,"i",26),w()(),ae(16,FO,3,2,"div",21),w(),ae(17,NO,3,1,"div",27),S(18,"button",28),ae(19,zO,1,0,"span",29),O(20),w(),S(21,"div",30)(22,"a",14),Ae("click",function(){We(t);let r=me();return qe(r.toggleForgotPassword())}),O(23,"Forgot Password?"),w()()()}if(n&2){let t,i,r=me();W("formGroup",r.loginForm),N(7),W("ngIf",((t=r.loginForm.get("email"))==null?null:t.invalid)&&(((t=r.loginForm.get("email"))==null?null:t.dirty)||((t=r.loginForm.get("email"))==null?null:t.touched))),N(6),W("type",r.showPassword?"text":"password"),N(2),dt("bi-eye",!r.showPassword)("bi-eye-slash",r.showPassword),N(),W("ngIf",((i=r.loginForm.get("password"))==null?null:i.invalid)&&(((i=r.loginForm.get("password"))==null?null:i.dirty)||((i=r.loginForm.get("password"))==null?null:i.touched))),N(),W("ngIf",r.loginError),N(),W("disabled",r.loadingLogin),N(),W("ngIf",r.loadingLogin),N(),Je(" ",r.loadingLogin?"Signing In...":"Sign In"," ")}}function BO(n,e){n&1&&(S(0,"span"),O(1,"Email is required."),w())}function VO(n,e){n&1&&(S(0,"span"),O(1,"Invalid email format."),w())}function GO(n,e){if(n&1&&(S(0,"div",31),ae(1,BO,2,0,"span",32)(2,VO,2,0,"span",32),w()),n&2){let t,i,r=me(2);N(),W("ngIf",(t=r.forgotPasswordForm.get("email"))==null||t.errors==null?null:t.errors.required),N(),W("ngIf",(i=r.forgotPasswordForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function HO(n,e){if(n&1&&(S(0,"div",39),k(1,"i",40),O(2),w()),n&2){let t=me(2);W("ngClass",t.forgotPasswordMessage.includes("Failed")?"alert-danger":"alert-success"),N(2),Je("",t.forgotPasswordMessage," ")}}function WO(n,e){n&1&&k(0,"span",35)}function qO(n,e){if(n&1){let t=ut();S(0,"form",15),Ae("ngSubmit",function(){We(t);let r=me();return qe(r.onForgotPassword())}),S(1,"div",16)(2,"label",36),O(3,"Email"),w(),S(4,"div",18),k(5,"i",19)(6,"input",37),w(),ae(7,GO,3,2,"div",21),w(),ae(8,HO,3,2,"div",38),S(9,"button",28),ae(10,WO,1,0,"span",29),O(11),w(),S(12,"div",30)(13,"a",14),Ae("click",function(){We(t);let r=me();return qe(r.toggleForgotPassword())}),O(14,"Back to Sign In"),w()()()}if(n&2){let t,i=me();W("formGroup",i.forgotPasswordForm),N(7),W("ngIf",((t=i.forgotPasswordForm.get("email"))==null?null:t.invalid)&&(((t=i.forgotPasswordForm.get("email"))==null?null:t.dirty)||((t=i.forgotPasswordForm.get("email"))==null?null:t.touched))),N(),W("ngIf",i.forgotPasswordMessage),N(),W("disabled",i.loadingForgotPassword),N(),W("ngIf",i.loadingForgotPassword),N(),Je(" ",i.loadingForgotPassword?"Sending...":"Send Reset Link"," ")}}var zd=class n{constructor(e,t,i){this.fb=e;this.authService=t;this.router=i;this.loginForm=this.fb.group({email:["",[ze.required,ze.email]],password:["",[ze.required,ze.minLength(6)]]}),this.forgotPasswordForm=this.fb.group({email:["",[ze.required,ze.email]]})}loginForm;forgotPasswordForm;showForgotPassword=!1;loadingLogin=!1;loadingForgotPassword=!1;loginError="";forgotPasswordMessage="";currentYear=new Date().getFullYear();showPassword=!1;loginCard;loginSlogan;ngAfterViewInit(){this.loginCard&&$s.from(this.loginCard.nativeElement,{opacity:0,y:40,duration:1,ease:"power3.out"});let e="your pick of rides at low prices",t=this.loginSlogan?.nativeElement;if(t){let r=function(){let o=t;o.innerHTML="";let s="Dispatch Your Goods at ",a="Low Prices",l="",c="Deliver More, Pay ",d="Less",u="";function h(f,p,m,y){o.innerHTML="";let _=document.createElement("span"),g=document.createElement("span");g.className="red-word";let v=document.createElement("span");o.appendChild(_),o.appendChild(g),o.appendChild(v);let b=0,M=0,x=0;function C(){b<f.length?(_.innerHTML+=f[b]===" "?"&nbsp;":f[b],b++,setTimeout(C,40)):M<p.length?(g.innerHTML+=p[M]===" "?"&nbsp;":p[M],M++,setTimeout(C,40)):x<m.length?(v.innerHTML+=m[x]===" "?"&nbsp;":m[x],x++,setTimeout(C,40)):setTimeout(y,1200)}C()}h(s,a,l,()=>{o.style.transition="opacity 0.5s",o.style.opacity="0",setTimeout(()=>{o.style.opacity="1",h(c,d,u,()=>{})},1e3)})};var i=r;t.innerHTML="",r()}}ngOnDestroy(){}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loadingLogin=!0,this.loginError="";let e={email:this.loginForm.get("email")?.value,password:this.loginForm.get("password")?.value};this.authService.login(e).subscribe({next:t=>{console.log(t),this.loadingLogin=!1;let i=t.data||{};this.authService.setToken(i.token),localStorage.setItem("username",i.username),localStorage.setItem("userId",i.userId),localStorage.setItem("email",i.email),this.router.navigate(["/dashboard"])},error:t=>{this.loadingLogin=!1,this.loginError=t?.error?.message||"Login failed. Please check your credentials."}})}onForgotPassword(){if(this.forgotPasswordForm.invalid){this.forgotPasswordForm.markAllAsTouched();return}this.loadingForgotPassword=!0,this.forgotPasswordMessage="";let e={email:this.forgotPasswordForm.get("email")?.value};this.authService.forgotPassword(e).subscribe({next:t=>{this.loadingForgotPassword=!1,this.forgotPasswordMessage=t.message||"Password reset instructions sent to your email.",setTimeout(()=>{this.showForgotPassword=!1,this.forgotPasswordMessage=""},3e3)},error:t=>{this.loadingForgotPassword=!1,this.forgotPasswordMessage=t?.error?.message||"Failed to send password reset email."}})}toggleForgotPassword(){if(this.showForgotPassword=!this.showForgotPassword,this.forgotPasswordMessage="",this.showForgotPassword){let e=this.loginForm.get("email")?.value;e&&this.forgotPasswordForm.patchValue({email:e})}}togglePasswordVisibility(){this.showPassword=!this.showPassword}goToSignUp(){this.router.navigate(["/sign-up"])}static \u0275fac=function(t){return new(t||n)(Qe(fi),Qe(mi),Qe(ir))};static \u0275cmp=At({type:n,selectors:[["app-login"]],viewQuery:function(t,i){if(t&1&&(ra(OO,5),ra(AO,5)),t&2){let r;oa(r=sa())&&(i.loginCard=r.first),oa(r=sa())&&(i.loginSlogan=r.first)}},decls:27,vars:2,consts:[[1,"navbar-wrapper"],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","rounded-pill","px-4","py-2","d-flex","align-items-center","justify-content-between"],["href","#",1,"navbar-brand","fw-bold","fs-3","text-primary"],[1,"logo-icon","me-2"],[1,"auth-buttons","d-flex","gap-3","align-items-center"],[1,"btn","btn-primary","rounded-pill","px-4","py-2","fw-bold","shadow-sm",3,"click"],[1,"component-container"],[1,"component-content"],[1,"login-center-container"],[1,"login-logo"],[1,"login-content"],[1,"login-header"],["autocomplete","off","class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"form-footer"],[1,"form-link",3,"click"],["autocomplete","off",1,"login-form",3,"ngSubmit","formGroup"],[1,"form-field"],["for","loginEmail"],[1,"input-wrapper"],[1,"bi","bi-envelope","input-icon"],["id","loginEmail","type","email","formControlName","email","placeholder","Enter your email",1,"component-input"],["class","form-error",4,"ngIf"],["for","loginPassword"],[1,"bi","bi-lock","input-icon"],["id","loginPassword","formControlName","password","placeholder","Enter your password",1,"component-input",3,"type"],["type","button",1,"password-toggle",3,"click"],[1,"bi"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"component-button-primary","login-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"form-links"],[1,"form-error"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"loading-spinner"],["for","forgotEmail"],["id","forgotEmail","type","email","formControlName","email","placeholder","Enter your email",1,"component-input"],["class","alert",3,"ngClass",4,"ngIf"],[1,"alert",3,"ngClass"],[1,"bi","bi-info-circle"]],template:function(t,i){t&1&&(S(0,"div",0)(1,"nav",1)(2,"a",2),k(3,"span",3),O(4," DispatchTrack "),w(),S(5,"div",4)(6,"span"),O(7,"Don't have an account?"),w(),S(8,"a",5),Ae("click",function(){return i.goToSignUp()}),O(9,"Sign Up"),w()()()(),S(10,"div",6)(11,"div",7)(12,"div",8),k(13,"div",9),S(14,"div",10)(15,"div",11)(16,"h2"),O(17,"Sign in to your account"),w(),S(18,"p"),O(19,"Enter your credentials to access your DispatchTrack account"),w()(),ae(20,UO,24,12,"form",12)(21,qO,15,6,"form",12),S(22,"div",13)(23,"span"),O(24,"Don't have an account?"),w(),S(25,"a",14),Ae("click",function(){return i.goToSignUp()}),O(26,"Sign Up"),w()()()()()()),t&2&&(N(20),W("ngIf",!i.showForgotPassword),N(),W("ngIf",i.showForgotPassword))},dependencies:[pi,ui,ai,li,ci,di,hi,qt,Uo,an,$l],styles:["@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}20%{transform:translateY(-18px)}40%{transform:translateY(0)}60%{transform:translateY(10px)}80%{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_border-glow{0%{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}30%{box-shadow:0 0 16px 4px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}60%{box-shadow:0 0 16px 4px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}to{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}}@keyframes _ngcontent-%COMP%_step3-bounce{0%,to{transform:translateY(0) scale(1)}25%{transform:translateY(-12px) scale(1.02)}50%{transform:translateY(0) scale(1)}75%{transform:translateY(-6px) scale(1.01)}}.component-container[_ngcontent-%COMP%]{min-height:100vh;background:#f3f8ff;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;padding:0;width:100%}.component-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;width:100%;margin-top:-2.5rem;position:relative;z-index:2}.component-card[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:2rem;box-shadow:0 4px 32px #00000012;border:1px solid #e5e7eb;transition:all .3s ease}.component-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #2563eb66}.component-button-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #00000012;letter-spacing:.5px}.component-button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#2563eb);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66;border-color:#1d4ed8}.component-button-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.component-button-secondary[_ngcontent-%COMP%]{background:#fff;color:#2563eb;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;letter-spacing:.5px}.component-button-secondary[_ngcontent-%COMP%]:hover{background:#f3f8ff;transform:translateY(-2px);box-shadow:0 4px 16px #2563eb1a}.component-input[_ngcontent-%COMP%]{width:100%;padding:.3rem 1.2rem;border:2px solid #e5e7eb;border-radius:1rem;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#fff;transition:all .3s ease}.component-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb1a}.component-input[_ngcontent-%COMP%]::placeholder{color:#6c7a89}.component-hero[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f8ff,#fff7ed);border-radius:2rem;box-shadow:0 4px 32px #00000012;padding:4rem 0;text-align:center;position:relative;width:100%;min-height:480px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#555;font-size:16px;z-index:1;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:40px}.promo-badge[_ngcontent-%COMP%]{display:inline-block;background:#e9f1ff;color:#2563eb;font-weight:600;border-radius:2rem;padding:.4rem 1.2rem;font-size:1.1rem;box-shadow:0 2px 8px #00000012}.promo-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#34d399;border-radius:50%;margin-right:.5rem}.timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;box-shadow:0 4px 16px #2563eb1a;margin:0 auto;position:relative;z-index:2}.step-pill[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:.5rem 1.4rem;font-weight:600;font-size:1.1rem;color:#222;box-shadow:0 2px 8px #00000012;border:1px solid #e5e7eb;display:inline-block}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-pending[_ngcontent-%COMP%]{background:#f59e421a;color:#f59e42}.status-badge.status-in-transit[_ngcontent-%COMP%]{background:#22d3ee1a;color:#22d3ee}.status-badge.status-delivered[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}@media (max-width: 991px){.component-content[_ngcontent-%COMP%]{padding:0 1.5rem}.component-hero[_ngcontent-%COMP%]{min-height:400px;padding:2rem .5rem}}@media (max-width: 767px){.component-content[_ngcontent-%COMP%]{padding:0 1rem}.component-hero[_ngcontent-%COMP%]{border-radius:1.2rem;min-height:320px}.timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1.2rem}}.login-center-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;padding:2rem}.login-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.login-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#2563eb;filter:drop-shadow(0 2px 4px rgba(37,99,235,.3));animation:_ngcontent-%COMP%_bounce 5s infinite cubic-bezier(.68,-.55,.27,1.55)}.login-content[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.login-header[_ngcontent-%COMP%]{margin-bottom:2rem}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:2.1rem;font-weight:700;color:#222;margin-bottom:.5rem}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;margin:0}.login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:left}.login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#222;margin-bottom:.5rem;font-size:1rem}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c7a89;font-size:1rem;z-index:1}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:2.5rem}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#6c7a89;cursor:pointer;padding:.5rem;border-radius:.5rem;transition:all .3s ease}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:#2563eb;background:#2563eb1a}.login-form[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.5rem;text-align:left}.login-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;margin-bottom:1.5rem;font-size:1rem}.login-form[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.login-form[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399;border:1px solid rgba(52,211,153,.2)}.login-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.login-form[_ngcontent-%COMP%]   .form-links[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.login-form[_ngcontent-%COMP%]   .form-link[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none;font-weight:500;cursor:pointer;transition:color .3s ease}.login-form[_ngcontent-%COMP%]   .form-link[_ngcontent-%COMP%]:hover{color:#1d4ed8;text-decoration:underline}.form-footer[_ngcontent-%COMP%]{text-align:center;padding-top:1.5rem;border-top:1px solid #e5e7eb;color:#555}.form-footer[_ngcontent-%COMP%]   .form-link[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none;font-weight:500;cursor:pointer;margin-left:.5rem;transition:color .3s ease}.form-footer[_ngcontent-%COMP%]   .form-link[_ngcontent-%COMP%]:hover{color:#1d4ed8;text-decoration:underline}@media (max-width: 991px){.login-center-container[_ngcontent-%COMP%]{padding:1.5rem;min-height:50vh}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}}@media (max-width: 767px){.login-center-container[_ngcontent-%COMP%]{padding:1rem}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.login-card[_ngcontent-%COMP%]{border-radius:1.2rem}}"]})};var tb="tsParticles - Error";var Ud=class n{constructor(e,t,i){if(this._updateFromAngle=(r,o)=>{this.x=Math.cos(r)*o,this.y=Math.sin(r)*o},!nr(e)&&e){this.x=e.x,this.y=e.y;let r=e;this.z=r.z?r.z:0}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??0;else throw new Error(`${tb} Vector3d not initialized correctly`)}static get origin(){return n.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return n.create(e.x,e.y,e.z)}static create(e,t,i){return new n(e,t,i)}add(e){return n.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return n.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return n.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return n.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){let e=this.length;e!=0&&this.multTo(1/e)}rotate(e){return n.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;let t=e;this.z=t.z?t.z:0}sub(e){return n.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}};var Ri=class n extends Ud{constructor(e,t){super(e,t,0)}static get origin(){return n.create(0,0)}static clone(e){return n.create(e.x,e.y)}static create(e,t){return new n(e,t)}};var jO=Math.random;function Mt(){return Ur(jO(),0,1-1e-16)}function Ur(n,e,t){return Math.min(Math.max(n,e),t)}function gn(n){let e=Ks(n),t=Bd(n);return e===t&&(t=0),Mt()*(e-t)+t}function yt(n){return nr(n)?n:gn(n)}function Bd(n){return nr(n)?n:n.min}function Ks(n){return nr(n)?n:n.max}function oi(n,e){if(n===e||e===void 0&&nr(n))return n;let t=Bd(n),i=Ks(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:oi(t,i)}function Vd(n){let e=n.random,{enable:t,minimumValue:i}=ib(e)?{enable:e,minimumValue:0}:e;return yt(t?oi(n.value,i):n.value)}function Ii(n,e){let t=n.x-e.x,i=n.y-e.y;return{dx:t,dy:i,distance:Math.sqrt(t**2+i**2)}}function nb(n,e){return Ii(n,e).distance}function YO(n){return Math.floor(Mt()*n.length)}function Jm(n,e,t=!0){return n[e!==void 0&&t?e%n.length:YO(n)]}function Qs(n,e,t,i,r){return XO(Yl(n,i??0),e,t,r)}function XO(n,e,t,i){let r=!0;return(!i||i==="bottom")&&(r=n.top<e.height+t.x),r&&(!i||i==="left")&&(r=n.right>t.x),r&&(!i||i==="right")&&(r=n.left<e.width+t.y),r&&(!i||i==="top")&&(r=n.bottom>t.y),r}function Yl(n,e){return{bottom:n.y+e,left:n.x-e,right:n.x+e,top:n.y-e}}function rb(n,e){let t=n.value,i=n.animation,r={delayTime:yt(i.delay)*1e3,enable:i.enable,value:yt(n.value)*e,max:Ks(t)*e,min:Bd(t)*e,loops:0,maxLoops:yt(i.count),time:0};if(i.enable){switch(r.decay=1-yt(i.decay),i.mode){case"increase":r.status="increasing";break;case"decrease":r.status="decreasing";break;case"random":r.status=Mt()>=.5?"increasing":"decreasing";break}let o=i.mode==="auto";switch(i.startValue){case"min":r.value=r.min,o&&(r.status="increasing");break;case"max":r.value=r.max,o&&(r.status="decreasing");break;case"random":default:r.value=gn(r),o&&(r.status=Mt()>=.5?"increasing":"decreasing");break}}return r.initialValue=r.value,r}function ib(n){return typeof n=="boolean"}function Xl(n){return typeof n=="string"}function nr(n){return typeof n=="number"}function ob(n){return typeof n=="object"&&n!==null}function $m(n){return Array.isArray(n)}var ZO="random";var Qm=new Map;function JO(n){for(let[,o]of Qm)if(n.startsWith(o.stringPrefix))return o.parseString(n);let e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,t=n.replace(e,(o,s,a,l,c)=>s+s+a+a+l+l+(c!==void 0?c+c:"")),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,r=i.exec(t);return r?{a:r[4]!==void 0?parseInt(r[4],16)/255:1,b:parseInt(r[3],16),g:parseInt(r[2],16),r:parseInt(r[1],16)}:void 0}function sb(n,e,t=!0){if(!n)return;let i=Xl(n)?{value:n}:n;if(Xl(i.value))return ab(i.value,e,t);if($m(i.value))return sb({value:Jm(i.value,e,t)});for(let[,r]of Qm){let o=r.handleRangeColor(i);if(o)return o}}function ab(n,e,t=!0){if(!n)return;let i=Xl(n)?{value:n}:n;if(Xl(i.value))return i.value===ZO?QO():KO(i.value);if($m(i.value))return ab({value:Jm(i.value,e,t)});for(let[,r]of Qm){let o=r.handleColor(i);if(o)return o}}function lb(n,e,t=!0){let i=sb(n,e,t);return i?$O(i):void 0}function $O(n){let e=n.r/255,t=n.g/255,i=n.b/255,r=Math.max(e,t,i),o=Math.min(e,t,i),s={h:0,l:(r+o)/2,s:0};return r!==o&&(s.s=s.l<.5?(r-o)/(r+o):(r-o)/(2-r-o),s.h=e===r?(t-i)/(r-o):s.h=t===r?2+(i-e)/(r-o):4+(e-t)/(r-o)),s.l*=100,s.s*=100,s.h*=60,s.h<0&&(s.h+=360),s.h>=360&&(s.h-=360),s}function KO(n){return JO(n)}function QO(n){let e=n??0;return{b:Math.floor(gn(oi(e,256))),g:Math.floor(gn(oi(e,256))),r:Math.floor(gn(oi(e,256)))}}function cb(n,e,t){let i={h:{enable:!1,value:n.h},s:{enable:!1,value:n.s},l:{enable:!1,value:n.l}};return e&&(Km(i.h,e.h,t),Km(i.s,e.s,t),Km(i.l,e.l,t)),i}function Km(n,e,t){n.enable=e.enable,n.enable?(n.velocity=yt(e.speed)/100*t,n.decay=1-yt(e.decay),n.status="increasing",n.loops=0,n.maxLoops=yt(e.count),n.time=0,n.delayTime=yt(e.delay)*1e3,e.sync||(n.velocity*=Mt(),n.value*=Mt()),n.initialValue=n.value):n.velocity=0}var ub=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=gh({type:n});static \u0275inj=ph({})}return n})();function db(n){let e=n.initialPosition,{dx:t,dy:i}=Ii(e,n.position),r=Math.abs(t),o=Math.abs(i),{maxDistance:s}=n.retina,a=s.horizontal,l=s.vertical;if(!(!a&&!l)){if((a&&r>=a||l&&o>=l)&&!n.misplaced)n.misplaced=!!a&&r>a||!!l&&o>l,a&&(n.velocity.x=n.velocity.y/2-n.velocity.x),l&&(n.velocity.y=n.velocity.x/2-n.velocity.y);else if((!a||r<a)&&(!l||o<l)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){let c=n.position,d=n.velocity;a&&(c.x<e.x&&d.x<0||c.x>e.x&&d.x>0)&&(d.x*=-Mt()),l&&(c.y<e.y&&d.y<0||c.y>e.y&&d.y>0)&&(d.y*=-Mt())}}}function hb(n,e,t,i,r,o){e3(n,o);let s=n.gravity,a=s?.enable&&s.inverse?-1:1;r&&t&&(n.velocity.x+=r*o.factor/(60*t)),s?.enable&&t&&(n.velocity.y+=a*(s.acceleration*o.factor)/(60*t));let l=n.moveDecay;n.velocity.multTo(l);let c=n.velocity.mult(t);s?.enable&&i>0&&(!s.inverse&&c.y>=0&&c.y>=i||s.inverse&&c.y<=0&&c.y<=-i)&&(c.y=a*i,t&&(n.velocity.y=c.y/t));let d=n.options.zIndex,u=(1-n.zIndexFactor)**d.velocityRate;c.multTo(u);let{position:h}=n;h.addTo(c),e.vibrate&&(h.x+=Math.sin(h.x*Math.cos(h.y)),h.y+=Math.cos(h.y*Math.sin(h.x)))}function fb(n,e){let t=n.container;if(!n.spin)return;let i={x:n.spin.direction==="clockwise"?Math.cos:Math.sin,y:n.spin.direction==="clockwise"?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*i.x(n.spin.angle),n.position.y=n.spin.center.y+n.spin.radius*i.y(n.spin.angle),n.spin.radius+=n.spin.acceleration;let r=Math.max(t.canvas.size.width,t.canvas.size.height);n.spin.radius>r/2?(n.spin.radius=r/2,n.spin.acceleration*=-1):n.spin.radius<0&&(n.spin.radius=0,n.spin.acceleration*=-1),n.spin.angle+=e/100*(1-n.spin.radius/r)}function e3(n,e){let t=n.options,i=t.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=e.value;return}let o=n.pathGenerator?.generate(n,e);o&&n.velocity.addTo(o),i.clamp&&(n.velocity.x=Ur(n.velocity.x,-1,1),n.velocity.y=Ur(n.velocity.y,-1,1)),n.lastPathTime-=n.pathDelay}function pb(n){return n.slow.inRange?n.slow.factor:1}var t3=2,Gd=class{constructor(){this._initSpin=e=>{let t=e.container,i=e.options,r=i.move.spin;if(!r.enable)return;let o=r.position??{x:50,y:50},s={x:o.x/100*t.canvas.size.width,y:o.y/100*t.canvas.size.height},a=e.getPosition(),l=nb(a,s),c=yt(r.acceleration);e.retina.spinAcceleration=c*t.retina.pixelRatio,e.spin={center:s,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:l,acceleration:e.retina.spinAcceleration}}}init(e){let t=e.options,i=t.move.gravity;e.gravity={enable:i.enable,acceleration:yt(i.acceleration),inverse:i.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){let i=e.options,r=i.move;if(!r.enable)return;let o=e.container,s=o.retina.pixelRatio,a=pb(e),l=(e.retina.moveSpeed??=yt(r.speed)*s)*o.retina.reduceFactor,c=e.retina.moveDrift??=yt(e.options.move.drift)*s,d=Ks(i.size.value)*s,u=r.size?e.getRadius()/d:1,h=l*u*a*(t.factor||1)/t3,f=e.retina.maxSpeed??o.retina.maxSpeed;r.spin.enable?fb(e,h):hb(e,r,h,f,c,t),db(e)}};async function mb(n,e=!0){await n.addMover("base",()=>new Gd,e)}var Hd=class{draw(e,t,i){t.circleRange||(t.circleRange={min:0,max:Math.PI*2});let r=t.circleRange;e.arc(0,0,i,r.min,r.max,!1)}getSidesCount(){return 12}particleInit(e,t){let i=t.shapeData,r=i?.angle??{max:360,min:0};t.circleRange=ob(r)?{min:r.min*Math.PI/180,max:r.max*Math.PI/180}:{min:0,max:r*Math.PI/180}}};async function gb(n,e=!0){await n.addShape("circle",new Hd,e)}function eg(n,e,t,i,r){if(!e||!t.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=n.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;let o=gn(t.offset),s=(e.velocity??0)*n.factor+o*3.6,a=e.decay??1;!r||e.status==="increasing"?(e.value+=s,e.value>i&&(e.loops||(e.loops=0),e.loops++,r&&(e.status="decreasing",e.value-=e.value%i))):(e.value-=s,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&a!==1&&(e.velocity*=a),e.value>i&&(e.value%=i)}function _b(n,e){let{h:t,s:i,l:r}=n.options.color.animation,{color:o}=n;if(!o)return;let{h:s,s:a,l}=o;s&&eg(e,s,t,360,!1),a&&eg(e,a,i,100,!0),l&&eg(e,l,r,100,!0)}var Wd=class{constructor(e){this.container=e}init(e){let t=lb(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=cb(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){let{h:t,s:i,l:r}=e.options.color.animation,{color:o}=e;return!e.destroyed&&!e.spawning&&(o?.h.value!==void 0&&t.enable||o?.s.value!==void 0&&i.enable||o?.l.value!==void 0&&r.enable)}update(e,t){_b(e,t)}};async function yb(n,e=!0){await n.addParticleUpdater("color",t=>new Wd(t),e)}function n3(n,e,t,i){switch(n.options.opacity.animation.destroy){case"max":e>=i&&n.destroy();break;case"min":e<=t&&n.destroy();break}}function xb(n,e){let t=n.opacity;if(n.destroyed||!t?.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;let i=t.min,r=t.max,o=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case"increasing":t.value>=r?(t.status="decreasing",t.loops||(t.loops=0),t.loops++):t.value+=(t.velocity??0)*e.factor;break;case"decreasing":t.value<=i?(t.status="increasing",t.loops||(t.loops=0),t.loops++):t.value-=(t.velocity??0)*e.factor;break}t.velocity&&t.decay!==1&&(t.velocity*=o),n3(n,t.value,i,r),n.destroyed||(t.value=Ur(t.value,i,r))}}var qd=class{constructor(e){this.container=e}init(e){let t=e.options.opacity;e.opacity=rb(t,1);let i=t.animation;i.enable&&(e.opacity.velocity=yt(i.speed)/100*this.container.retina.reduceFactor,i.sync||(e.opacity.velocity*=Mt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){this.isEnabled(e)&&xb(e,t)}};async function vb(n,e=!0){await n.addParticleUpdater("opacity",t=>new qd(t),e)}function bb(n){if(n.outMode!=="bounce"&&n.outMode!=="bounce-horizontal"&&n.outMode!=="bounceHorizontal"&&n.outMode!=="split"||n.direction!=="left"&&n.direction!=="right")return;n.bounds.right<0&&n.direction==="left"?n.particle.position.x=n.size+n.offset.x:n.bounds.left>n.canvasSize.width&&n.direction==="right"&&(n.particle.position.x=n.canvasSize.width-n.size-n.offset.x);let e=n.particle.velocity.x,t=!1;if(n.direction==="right"&&n.bounds.right>=n.canvasSize.width&&e>0||n.direction==="left"&&n.bounds.left<=0&&e<0){let r=Vd(n.particle.options.bounce.horizontal);n.particle.velocity.x*=-r,t=!0}if(!t)return;let i=n.offset.x+n.size;n.bounds.right>=n.canvasSize.width&&n.direction==="right"?n.particle.position.x=n.canvasSize.width-i:n.bounds.left<=0&&n.direction==="left"&&(n.particle.position.x=i),n.outMode==="split"&&n.particle.destroy()}function Mb(n){if(n.outMode!=="bounce"&&n.outMode!=="bounce-vertical"&&n.outMode!=="bounceVertical"&&n.outMode!=="split"||n.direction!=="bottom"&&n.direction!=="top")return;n.bounds.bottom<0&&n.direction==="top"?n.particle.position.y=n.size+n.offset.y:n.bounds.top>n.canvasSize.height&&n.direction==="bottom"&&(n.particle.position.y=n.canvasSize.height-n.size-n.offset.y);let e=n.particle.velocity.y,t=!1;if(n.direction==="bottom"&&n.bounds.bottom>=n.canvasSize.height&&e>0||n.direction==="top"&&n.bounds.top<=0&&e<0){let r=Vd(n.particle.options.bounce.vertical);n.particle.velocity.y*=-r,t=!0}if(!t)return;let i=n.offset.y+n.size;n.bounds.bottom>=n.canvasSize.height&&n.direction==="bottom"?n.particle.position.y=n.canvasSize.height-i:n.bounds.top<=0&&n.direction==="top"&&(n.particle.position.y=i),n.outMode==="split"&&n.particle.destroy()}var jd=class{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,t,i,r){if(!this.modes.includes(r))return;let o=this.container,s=!1;for(let[,h]of o.plugins)if(h.particleBounce!==void 0&&(s=h.particleBounce(e,i,t)),s)break;if(s)return;let a=e.getPosition(),l=e.offset,c=e.getRadius(),d=Yl(a,c),u=o.canvas.size;bb({particle:e,outMode:r,direction:t,bounds:d,canvasSize:u,offset:l,size:c}),Mb({particle:e,outMode:r,direction:t,bounds:d,canvasSize:u,offset:l,size:c})}};var Yd=class{constructor(e){this.container=e,this.modes=["destroy"]}update(e,t,i,r){if(!this.modes.includes(r))return;let o=this.container;switch(e.outType){case"normal":case"outside":if(Qs(e.position,o.canvas.size,Ri.origin,e.getRadius(),t))return;break;case"inside":{let{dx:s,dy:a}=Ii(e.position,e.moveCenter),{x:l,y:c}=e.velocity;if(l<0&&s>e.moveCenter.radius||c<0&&a>e.moveCenter.radius||l>=0&&s<-e.moveCenter.radius||c>=0&&a<-e.moveCenter.radius)return;break}}o.particles.remove(e,void 0,!0)}};var Xd=class{constructor(e){this.container=e,this.modes=["none"]}update(e,t,i,r){if(!this.modes.includes(r)||e.options.move.distance.horizontal&&(t==="left"||t==="right")||e.options.move.distance.vertical&&(t==="top"||t==="bottom"))return;let o=e.options.move.gravity,s=this.container,a=s.canvas.size,l=e.getRadius();if(o.enable){let c=e.position;(!o.inverse&&c.y>a.height+l&&t==="bottom"||o.inverse&&c.y<-l&&t==="top")&&s.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=a.height+l||e.velocity.y<0&&e.position.y>=-l||e.velocity.x>0&&e.position.x<=a.width+l||e.velocity.x<0&&e.position.x>=-l)return;Qs(e.position,s.canvas.size,Ri.origin,l,t)||s.particles.remove(e)}}};var Zd=class{constructor(e){this.container=e,this.modes=["out"]}update(e,t,i,r){if(!this.modes.includes(r))return;let o=this.container;switch(e.outType){case"inside":{let{x:s,y:a}=e.velocity,l=Ri.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(Ri.create(e.moveCenter));let{dx:c,dy:d}=Ii(e.position,l);if(s<=0&&c>=0||a<=0&&d>=0||s>=0&&c<=0||a>=0&&d<=0)return;e.position.x=Math.floor(gn({min:0,max:o.canvas.size.width})),e.position.y=Math.floor(gn({min:0,max:o.canvas.size.height}));let{dx:u,dy:h}=Ii(e.position,e.moveCenter);e.direction=Math.atan2(-h,-u),e.velocity.angle=e.direction;break}default:{if(Qs(e.position,o.canvas.size,Ri.origin,e.getRadius(),t))return;switch(e.outType){case"outside":{e.position.x=Math.floor(gn({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(gn({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;let{dx:s,dy:a}=Ii(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(a,s),e.velocity.angle=e.direction);break}case"normal":{let s=e.options.move.warp,a=o.canvas.size,l={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},c=e.getRadius(),d=Yl(e.position,c);t==="right"&&d.left>a.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,s||(e.position.y=Mt()*a.height,e.initialPosition.y=e.position.y)):t==="left"&&d.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,s||(e.position.y=Mt()*a.height,e.initialPosition.y=e.position.y)),t==="bottom"&&d.top>a.height+e.offset.y?(s||(e.position.x=Mt()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):t==="top"&&d.bottom<-e.offset.y&&(s||(e.position.x=Mt()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}};var Jd=class{constructor(e){this.container=e,this._updateOutMode=(t,i,r,o)=>{for(let s of this.updaters)s.update(t,o,i,r)},this.updaters=[new jd(e),new Yd(e),new Zd(e),new Xd(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){let i=e.options.move.outModes;this._updateOutMode(e,t,i.bottom??i.default,"bottom"),this._updateOutMode(e,t,i.left??i.default,"left"),this._updateOutMode(e,t,i.right??i.default,"right"),this._updateOutMode(e,t,i.top??i.default,"top")}};async function wb(n,e=!0){await n.addParticleUpdater("outModes",t=>new Jd(t),e)}function i3(n,e,t,i){switch(n.options.size.animation.destroy){case"max":e>=i&&n.destroy();break;case"min":e<=t&&n.destroy();break}}function Sb(n,e){let t=n.size;if(n.destroyed||!t||!t.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;let i=(t.velocity??0)*e.factor,r=t.min,o=t.max,s=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case"increasing":t.value>=o?(t.status="decreasing",t.loops||(t.loops=0),t.loops++):t.value+=i;break;case"decreasing":t.value<=r?(t.status="increasing",t.loops||(t.loops=0),t.loops++):t.value-=i}t.velocity&&s!==1&&(t.velocity*=s),i3(n,t.value,r,o),n.destroyed||(t.value=Ur(t.value,r,o))}}var $d=class{init(e){let t=e.container,i=e.options.size,r=i.animation;r.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/100*t.retina.reduceFactor,r.sync||(e.size.velocity*=Mt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&Sb(e,t)}};async function Cb(n,e=!0){await n.addParticleUpdater("size",()=>new $d,e)}async function Pb(n,e=!0){await mb(n,!1),await gb(n,!1),await yb(n,!1),await vb(n,!1),await wb(n,!1),await Cb(n,!1),await n.refresh(e)}var Kd=class{constructor(){this.angle=50,this.move=10}load(e){e&&(e.angle!==void 0&&(this.angle=oi(e.angle)),e.move!==void 0&&(this.move=oi(e.move)))}};var Qd=class{constructor(){this.distance=5,this.enable=!1,this.speed=new Kd}load(e){if(e&&(e.distance!==void 0&&(this.distance=oi(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0))if(nr(e.speed))this.speed.load({angle:e.speed});else{let t=e.speed;t.min!==void 0?this.speed.load({angle:t}):this.speed.load(e.speed)}}};function Eb(n,e){let{wobble:t}=n.options,{wobble:i}=n;if(!t?.enable||!i)return;let r=i.angleSpeed*e.factor,o=i.moveSpeed*e.factor,s=o*((n.retina.wobbleDistance??0)*e.factor)/(1e3/60),a=2*Math.PI,{position:l}=n;i.angle+=r,i.angle>a&&(i.angle-=a),l.x+=s*Math.cos(i.angle),l.y+=s*Math.abs(Math.sin(i.angle))}var eh=class{constructor(e){this.container=e}init(e){let t=e.options.wobble;t?.enable?e.wobble={angle:Mt()*Math.PI*2,angleSpeed:yt(t.speed.angle)/360,moveSpeed:yt(t.speed.move)/10}:e.wobble={angle:0,angleSpeed:0,moveSpeed:0},e.retina.wobbleDistance=yt(t?.distance??0)*this.container.retina.pixelRatio}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.options.wobble?.enable}loadOptions(e,...t){e.wobble||(e.wobble=new Qd);for(let i of t)e.wobble.load(i?.wobble)}update(e,t){this.isEnabled(e)&&Eb(e,t)}};async function Tb(n,e=!0){await n.addParticleUpdater("wobble",t=>new eh(t),e)}var Ob={background:{color:"#333"},particles:{number:{value:100},move:{direction:"bottom",enable:!0,random:!1,straight:!1},opacity:{value:{min:.1,max:.5}},size:{value:{min:1,max:10}},wobble:{distance:20,enable:!0,speed:{min:-5,max:5}}}};async function Ab(n,e=!0){await Pb(n,!1),await Tb(n,!1),await n.addPreset("snow",Ob,e)}function r3(n,e){if(n&1&&(S(0,"option",41),O(1),w()),n&2){let t=e.$implicit;W("value",t.value),N(),Je(" ",t.label," ")}}function o3(n,e){n&1&&k(0,"span",42)}function s3(n,e){n&1&&(S(0,"span"),O(1,"Search"),w())}function a3(n,e){n&1&&(S(0,"span"),O(1,"Selected"),w())}function l3(n,e){n&1&&(S(0,"span"),O(1,"Select Ride"),w())}function c3(n,e){if(n&1&&(S(0,"option",41),O(1),w()),n&2){let t=e.$implicit;W("value",t),N(),Je(" ",t," ")}}function u3(n,e){n&1&&k(0,"span",42)}function d3(n,e){n&1&&(S(0,"span"),k(1,"i",76),O(2,"Confirm Booking "),w())}function h3(n,e){n&1&&(S(0,"div",97),k(1,"i",76),O(2," Booking successful! You will receive a confirmation shortly. "),w())}function f3(n,e){if(n&1&&(S(0,"div",98),k(1,"i",99),O(2),w()),n&2){let t=me(4);N(2),Je(" ",t.bookingError," ")}}function p3(n,e){if(n&1){let t=ut();S(0,"div",78)(1,"div",79)(2,"h4"),O(3,"Book Your Ride"),w(),S(4,"p"),O(5,"Fill in your goods details to complete the booking"),w()(),S(6,"form",80),Ae("ngSubmit",function(){We(t);let r=me(3);return qe(r.onBook())}),S(7,"div",81)(8,"div",82)(9,"label",83),k(10,"i",69),O(11," Goods Type "),w(),S(12,"div",12),k(13,"i",84),S(14,"select",85)(15,"option",20),O(16,"Select goods type"),w(),ae(17,c3,2,2,"option",21),w()()(),S(18,"div",82)(19,"label",83),k(20,"i",86),O(21," Description "),w(),S(22,"div",12),k(23,"i",87)(24,"textarea",88),w()()(),S(25,"div",89)(26,"div",90)(27,"span",91),O(28,"Route:"),w(),S(29,"span",92),O(30),w()(),S(31,"div",90)(32,"span",91),O(33,"Date:"),w(),S(34,"span",92),O(35),yh(36,"date"),w()(),S(37,"div",90)(38,"span",91),O(39,"Time:"),w(),S(40,"span",92),O(41),w()(),S(42,"div",90)(43,"span",91),O(44,"Fare:"),w(),S(45,"span",92),O(46),w()()(),S(47,"div",93)(48,"button",94),ae(49,u3,1,0,"span",28)(50,d3,3,0,"span",29),w()()(),ae(51,h3,3,0,"div",95)(52,f3,3,1,"div",96),w()}if(n&2){let t=me().$implicit,i=me(2);N(6),W("formGroup",i.goodsForm),N(11),W("ngForOf",i.goodsTypeOptions),N(13),mg("",t.from," \u2192 ",t.to),N(5),Wn(xh(36,12,t.date,"mediumDate")),N(6),Wn(t.time),N(5),Je("\u20B9",t.estimatedFare),N(2),W("disabled",i.bookingLoading),N(),W("ngIf",i.bookingLoading),N(),W("ngIf",!i.bookingLoading),N(),W("ngIf",i.bookingSuccess),N(),W("ngIf",i.bookingError)}}function m3(n,e){if(n&1){let t=ut();S(0,"div",53)(1,"div",54)(2,"div",55)(3,"div",56),k(4,"i",57),O(5),w(),S(6,"div",58),k(7,"i",59),w(),S(8,"div",60),k(9,"i",61),O(10),w()(),S(11,"div",62)(12,"div",63),k(13,"i",64),O(14),yh(15,"date"),w(),S(16,"div",65),k(17,"i",66),O(18),w()()(),S(19,"div",67)(20,"div",68),k(21,"i",69),S(22,"span",70),O(23,"Luggage:"),w(),S(24,"span",71),O(25),w()(),S(26,"div",68),k(27,"i",72),S(28,"span",70),O(29,"Fare:"),w(),S(30,"span",73),O(31),w()()(),S(32,"div",74)(33,"button",75),Ae("click",function(){let r=We(t).$implicit,o=me(2);return qe(o.onSelectRide(r))}),k(34,"i",76),ae(35,a3,2,0,"span",29)(36,l3,2,0,"span",29),w()(),ae(37,p3,53,15,"div",77),w()}if(n&2){let t=e.$implicit,i=me(2);dt("selected",i.selectedRide===t),N(5),Je(" ",t.from," "),N(5),Je(" ",t.to," "),N(4),Je(" ",xh(15,12,t.date,"mediumDate")," "),N(4),Je(" ",t.time," "),N(7),Wn(t.luggageSpace),N(6),Je("\u20B9",t.estimatedFare),N(2),W("disabled",i.selectedRide===t),N(2),W("ngIf",i.selectedRide===t),N(),W("ngIf",i.selectedRide!==t),N(),W("ngIf",i.selectedRide===t)}}function g3(n,e){if(n&1){let t=ut();S(0,"div",43)(1,"div",44)(2,"h3",45),k(3,"i",46),O(4),w(),S(5,"div",47)(6,"button",48),Ae("click",function(){We(t);let r=me();return qe(r.sortByPrice())}),k(7,"i",49),O(8," Price "),w(),S(9,"button",48),Ae("click",function(){We(t);let r=me();return qe(r.sortByDate())}),k(10,"i",50),O(11," Date "),w()()(),S(12,"div",51),ae(13,m3,38,15,"div",52),w()()}if(n&2){let t=me();N(4),Je(" Available Rides (",t.searchResults.length,") "),N(9),W("ngForOf",t.searchResults)}}function _3(n,e){if(n&1){let t=ut();S(0,"div",100)(1,"div",101),k(2,"i",102),S(3,"h3"),O(4,"No rides found"),w(),S(5,"p"),O(6,"We couldn't find any rides matching your criteria. Try adjusting your search parameters."),w(),S(7,"button",103),Ae("click",function(){We(t);let r=me();return qe(r.clearSearch())}),k(8,"i",104),O(9,"Clear Search "),w()()()}}function y3(n,e){if(n&1){let t=ut();S(0,"div",105)(1,"div",106),k(2,"i",99),S(3,"h3"),O(4,"Search Error"),w(),S(5,"p"),O(6),w(),S(7,"button",103),Ae("click",function(){We(t);let r=me();return qe(r.retrySearch())}),k(8,"i",104),O(9,"Try Again "),w()()()}if(n&2){let t=me();N(6),Wn(t.searchError)}}var th=class n{constructor(e,t,i,r){this.fb=e;this.http=t;this.cdr=i;this.webSocketService=r;this.username=localStorage.getItem("username"),this.searchForm=this.fb.group({from:["",ze.required],to:["",ze.required],date:["",ze.required],luggageSpace:["",ze.required],goodsWeightInKg:["",[ze.required,ze.min(.1)]],goodsQuantity:["",[ze.required,ze.min(1)]]}),this.goodsForm=this.fb.group({goodsType:["",ze.required],description:["",ze.required]}),this.loadUserStats()}username=null;totalDeliveries=0;activeDeliveries=0;userRating=0;searchForm;submitted=!1;loading=!1;searchResults=[];searchError="";selectedRide=null;goodsForm;bookingLoading=!1;bookingSuccess=!1;bookingError="";lastSearchParams=null;luggageSpaceOptions=[{value:"small",label:"0-249 ltrs (Small)"},{value:"medium",label:"250-499 ltrs (Medium)"},{value:"large",label:"500-750 ltrs (Large)"}];goodsTypeOptions=["DOCUMENTS","ELECTRONICS","PERISHABLES","FURNITURE","CLOTHING","MACHINERY","OTHER"];particlesOptions={preset:"snow",background:{color:"transparent"},fullScreen:{enable:!1},particles:{color:{value:"#fff"},opacity:{value:.7},size:{value:{min:2,max:5}},move:{speed:1}}};ngOnInit(){let e=localStorage.getItem("userId");e&&this.webSocketService.connect(e)}async particlesInit(e){await Ab(e)}ngAfterViewInit(){$s.fromTo("#welcome-username span",{y:40,opacity:0},{y:0,opacity:1,duration:.7,stagger:.07,ease:"power2.out"}),$s.fromTo(".stat-card",{y:30,opacity:0},{y:0,opacity:1,duration:.8,stagger:.1,ease:"power2.out",delay:.5})}get f(){return this.searchForm.controls}loadUserStats(){localStorage.getItem("userId")&&(this.totalDeliveries=24,this.activeDeliveries=3,this.userRating=4.8)}onSubmit(){if(this.submitted=!0,this.searchError="",this.searchForm.invalid)return;this.loading=!0,this.searchResults=[],this.selectedRide=null,this.lastSearchParams=si({},this.searchForm.value);let e=new URLSearchParams;Object.entries(this.searchForm.value).forEach(([i,r])=>{r!=null&&r!==""&&(i==="luggageSpace"?e.append(i,String(r).toUpperCase()):e.append(i,String(r)))});let t=`http://localhost:8086/api/v1/rides/search-with-fare?${e.toString()}`;this.http.get(t).subscribe({next:i=>{this.searchResults=i||[],this.loading=!1,this.cdr.detectChanges()},error:i=>{this.searchError="Failed to fetch rides. Please try again.",this.loading=!1,this.cdr.detectChanges()}})}onSelectRide(e){this.selectedRide=e,this.goodsForm.reset(),this.bookingSuccess=!1,this.bookingError="",this.cdr.detectChanges()}onBook(){if(!this.selectedRide||this.goodsForm.invalid||!this.lastSearchParams)return;this.bookingLoading=!0,this.bookingSuccess=!1,this.bookingError="";let e=localStorage.getItem("userId"),t=new Date(this.lastSearchParams.date+"T00:00:00").toISOString(),i={senderUserId:e,rideUserId:this.selectedRide.rideUserId,rideId:this.selectedRide.rideId,goodsDescription:this.goodsForm.value.description,goodsType:this.goodsForm.value.goodsType,weight:this.lastSearchParams.goodsWeightInKg,goodsQuantity:this.lastSearchParams.goodsQuantity,requiredSpace:(this.lastSearchParams.luggageSpace||"").toUpperCase(),from:this.lastSearchParams.from,to:this.lastSearchParams.to,fare:this.selectedRide.estimatedFare,deliveryDate:t};this.http.post("http://localhost:8087/api/v1/requests",i).subscribe({next:r=>{this.bookingLoading=!1,this.bookingSuccess=!0,this.selectedRide=null,this.goodsForm.reset(),this.cdr.detectChanges(),this.activeDeliveries++,this.totalDeliveries++},error:r=>{this.bookingLoading=!1,this.bookingError="Booking failed. Please try again.",this.cdr.detectChanges()}})}sortByPrice(){this.searchResults.sort((e,t)=>{let i=e.estimatedFare||0,r=t.estimatedFare||0;return i-r})}sortByDate(){this.searchResults.sort((e,t)=>{let i=new Date(e.date),r=new Date(t.date);return i.getTime()-r.getTime()})}clearSearch(){this.searchForm.reset(),this.searchResults=[],this.selectedRide=null,this.submitted=!1,this.searchError=""}retrySearch(){this.searchError="",this.onSubmit()}getCurrentUserId(){return localStorage.getItem("userId")}static \u0275fac=function(t){return new(t||n)(Qe(fi),Qe(Bo),Qe(zo),Qe(Tg))};static \u0275cmp=At({type:n,selectors:[["app-dashboard"]],decls:69,vars:19,consts:[[1,"hero-section"],[1,"hero-background"],[1,"hero-content"],[1,"hero-heading"],[1,"gradient-text","typing-effect"],[1,"hero-subtitle"],[1,"gradient-text","typing-effect-subtitle"],[1,"search-box"],[1,"search-container"],[1,"search-form",3,"ngSubmit","formGroup"],[1,"search-fields"],[1,"search-field"],[1,"input-wrapper"],[1,"input-icon","bi","bi-geo-alt"],["type","text","formControlName","from","placeholder","Leaving from",1,"search-input"],["type","text","formControlName","to","placeholder","Going to",1,"search-input"],[1,"input-icon","bi","bi-calendar"],["type","date","formControlName","date",1,"search-input"],[1,"input-icon","bi","bi-box"],["formControlName","luggageSpace",1,"search-input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-icon","bi","bi-weight"],["type","number","formControlName","goodsWeightInKg","placeholder","Weight (kg)","step","0.1","min","0.1",1,"search-input"],[1,"input-icon","bi","bi-123"],["type","number","formControlName","goodsQuantity","placeholder","Quantity","min","1",1,"search-input"],[1,"search-field","search-button-field"],["type","submit",1,"search-button",3,"disabled"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"features-section"],[1,"feature-card"],[1,"feature-icon"],[1,"bi","bi-stack"],[1,"feature-title"],[1,"feature-description"],[1,"bi","bi-shield-check"],[1,"bi","bi-clock-history"],["class","search-results-container",4,"ngIf"],["class","no-results",4,"ngIf"],["class","error-message",4,"ngIf"],[3,"value"],[1,"loading-spinner"],[1,"search-results-container"],[1,"results-header"],[1,"results-title"],[1,"bi","bi-list-ul"],[1,"results-filters"],[1,"filter-btn",3,"click"],[1,"bi","bi-sort-numeric-down"],[1,"bi","bi-calendar"],[1,"results-grid"],["class","ride-card",3,"selected",4,"ngFor","ngForOf"],[1,"ride-card"],[1,"ride-header"],[1,"ride-route"],[1,"route-point","from"],[1,"bi","bi-geo-alt-fill"],[1,"route-arrow"],[1,"bi","bi-arrow-right"],[1,"route-point","to"],[1,"bi","bi-geo-alt"],[1,"ride-date-time"],[1,"ride-date"],[1,"bi","bi-calendar-event"],[1,"ride-time"],[1,"bi","bi-clock"],[1,"ride-details"],[1,"detail-item"],[1,"bi","bi-box-seam"],[1,"detail-label"],[1,"detail-value"],[1,"bi","bi-currency-rupee"],[1,"detail-value","fare"],[1,"ride-actions"],[1,"select-btn",3,"click","disabled"],[1,"bi","bi-check-circle"],["class","booking-form",4,"ngIf"],[1,"booking-form"],[1,"booking-header"],[1,"goods-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],[1,"form-label"],[1,"input-icon","bi","bi-box-seam"],["formControlName","goodsType",1,"component-input"],[1,"bi","bi-chat-text"],[1,"input-icon","bi","bi-chat-text"],["formControlName","description","rows","3","placeholder","Describe your goods...",1,"component-input"],[1,"booking-summary"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"booking-actions"],["type","submit",1,"book-btn",3,"disabled"],["class","booking-alert alert alert-success",4,"ngIf"],["class","booking-alert alert alert-danger",4,"ngIf"],[1,"booking-alert","alert","alert-success"],[1,"booking-alert","alert","alert-danger"],[1,"bi","bi-exclamation-triangle"],[1,"no-results"],[1,"no-results-content"],[1,"bi","bi-search"],[1,"secondary-button",3,"click"],[1,"bi","bi-arrow-clockwise","me-2"],[1,"error-message"],[1,"error-content"]],template:function(t,i){t&1&&(S(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),O(5),w()(),S(6,"p",5)(7,"span",6),O(8,"Connect with trusted drivers and send your goods safely across the country"),w()()()()(),S(9,"div",7)(10,"div",8)(11,"form",9),Ae("ngSubmit",function(){return i.onSubmit()}),S(12,"div",10)(13,"div",11)(14,"div",12),k(15,"i",13)(16,"input",14),w()(),S(17,"div",11)(18,"div",12),k(19,"i",13)(20,"input",15),w()(),S(21,"div",11)(22,"div",12),k(23,"i",16)(24,"input",17),w()(),S(25,"div",11)(26,"div",12),k(27,"i",18),S(28,"select",19)(29,"option",20),O(30,"Luggage Space"),w(),ae(31,r3,2,2,"option",21),w()()(),S(32,"div",11)(33,"div",12),k(34,"i",22)(35,"input",23),w()(),S(36,"div",11)(37,"div",12),k(38,"i",24)(39,"input",25),w()(),S(40,"div",26)(41,"button",27),ae(42,o3,1,0,"span",28)(43,s3,2,0,"span",29),w()()()()()(),S(44,"div",30)(45,"div",31)(46,"div",32),k(47,"i",33),w(),S(48,"h3",34),O(49,"Your pick of rides at low prices"),w(),S(50,"p",35),O(51,"Wide range of destinations and routes at low prices."),w()(),S(52,"div",31)(53,"div",32),k(54,"i",36),w(),S(55,"h3",34),O(56,"Trust who you travel with"),w(),S(57,"p",35),O(58,"Verified reviews, profiles, and IDs ensure safe rides."),w()(),S(59,"div",31)(60,"div",32),k(61,"i",37),w(),S(62,"h3",34),O(63,"Real-time tracking"),w(),S(64,"p",35),O(65,"Track your shipments in real-time with live updates and notifications."),w()()(),ae(66,g3,14,2,"div",38)(67,_3,10,0,"div",39)(68,y3,10,1,"div",40)),t&2&&(N(5),Je(" ",i.username?"Welcome back, "+i.username+"!":"Your pick of rides at low prices"," "),N(6),W("formGroup",i.searchForm),N(5),dt("is-invalid",i.submitted&&i.f.from.errors),N(4),dt("is-invalid",i.submitted&&i.f.to.errors),N(4),dt("is-invalid",i.submitted&&i.f.date.errors),N(7),W("ngForOf",i.luggageSpaceOptions),N(4),dt("is-invalid",i.submitted&&i.f.goodsWeightInKg.errors),N(4),dt("is-invalid",i.submitted&&i.f.goodsQuantity.errors),N(2),W("disabled",i.loading),N(),W("ngIf",i.loading),N(),W("ngIf",!i.loading),N(23),W("ngIf",i.searchResults.length),N(),W("ngIf",!i.loading&&i.searchResults.length===0&&i.lastSearchParams),N(),W("ngIf",i.searchError))},dependencies:[qt,Jl,an,_g,ub,pi,ui,or,sr,ai,Vo,rr,li,ci,Pg,di,hi],styles:['@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}20%{transform:translateY(-18px)}40%{transform:translateY(0)}60%{transform:translateY(10px)}80%{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_border-glow{0%{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}30%{box-shadow:0 0 16px 4px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}60%{box-shadow:0 0 16px 4px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}to{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}}@keyframes _ngcontent-%COMP%_step3-bounce{0%,to{transform:translateY(0) scale(1)}25%{transform:translateY(-12px) scale(1.02)}50%{transform:translateY(0) scale(1)}75%{transform:translateY(-6px) scale(1.01)}}.component-container[_ngcontent-%COMP%]{min-height:100vh;background:#f3f8ff;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;padding:0;width:100%}.component-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;width:100%;margin-top:-2.5rem;position:relative;z-index:2}.component-card[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:2rem;box-shadow:0 4px 32px #00000012;border:1px solid #e5e7eb;transition:all .3s ease}.component-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #2563eb66}.component-button-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #00000012;letter-spacing:.5px}.component-button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#2563eb);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66;border-color:#1d4ed8}.component-button-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.component-button-secondary[_ngcontent-%COMP%]{background:#fff;color:#2563eb;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;letter-spacing:.5px}.component-button-secondary[_ngcontent-%COMP%]:hover{background:#f3f8ff;transform:translateY(-2px);box-shadow:0 4px 16px #2563eb1a}.component-input[_ngcontent-%COMP%]{width:100%;padding:.3rem 1.2rem;border:2px solid #e5e7eb;border-radius:1rem;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#fff;transition:all .3s ease}.component-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb1a}.component-input[_ngcontent-%COMP%]::placeholder{color:#6c7a89}.component-hero[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f8ff,#fff7ed);border-radius:2rem;box-shadow:0 4px 32px #00000012;padding:4rem 0;text-align:center;position:relative;width:100%;min-height:480px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#555;font-size:16px;z-index:1;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:40px}.promo-badge[_ngcontent-%COMP%]{display:inline-block;background:#e9f1ff;color:#2563eb;font-weight:600;border-radius:2rem;padding:.4rem 1.2rem;font-size:1.1rem;box-shadow:0 2px 8px #00000012}.promo-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#34d399;border-radius:50%;margin-right:.5rem}.timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;box-shadow:0 4px 16px #2563eb1a;margin:0 auto;position:relative;z-index:2}.step-pill[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:.5rem 1.4rem;font-weight:600;font-size:1.1rem;color:#222;box-shadow:0 2px 8px #00000012;border:1px solid #e5e7eb;display:inline-block}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-pending[_ngcontent-%COMP%]{background:#f59e421a;color:#f59e42}.status-badge.status-in-transit[_ngcontent-%COMP%]{background:#22d3ee1a;color:#22d3ee}.status-badge.status-delivered[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}@media (max-width: 991px){.component-content[_ngcontent-%COMP%]{padding:0 1.5rem}.component-hero[_ngcontent-%COMP%]{min-height:400px;padding:2rem .5rem}}@media (max-width: 767px){.component-content[_ngcontent-%COMP%]{padding:0 1rem}.component-hero[_ngcontent-%COMP%]{border-radius:1.2rem;min-height:320px}.timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1.2rem}}.hero-section[_ngcontent-%COMP%]{background-image:url(/login-background.svg);background-size:cover;background-position:center;background-repeat:no-repeat;padding:4rem 0 6rem;text-align:center;position:relative;width:100vw;margin-left:calc(-50vw + 50%);margin-top:2rem;border-radius:0 0 2rem 2rem;margin-bottom:-3rem}.hero-section[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]{color:#000}.hero-section[_ngcontent-%COMP%]   .typing-effect[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;border-right:3px solid #00B2D6;white-space:nowrap;animation:_ngcontent-%COMP%_typing 3s steps(40,end),_ngcontent-%COMP%_blink-caret .75s step-end infinite;max-width:0;animation-fill-mode:forwards}.hero-section[_ngcontent-%COMP%]   .typing-effect-subtitle[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;border-right:2px solid #00B2D6;white-space:nowrap;animation:_ngcontent-%COMP%_typing-subtitle 4s steps(60,end) 3s,_ngcontent-%COMP%_blink-caret-subtitle .75s step-end infinite 3s;max-width:0;animation-fill-mode:forwards}.hero-section[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]{position:relative;z-index:1}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 2rem}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-heading[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:2.5rem;font-weight:600;color:#003f5f;margin-bottom:1rem;line-height:1.2}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1.125rem;color:#444;margin:0;font-weight:400}.search-box[_ngcontent-%COMP%]{background:#fff;border-radius:50px;box-shadow:0 4px 20px #0000001a;margin-top:-3rem;padding:1rem;position:relative;z-index:2;width:90vw;margin-left:calc(-45vw + 50%);margin-right:calc(-45vw + 50%)}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{max-width:1800px;margin:0 auto}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;margin-bottom:0;flex-wrap:nowrap;flex:1;width:100%}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex:1;min-width:100px}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#003f5f;font-size:1rem;z-index:1}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.5rem .75rem .5rem 2.5rem;border:none;border-radius:10px;font-size:.9rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:#222;background:#f8f9fa;transition:all .3s ease;min-height:40px}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;background:#fff;box-shadow:0 0 0 3px #00b2d626;transform:translateY(-2px) scale(1.02)}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{background:#f0f0f0;transform:translateY(-1px)}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#6c7a89;font-weight:400}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]{flex:0 0 auto;min-width:auto;width:auto}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;border-radius:10px;padding:.5rem 2rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .3s ease;white-space:nowrap;height:100%;min-height:40px;box-shadow:0 2px 8px #2563eb33;position:relative}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border-radius:12px;background:linear-gradient(65deg,#00b2d6,#0094b3,#00b2d6,#7ac9d4,#00b2d6);background-size:400% 400%;animation:_ngcontent-%COMP%_borderGradient 3s ease infinite;z-index:-1}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:10px;background:#2563eb;z-index:-1}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:hover{background:#1d4ed8;transform:scale(1.05) translateY(-2px);box-shadow:0 8px 20px #2563eb80}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:active{transform:scale(.98) translateY(0);box-shadow:0 2px 8px #00b2d633;transition:all .1s ease}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none}.features-section[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;padding:2rem;font-family:Open Sans,sans-serif;display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:4rem;width:100vw;margin-left:calc(-50vw + 50%);margin-right:calc(-50vw + 50%);background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:4rem 2rem}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]{text-align:center;padding:2rem 2.5rem;transition:all .3s ease;cursor:pointer;border-radius:12px;background:#fff;border:1px solid rgba(0,0,0,.08);box-shadow:0 2px 8px #0000000a;max-width:450px;margin:0 auto}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #00000014;border-color:#2563eb26}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]:active{transform:translateY(-4px);transition:all .1s ease}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{width:65px;height:65px;background:#2563eb;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.25rem;font-size:1.6rem;color:#fff;box-shadow:0 2px 8px #2563eb33;transition:all .3s ease}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05) rotate(2deg);box-shadow:0 4px 12px #2563eb40}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   .feature-title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:1.25rem;font-weight:600;color:#003f5f;margin-bottom:1rem;line-height:1.3}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   .feature-description[_ngcontent-%COMP%]{color:#444;font-size:1rem;line-height:1.6;margin:0}.stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;margin-bottom:4rem}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #2563eb66}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#2563eb;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem;font-size:24px;color:#fff;transition:all .3s ease}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{display:block;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:2.1rem;font-weight:700;color:#222;margin-bottom:.5rem}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1rem;color:#555;font-weight:400;text-transform:uppercase;letter-spacing:.025em}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-subtitle[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:.875rem;color:#555;margin-top:.5rem;font-weight:400}.search-results-container[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:3rem;width:100%;max-width:1200px;margin-left:auto;margin-right:auto;padding:0 1rem}.search-results-container[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;background:#fff;padding:1.5rem 2rem;border-radius:2rem;box-shadow:0 4px 32px #00000012}.search-results-container[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]   .results-title[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.3rem;font-weight:700;color:#222;margin:0}.search-results-container[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]   .results-filters[_ngcontent-%COMP%]{display:flex;gap:1rem}.search-results-container[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]   .results-filters[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:1.2rem;font-size:.875rem;font-weight:400;border:1px solid #e5e7eb;color:#555;background:#fff;transition:all .3s ease;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.search-results-container[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]   .results-filters[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover{background:#f3f8ff;border-color:#2563eb;color:#2563eb}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;transition:all .3s ease;overflow:hidden}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001f}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card.selected[_ngcontent-%COMP%]{border-color:#667eea;box-shadow:0 8px 30px #667eea26}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem;margin-bottom:0}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-route[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-route[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:1.1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-route[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-route[_ngcontent-%COMP%]   .route-point.from[_ngcontent-%COMP%]{color:gold}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-route[_ngcontent-%COMP%]   .route-point.to[_ngcontent-%COMP%]{color:#ff6b6b}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-route[_ngcontent-%COMP%]   .route-arrow[_ngcontent-%COMP%]{color:#fffc;font-size:1.2rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-date-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.9rem;opacity:.9}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-date-time[_ngcontent-%COMP%]   .ride-date[_ngcontent-%COMP%], .search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-date-time[_ngcontent-%COMP%]   .ride-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-date-time[_ngcontent-%COMP%]   .ride-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-header[_ngcontent-%COMP%]   .ride-date-time[_ngcontent-%COMP%]   .ride-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fffc}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-details[_ngcontent-%COMP%]{padding:1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.95rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1.1rem;width:20px}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:600;color:#374151}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#6b7280}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.fare[_ngcontent-%COMP%]{color:#059669;font-weight:700;font-size:1.1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e5e7eb;background:#f9fafb;text-align:center}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-actions[_ngcontent-%COMP%]   .select-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;padding:.75rem 1.5rem;font-weight:600;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .3s ease;cursor:pointer}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-actions[_ngcontent-%COMP%]   .select-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 16px #667eea4d}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-actions[_ngcontent-%COMP%]   .select-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .ride-actions[_ngcontent-%COMP%]   .select-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]{background:#f8fafc;border-top:1px solid #e5e7eb;padding:1.5rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .booking-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .booking-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.3rem;font-weight:700;color:#222;margin-bottom:.5rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .booking-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;margin:0;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:600;color:#222;margin-bottom:.75rem;font-size:.875rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]{background:#f3f8ff;border-radius:1.2rem;padding:1.5rem;margin-bottom:2rem;border:1px solid #e5e7eb}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.75rem;padding:.5rem 0}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-weight:600;color:#555;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-weight:700;color:#222;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-actions[_ngcontent-%COMP%]{text-align:center}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-actions[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:12px;padding:.75rem 2rem;font-weight:600;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .3s ease;cursor:pointer}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-actions[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 16px #10b9814d}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-actions[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .goods-form[_ngcontent-%COMP%]   .booking-actions[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .booking-alert[_ngcontent-%COMP%]{margin-top:1rem;border-radius:8px;padding:.75rem 1rem;display:flex;align-items:center;gap:.5rem;font-weight:500}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .booking-alert.alert-success[_ngcontent-%COMP%]{background:#10b9811a;color:#059669;border:1px solid rgba(16,185,129,.2)}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .ride-card[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .booking-alert.alert-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#dc2626;border:1px solid rgba(239,68,68,.2)}.no-results[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.no-results[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{max-width:450px;margin:0 auto;background:#fff;border-radius:2rem;padding:3rem 2rem;box-shadow:0 4px 32px #00000012}.no-results[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#555;margin-bottom:1.5rem}.no-results[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.3rem;font-weight:700;color:#222;margin-bottom:.75rem}.no-results[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .no-results-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;margin-bottom:2rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1rem}@keyframes _ngcontent-%COMP%_typewriter{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink-caret{0%,to{border-color:transparent}50%{border-color:#a855f7}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1024px){.component-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%], .component-content[_ngcontent-%COMP%]{padding:0 1rem}.info-sections[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.search-section[_ngcontent-%COMP%]   .search-form-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.search-section[_ngcontent-%COMP%]   .search-form-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:auto}}@media (max-width: 767px){.hero-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding:3rem 0 4rem}.search-box[_ngcontent-%COMP%]{margin:-2rem 0 0;padding:1rem 2rem}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.75rem}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:calc(50% - .375rem)}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]{width:100%;margin-top:.75rem}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{width:100%}.features-section[_ngcontent-%COMP%], .info-sections[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.stats-section[_ngcontent-%COMP%]{grid-template-columns:1fr;max-width:400px;margin:0 auto 3rem}.search-results-section[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.search-results-section[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.hero-section[_ngcontent-%COMP%]{margin-top:1rem;padding:2rem 0 3rem}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-heading[_ngcontent-%COMP%]{font-size:1.75rem}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:.875rem}.search-box[_ngcontent-%COMP%]{margin:-1.5rem 0 0;padding:.75rem 1rem}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-fields[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:100%}.search-box[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .search-field.search-button-field[_ngcontent-%COMP%]{margin-top:.5rem}.ride-card[_ngcontent-%COMP%], .info-card[_ngcontent-%COMP%]{border-radius:1.5rem;padding:1.5rem}}@keyframes _ngcontent-%COMP%_borderGradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_typing{0%{max-width:0}to{max-width:100%}}@keyframes _ngcontent-%COMP%_blink-caret{0%,90%{border-color:transparent}50%{border-color:#00b2d6}to{border-color:transparent}}@keyframes _ngcontent-%COMP%_typing-subtitle{0%{max-width:0}to{max-width:100%}}@keyframes _ngcontent-%COMP%_blink-caret-subtitle{0%,90%{border-color:transparent}50%{border-color:#00b2d6}to{border-color:transparent}}']})};function x3(n,e){n&1&&(S(0,"div",52)(1,"button",53),k(2,"i",54),O(3," Save Changes "),w()())}function v3(n,e){if(n&1){let t=ut();S(0,"form",11),Ae("ngSubmit",function(){We(t);let r=me();return qe(r.onSaveProfile())}),S(1,"div",12)(2,"div",13)(3,"label",14),k(4,"i",15),O(5,"Full Name "),w(),S(6,"div",16)(7,"span",17),k(8,"i",18),w(),k(9,"input",19),w()(),S(10,"div",13)(11,"label",14),k(12,"i",20),O(13,"Email Address "),w(),S(14,"div",16)(15,"span",17),k(16,"i",21),w(),k(17,"input",22),w()(),S(18,"div",13)(19,"label",14),k(20,"i",23),O(21,"Phone Number "),w(),S(22,"div",16)(23,"span",17),k(24,"i",24),w(),k(25,"input",25),w()(),S(26,"div",26)(27,"label",14),k(28,"i",27),O(29,"Age "),w(),S(30,"div",16)(31,"span",17),k(32,"i",28),w(),k(33,"input",29),w()(),S(34,"div",26)(35,"label",14),k(36,"i",30),O(37,"Gender "),w(),S(38,"div",16)(39,"span",17),k(40,"i",31),w(),S(41,"select",32)(42,"option",33),O(43,"Male"),w(),S(44,"option",34),O(45,"Female"),w(),S(46,"option",35),O(47,"Other"),w()()()(),S(48,"div",13)(49,"label",14),k(50,"i",36),O(51,"Street Address "),w(),S(52,"div",16)(53,"span",17),k(54,"i",37),w(),k(55,"input",38),w()(),S(56,"div",13)(57,"label",14),k(58,"i",39),O(59,"City "),w(),S(60,"div",16)(61,"span",17),k(62,"i",40),w(),k(63,"input",41),w()(),S(64,"div",13)(65,"label",14),k(66,"i",42),O(67,"State/Province "),w(),S(68,"div",16)(69,"span",17),k(70,"i",43),w(),k(71,"input",44),w()(),S(72,"div",26)(73,"label",14),k(74,"i",45),O(75,"Zip Code "),w(),S(76,"div",16)(77,"span",17),k(78,"i",46),w(),k(79,"input",47),w()(),S(80,"div",26)(81,"label",14),k(82,"i",48),O(83,"Country "),w(),S(84,"div",16)(85,"span",17),k(86,"i",49),w(),k(87,"input",50),w()()(),ae(88,x3,4,0,"div",51),w()}if(n&2){let t=me();W("formGroup",t.profileForm),N(9),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(8),W("disabled",!t.editMode),N(14),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(8),W("readonly",!t.editMode),N(),W("ngIf",t.editMode)}}function b3(n,e){n&1&&(S(0,"div",55)(1,"div",56)(2,"span",57),O(3,"Loading..."),w()(),S(4,"p",58),O(5,"Updating your profile..."),w()())}function M3(n,e){if(n&1&&(S(0,"div",59),k(1,"i",60),O(2),w()),n&2){let t=me();N(2),Je(" ",t.error," ")}}var nh=class n{constructor(e,t,i){this.authService=e;this.fb=t;this.cdr=i;this.profileForm=this.fb.group({name:[""],email:[""],phone:[""],age:[""],gender:[""],street:[""],city:[""],state:[""],zipCode:[""],country:[""]})}profile=null;loading=!0;error=null;editMode=!1;profileForm;showSuccessModal=!1;ngOnInit(){this.fetchProfile()}fetchProfile(){this.loading=!0,this.error=null,this.authService.getProfile().subscribe({next:e=>{let t=e.data||e;this.profile=t,this.loading=!1,this.profileForm.patchValue(t),this.cdr.detectChanges()},error:e=>{this.error=e?.error?.message||"Failed to load profile.",this.loading=!1}})}onEditProfile(){this.editMode=!0,this.profile&&this.profileForm.patchValue(this.profile)}onCancelEdit(){this.editMode=!1,this.profile&&this.profileForm.patchValue(this.profile)}onSaveProfile(){this.profileForm.invalid||(this.loading=!0,this.authService.updateProfile(this.profileForm.value).subscribe({next:e=>{let t=e.data||e;this.profile=t,this.editMode=!1,this.loading=!1,this.showSuccessModal=!0,this.cdr.detectChanges()},error:e=>{this.error=e?.error?.message||"Failed to update profile.",this.loading=!1}}))}closeSuccessModal(){this.showSuccessModal=!1,this.fetchProfile()}static \u0275fac=function(t){return new(t||n)(Qe(mi),Qe(fi),Qe(zo))};static \u0275cmp=At({type:n,selectors:[["app-profile"]],decls:13,vars:5,consts:[[1,"container-fluid","py-4","profile-container"],[1,"card","shadow-lg"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-person-circle","me-2"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi",3,"ngClass"],[1,"card-body"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center my-4",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"row","g-4"],[1,"col-md-6"],[1,"form-label"],[1,"bi","bi-person-fill","me-2"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","formControlName","name","placeholder","Enter your full name",1,"form-control",3,"readonly"],[1,"bi","bi-envelope-fill","me-2"],[1,"bi","bi-envelope"],["type","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"readonly"],[1,"bi","bi-telephone-fill","me-2"],[1,"bi","bi-telephone"],["type","text","formControlName","phone","placeholder","Enter your phone number",1,"form-control",3,"readonly"],[1,"col-md-3"],[1,"bi","bi-calendar-fill","me-2"],[1,"bi","bi-calendar"],["type","number","formControlName","age","placeholder","Enter your age",1,"form-control",3,"readonly"],[1,"bi","bi-gender-ambiguous","me-2"],[1,"bi","bi-gender-ambiguous"],["formControlName","gender",1,"form-select",3,"disabled"],["value","MALE"],["value","FEMALE"],["value","OTHER"],[1,"bi","bi-geo-alt-fill","me-2"],[1,"bi","bi-geo-alt"],["type","text","formControlName","street","placeholder","Enter your street address",1,"form-control",3,"readonly"],[1,"bi","bi-building-fill","me-2"],[1,"bi","bi-building"],["type","text","formControlName","city","placeholder","Enter your city",1,"form-control",3,"readonly"],[1,"bi","bi-map-fill","me-2"],[1,"bi","bi-map"],["type","text","formControlName","state","placeholder","Enter your state",1,"form-control",3,"readonly"],[1,"bi","bi-pin-map-fill","me-2"],[1,"bi","bi-pin-map"],["type","text","formControlName","zipCode","placeholder","Enter zip code",1,"form-control",3,"readonly"],[1,"bi","bi-globe","me-2"],[1,"bi","bi-globe"],["type","text","formControlName","country","placeholder","Enter your country",1,"form-control",3,"readonly"],["class","mt-4 text-end",4,"ngIf"],[1,"mt-4","text-end"],["type","submit",1,"btn","btn-success","btn-lg"],[1,"bi","bi-check-circle-fill","me-2"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"alert","alert-danger","mt-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"]],template:function(t,i){t&1&&(S(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),k(4,"i",4),O(5," User Profile "),w(),S(6,"button",5),Ae("click",function(){return i.editMode?i.onCancelEdit():i.onEditProfile()}),k(7,"i",6),O(8),w()(),S(9,"div",7),ae(10,v3,89,12,"form",8)(11,b3,6,0,"div",9)(12,M3,3,1,"div",10),w()()()),t&2&&(N(7),W("ngClass",i.editMode?"bi-x-circle-fill":"bi-pencil-square-fill"),N(),Je(" ",i.editMode?"Cancel":"Edit"," "),N(2),W("ngIf",i.profileForm),N(),W("ngIf",i.loading),N(),W("ngIf",i.error))},dependencies:[qt,Uo,an,pi,ui,or,sr,ai,Vo,rr,li,ci,di,hi],styles:[".profile-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;margin-top:2rem;padding:2rem;min-height:calc(100vh - 2rem)}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:1.5rem;box-shadow:0 20px 40px #0000001a;overflow:hidden;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:1.5rem 2rem;font-weight:600;font-size:1.25rem}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#fff3;border:1px solid rgba(255,255,255,.3);color:#fff;transition:all .3s ease}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;margin-bottom:.5rem;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-right:none;color:#64748b;font-size:1rem}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-left:none;border-radius:0 .75rem .75rem 0;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#f8fafc}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background:#fff}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus + .input-group-text[_ngcontent-%COMP%], .profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus + .input-group-text[_ngcontent-%COMP%]{border-color:#667eea}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[readonly][_ngcontent-%COMP%], .profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled, .profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-select[readonly][_ngcontent-%COMP%], .profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled{background:#f1f5f9;color:#64748b;cursor:not-allowed}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.75rem;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);border:none}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px #10b9814d}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:.75rem;border:none;padding:1rem 1.5rem}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem;font-size:1.1rem}.profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}}"],data:{animation:[bh("fadeInOut",[tc(":enter",[ar({opacity:0}),ec("300ms ease-in",ar({opacity:1}))]),tc(":leave",[ec("200ms ease-out",ar({opacity:0}))])])]}})};var wt=dh(Og());var w3=["mapContainer"];function S3(n,e){if(n&1){let t=ut();S(0,"div",46),Ae("click",function(){let r=We(t).$implicit,o=me(2);return qe(o.selectFromLocation(r))}),k(1,"i",6),O(2),w()}if(n&2){let t=e.$implicit;N(2),Je(" ",t.display_name," ")}}function C3(n,e){if(n&1&&(S(0,"div",44),ae(1,S3,3,1,"div",45),w()),n&2){let t=me();N(),W("ngForOf",t.fromSuggestions)}}function P3(n,e){n&1&&(S(0,"span"),O(1,"From location is required."),w())}function E3(n,e){if(n&1&&(S(0,"div",47),ae(1,P3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.from.errors.required)}}function T3(n,e){if(n&1){let t=ut();S(0,"div",46),Ae("click",function(){let r=We(t).$implicit,o=me(2);return qe(o.selectToLocation(r))}),k(1,"i",6),O(2),w()}if(n&2){let t=e.$implicit;N(2),Je(" ",t.display_name," ")}}function O3(n,e){if(n&1&&(S(0,"div",44),ae(1,T3,3,1,"div",45),w()),n&2){let t=me();N(),W("ngForOf",t.toSuggestions)}}function A3(n,e){n&1&&(S(0,"span"),O(1,"To location is required."),w())}function L3(n,e){if(n&1&&(S(0,"div",47),ae(1,A3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.to.errors.required)}}function R3(n,e){n&1&&(S(0,"span"),O(1,"Date is required."),w())}function I3(n,e){if(n&1&&(S(0,"div",47),ae(1,R3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.date.errors.required)}}function k3(n,e){if(n&1&&(S(0,"option",49),O(1),w()),n&2){let t=e.$implicit;W("value",t),N(),Je("",t,":00")}}function D3(n,e){n&1&&(S(0,"span"),O(1,"Time is required."),w())}function F3(n,e){if(n&1&&(S(0,"div",47),ae(1,D3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.time.errors.required)}}function N3(n,e){if(n&1&&(S(0,"option",49),O(1),w()),n&2){let t=e.$implicit;W("value",t),N(),Wn(t)}}function z3(n,e){n&1&&(S(0,"span"),O(1,"Vehicle type is required."),w())}function U3(n,e){if(n&1&&(S(0,"div",47),ae(1,z3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.vehicleType.errors.required)}}function B3(n,e){n&1&&(S(0,"span"),O(1,"Luggage space is required."),w())}function V3(n,e){if(n&1&&(S(0,"div",47),ae(1,B3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.luggageSpace.errors.required)}}function G3(n,e){n&1&&(S(0,"span"),O(1,"License number is required."),w())}function H3(n,e){if(n&1&&(S(0,"div",47),ae(1,G3,2,0,"span",48),w()),n&2){let t=me();N(),W("ngIf",t.f.licenseNumber.errors.required)}}function W3(n,e){n&1&&k(0,"span",50)}function q3(n,e){n&1&&k(0,"i",51)}function j3(n,e){if(n&1){let t=ut();S(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",55),k(4,"i",56),w(),S(5,"h5"),O(6,"Ride Created Successfully!"),w(),S(7,"p"),O(8,"Your ride has been created and is now available for booking."),w(),S(9,"button",57),Ae("click",function(){We(t);let r=me();return qe(r.closeSuccessModal())}),O(10,"Continue"),w()()()()}}function Y3(n,e){n&1&&(S(0,"div",58),k(1,"div",50),S(2,"p"),O(3,"Creating your ride..."),w()())}var ih=class n{constructor(e,t,i){this.fb=e;this.http=t;this.router=i;this.rideForm=this.fb.group({from:["",ze.required],to:["",ze.required],date:["",ze.required],time:["",ze.required],vehicleType:["",ze.required],luggageSpace:["",ze.required],licenseNumber:["",ze.required]})}mapContainer;rideForm;submitted=!1;showSuccessModal=!1;showLoading=!1;map;fromMarker;toMarker;fromSuggestions=[];toSuggestions=[];showFromSuggestions=!1;showToSuggestions=!1;hours=Array.from({length:23},(e,t)=>t+1);vehicleTypes=["Car","Van","Bike","Auto"];ngOnInit(){let e=new Date().toISOString().split("T")[0];this.rideForm.patchValue({date:e})}ngAfterViewInit(){this.initMap()}initMap(){this.map=wt.map(this.mapContainer.nativeElement).setView([20.5937,78.9629],5),wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),this.getCurrentLocation();let e=wt.divIcon({className:"custom-marker from-marker",html:'<div class="marker-content"><i class="bi bi-geo-alt-fill"></i><span>From</span></div>',iconSize:[40,40],iconAnchor:[20,40]}),t=wt.divIcon({className:"custom-marker to-marker",html:'<div class="marker-content"><i class="bi bi-geo-alt"></i><span>To</span></div>',iconSize:[40,40],iconAnchor:[20,40]});this.fromMarker=wt.marker([0,0],{icon:e}),this.toMarker=wt.marker([0,0],{icon:t}),this.fromMarker.on("click",()=>{this.showMarkerInfo("From Location",this.rideForm.get("from")?.value)}),this.toMarker.on("click",()=>{this.showMarkerInfo("To Location",this.rideForm.get("to")?.value)})}getCurrentLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,i=e.coords.longitude;this.map.setView([t,i],10);let r=wt.divIcon({className:"custom-marker current-location-marker",html:'<div class="marker-content"><i class="bi bi-geo-alt-fill"></i><span>You</span></div>',iconSize:[40,40],iconAnchor:[20,40]});wt.marker([t,i],{icon:r}).addTo(this.map).on("click",()=>{this.showMarkerInfo("Current Location",`Lat: ${t.toFixed(4)}, Lng: ${i.toFixed(4)}`)}),this.reverseGeocode(t,i)},e=>{console.log("Error getting current location:",e)})}async reverseGeocode(e,t){try{let i=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`).then(r=>r.json());i.display_name&&console.log("Current location:",i.display_name)}catch(i){console.error("Error reverse geocoding:",i)}}showMarkerInfo(e,t){t&&alert(`${e}: ${t}`)}async searchLocation(e){if(e.length<3)return[];try{return(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&countrycodes=in&limit=5`).then(i=>i.json())).map(i=>({display_name:i.display_name,lat:parseFloat(i.lat),lon:parseFloat(i.lon)}))}catch(t){return console.error("Error searching location:",t),[]}}async onFromInput(e){let t=e.target.value;this.showFromSuggestions=t.length>=3,this.showFromSuggestions&&(this.fromSuggestions=await this.searchLocation(t))}async onToInput(e){let t=e.target.value;this.showToSuggestions=t.length>=3,this.showToSuggestions&&(this.toSuggestions=await this.searchLocation(t))}selectFromLocation(e){this.rideForm.patchValue({from:e.display_name}),this.showFromSuggestions=!1,this.addFromMarker(e.lat,e.lon),this.updateMapView()}selectToLocation(e){this.rideForm.patchValue({to:e.display_name}),this.showToSuggestions=!1,this.addToMarker(e.lat,e.lon),this.updateMapView()}addFromMarker(e,t){this.fromMarker.setLatLng([e,t]).addTo(this.map)}addToMarker(e,t){this.toMarker.setLatLng([e,t]).addTo(this.map)}updateMapView(){let e=this.fromMarker.getLatLng(),t=this.toMarker.getLatLng();if(e.lat!==0&&t.lat!==0){let i=wt.latLngBounds([e,t]);this.map.fitBounds(i,{padding:[50,50]}),this.drawRoute(e,t);let r=e.distanceTo(t);this.showRouteInfo(r)}}showRouteInfo(e){console.log(`Route distance: ${(e/1e3).toFixed(1)} km`),console.log(`From: ${this.rideForm.get("from")?.value}`),console.log(`To: ${this.rideForm.get("to")?.value}`)}drawRoute(e,t){this.map.eachLayer(o=>{o instanceof wt.Polyline&&this.map.removeLayer(o)}),wt.polyline([e,t],{color:"#2563eb",weight:6,opacity:.8,dashArray:"15, 10",lineCap:"round",lineJoin:"round"}).addTo(this.map);let i=wt.latLng((e.lat+t.lat)/2,(e.lng+t.lng)/2),r=wt.divIcon({className:"route-arrow",html:'<i class="bi bi-arrow-right"></i>',iconSize:[20,20],iconAnchor:[10,10]});wt.marker(i,{icon:r}).addTo(this.map)}hideSuggestions(){setTimeout(()=>{this.showFromSuggestions=!1,this.showToSuggestions=!1},200)}get f(){return this.rideForm.controls}onSubmit(){if(this.submitted=!0,this.rideForm.invalid)return;this.showLoading=!0;let e=si({},this.rideForm.value),t=parseInt(e.time,10),i={from:e.from,to:e.to,date:e.date,time:t.toString().padStart(2,"0")+":00:00",vehicleType:e.vehicleType?e.vehicleType.toUpperCase():void 0,luggageSpace:e.luggageSpace?e.luggageSpace.toUpperCase():void 0,drivingLicenseNumber:e.licenseNumber,rideUserId:localStorage.getItem("userId")||""};this.http.post("http://localhost:8086/api/v1/rides",i).subscribe({next:r=>{this.rideForm.reset(),this.submitted=!1,this.showLoading=!1,this.showSuccessModal=!0,this.fromMarker.remove(),this.toMarker.remove()},error:r=>{this.showLoading=!1,alert("Failed to create ride. Please try again.")}})}closeSuccessModal(){this.showSuccessModal=!1,this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)(Qe(fi),Qe(Bo),Qe(ir))};static \u0275cmp=At({type:n,selectors:[["app-create-ride"]],viewQuery:function(t,i){if(t&1&&ra(w3,5),t&2){let r;oa(r=sa())&&(i.mapContainer=r.first)}},decls:95,vars:18,consts:[["mapContainer",""],[1,"component-container"],[1,"component-content"],[1,"create-ride-layout"],[1,"map-section"],[1,"map-header"],[1,"bi","bi-geo-alt-fill"],[1,"map-container"],[1,"form-section"],[1,"form-container"],[1,"form-header"],[1,"bi","bi-car-front-fill"],["novalidate","",1,"create-ride-form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-field"],[1,"field-label"],[1,"input-wrapper"],[1,"bi","bi-geo-alt-fill","input-icon"],["type","text","formControlName","from","placeholder","Enter pickup location",1,"component-input",3,"input","blur"],["class","suggestions-dropdown",4,"ngIf"],["class","form-error",4,"ngIf"],["type","text","formControlName","to","placeholder","Enter destination",1,"component-input",3,"input","blur"],[1,"form-row"],[1,"bi","bi-calendar-date-fill"],["type","date","formControlName","date",1,"component-input"],[1,"bi","bi-clock-fill"],["formControlName","time",1,"component-input"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"bi","bi-truck"],["formControlName","vehicleType",1,"component-input"],[1,"bi","bi-box-seam-fill"],["formControlName","luggageSpace",1,"component-input"],["value","small"],["value","medium"],["value","large"],[1,"bi","bi-card-text"],["type","text","formControlName","licenseNumber","placeholder","e.g. AP01 12345678901",1,"component-input"],[1,"form-actions"],["type","submit",1,"component-button-primary",3,"disabled"],["class","loading-spinner",4,"ngIf"],["class","bi bi-truck-flatbed-fill",4,"ngIf"],["class","modal-overlay",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"suggestions-dropdown"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"suggestion-item",3,"click"],[1,"form-error"],[4,"ngIf"],[3,"value"],[1,"loading-spinner"],[1,"bi","bi-truck-flatbed-fill"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-body"],[1,"success-icon"],[1,"bi","bi-check-circle-fill"],[1,"component-button-primary",3,"click"],[1,"loading-overlay"]],template:function(t,i){if(t&1){let r=ut();S(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h2"),k(6,"i",6),O(7,"Route Map"),w(),S(8,"p"),O(9,"Visualize your route on the map"),w()(),k(10,"div",7,0),w(),S(12,"div",8)(13,"div",9)(14,"div",10)(15,"h2"),k(16,"i",11),O(17,"Create a Ride"),w(),S(18,"p"),O(19,"Set up your transportation route and make it available for booking"),w()(),S(20,"form",12),Ae("ngSubmit",function(){return We(r),qe(i.onSubmit())}),S(21,"div",13)(22,"div",14)(23,"label",15),k(24,"i",6),O(25,"From Location "),w(),S(26,"div",16),k(27,"i",17),S(28,"input",18),Ae("input",function(s){return We(r),qe(i.onFromInput(s))})("blur",function(){return We(r),qe(i.hideSuggestions())}),w(),ae(29,C3,2,1,"div",19),w(),ae(30,E3,2,1,"div",20),w(),S(31,"div",14)(32,"label",15),k(33,"i",6),O(34,"To Location "),w(),S(35,"div",16),k(36,"i",17),S(37,"input",21),Ae("input",function(s){return We(r),qe(i.onToInput(s))})("blur",function(){return We(r),qe(i.hideSuggestions())}),w(),ae(38,O3,2,1,"div",19),w(),ae(39,L3,2,1,"div",20),w()(),S(40,"div",13)(41,"div",22)(42,"div",14)(43,"label",15),k(44,"i",23),O(45,"Date "),w(),k(46,"input",24),ae(47,I3,2,1,"div",20),w(),S(48,"div",14)(49,"label",15),k(50,"i",25),O(51,"Time "),w(),S(52,"select",26)(53,"option",27),O(54,"Select hour"),w(),ae(55,k3,2,2,"option",28),w(),ae(56,F3,2,1,"div",20),w()(),S(57,"div",22)(58,"div",14)(59,"label",15),k(60,"i",29),O(61,"Vehicle Type "),w(),S(62,"select",30)(63,"option",27),O(64,"Select vehicle type"),w(),ae(65,N3,2,2,"option",28),w(),ae(66,U3,2,1,"div",20),w(),S(67,"div",14)(68,"label",15),k(69,"i",31),O(70,"Luggage Space "),w(),S(71,"select",32)(72,"option",27),O(73,"Select luggage space"),w(),S(74,"option",33),O(75,"0-249 ltrs (Small)"),w(),S(76,"option",34),O(77,"250-499 ltrs (Medium)"),w(),S(78,"option",35),O(79,"500-750 ltrs (Large)"),w()(),ae(80,V3,2,1,"div",20),w()()(),S(81,"div",13)(82,"div",14)(83,"label",15),k(84,"i",36),O(85,"Driving License Number "),w(),k(86,"input",37),ae(87,H3,2,1,"div",20),w()(),S(88,"div",38)(89,"button",39),ae(90,W3,1,0,"span",40)(91,q3,1,0,"i",41),O(92),w()()()()()()()(),ae(93,j3,11,0,"div",42)(94,Y3,4,0,"div",43)}t&2&&(N(20),W("formGroup",i.rideForm),N(9),W("ngIf",i.showFromSuggestions&&i.fromSuggestions.length>0),N(),W("ngIf",i.submitted&&i.f.from.errors),N(8),W("ngIf",i.showToSuggestions&&i.toSuggestions.length>0),N(),W("ngIf",i.submitted&&i.f.to.errors),N(8),W("ngIf",i.submitted&&i.f.date.errors),N(8),W("ngForOf",i.hours),N(),W("ngIf",i.submitted&&i.f.time.errors),N(9),W("ngForOf",i.vehicleTypes),N(),W("ngIf",i.submitted&&i.f.vehicleType.errors),N(14),W("ngIf",i.submitted&&i.f.luggageSpace.errors),N(7),W("ngIf",i.submitted&&i.f.licenseNumber.errors),N(2),W("disabled",i.showLoading),N(),W("ngIf",i.showLoading),N(),W("ngIf",!i.showLoading),N(),Je(" ",i.showLoading?"Creating Ride...":"Create Ride"," "),N(),W("ngIf",i.showSuccessModal),N(),W("ngIf",i.showLoading))},dependencies:[qt,Jl,an,pi,ui,or,sr,ai,rr,li,ci,di,hi],styles:["@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}20%{transform:translateY(-18px)}40%{transform:translateY(0)}60%{transform:translateY(10px)}80%{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_border-glow{0%{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}30%{box-shadow:0 0 16px 4px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}60%{box-shadow:0 0 16px 4px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}to{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}}@keyframes _ngcontent-%COMP%_step3-bounce{0%,to{transform:translateY(0) scale(1)}25%{transform:translateY(-12px) scale(1.02)}50%{transform:translateY(0) scale(1)}75%{transform:translateY(-6px) scale(1.01)}}.component-container[_ngcontent-%COMP%]{min-height:100vh;background:#f3f8ff;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;padding:0;width:100%}.component-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;width:100%;margin-top:-2.5rem;position:relative;z-index:2}.component-card[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:2rem;box-shadow:0 4px 32px #00000012;border:1px solid #e5e7eb;transition:all .3s ease}.component-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #2563eb66}.component-button-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #00000012;letter-spacing:.5px}.component-button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#2563eb);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66;border-color:#1d4ed8}.component-button-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.component-button-secondary[_ngcontent-%COMP%]{background:#fff;color:#2563eb;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;letter-spacing:.5px}.component-button-secondary[_ngcontent-%COMP%]:hover{background:#f3f8ff;transform:translateY(-2px);box-shadow:0 4px 16px #2563eb1a}.component-input[_ngcontent-%COMP%]{width:100%;padding:.3rem 1.2rem;border:2px solid #e5e7eb;border-radius:1rem;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#fff;transition:all .3s ease}.component-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb1a}.component-input[_ngcontent-%COMP%]::placeholder{color:#6c7a89}.component-hero[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f8ff,#fff7ed);border-radius:2rem;box-shadow:0 4px 32px #00000012;padding:4rem 0;text-align:center;position:relative;width:100%;min-height:480px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#555;font-size:16px;z-index:1;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:40px}.promo-badge[_ngcontent-%COMP%]{display:inline-block;background:#e9f1ff;color:#2563eb;font-weight:600;border-radius:2rem;padding:.4rem 1.2rem;font-size:1.1rem;box-shadow:0 2px 8px #00000012}.promo-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#34d399;border-radius:50%;margin-right:.5rem}.timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;box-shadow:0 4px 16px #2563eb1a;margin:0 auto;position:relative;z-index:2}.step-pill[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:.5rem 1.4rem;font-weight:600;font-size:1.1rem;color:#222;box-shadow:0 2px 8px #00000012;border:1px solid #e5e7eb;display:inline-block}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-pending[_ngcontent-%COMP%]{background:#f59e421a;color:#f59e42}.status-badge.status-in-transit[_ngcontent-%COMP%]{background:#22d3ee1a;color:#22d3ee}.status-badge.status-delivered[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}@media (max-width: 991px){.component-content[_ngcontent-%COMP%]{padding:0 1.5rem}.component-hero[_ngcontent-%COMP%]{min-height:400px;padding:2rem .5rem}}@media (max-width: 767px){.component-content[_ngcontent-%COMP%]{padding:0 1rem}.component-hero[_ngcontent-%COMP%]{border-radius:1.2rem;min-height:320px}.timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1.2rem}}.create-ride-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:0;min-height:calc(100vh - 140px);width:100vw;margin-left:calc(-50vw + 50%);margin-right:calc(-50vw + 50%);margin-top:40px}.map-section[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:none;overflow:hidden;height:100%;display:flex;flex-direction:column}.map-section[_ngcontent-%COMP%]   .map-header[_ngcontent-%COMP%]{padding:2.5rem 2rem 2rem;border-bottom:1px solid #e5e7eb}.map-section[_ngcontent-%COMP%]   .map-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.2rem;font-weight:700;color:#222;margin-bottom:.5rem}.map-section[_ngcontent-%COMP%]   .map-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.map-section[_ngcontent-%COMP%]   .map-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;margin:0}.map-section[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]{height:100%;width:100%;position:relative;flex:1;border-radius:1.2rem;overflow:hidden;margin-left:1.5rem}.map-section[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{background:#fffffff2;border-radius:.5rem;padding:1.5rem;box-shadow:0 4px 16px #2563eb1a;margin:1rem}.map-section[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#222;margin-bottom:.5rem}.map-section[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#555;margin:.5rem 0}.custom-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]{background:#fff;border-radius:50%;width:40px;height:40px;display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 2px 8px #0003;border:3px solid #2563eb}.custom-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#2563eb}.custom-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;color:#222;margin-top:-2px}.custom-marker.from-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]{border-color:#2563eb}.custom-marker.from-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2563eb}.custom-marker.to-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]{border-color:#34d399}.custom-marker.to-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#34d399}.custom-marker.current-location-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]{border-color:#a855f7;background:#a855f7}.custom-marker.current-location-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .custom-marker.current-location-marker[_ngcontent-%COMP%]   .marker-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.route-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#2563eb;background:#fff;border-radius:50%;padding:2px;box-shadow:0 2px 4px #0003}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%;background:#fff;padding:2.5rem 2rem 2rem;overflow-y:auto}.form-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}.form-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.3rem;font-weight:700;color:#222;margin-bottom:.5rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;margin:0}.create-ride-form[_ngcontent-%COMP%]{text-align:left}.create-ride-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:2rem}.create-ride-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.1rem;font-weight:600;color:#222;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #e5e7eb}.create-ride-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.create-ride-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1rem}.create-ride-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.create-ride-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#222;margin-bottom:.5rem;font-size:1rem}.create-ride-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c7a89;font-size:1rem;z-index:1}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:2.5rem}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .suggestions-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;box-shadow:0 4px 16px #2563eb1a;z-index:10;max-height:200px;overflow-y:auto}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .suggestions-dropdown[_ngcontent-%COMP%]   .suggestion-item[_ngcontent-%COMP%]{padding:1rem 1.5rem;cursor:pointer;transition:background .3s ease;display:flex;align-items:center}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .suggestions-dropdown[_ngcontent-%COMP%]   .suggestion-item[_ngcontent-%COMP%]:hover{background:#f3f8ff}.create-ride-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .suggestions-dropdown[_ngcontent-%COMP%]   .suggestion-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#2563eb}.create-ride-form[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.5rem}.create-ride-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}.create-ride-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:200px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:2.5rem;text-align:center;max-width:400px;width:90%;box-shadow:0 4px 32px #00000012}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#34d399}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.2rem;font-weight:700;color:#222;margin-bottom:1rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;margin-bottom:2rem}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem;border:3px solid transparent;border-top:3px solid #2563eb;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1.5rem}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1rem;margin:0}@media (max-width: 991px){.create-ride-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0;min-height:calc(100vh - 140px)}.map-section[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]{height:50vh}.form-section[_ngcontent-%COMP%]{height:50vh;overflow-y:auto}.create-ride-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 767px){.create-ride-layout[_ngcontent-%COMP%]{padding:0;gap:0}.map-section[_ngcontent-%COMP%]   .map-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem}.map-section[_ngcontent-%COMP%]   .map-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.map-section[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]{height:50vh}.form-section[_ngcontent-%COMP%]{height:50vh;padding:2rem 1.5rem 1.5rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.create-ride-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:2rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}}"]})};var rh=class n{title="Welcome to Goods Transportation System";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-homepage"]],decls:200,vars:2,consts:[[1,"navbar-wrapper"],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","rounded-pill","px-4","py-2","d-flex","align-items-center","justify-content-between"],["href","#",1,"navbar-brand","fw-bold","fs-3","text-primary"],[1,"logo-icon","me-2"],[1,"navbar-nav","flex-row","gap-4","align-items-center"],[1,"nav-item"],["href","#how-it-works",1,"nav-link","fw-semibold"],["href","#",1,"nav-link","fw-semibold"],[1,"auth-buttons","d-flex","gap-3","align-items-center"],[1,"btn","btn-outline-primary","rounded-pill","px-4","py-2","fw-semibold",3,"routerLink"],[1,"btn","btn-primary","rounded-pill","px-4","py-2","fw-bold","shadow-sm",3,"routerLink"],[1,"homepage-hero","container-fluid","py-5","mt-4","position-relative","rounded-4"],[1,"row","align-items-center","justify-content-center"],[1,"col-md-3","d-flex","justify-content-center","mb-4","mb-md-0"],[1,"hero-box","from-box","d-flex","flex-column","align-items-center","justify-content-center"],["src","/from.png","alt","From You",1,"box-img","mb-2"],[1,"col-md-6","text-center"],[1,"promo-badge","mb-3","mx-auto"],[1,"dot"],[1,"display-3","fw-bold","mb-3"],[1,"text-primary"],[1,"lead","mb-4"],[1,"btn","btn-outline-primary","rounded-pill","px-4","py-2","mb-3","fw-semibold","shadow-sm"],[1,"me-2"],[1,"col-md-3","d-flex","justify-content-center","mt-4","mt-md-0"],[1,"hero-box","to-box","d-flex","flex-column","align-items-center","justify-content-center","position-relative"],["src","/to.png","alt","To Anywhere",1,"box-img","mb-2"],[1,"homepage-features","container","my-5"],[1,"row","mb-4"],[1,"col-12","text-center"],[1,"features-headline","fw-bold"],[1,"text-primary","fst-italic"],[1,"text-highlight","fst-italic"],[1,"row","g-4","justify-content-center"],[1,"col-md-6"],[1,"feature-card","live-tracking-card","p-4","h-100","d-flex","flex-column","justify-content-between"],[1,"fw-bold","text-white","mb-3"],[1,"text-white","fs-5","mb-4"],[1,"d-flex","align-items-center","mb-4"],[1,"dot-active","me-2"],[1,"text-white","fw-semibold"],[1,"feature-illustration","mt-auto"],["src","/3d-view-map.jpg","alt","Live Tracking",1,"live-tracking-img"],[1,"feature-card","kyc-card","p-4","h-100","d-flex","flex-column","justify-content-between"],[1,"fw-bold","text-dark","mb-3"],[1,"text-dark","fs-5","mb-4"],[1,"feature-illustration","mt-auto","mb-3"],["src","/kyc.jpg","alt","KYC Verification",1,"kyc-img"],[1,"text-dark","fw-semibold","mt-auto"],["id","how-it-works",1,"how-it-works","container","my-5"],[1,"row","mb-5"],[1,"how-title","fw-bold"],[1,"how-subtitle"],[1,"how-steps","position-relative","timeline-vertical"],[1,"timeline-main-line"],[1,"row","align-items-center","mb-5","how-step-row"],[1,"col-md-5","offset-md-1","order-2","order-md-1"],[1,"step-label"],[1,"step-title"],[1,"step-desc"],[1,"step-pills","mb-3"],[1,"step-pill"],[1,"col-md-1","d-flex","flex-column","align-items-center","justify-content-center","position-relative","order-1","order-md-2"],[1,"timeline-icon","step1"],[1,"bi","bi-phone"],[1,"col-md-5","order-3"],[1,"step-visual","step1-visual","mx-auto"],["src","/signUp.jpg","alt","Sign Up",1,"img-fluid"],[1,"row","align-items-center","mb-5","how-step-row","flex-md-row-reverse"],[1,"col-md-5","offset-md-1","order-2","order-md-3"],[1,"timeline-icon","step2"],[1,"bi","bi-people"],[1,"col-md-5","order-3","order-md-1"],[1,"step-visual","step2-visual","mx-auto"],["src","/verifiedTraveller.png","alt","Choose Traveler",1,"img-fluid"],[1,"timeline-icon","step3"],[1,"bi","bi-box"],[1,"step-visual","step3-visual","mx-auto"],["src","/sendParcel.png","alt","Send Parcel",1,"img-fluid"],[1,"bg-primary","text-white","pt-5","pb-4","mt-5"],[1,"container"],[1,"row","text-center","text-md-start"],[1,"col-md-3","mb-4"],[1,"fw-bold"],[1,"mb-0"],[1,"list-unstyled"],["href","#",1,"text-white","text-decoration-none"],[1,"border-light"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-center"],[1,"social-icons","mt-3","mt-md-0"],["href","#",1,"text-white","fs-5","me-3"],[1,"bi","bi-instagram"],["href","#",1,"text-white","fs-5"],[1,"bi","bi-linkedin"]],template:function(t,i){t&1&&(S(0,"div",0)(1,"nav",1)(2,"a",2),k(3,"span",3),O(4," DispatchTrack "),w(),S(5,"ul",4)(6,"li",5)(7,"a",6),O(8,"How It Works"),w()(),S(9,"li",5)(10,"a",7),O(11,"Blogs"),w()(),S(12,"li",5)(13,"a",7),O(14,"About"),w()(),S(15,"li",5)(16,"a",7),O(17,"Others"),w()()(),S(18,"div",8)(19,"a",9),O(20,"Login"),w(),S(21,"a",10),O(22,"Sign Up"),w()()()(),S(23,"div",11)(24,"div",12)(25,"div",13)(26,"div",14),k(27,"img",15),w()(),S(28,"div",16)(29,"div",17),k(30,"span",18),O(31," DispatchTrack will be live soon! \u{1F680} "),w(),S(32,"h1",19),O(33,"Send your "),S(34,"span",20),O(35,"Parcels"),w(),O(36," seamlessly"),k(37,"br"),O(38,"with DispatchTrack."),w(),S(39,"p",21),O(40,"DispatchTrack makes sending packages easier and cheaper than ever before. Just sign up and tell us where you want your package to go."),w(),S(41,"button",22)(42,"span",23),O(43,"\u26A1"),w(),O(44,"Get up to 60% off on your first order "),w()(),S(45,"div",24)(46,"div",25),k(47,"img",26),w()()()(),S(48,"section",27)(49,"div",28)(50,"div",29)(51,"h2",30),O(52," Send With "),S(53,"span",31),O(54,"heart"),w(),k(55,"br"),O(56," Travel with "),S(57,"span",32),O(58,"Purpose"),w()()()(),S(59,"div",33)(60,"div",34)(61,"div",35)(62,"div")(63,"h3",36),O(64,"Live Tracking"),w(),S(65,"p",37),O(66,"Track your packages in real-time with precise location updates"),w(),S(67,"div",38),k(68,"span",39),S(69,"span",40),O(70,"Active now"),w()()(),S(71,"div",41),k(72,"img",42),w()()(),S(73,"div",34)(74,"div",43)(75,"div")(76,"h3",44),O(77,"KYC Verification"),w(),S(78,"p",45),O(79,"Secure identity verification for trusted deliveries"),w()(),S(80,"div",46),k(81,"img",47),w(),S(82,"div",48),O(83,"Verified & Secure"),w()()()()(),S(84,"section",49)(85,"div",50)(86,"div",29)(87,"h2",51),O(88,"How DispatchTrack Works"),w(),S(89,"p",52),O(90,"Send your parcels across India in three simple steps. Fast, secure, and reliable."),w()()(),S(91,"div",53),k(92,"div",54),S(93,"div",55)(94,"div",56)(95,"div",57),O(96,"STEP 1"),w(),S(97,"h3",58),O(98,"Sign Up"),w(),S(99,"p",59),O(100,"Create your account with just your mobile number. Quick, secure, and ready to go in seconds."),w(),S(101,"div",60)(102,"span",61),O(103,"Quick Setup"),w(),S(104,"span",61),O(105,"Secure"),w()()(),S(106,"div",62)(107,"div",63),k(108,"i",64),w()(),S(109,"div",65)(110,"div",66),k(111,"img",67),w()()(),S(112,"div",68)(113,"div",69)(114,"div",57),O(115,"STEP 2"),w(),S(116,"h3",58),O(117,"Choose a Traveler"),w(),S(118,"p",59),O(119,"Browse verified travelers heading to your destination and select the perfect match for your parcel."),w(),S(120,"div",60)(121,"span",61),O(122,"Verified Travelers"),w(),S(123,"span",61),O(124,"Real-time Matching"),w()()(),S(125,"div",62)(126,"div",70),k(127,"i",71),w()(),S(128,"div",72)(129,"div",73),k(130,"img",74),w()()(),S(131,"div",55)(132,"div",56)(133,"div",57),O(134,"STEP 3"),w(),S(135,"h3",58),O(136,"Send Your Parcel"),w(),S(137,"p",59),O(138,"Hand over your package and track its journey in real-time until it safely reaches its destination."),w(),S(139,"div",60)(140,"span",61),O(141,"Live Tracking"),w(),S(142,"span",61),O(143,"Instant Updates"),w()()(),S(144,"div",62)(145,"div",75),k(146,"i",76),w()(),S(147,"div",65)(148,"div",77),k(149,"img",78),w()()()()(),S(150,"footer",79)(151,"div",80)(152,"div",81)(153,"div",82)(154,"h3",83),O(155,"DispatchTrack"),w(),S(156,"p",84),O(157,"Making parcel delivery simple, fast, and reliable for everyone."),w()(),S(158,"div",82)(159,"h5",83),O(160,"Quick Links"),w(),S(161,"ul",85)(162,"li")(163,"a",86),O(164,"About Us"),w()(),S(165,"li")(166,"a",86),O(167,"Careers"),w()(),S(168,"li")(169,"a",86),O(170,"Contact"),w()()()(),S(171,"div",82)(172,"h5",83),O(173,"Legal"),w(),S(174,"ul",85)(175,"li")(176,"a",86),O(177,"Terms & Conditions"),w()(),S(178,"li")(179,"a",86),O(180,"Privacy Policy"),w()(),S(181,"li")(182,"a",86),O(183,"Refund Policy"),w()()()(),S(184,"div",82)(185,"h5",83),O(186,"Contact"),w(),S(187,"p"),O(188,"Follow us @dispatchtrack"),w(),S(189,"p"),O(190,"+91-6305835023"),w()()(),k(191,"hr",87),S(192,"div",88)(193,"p",84),O(194,"\xA9 2025 DispatchTrack. All rights reserved."),w(),S(195,"div",89)(196,"a",90),k(197,"i",91),w(),S(198,"a",92),k(199,"i",93),w()()()()()),t&2&&(N(19),W("routerLink","/login"),N(2),W("routerLink","/sign-up"))},dependencies:[qt,Ql],styles:[".container[_ngcontent-%COMP%]{margin-top:60px}html[_ngcontent-%COMP%]{scroll-behavior:smooth}h1.display-4[_ngcontent-%COMP%]{color:#007bff}.lead[_ngcontent-%COMP%]{color:#555}.btn-block[_ngcontent-%COMP%]{width:100%}.navbar-wrapper[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:1.5rem auto 0;display:flex;justify-content:center}.navbar[_ngcontent-%COMP%]{width:100%;margin:0}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem!important}.nav-link[_ngcontent-%COMP%]{font-size:1rem!important;padding:.2rem .7rem!important}.btn[_ngcontent-%COMP%]{font-size:1rem!important;padding:.3rem 1.2rem!important}.auth-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:all .3s ease;border-width:2px;font-weight:600;letter-spacing:.5px}.auth-buttons[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2563eb4d}.auth-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);border:2px solid #2563eb}.auth-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#2563eb);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66;border-color:#1d4ed8}.logo-icon[_ngcontent-%COMP%]{font-size:2rem}.homepage-hero[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f8ff,#fff7ed);border-radius:2.5rem;box-shadow:0 8px 32px #00000012;min-height:480px}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}20%{transform:translateY(-18px)}40%{transform:translateY(0)}60%{transform:translateY(10px)}80%{transform:translateY(0)}}.hero-box[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 5s infinite cubic-bezier(.68,-.55,.27,1.55)}.to-box[_ngcontent-%COMP%]{animation-delay:1.1s}.from-box[_ngcontent-%COMP%]{margin-left:1rem}.to-box[_ngcontent-%COMP%]{margin-right:1rem}.box-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block;margin:0;padding:0}.box-label[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;color:#222;letter-spacing:1px;background:#f8f9fa;border-radius:.5rem;padding:.3rem 1.2rem;margin-top:.5rem}.location-pin[_ngcontent-%COMP%]{right:-18px;bottom:-18px}.promo-badge[_ngcontent-%COMP%]{display:inline-block;background:#e9f1ff;color:#2563eb;font-weight:600;border-radius:1.5rem;padding:.4rem 1.2rem;font-size:1.1rem;box-shadow:0 2px 8px #2563eb12}.promo-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#34d399;border-radius:50%;margin-right:.5rem}.store-btn[_ngcontent-%COMP%]{display:flex;align-items:center;background:#111;color:#fff;border-radius:1rem;padding:.7rem 1.2rem;font-size:1rem;text-decoration:none;min-width:170px;min-height:60px;transition:background .2s}.store-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}@media (max-width: 991px){.homepage-hero[_ngcontent-%COMP%]{min-height:400px;padding:2rem .5rem}.hero-box[_ngcontent-%COMP%]{width:140px;height:140px}.box-img[_ngcontent-%COMP%]{width:60px;height:60px}}@media (max-width: 767px){.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem .5rem}.homepage-hero[_ngcontent-%COMP%]{border-radius:1.2rem;min-height:320px}.hero-box[_ngcontent-%COMP%]{width:100px;height:100px}.box-label[_ngcontent-%COMP%]{font-size:1rem;padding:.2rem .7rem}}.homepage-features[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.features-headline[_ngcontent-%COMP%]{font-size:2.7rem;line-height:1.2;margin-bottom:2.5rem}.features-headline[_ngcontent-%COMP%]   .text-primary[_ngcontent-%COMP%]{color:#2346d6!important}.features-headline[_ngcontent-%COMP%]   .text-highlight[_ngcontent-%COMP%]{color:#2346d6}.feature-card[_ngcontent-%COMP%]{border-radius:2rem;box-shadow:0 4px 32px #00000012;min-height:320px;display:flex;flex-direction:column;justify-content:space-between}.live-tracking-card[_ngcontent-%COMP%]{background:linear-gradient(120deg,#3ecf8e,#2b9ed8)}.kyc-card[_ngcontent-%COMP%]{background:linear-gradient(120deg,#ffd600,#ffb300)}.dot-active[_ngcontent-%COMP%]{width:14px;height:14px;background:#34d399;border-radius:50%;display:inline-block}.feature-illustration[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-end;min-height:60px}.kyc-img[_ngcontent-%COMP%], .live-tracking-img[_ngcontent-%COMP%]{width:100%;max-width:320px;height:auto;display:block;margin:0 auto;border-radius:1.2rem;object-fit:contain;box-shadow:0 2px 12px #00000012}@media (max-width: 991px){.feature-card[_ngcontent-%COMP%]{min-height:220px;border-radius:1.2rem}.features-headline[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 767px){.homepage-features[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.feature-card[_ngcontent-%COMP%]{min-height:180px;padding:1.2rem!important}.features-headline[_ngcontent-%COMP%]{font-size:1.3rem}}.how-it-works[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.how-title[_ngcontent-%COMP%]{font-size:2.7rem;margin-bottom:.5rem}.how-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#555;margin-bottom:2.5rem}.how-steps[_ngcontent-%COMP%]{position:relative;z-index:1}.how-step-row[_ngcontent-%COMP%]{min-height:340px;position:relative}.step-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#6c7a89;letter-spacing:1px;margin-bottom:.5rem}.step-title[_ngcontent-%COMP%]{font-size:2.1rem;font-weight:800;margin-bottom:.7rem}.step-desc[_ngcontent-%COMP%]{font-size:1.15rem;color:#444;margin-bottom:1.2rem}.step-pills[_ngcontent-%COMP%]{display:flex;gap:1rem}.step-pill[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:.5rem 1.4rem;font-weight:600;font-size:1.05rem;color:#222;box-shadow:0 2px 8px #00000012;border:1px solid #f0f0f0;display:inline-block}.timeline-line[_ngcontent-%COMP%]{width:6px;background:linear-gradient(180deg,#2563eb,#a855f7);flex-grow:1;min-height:30px;border-radius:3px;margin:0 auto}.timeline-vertical[_ngcontent-%COMP%]{position:relative}.timeline-main-line[_ngcontent-%COMP%]{position:absolute;left:50%;top:60px;bottom:60px;width:6px;background:linear-gradient(180deg,#2563eb,#a855f7);border-radius:3px;transform:translate(-50%);z-index:0}.timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;box-shadow:0 4px 16px #2563eb1a;margin:0 auto;position:relative;z-index:2}.timeline-icon.step2[_ngcontent-%COMP%]{background:#6d28d9}.timeline-icon.step3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#f59e42);color:#fff}.step-visual[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 4px 32px #00000012;padding:2.2rem 1.5rem;display:flex;align-items:center;justify-content:center;min-height:260px;max-width:420px}.step-visual[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:1.2rem}.step1-visual[_ngcontent-%COMP%]{position:relative;animation:_ngcontent-%COMP%_border-glow 2.5s linear infinite;box-shadow:0 4px 32px #00000012}@keyframes _ngcontent-%COMP%_border-glow{0%{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}30%{box-shadow:0 0 16px 4px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}60%{box-shadow:0 0 16px 4px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}to{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}}.step3-visual[_ngcontent-%COMP%]{position:relative;animation:_ngcontent-%COMP%_step3-bounce 3s ease-in-out infinite,_ngcontent-%COMP%_step3-border-glow 2.8s linear infinite;box-shadow:0 4px 32px #00000012}@keyframes _ngcontent-%COMP%_step3-bounce{0%,to{transform:translateY(0) scale(1)}25%{transform:translateY(-12px) scale(1.02)}50%{transform:translateY(0) scale(1)}75%{transform:translateY(-6px) scale(1.01)}}@keyframes _ngcontent-%COMP%_step3-border-glow{0%{box-shadow:0 0 #f59e42,0 4px 32px #00000012;border:2px solid #f59e42}25%{box-shadow:0 0 20px 6px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}50%{box-shadow:0 0 20px 6px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}75%{box-shadow:0 0 20px 6px #34d399,0 4px 32px #00000012;border:2px solid #34d399}to{box-shadow:0 0 #f59e42,0 4px 32px #00000012;border:2px solid #f59e42}}@media (max-width: 991px){.how-title[_ngcontent-%COMP%]{font-size:2rem}.step-title[_ngcontent-%COMP%]{font-size:1.3rem}.step-visual[_ngcontent-%COMP%]{min-height:160px;padding:1.2rem .5rem}}@media (max-width: 767px){.how-it-works[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.how-title[_ngcontent-%COMP%]{font-size:1.3rem}.how-step-row[_ngcontent-%COMP%]{min-height:180px}.step-visual[_ngcontent-%COMP%]{min-height:80px;padding:.5rem .2rem}.timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1.2rem}}"]})};function X3(n,e){if(n&1){let t=ut();S(0,"ul",28),Ae("mouseleave",function(){We(t);let r=me();return qe(r.closeProfileDropdown())}),S(1,"li")(2,"a",29),k(3,"i",30),O(4,"Wallet"),w()(),S(5,"li")(6,"a",31),k(7,"i",32),O(8,"Profile"),w()(),S(9,"li")(10,"a",33),k(11,"i",34),O(12,"Settings"),w()(),S(13,"li"),k(14,"hr",35),w(),S(15,"li")(16,"a",36),Ae("click",function(){We(t);let r=me();return qe(r.onSignOut())}),k(17,"i",37),O(18,"Sign Out"),w()()()}if(n&2){let t=me();dt("show",t.profileDropdownOpen)}}var oh=class n{constructor(e,t){this.authService=e;this.router=t}profileDropdownOpen=!1;toggleProfileDropdown(){this.profileDropdownOpen=!this.profileDropdownOpen}closeProfileDropdown(){this.profileDropdownOpen=!1}onSignOut(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(Qe(mi),Qe(ir))};static \u0275cmp=At({type:n,selectors:[["app-main-layout"]],decls:41,vars:1,consts:[[1,"navbar-wrapper"],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","px-4","py-2","d-flex","align-items-center","justify-content-between"],[1,"navbar-brand","fw-bold","fs-3","text-primary"],[1,"logo-icon","me-2"],[1,"navbar-nav","flex-row","gap-4","align-items-center"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link","fw-semibold"],[1,"bi","bi-house-fill","me-2"],["routerLink","/create-ride","routerLinkActive","active",1,"nav-link","fw-semibold"],[1,"bi","bi-plus-circle-fill","me-2"],["routerLink","/tracking","routerLinkActive","active",1,"nav-link","fw-semibold"],[1,"bi","bi-geo-alt-fill","me-2"],["routerLink","/your-orders","routerLinkActive","active",1,"nav-link","fw-semibold"],[1,"bi","bi-box-seam-fill","me-2"],["routerLink","/your-rides","routerLinkActive","active",1,"nav-link","fw-semibold"],[1,"bi","bi-car-front-fill","me-2"],["routerLink","/profile","routerLinkActive","active",1,"nav-link","fw-semibold"],[1,"bi","bi-person-fill","me-2"],[1,"auth-buttons","d-flex","gap-3","align-items-center"],[1,"btn","position-relative","notification-btn"],[1,"bi","bi-bell-fill","fs-5"],[1,"notification-badge"],[1,"dropdown","d-inline-block","position-relative"],["type","button",1,"btn","profile-btn","dropdown-toggle",3,"click"],[1,"bi","bi-person-circle","fs-4"],["class","dropdown-menu mt-2 shadow",3,"show","mouseleave",4,"ngIf"],[1,"component-container"],[1,"component-content"],[1,"dropdown-menu","mt-2","shadow",3,"mouseleave"],["routerLink","/wallet",1,"dropdown-item"],[1,"bi","bi-wallet2","me-2"],["routerLink","/profile",1,"dropdown-item"],[1,"bi","bi-person","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"bi","bi-gear","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"bi","bi-box-arrow-right","me-2"]],template:function(t,i){t&1&&(S(0,"div",0)(1,"nav",1)(2,"a",2),k(3,"span",3),O(4," DispatchTrack "),w(),S(5,"ul",4)(6,"li",5)(7,"a",6),k(8,"i",7),O(9,"Home "),w()(),S(10,"li",5)(11,"a",8),k(12,"i",9),O(13,"Publish a Ride "),w()(),S(14,"li",5)(15,"a",10),k(16,"i",11),O(17,"Tracking "),w()(),S(18,"li",5)(19,"a",12),k(20,"i",13),O(21,"Your Orders "),w()(),S(22,"li",5)(23,"a",14),k(24,"i",15),O(25,"Rider Orders "),w()(),S(26,"li",5)(27,"a",16),k(28,"i",17),O(29,"Profile "),w()()(),S(30,"div",18)(31,"button",19),k(32,"i",20)(33,"span",21),w(),S(34,"div",22)(35,"button",23),Ae("click",function(){return i.toggleProfileDropdown()}),k(36,"i",24),w(),ae(37,X3,19,2,"ul",25),w()()()(),S(38,"div",26)(39,"main",27),k(40,"router-outlet"),w()()),t&2&&(N(37),W("ngIf",i.profileDropdownOpen))},dependencies:[qt,an,Cg,Kl,Ql,wg],styles:["@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}20%{transform:translateY(-18px)}40%{transform:translateY(0)}60%{transform:translateY(10px)}80%{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_border-glow{0%{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}30%{box-shadow:0 0 16px 4px #a855f7,0 4px 32px #00000012;border:2px solid #a855f7}60%{box-shadow:0 0 16px 4px #22d3ee,0 4px 32px #00000012;border:2px solid #22d3ee}to{box-shadow:0 0 #2563eb,0 4px 32px #00000012;border:2px solid #2563eb}}@keyframes _ngcontent-%COMP%_step3-bounce{0%,to{transform:translateY(0) scale(1)}25%{transform:translateY(-12px) scale(1.02)}50%{transform:translateY(0) scale(1)}75%{transform:translateY(-6px) scale(1.01)}}.component-container[_ngcontent-%COMP%]{min-height:100vh;background:#f3f8ff;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;padding:0;width:100%}.component-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;width:100%;margin-top:-2.5rem;position:relative;z-index:2}.component-card[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:2rem;box-shadow:0 4px 32px #00000012;border:1px solid #e5e7eb;transition:all .3s ease}.component-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #2563eb66}.component-button-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #00000012;letter-spacing:.5px}.component-button-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#1d4ed8,#2563eb);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66;border-color:#1d4ed8}.component-button-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.component-button-secondary[_ngcontent-%COMP%]{background:#fff;color:#2563eb;border:2px solid #2563eb;padding:.3rem 1.2rem;border-radius:2rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;letter-spacing:.5px}.component-button-secondary[_ngcontent-%COMP%]:hover{background:#f3f8ff;transform:translateY(-2px);box-shadow:0 4px 16px #2563eb1a}.component-input[_ngcontent-%COMP%]{width:100%;padding:.3rem 1.2rem;border:2px solid #e5e7eb;border-radius:1rem;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#fff;transition:all .3s ease}.component-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb1a}.component-input[_ngcontent-%COMP%]::placeholder{color:#6c7a89}.component-hero[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f3f8ff,#fff7ed);border-radius:2rem;box-shadow:0 4px 32px #00000012;padding:4rem 0;text-align:center;position:relative;width:100%;min-height:480px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#555;font-size:16px;z-index:1;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   .component-input[_ngcontent-%COMP%]{padding-left:40px}.promo-badge[_ngcontent-%COMP%]{display:inline-block;background:#e9f1ff;color:#2563eb;font-weight:600;border-radius:2rem;padding:.4rem 1.2rem;font-size:1.1rem;box-shadow:0 2px 8px #00000012}.promo-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#34d399;border-radius:50%;margin-right:.5rem}.timeline-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;box-shadow:0 4px 16px #2563eb1a;margin:0 auto;position:relative;z-index:2}.step-pill[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;padding:.5rem 1.4rem;font-weight:600;font-size:1.1rem;color:#222;box-shadow:0 2px 8px #00000012;border:1px solid #e5e7eb;display:inline-block}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-pending[_ngcontent-%COMP%]{background:#f59e421a;color:#f59e42}.status-badge.status-in-transit[_ngcontent-%COMP%]{background:#22d3ee1a;color:#22d3ee}.status-badge.status-delivered[_ngcontent-%COMP%]{background:#34d3991a;color:#34d399}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}@media (max-width: 991px){.component-content[_ngcontent-%COMP%]{padding:0 1.5rem}.component-hero[_ngcontent-%COMP%]{min-height:400px;padding:2rem .5rem}}@media (max-width: 767px){.component-content[_ngcontent-%COMP%]{padding:0 1rem}.component-hero[_ngcontent-%COMP%]{border-radius:1.2rem;min-height:320px}.timeline-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1.2rem}}.navbar-wrapper[_ngcontent-%COMP%]{padding:0;background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-bottom:1px solid rgba(0,0,0,.1);width:100vw;margin-left:calc(-50vw + 50%);margin-right:calc(-50vw + 50%)}.navbar[_ngcontent-%COMP%]{width:100%;padding:1rem 2rem}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{color:#2563eb;font-size:1.5rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#222!important;font-weight:600;padding:.5rem 1rem!important;border-radius:2rem;transition:all .3s ease;position:relative}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#2563eb!important;background:#2563eb1a;transform:translateY(-2px) scale(1.05);box-shadow:0 4px 12px #2563eb33}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#2563eb!important;background:#2563eb26;font-weight:700}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.navbar[_ngcontent-%COMP%]   .auth-buttons[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]{background:none;border:none;color:#222;padding:.5rem;border-radius:2rem;transition:all .3s ease;position:relative}.navbar[_ngcontent-%COMP%]   .auth-buttons[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]:hover{background:#2563eb1a;color:#2563eb}.navbar[_ngcontent-%COMP%]   .auth-buttons[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:8px;height:8px;background:#ef4444;border-radius:50%;border:2px solid white}.navbar[_ngcontent-%COMP%]   .auth-buttons[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]{background:none;border:none;color:#222;padding:.5rem;border-radius:2rem;transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .auth-buttons[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]:hover{background:#2563eb1a;color:#2563eb}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(0,0,0,.1);border-radius:1.2rem;box-shadow:0 4px 16px #2563eb1a;padding:.3rem 0;margin-top:.3rem;right:auto!important;left:auto!important;transform:translate(-100%)!important;min-width:200px}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#222;padding:.75rem 1rem;transition:all .3s ease;font-weight:500;border-radius:.5rem;margin:0 .25rem}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#2563eb1a;color:#2563eb}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#555;margin-left:.5rem}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#a855f7;transform:scale(1.1)}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{border-color:#e5e7eb;margin:.5rem 0;opacity:.5}@keyframes _ngcontent-%COMP%_notificationPulse{0%{box-shadow:0 0 #ef4444b3;transform:scale(1)}50%{box-shadow:0 0 0 8px #ef444400;transform:scale(1.2)}to{box-shadow:0 0 #ef444400;transform:scale(1)}}.main-content[_ngcontent-%COMP%]{padding:2rem;min-height:calc(100vh - 80px);background-color:#f3f8ff;font-family:var(--font-primary);background-image:radial-gradient(circle at 25% 25%,rgba(244,162,97,.03) 0%,transparent 50%),radial-gradient(circle at 75% 75%,rgba(38,70,83,.03) 0%,transparent 50%)}@media (max-width: 1200px){.custom-navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.625rem 1rem!important;margin:0 .125rem}.custom-navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 991px){.navbar-wrapper[_ngcontent-%COMP%]{padding:.75rem 1rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.375rem .75rem!important;font-size:.875rem}}@media (max-width: 767px){.navbar-wrapper[_ngcontent-%COMP%]{padding:.5rem}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{font-size:1.25rem!important}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.375rem .5rem!important;font-size:.8rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 576px){.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{font-size:1.1rem!important}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.25rem .375rem!important;font-size:.75rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em}.status-badge.status-pending[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e42;border:1px solid rgba(245,158,11,.2)}.status-badge.status-in-transit[_ngcontent-%COMP%]{background:#3b82f61a;color:#22d3ee;border:1px solid rgba(59,130,246,.2)}.status-badge.status-delivered[_ngcontent-%COMP%]{background:#10b9811a;color:#34d399;border:1px solid rgba(16,185,129,.2)}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;border:1px solid rgba(239,68,68,.2)}"]})};var ea=dh(Og());var Lb=n=>({selected:n});function Z3(n,e){if(n&1){let t=ut();S(0,"div",44)(1,"ul",45)(2,"li",46),Ae("click",function(){We(t);let r=me();return qe(r.onProfile())}),k(3,"i",47),O(4,"Profile"),w(),S(5,"li",46),Ae("click",function(){We(t);let r=me();return qe(r.onSettings())}),k(6,"i",48),O(7,"Settings"),w(),S(8,"li",46),Ae("click",function(){We(t);let r=me();return qe(r.onPayments())}),k(9,"i",49),O(10,"Payments"),w(),S(11,"li",50),Ae("click",function(){We(t);let r=me();return qe(r.onSignout())}),k(12,"i",51),O(13,"Sign out"),w()()()}}var sh=class n{constructor(e){this.authService=e}map;marker;ngAfterViewInit(){setTimeout(()=>{document.getElementById("map")&&!this.map&&this.initMap()},0)}initMap(){this.map=ea.map("map").setView([20.5937,78.9629],5),ea.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"\xA9 OpenStreetMap"}).addTo(this.map),navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,i=e.coords.longitude;this.map.setView([t,i],15),this.marker=ea.marker([t,i]).addTo(this.map).bindPopup("You are here").openPopup()},e=>{})}selectedMode="Sender";username=null;showProfileMenu=!1;quickActionSelected="send";ngOnInit(){this.username=localStorage.getItem("username")}onSignout(){this.authService.logout()}onProfile(){}onSettings(){}onPayments(){}static \u0275fac=function(t){return new(t||n)(Qe(mi))};static \u0275cmp=At({type:n,selectors:[["app-user-dashboard"]],decls:64,vars:13,consts:[[1,"swiftgo-dashboard"],[1,"dashboard-sidebar"],[1,"dashboard-main-content"],[1,"swiftgo-navbar"],[1,"navbar-inner"],[1,"navbar-logo",2,"flex","0 0 auto","display","flex","align-items","center"],[2,"flex","1 1 0","display","flex","justify-content","center"],[1,"navbar-mode-switch"],[1,"mode-btn",3,"click"],[1,"bi","bi-box-seam","me-1"],[1,"bi","bi-truck","me-1"],[1,"navbar-actions",2,"flex","0 0 auto","display","flex","align-items","center","gap","24px"],[1,"notif-btn"],[1,"bi","bi-bell"],["tabindex","0",1,"navbar-user",2,"position","relative",3,"mouseenter","mouseleave","focus","blur"],[1,"user-avatar","profile-dropdown-toggle",2,"background","#e4e6ea","display","inline-flex","align-items","center","justify-content","center","width","32px","height","32px","border-radius","50%","font-size","20px","cursor","pointer"],[1,"bi","bi-person"],[1,"user-name"],[1,"user-mode",2,"font-size","12px","color","#888"],["class","profile-dropdown-menu","style","position:absolute;top:40px;right:0;min-width:160px;background:#fff;border:1px solid #e0e0e0;box-shadow:0 2px 8px rgba(0,0,0,0.08);border-radius:8px;z-index:1000;",4,"ngIf"],[1,"dashboard-grid"],[1,"dashboard-top-row"],[1,"quick-actions-card"],[1,"card-header"],[1,"bi","bi-plus-lg","me-2"],[1,"d-flex","gap-3","flex-grow-1"],[1,"quick-btn","flex-grow-1",3,"click","ngClass"],[1,"bi","bi-box-seam","me-2"],[1,"bi","bi-geo-alt","me-2"],[1,"dashboard-middle-row"],[1,"live-tracking-card"],["id","map",2,"height","420px","width","100%","border-radius","18px"],[1,"recent-activity-card"],[1,"bi","bi-clock","me-2"],[1,"activity-list"],[1,"activity","text-center","text-muted",2,"width","100%"],[1,"dashboard-bottom-row"],[1,"profile-card","d-flex","flex-row","align-items-center","gap-3"],[1,"profile-avatar-wrap"],["src","","alt","avatar",1,"profile-avatar",2,"background","#e4e6ea"],[1,"profile-info"],[1,"profile-name","fw-bold"],[1,"profile-mode","text-muted","small"],[1,"dashboard-right-ads"],[1,"profile-dropdown-menu",2,"position","absolute","top","40px","right","0","min-width","160px","background","#fff","border","1px solid #e0e0e0","box-shadow","0 2px 8px rgba(0,0,0,0.08)","border-radius","8px","z-index","1000"],[2,"list-style","none","margin","0","padding","8px 0"],[2,"padding","8px 20px","cursor","pointer","white-space","nowrap",3,"click"],[1,"bi","bi-person","me-2"],[1,"bi","bi-gear","me-2"],[1,"bi","bi-credit-card","me-2"],[2,"border-top","1px solid #eee","margin-top","4px","padding","8px 20px","cursor","pointer","white-space","nowrap",3,"click"],[1,"bi","bi-box-arrow-right","me-2"]],template:function(t,i){t&1&&(S(0,"div",0),k(1,"div",1),S(2,"div",2)(3,"nav",3)(4,"div",4)(5,"div",5)(6,"span"),O(7,"DispatchTrack"),w()(),S(8,"div",6)(9,"div",7)(10,"button",8),Ae("click",function(){return i.selectedMode="Sender"}),k(11,"i",9),O(12,"Sender "),w(),S(13,"button",8),Ae("click",function(){return i.selectedMode="Rider"}),k(14,"i",10),O(15,"Rider "),w()()(),S(16,"div",11)(17,"button",12),k(18,"i",13),w(),S(19,"div",14),Ae("mouseenter",function(){return i.showProfileMenu=!0})("mouseleave",function(){return i.showProfileMenu=!1})("focus",function(){return i.showProfileMenu=!0})("blur",function(){return i.showProfileMenu=!1}),S(20,"span",15),k(21,"i",16),w(),S(22,"span",17),O(23),w(),k(24,"br"),S(25,"span",18),O(26),w(),ae(27,Z3,14,0,"div",19),w()()()(),S(28,"div",20)(29,"div",21)(30,"div",22)(31,"div",23),k(32,"i",24),O(33,"Quick Actions"),w(),S(34,"div",25)(35,"button",26),Ae("click",function(){return i.quickActionSelected="send"}),k(36,"i",27),O(37,"Send Package "),w(),S(38,"button",26),Ae("click",function(){return i.quickActionSelected="track"}),k(39,"i",28),O(40,"Track Package "),w()()()(),S(41,"div",29)(42,"div",30)(43,"div",23),k(44,"i",28),O(45,"Live Tracking"),w(),k(46,"div",31),w(),S(47,"div",32)(48,"div",23),k(49,"i",33),O(50,"Recent Activity"),w(),S(51,"ul",34)(52,"li",35),O(53,"No recent activity"),w()()()(),S(54,"div",36)(55,"div",37)(56,"div",38),k(57,"img",39),w(),S(58,"div",40)(59,"div",41),O(60,"--"),w(),S(61,"div",42),O(62,"--"),w()()()()()(),k(63,"div",43),w()),t&2&&(N(10),dt("active",i.selectedMode==="Sender"),N(3),dt("active",i.selectedMode==="Rider"),N(10),Wn(i.username||"--"),N(3),Je("",i.selectedMode," Mode"),N(),W("ngIf",i.showProfileMenu),N(8),W("ngClass",_h(9,Lb,i.quickActionSelected==="send")),N(3),W("ngClass",_h(11,Lb,i.quickActionSelected==="track")))},dependencies:[qt,Uo,an],styles:['@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2JL7SUc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa0ZL7SUc.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2ZL7SUc.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1pL7SUc.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2pL7SUc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa25L7SUc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1ZL7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2JL7SUc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa0ZL7SUc.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2ZL7SUc.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1pL7SUc.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2pL7SUc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa25L7SUc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1ZL7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2JL7SUc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa0ZL7SUc.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2ZL7SUc.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1pL7SUc.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2pL7SUc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa25L7SUc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1ZL7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.swiftgo-dashboard[_ngcontent-%COMP%]{font-family:Inter,sans-serif;color:#212529;background:#f7f8fa;min-height:100vh;display:flex;flex-direction:row;width:100vw;box-sizing:border-box}.dashboard-sidebar[_ngcontent-%COMP%]{width:80px;min-width:80px;background:#f3f4f6;border-right:1.5px solid #e4e6ea;min-height:100vh}.dashboard-main-content[_ngcontent-%COMP%]{flex:1 1 auto;max-width:1200px;margin:0 auto;padding:40px 48px 32px;min-width:0;width:100%;box-sizing:border-box;background:transparent}.dashboard-right-ads[_ngcontent-%COMP%]{width:240px;min-width:180px;background:#f3f4f6;border-left:1.5px solid #e4e6ea;min-height:100vh}@media (max-width: 1400px){.dashboard-main-content[_ngcontent-%COMP%]{max-width:1000px;padding:32px 16px 24px}.dashboard-right-ads[_ngcontent-%COMP%]{width:120px;min-width:80px}}@media (max-width: 992px){.dashboard-sidebar[_ngcontent-%COMP%], .dashboard-right-ads[_ngcontent-%COMP%]{display:none}.dashboard-main-content[_ngcontent-%COMP%]{max-width:100vw;padding:16px 4vw}}.swiftgo-navbar[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;background:transparent;margin-bottom:32px}.navbar-centered[_ngcontent-%COMP%]{background:none;box-shadow:none;padding:0}.navbar-inner[_ngcontent-%COMP%]{background:#fff;border-radius:24px;box-shadow:0 2px 16px #101e3614;min-width:0;width:1150px;max-width:100vw;height:72px;display:flex;align-items:center;justify-content:space-between;padding:0 48px;gap:32px}.navbar-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;height:100%}.notif-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:22px;color:#181a20;display:flex;align-items:center;justify-content:center;height:40px;width:40px;border-radius:50%;transition:background .2s;margin-right:8px;position:relative}.navbar-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;position:relative}.user-avatar.profile-dropdown-toggle[_ngcontent-%COMP%]{margin-right:0}.user-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#181a20;margin-right:0}.navbar-logo[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#181a20;letter-spacing:1px;display:flex;align-items:center;gap:8px}.navbar-mode-switch[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;background:#f3f4f6;border-radius:16px;padding:4px 6px}.navbar-mode-switch[_ngcontent-%COMP%]   .mode-btn[_ngcontent-%COMP%]{border:none;background:transparent;color:#181a20;font-size:16px;font-weight:600;padding:8px 22px;border-radius:12px;cursor:pointer;transition:background .2s,color .2s;display:flex;align-items:center;gap:6px}.navbar-mode-switch[_ngcontent-%COMP%]   .mode-btn.active[_ngcontent-%COMP%]{background:#181a20;color:#fff;box-shadow:0 2px 8px #101e3614}.quick-actions-card[_ngcontent-%COMP%]{border-radius:18px;box-shadow:0 2px 16px #101e3614;background:#fff;margin-bottom:8px;padding:0 12px;display:flex;flex-direction:row;align-items:center;min-width:0;height:150px}.quick-actions-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:22px;font-weight:700;background:none;border:none;padding:0 0 24px;display:flex;align-items:center;height:auto;color:#222;letter-spacing:.01em}.quick-actions-card[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:0;width:100%;height:100%}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]{border:none;border-radius:22px;font-weight:700;font-size:20px;transition:background .2s,color .2s,box-shadow .2s;background:#f5f7fa;color:#222;box-shadow:none;cursor:pointer;outline:none;height:64px;min-width:200px;width:auto;max-width:260px;display:flex;align-items:center;justify-content:center;padding:0 32px;gap:12px;margin:0 8px}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn.selected[_ngcontent-%COMP%], .quick-actions-card[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]:active{background:#2563eb!important;color:#fff!important;box-shadow:0 2px 8px #3b82f61f}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn.filled[_ngcontent-%COMP%]{background:#181a20;color:#fff;box-shadow:0 2px 8px #101e3614}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn.outlined[_ngcontent-%COMP%]{background:#fff;color:#181a20;border:1.5px solid #e4e6ea}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:min-content min-content 1fr;gap:18px 24px;margin-top:0}.stat-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:24px;height:100%}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;box-shadow:0 2px 16px #101e3614;padding:28px 20px 20px;display:flex;flex-direction:column;align-items:flex-start;gap:8px;min-width:0;min-height:110px}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:28px;margin-bottom:10px;display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:#f3f4f6}.stat-card[_ngcontent-%COMP%]   .stat-icon.bg-success-subtle[_ngcontent-%COMP%]{background:#e6f4ea}.stat-card[_ngcontent-%COMP%]   .stat-icon.bg-primary-subtle[_ngcontent-%COMP%]{background:#e6f0fa}.stat-card[_ngcontent-%COMP%]   .stat-icon.bg-warning-subtle[_ngcontent-%COMP%]{background:#fff8e1}.stat-card[_ngcontent-%COMP%]   .stat-icon.bg-purple-subtle[_ngcontent-%COMP%]{background:#f3e6fa}.stat-card[_ngcontent-%COMP%]   .stat-title[_ngcontent-%COMP%]{font-size:15px;color:#6c757d;font-weight:500}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#181a20}.stat-card[_ngcontent-%COMP%]   .stat-value.rating[_ngcontent-%COMP%]{color:#f7c600}.quick-actions-card[_ngcontent-%COMP%]{min-height:100px;display:flex;flex-direction:column;justify-content:flex-start}.quick-actions-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:20px;font-weight:600;padding-bottom:12px}.quick-actions-card[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{gap:32px;margin-top:8px}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]{font-size:20px;padding:32px 0;border-radius:16px;font-weight:700}.quick-actions-card[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px}.live-tracking-card[_ngcontent-%COMP%]{min-height:340px}.live-tracking-card[_ngcontent-%COMP%]   .map-placeholder[_ngcontent-%COMP%]{height:240px;font-size:22px;border-radius:18px;background:linear-gradient(135deg,#e6f0fa,#f3e6fa);margin-bottom:10px}.recent-activity-card[_ngcontent-%COMP%]{min-height:340px}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:16px}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{font-size:18px}.profile-card[_ngcontent-%COMP%]{min-height:110px}.profile-card[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:60px;height:60px}.profile-card[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:18px}.quick-actions-card[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/2}.stat-cards[_ngcontent-%COMP%]{grid-column:2/3;grid-row:1/2}.live-tracking-card[_ngcontent-%COMP%]{grid-column:1/3;grid-row:2/4}.recent-activity-card[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/3}.profile-card[_ngcontent-%COMP%]{grid-column:2/3;grid-row:3/4;margin-top:32px}@media (max-width: 1200px){.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:none;gap:24px}.stat-cards[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:18px}.quick-actions-card[_ngcontent-%COMP%], .stat-cards[_ngcontent-%COMP%], .live-tracking-card[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%], .profile-card[_ngcontent-%COMP%]{grid-column:1/2!important;grid-row:auto!important}.profile-card[_ngcontent-%COMP%]{margin-top:0}}.live-tracking-card[_ngcontent-%COMP%]{border-radius:18px;box-shadow:0 2px 16px #101e3614;background:#fff}.live-tracking-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:18px;font-weight:600;background:none;border:none;padding:20px 24px 0}.live-tracking-card[_ngcontent-%COMP%]   .map-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;background:linear-gradient(135deg,#e6f0fa,#f3e6fa);border-radius:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#6c757d;font-size:20px;margin-bottom:12px;font-weight:500}.recent-activity-card[_ngcontent-%COMP%]{border-radius:18px;box-shadow:0 2px 16px #101e3614;background:#fff}.recent-activity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:16px;font-weight:600;background:none;border:none;padding:20px 24px 0}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 0;font-size:15px;border-bottom:1px solid #F7F8FA}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;background:#0d6efd;margin-right:6px}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .amount.text-success[_ngcontent-%COMP%]{color:#28a745}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .amount.text-danger[_ngcontent-%COMP%]{color:#dc3545}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .rating.text-warning[_ngcontent-%COMP%]{color:#f7c600}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{color:#6c757d;font-size:12px;margin:0 8px}.recent-activity-card[_ngcontent-%COMP%]   .activity-list[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]:last-child{border-bottom:none}.profile-card[_ngcontent-%COMP%]{border-radius:18px;box-shadow:0 2px 16px #101e3614;background:#fff;padding:18px;display:flex;align-items:center;gap:18px}.profile-card[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;object-fit:cover;border:2px solid #0D6EFD}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#181a20}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-mode[_ngcontent-%COMP%]{font-size:13px;color:#6c757d;font-weight:500}@media (max-width: 1200px){.swiftgo-navbar[_ngcontent-%COMP%]{padding:0 16px}}@media (max-width: 992px){.swiftgo-navbar[_ngcontent-%COMP%]{flex-direction:column;height:auto;gap:12px}.quick-actions-card[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .live-tracking-card[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%], .profile-card[_ngcontent-%COMP%]{border-radius:14px;padding:12px}}@media (max-width: 768px){.swiftgo-dashboard[_ngcontent-%COMP%]{padding:8px 0}.quick-actions-card[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .live-tracking-card[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%], .profile-card[_ngcontent-%COMP%]{border-radius:10px;padding:8px}.profile-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}']})};var Rb=[{path:"",component:rh},{path:"userDashboard",component:sh},{path:"",component:oh,children:[{path:"dashboard",component:th},{path:"profile",component:nh},{path:"create-ride",component:ih},{path:"tracking",loadComponent:()=>import("./chunk-RXUVQ7RN.js").then(n=>n.TrackingComponent)},{path:"your-rides",loadComponent:()=>import("./chunk-COVNKC3E.js").then(n=>n.YourRides)},{path:"your-orders",loadComponent:()=>import("./chunk-Q3AAS3R5.js").then(n=>n.YourOrders)},{path:"search-ride",loadComponent:()=>import("./chunk-TZ4J4B5I.js").then(n=>n.SearchRide)}]},{path:"login",component:zd},{path:"sign-up",component:xd}];var tg=class n{authService=lg(mi);intercept(e,t){if(e.url.includes("/auth/login"))return t.handle(e);let i=this.authService.getToken();if(i){let r=e.clone({setHeaders:{Authorization:`Bearer ${i}`}});return t.handle(r).pipe(fh(o=>(o instanceof vh&&o.status===401&&this.authService.logout(),hh(()=>o))))}return t.handle(e).pipe(fh(r=>(r instanceof vh&&r.status===401&&this.authService.logout(),hh(()=>r))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=No({token:n,factory:n.\u0275fac})},Ib={provide:vg,useClass:tg,multi:!0};var kb={providers:[ug(),gg(),Sg(Rb),bg(Mg()),E0(),Ib]};var ah=class n{title="dispatchTrack";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&k(0,"router-outlet")},dependencies:[Kl],encapsulation:2})};xg(ah,kb).catch(n=>console.error(n));
